(function(e) {
    function t(o) {
        if (a[o]) return a[o].exports;
        var r = a[o] = {
            i: o,
            l: !1,
            exports: {}
        };
        return e[o].call(r.exports, r, r.exports, t), r.l = !0, r.exports
    }
    var a = {};
    return t.m = e, t.c = a, t.i = function(e) {
        return e
    }, t.d = function(e, a, o) {
        t.o(e, a) || Object.defineProperty(e, a, {
            configurable: !1,
            enumerable: !0,
            get: o
        })
    }, t.n = function(e) {
        var a = e && e.__esModule ? function() {
            return e['default']
        } : function() {
            return e
        };
        return t.d(a, 'a', a), a
    }, t.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, t.p = '', t(t.s = 96)
})([function(e) {
    var t = Object.prototype.hasOwnProperty,
        a = Object.prototype.toString;
    e.exports = function(e, o, r) {
        if ('[object Function]' !== a.call(o)) throw new TypeError('iterator must be a function');
        var n = e.length;
        if (n === +n)
            for (var s = 0; s < n; s++) o.call(r, e[s], s, e);
        else
            for (var d in e) t.call(e, d) && o.call(r, e[d], d, e)
    }
}, function(e) {
    e.exports = {
        FEED: [
            [{
                type: 'tiles',
                title: 'Featured',
                sites: ['soundboxing', 'trajectilecommand', 'walkingsimulator', 'oceanofthought', 'supercraft', 'vrbeats']
            }],
            [{
                type: 'collection',
                id: 'supercraft'
            }, {
                type: 'single',
                id: 'supercraft'
            }],
            [{
                type: 'tiles',
                title: 'Newest',
                sites: ['composure', 'gridofcylinders', 'slimefreighter', 'supersays', 'jellyface', 'panomoments']
            }],
            [{
                type: 'collection',
                id: 'sketchfabenviroments'
            }, {
                type: 'single',
                id: 'sherlock'
            }],
            [{
                type: 'tiles',
                title: 'Daily Mix',
                sites: []
            }],
            [{
                type: 'collection',
                id: 'thesoundofvr'
            }, {
                type: 'single',
                id: 'underneonlights'
            }],
            [{
                type: 'collection',
                id: 'minigames'
            }, {
                type: 'single',
                id: 'soundboxing'
            }],
            [{
                type: 'collection',
                id: 'littleexperiments'
            }, {
                type: 'single',
                id: 'gridofcylinders'
            }],
            [{
                type: 'tiles',
                sites: ['thehall', 'upthere', 'speaktogo', 'nighteye', 'accessmars', 'massmigrations']
            }],
            [{
                type: 'collection',
                id: 'create'
            }, {
                type: 'single',
                id: 'apainter'
            }],
            [{
                type: 'tiles',
                sites: ['tabel', 'within', 'bear71', 'findinglove', 'sonicumbrella', 'aurora']
            }],
            [{
                type: 'collection',
                id: 'relax'
            }, {
                type: 'single',
                id: 'polygonshredder'
            }]
        ],
        COLLECTIONS: {
            usercollection: {
                id: 'usercollection',
                title: 'Your Sites',
                description: 'Your personal collection of sites!',
                image: 'collection/user.png',
                color: '#3772FF',
                sites: []
            },
            create: {
                id: 'create',
                title: 'Build and Create',
                description: 'Get those hands to work.',
                image: 'collection/create.png',
                color: '#f75c03',
                sites: ['supercraft', 'apainter', 'asaturdaynight', 'citybuilder', 'paint']
            },
            editorschoice: {
                id: 'editorschoice',
                title: 'Editor\'s Choice',
                description: 'Favorites from the Supermedium team.',
                image: 'collection/editorschoice.png',
                color: '#63CCCA',
                sites: ['soundboxing', 'jellyface', 'underneonlights', 'oceanofthought', 'origamisimulator', 'slimefreighter']
            },
            littleexperiments: {
                id: 'littleexperiments',
                title: 'Little Experiments',
                description: 'Short little demos from developers.',
                image: 'collection/experiments.png',
                color: '#00120B',
                sites: ['shootingstars', 'puppetrilla', 'spider', 'gridofcylinders', 'worms', 'webvrlab', 'epicmedievalbattle', 'darkhaze', 'forestwave', 'float', 'resonate', 'eutow', 'pokemon']
            },
            minigames: {
                id: 'minigames',
                title: 'Mini-Games',
                description: 'Grab some high scores!',
                image: 'collection/minigames.png',
                color: '#EF476F',
                sites: ['soundboxing', 'guntersofoasis', 'ablast', 'crossthestreet', 'supersays', 'spacerocks', 'spacedisaster']
            },
            relax: {
                id: 'relax',
                title: 'Meditate',
                description: 'Relax and chill.',
                image: 'collection/relax.png',
                color: '#EBA6A9',
                sites: ['polygonshredder', 'walkingsimulator', 'composure', 'oceanofthought', 'sika', 'findinglove', 'stahlhouse']
            },
            sketchfabenviroments: {
                id: 'sketchfabenviroments',
                title: 'Sketchfab Environments',
                description: 'Travel 3D environments.',
                image: 'collection/sketchfab.png',
                color: '#3BC2EE',
                sites: ['vangoghroom', 'apollo11', 'sherlock', 'sika', 'lilyandsnout', 'tombofnefertari', 'searailway', 'sherwoodforest', 'sketchfab']
            },
            thesoundofvr: {
                id: 'thesoundofvr',
                title: 'The Sound of VR',
                description: 'Groove along to musical experiences.',
                image: 'collection/music.png',
                color: '#4DA167',
                sites: ['vrbeats', 'oceanofthought', 'slimefreighter', 'soundboxing', 'insidemusic', 'dancetonite', 'underneonlights', 'brokenmantra', 'obsidian', 'puzzlerain', 'dancetonite']
            },
            supercraft: {
                id: 'supercraft',
                title: 'Supercraft Sites',
                description: 'Remix handcrafted worlds!',
                image: 'collection/supercraft.png',
                color: '#F85333',
                sites: ['supercraftcastle', 'supercraftdragon', 'supercraftblimps', 'supercraftdanger', 'supercrafttoymountain', 'supercraftcave', 'supercraftcanyon', 'supercrafthomer', 'supercraftpowerpuff']
            }
        },
        SITES: {
            soundboxing: {
                id: 'soundboxing',
                url: 'https://webvr.soundboxing.co/',
                title: 'Soundboxing Beta',
                author: 'Soundboxing + Supermedium',
                image: 'site/soundboxing.jpg',
                logo: 'site/soundboxing.png',
                description: 'A VR music kickboxing game with beats created by people. If you feel the urge to dance, you\'re doing it right!'
            },
            jellyface: {
                id: 'jellyface',
                url: 'https://joshshadik.github.io/jelly-face/',
                title: 'Jelly Face',
                author: 'Josh Shadik',
                image: 'site/jellyface.jpg',
                logo: 'site/jellyface.png',
                description: 'Pinch and squeeze these celebrities\' cheeks, or their entire head! Grandmas love this.'
            },
            oceanofthought: {
                id: 'oceanofthought',
                url: 'https://patches.vizor.io/machinedrum/ocean-of-thought',
                title: 'Ocean of Thought',
                author: 'machinedrum + fthr + lintu',
                image: 'site/oceanofthought.jpg',
                logo: 'site/oceanofthought.png',
                description: 'A surreal and relaxive music experience for Machine Drum\'s Ocean of Thought.'
            },
            guntersofoasis: {
                id: 'guntersofoasis',
                url: 'https://supermedium.com/gunters-of-oasis-deploy/',
                title: 'Gunters of OASIS',
                author: 'Supermedium',
                image: 'site/guntersofoasis.jpg',
                logo: 'site/guntersofoasis.png',
                description: 'Hundreds of generated worlds, among one lies a golden egg. First gunters to find it inherit half a hundred dollars and the OASIS.'
            },
            origamisimulator: {
                id: 'origamisimulator',
                url: 'http://apps.amandaghassaei.com/OrigamiSimulator/',
                title: 'Origami Simulator',
                author: 'Amanda Ghassaei',
                image: 'site/origamisimulator.jpg',
                logo: 'site/origamisimulator.png',
                color: '#3d954c',
                entervr: [
                    ['click', '#enterVR', 1000]
                ],
                audio: ['default', 0.5],
                highPerformance: !0,
                description: 'Grab, stretch, and simulate dozens of origami patterns folding and creasing simultaneously in 3D.'
            },
            insidemusic: {
                id: 'insidemusic',
                url: 'https://experiments.withgoogle.com/webvr/inside-music/view/',
                title: 'Inside Music',
                author: 'Song Exploder + Google',
                image: 'site/insidemusic.jpg',
                logo: 'site/insidemusic.png',
                entervr: [
                    ['click', '.webvr-ui-button', 100]
                ],
                injectScript: 'injectScripts/insidemusic.js',
                waitForWebVRReady: !0,
                description: 'Step inside music to get a closer look at how they\'re made. Explode songs to their individual ingredients.'
            },
            slimefreighter: {
                id: 'slimefreighter',
                url: 'https://slime-freighter.glitch.me/?autoplay=true',
                title: 'Slime Freighter',
                author: 'Ethan Rabb (algoraphics)',
                image: 'site/slimefreighter.jpg',
                logo: 'site/slimefreighter.png',
                description: 'A trip down a road. Emphasis on trip. VR music experience for Big Black Delta\'s \'Side of the Road\'.',
                injectScript: 'injectScripts/slimefreighter.js'
            },
            vangoghroom: {
                id: 'vangoghroom',
                url: 'https://sketchfab.com/models/311d052a9f034ba8bce55a1a8296b6f9',
                title: 'Van Gogh Room',
                author: 'Ruslan Sokolovsky',
                image: 'site/vangoghroom.jpg',
                logo: 'site/vangoghroom.png',
                description: 'The room of the artist. Recreation of Vincent Van Gogh\'s \'The Bedroom\' painting.',
                audio: ['https://supermedium.com/superassets/audio/kaiengel-remedyformelancholy.mp3', 0.75]
            },
            apollo11: {
                id: 'apollo11',
                url: 'https://sketchfab.com/models/2324f9685404433fa6231c7cb2cd2ff5',
                title: 'Apollo 11',
                author: 'The Arck Project',
                image: 'site/apollo11.jpg',
                logo: 'site/apollo11.png',
                description: 'Neil Armstrong & Buzz Aldrin landed on the moon July 20, 1969. Step onto the lunar surface alongside Armstrong.',
                audio: ['', 0]
            },
            sherlock: {
                id: 'sherlock',
                url: 'https://sketchfab.com/models/69be107ca5234ca8a9fcff6ba6851e9e',
                title: 'Sherlock',
                author: 'Aurelien Martel',
                image: 'site/sherlock.jpg',
                logo: 'site/sherlock.png',
                description: 'Visit 221B Baker Street, home of the world\'s most renowned detective.',
                audio: ['https://supermedium.com/superassets/audio/sherlock.mp3', 0.75]
            },
            supersays: {
                id: 'supersays',
                url: 'https://supermedium.com/supersays/src',
                title: 'Super Says',
                author: '@feiss',
                image: 'site/supersays.jpg',
                logo: 'site/supersays.png',
                description: 'Test your memory with Super. Memorize the color sequence and grab a high score!'
            },
            lilyandsnout: {
                id: 'lilyandsnout',
                url: 'https://sketchfab.com/models/618ea0209b1045e89b2c6d2b74d0956e',
                title: 'Lily & Snout',
                author: 'Sketchfab',
                image: 'site/lilyandsnout.jpg',
                logo: 'site/lilyandsnout.png',
                description: 'A girl, a dragon, and some berries. Pick your vantage point and watch this charming VR short.',
                audio: ['', 0]
            },
            tombofnefertari: {
                id: 'tombofnefertari',
                url: 'https://sketchfab.com/models/90034cbe58904828a11429395cef9125',
                title: 'Tomb of Nefertari',
                author: 'scionk',
                image: 'site/nefertari.jpg',
                logo: 'site/nefertari.png',
                description: 'A 3D reconstruction of QV66, the tomb of Egyptian queen Nefertari (1255 BC), in the Valley of the Queens.',
                audio: ['', 0]
            },
            searailway: {
                id: 'searailway',
                url: 'https://sketchfab.com/models/478d32513eda44338b59aa2284ee01b8',
                title: 'Sea Railway',
                author: 'fongoose',
                image: 'site/spiritedawaysearailway.jpg',
                logo: 'site/spiritedawaysearailway.png',
                description: 'Relive the Sea-Railway scene from Spirited Away.',
                audio: ['', 0]
            },
            apainter: {
                id: 'apainter',
                url: 'https://aframe.io/a-painter/',
                title: 'A-Painter',
                author: 'A-Frame Authors',
                image: 'site/apainter.jpg',
                logo: 'site/apainter.png',
                audio: ['default', 0.5],
                highPerformance: !0,
                description: 'Paint in VR! Create a masterpiece with dozens of brushes available. Save your painting and share it with your friends.'
            },
            dancetonite: {
                id: 'dancetonite',
                url: 'https://tonite.dance/',
                title: 'Dance Tonite',
                author: 'Jonathan Puckey and Moniker',
                image: 'site/dancetonite.jpg',
                logo: 'site/dancetonite.png',
                entervr: [
                    ['click', '.button-play', 250],
                    ['click', '.mod-bottom-right .button-item:first-child', 500]
                ],
                highPerformance: !0,
                description: 'Go from room to room watching dances created entirely by fans. An ever-changing VR collaboration by LCD Soundsystem.'
            },
            underneonlights: {
                id: 'underneonlights',
                url: 'https://player.with.in/embed/?id=541&resolution=1920&forced=false&autoplay=true&t=0&internal=true',
                title: 'Under Neon Lights',
                author: 'Within',
                image: 'site/underneonlights.jpg',
                logo: 'site/underneonlights.png',
                description: 'Enter a world of imagination and color in this interactive music experience for The Chemical Brothers Under Neon Lights.'
            },
            tabel: {
                id: 'tabel',
                url: 'https://tabel.withgoogle.com/film',
                title: 'Tabel',
                author: 'Art Copy & Code + Google',
                image: 'site/tabel.jpg',
                logo: 'site/tabel.png',
                entervr: [
                    ['click', '.vr-controls', 200]
                ],
                injectScript: 'injectScripts/tabel.js',
                waitForWebVRReady: !0,
                description: 'A tasty allegory for global inaction in the face of climate change. Listen to the conversation you want.'
            },
            musicalforest: {
                id: 'musicalforest',
                url: 'https://forest.webvrexperiments.com/',
                title: 'Musical Forest',
                author: 'Google Creative Lab',
                color: '#f09e93',
                image: 'site/musicalforest.jpg',
                logo: 'site/musicalforest.png',
                entervr: [
                    ['click', '#enterButton .webvr-ui-button', 1000]
                ],
                description: 'Join users from around the world in a musical forest. Tap or click a shape to play it. You can add shapes too!'
            },
            puzzlerain: {
                id: 'puzzlerain',
                url: 'https://supermedium.com/puzzle-rain/app/?mode=normal',
                title: 'Puzzle Rain',
                author: 'Mozilla',
                image: 'site/puzzlerain.jpg',
                logo: 'site/puzzlerain.png',
                description: 'A musical WebVR journey.'
            },
            obsidian: {
                id: 'obsidian',
                url: 'https://xplsv.github.io/obsidian/?webvr',
                title: 'Obsidian',
                author: 'xplsv + Mr.doob',
                image: 'site/obsidian.jpg',
                logo: 'site/obsidian.png',
                entervr: [
                    ['click', '#info button:last-child[onclick]', 100],
                    ['click', 'canvas + button', 150]
                ],
                description: 'To the electronic beat of Om Unit and Lorn, watch an ever-changing sphere as you travel down a tunnel of lights bombarding the senses.'
            },
            brokenmantra: {
                id: 'brokenmantra',
                url: 'https://mrdoob.github.io/brokenmantra/?webvr',
                title: 'Broken Mantra',
                author: 'Mr.doob',
                image: 'site/brokenmantra.jpg',
                logo: 'site/brokenmantra.png',
                entervr: [
                    ['click', '#start', 100],
                    ['click', 'button', 200]
                ],
                description: 'Feel the bass in a computer generated music video for Lorn\'s \'Broken Mantra\'. Orbs, particles, lights, streaks, glitch, music.'
            },
            stahlhouse: {
                id: 'stahlhouse',
                url: 'http://paragram.io/view/?id=stahl&vr=true',
                title: 'Stahl House',
                author: 'Paragram',
                image: 'site/stahlhouse.jpg',
                logo: 'site/stahlhouse.png',
                description: 'Visit Stahl House in Hollywood Hills, an iconic representation of modern architecture in LA.'
            },
            paint: {
                id: 'paint',
                url: 'https://supermedium.com/three.js/examples/webvr_vive_paint.html',
                title: 'Paint',
                author: 'Mr.doob',
                image: 'site/paint.jpg',
                logo: 'site/paint.png',
                entervr: [
                    ['click', 'body > button:last-child', 500]
                ],
                audio: ['default', 0.5],
                highPerformance: !0,
                description: 'Paint, draw, doodle, sketch.'
            },
            spacedisaster: {
                id: 'spacedisaster',
                url: 'https://www.blend4web.com/apps/space_disaster/space_disaster.html?v=063e38d76f7a243a3b5b97e9ce5d0b96',
                title: 'Space Disaster',
                author: 'Blend4Web',
                image: 'site/spacedisaster.jpg',
                logo: 'site/spacedisaster.png',
                entervr: [
                    ['click', 'canvas', 100]
                ],
                injectScript: 'injectScripts/spacedisaster.js',
                waitForWebVRReady: !0,
                cardboard: !0,
                description: 'Zip through the asteroid belt in your laser-equipped spaceship.'
            },
            polygonshredder: {
                id: 'polygonshredder',
                url: 'http://swimminglessonsformodernlife.com/polygon-shredder/',
                title: 'Polygon Shredder',
                author: 'Jaume Sanchez Elias (@thespite)',
                image: 'site/polygonshredder.jpg',
                logo: 'site/polygonshredder.png',
                highPerformance: !0,
                description: 'A whirlwind of confetti amassed from shredded cubes and polygons.'
            },
            findinglove: {
                id: 'findinglove',
                url: 'https://findinglove.activetheory.net/',
                title: 'Finding Love',
                author: 'Active Theory',
                image: 'site/findinglove.jpg',
                logo: 'site/findinglove.png',
                entervr: [
                    ['click', '.LoaderUICTA .hit', 100]
                ],
                injectScript: 'injectScripts/findinglove.js',
                waitForWebVRReady: !0,
                description: 'We fall in love by chance. We stay in love by chance. A virtual reality story for us.'
            },
            sonicumbrella: {
                id: 'sonicumbrella',
                url: 'https://sonicumbrella.com/',
                title: 'Sonic Umbrella',
                author: 'Plan 8',
                image: 'site/sonicumbrella.jpg',
                logo: 'site/sonicumbrella.png',
                entervr: [
                    ['click', '#enterVrButtonContainer .webvr-ui-button', 500]
                ],
                injectScript: 'injectScripts/sonicumbrella.js',
                waitForWebVRReady: !0,
                highPerformance: !0,
                description: 'Stand under a umbrella and hear the sounds of raining dog toys, ping pong balls, and more. Listen to objects crashing all around.'
            },
            upthere: {
                id: 'upthere',
                url: 'https://ngokevin.github.io/up-there-webvr',
                title: 'Up There',
                author: 'Charlie Hoey (@flimshaw)',
                image: 'site/upthere.jpg',
                logo: 'site/upthere.png',
                description: 'Planetarium of 100K real stars. Spot exoplanets, travel through time, hold the galaxy in your hands with the grip buttons.'
            },
            spider: {
                id: 'spider',
                url: 'https://demo.marpi.pl/spider/',
                title: 'Spider',
                author: 'Marpi',
                image: 'site/spider.jpg',
                logo: 'site/spider.png',
                audio: ['https://supermedium.com/superassets/audio/bluedotsessions-bauxite.mp3', 0.2],
                entervr: [
                    ['click', 'img:last-child', 100]
                ],
                highPerformance: !0,
                description: 'Come visit your little pet spider in VR!'
            },
            shootingstars: {
                id: 'shootingstars',
                url: 'https://aframe-shooting-stars.glitch.me/',
                title: 'Shooting Stars',
                author: 'Philip Bell',
                image: 'site/shootingstars.jpg',
                logo: 'site/shootingstars.png',
                entervr: [
                    ['click', '.a-enter-vr-button', 500]
                ],
                highPerformance: !0,
                description: 'Get lost in an explosion of colors.'
            },
            float: {
                id: 'float',
                url: 'https://ngokevin.github.io/float/',
                title: 'Float',
                author: 'eleVR (incl. Vi Hart)',
                image: 'site/float.jpg',
                logo: 'site/float.png',
                entervr: [
                    ['click', 'canvas + button', 500]
                ],
                description: 'A puzzle of floating platforms admist blooming plants and sky islands.'
            },
            aurora: {
                id: 'aurora',
                url: 'http://www.gnometech.com/webvr/aurora/',
                title: 'Aurora',
                author: 'Gnometech',
                cardboard: !0,
                image: 'site/aurora.jpg',
                logo: 'site/aurora.png',
                audio: ['https://supermedium.com/superassets/audio/kaiengle-sunset.mp3', 0.4],
                highPerformance: !0,
                description: 'Catch the northern lights (aurora borealis) live in Yellowknife, Canada.'
            },
            forestwave: {
                id: 'forestwave',
                url: 'https://forestwave.glitch.me/',
                title: 'Forest Wave',
                author: 'alfredofrlp',
                image: 'site/forestwave.jpg',
                logo: 'site/forestwave.png',
                entervr: [
                    ['click', '.a-enter-vr-button', 500]
                ],
                description: 'Trippy space forest.'
            },
            crossthestreet: {
                id: 'crossthestreet',
                url: 'https://crossthestreet.fun/game/',
                title: 'Cross the Street',
                author: 'SROMLINE',
                image: 'site/crossthestreet.jpg',
                logo: 'site/crossthestreet.png',
                entervr: [
                    ['click', '.a-enter-vr-button', 100]
                ],
                description: 'How many times can you cross the Golden Gate bridge without getting hit by a car? Get on the global leaderboards!'
            },
            bear71: {
                id: 'bear71',
                url: 'https://bear71vr.nfb.ca/',
                title: 'Bear 71',
                author: 'National Film Board of Canada',
                image: 'site/bear71.jpg',
                logo: 'site/bear71.png',
                entervr: [
                    ['mouseover', '#start-experience-vr-button', 100],
                    ['mousedown', '#start-experience-vr-button', 150],
                    ['mouseup', '#start-experience-vr-button', 200],
                    ['click', '#start-experience-vr-button', 250]
                ],
                cardboard: !0,
                description: 'Blur the line between the wild world and the wired one. Follow Bear 71, a female grizzly bear living in the Canadian Rockies.'
            },
            thehall: {
                id: 'thehall',
                url: 'https://cecropia.github.io/thehallaframe/',
                title: 'The Hall',
                author: 'Cecropia Solutions',
                image: 'site/thehall.jpg',
                logo: 'site/thehall.png',
                description: 'A fine little museum. Statues, kinectic sculptures, and paintings.'
            },
            citybuilder: {
                id: 'citybuilder',
                url: 'https://aframe.city/',
                title: 'City Builder',
                author: 'Kieran Farr',
                image: 'site/citybuilder.jpg',
                logo: 'site/citybuilder.png',
                entervr: [
                    ['click', '.a-enter-vr-button', 500]
                ],
                audio: ['default', 0.5],
                description: 'Create a virtual city with your hands using a library of pixel-style models. You are the mayor.'
            },
            within: {
                id: 'within',
                url: 'https://vr.with.in/',
                title: 'Within',
                author: 'Within',
                image: 'site/within.jpg',
                logo: 'site/within.png',
                entervr: [
                    ['click', '.container .button:last-child', 100]
                ],
                description: 'Extraordinary stories in virtual reality. Space adventures and marine seascapes. A produced library of 360-degree videos.'
            },
            resonate: {
                id: 'resonate',
                url: 'https://classes.marpi.pl/resonate/',
                title: 'Resonate: Audio Reactive',
                author: 'Marpi',
                image: 'site/resonate.jpg',
                logo: 'site/resonate.png',
                entervr: [
                    ['click', 'canvas + button', 150]
                ],
                highPerformance: !0,
                description: 'Ride the audio reactive waves. First installment of featuring generative VR worlds.'
            },
            speaktogo: {
                id: 'speaktogo',
                url: 'https://speaktogo.withgoogle.com/',
                title: 'Speak to Go',
                author: 'Google Creative Lab',
                image: 'site/speaktogo.jpg',
                logo: 'site/speaktogo.png',
                entervr: [
                    ['click', '#entervr-button', 100]
                ],
                cardboard: !0,
                audio: ['https://supermedium.com/superassets/audio/gillicuddy-springish.mp3', 0.5],
                highPerformance: !0,
                description: 'Discover somewhere new in the world. 360-degree imagery from around the globe. Press the trigger instead of the spacebar.'
            },
            spacerocks: {
                id: 'spacerocks',
                url: 'https://spacerocks.moar.io/',
                title: 'Space Rocks',
                author: 'Stewart Smith',
                image: 'site/spacerocks.jpg',
                logo: 'site/spacerocks.png',
                entervr: [
                    ['mousedown', '#vr-toggle-container', 100]
                ],
                audio: ['https://supermedium.com/superassets/audio/ryancullinane-runningwithdrums.mp3', 0.5],
                description: 'Escape through space on stolen plasma engines while slinging photon bolts at deadly asteroids. How many can you blow apart?'
            },
            darkhaze: {
                id: 'darkhaze',
                url: 'https://christmasexperiments.com//xps/2016/24/dark-haze/',
                title: 'Dark Haze',
                author: 'Can x Gloom x Marpi x Spite',
                image: 'site/darkhaze.jpg',
                logo: 'site/darkhaze.png',
                color: '#958663',
                entervr: [
                    ['click', 'img[src=\'enter.png\']', 1000]
                ],
                highPerformance: !0,
                description: 'Where dust, smoke and other dry particles obscure the clarity of the sky. A Christmas Experiment.'
            },
            nighteye: {
                id: 'nighteye',
                url: 'https://christmasexperiments.com/xps/2016/01/night-eye/',
                title: 'Night Eye',
                author: 'Lin.Bert Collective',
                image: 'site/nighteye.jpg',
                logo: 'site/nighteye.png',
                color: '#4c928a',
                entervr: [
                    ['click', '#enterVr', 200],
                    ['click', '.button-sound', 200]
                ],
                injectScript: 'injectScripts/nighteyes.js',
                waitForWebVRReady: !0,
                description: 'Using abstract lines to recreate the shape of the animals in the forest. Click the thumb at the winds to move.'
            },
            ablast: {
                id: 'ablast',
                url: 'https://aframe.io/a-blast/',
                title: 'A-Blast',
                author: 'A-Frame Authors',
                image: 'site/ablast.jpg',
                logo: 'site/ablast.png',
                description: 'Stay alert as creatures happily fire at your from all angles. Protect yourself with laser pistols. Shoot down projectiles that come at you.'
            },
            asaturdaynight: {
                id: 'asaturdaynight',
                url: 'https://aframe.io/a-saturday-night/',
                title: 'A Saturday Night',
                author: 'A-Frame Authors',
                image: 'site/asaturdaynight.jpg',
                logo: 'site/asaturdaynight.png',
                description: 'The hottest dance club. Be a bear, a chicken, Elvis, or a disco lady, and shake it off. Record a dance in VR and show the world your moves.'
            },
            accessmars: {
                id: 'accessmars',
                url: 'https://accessmars.withgoogle.com/',
                title: 'Access Mars',
                author: 'Google Creative Lab & NASA JPL',
                image: 'site/accessmars.jpg',
                logo: 'site/accessmars.png',
                entervr: [
                    ['click', '.webvr-ui-button', 100]
                ],
                audio: ['default', 0.5],
                description: 'The real surface of Mars from over 200,000 photographs sent back to Earth by the Curiosity rover. Used by NASA JPL scientists.'
            },
            eutow: {
                id: 'eutow',
                url: 'https://demo.marpi.pl/archan/eutow/',
                title: 'Eutow',
                author: 'Marpi',
                image: 'site/eutow.jpg',
                logo: 'site/eutow.png',
                entervr: [
                    ['click', 'img[src=\'enter.png\']', 1000]
                ],
                highPerformance: !0,
                description: 'A Virtual Reality collaboration with Archan Nair, a series of 3D virtual worlds with music by An on Bast.'
            },
            massmigrations: {
                id: 'massmigrations',
                url: 'https://massmigrations.com/ide',
                title: 'Mass Migrations',
                author: 'Marpi',
                image: 'site/massmigrations.jpg',
                logo: 'site/massmigrations.png',
                entervr: [
                    ['click', '#vr', 1000]
                ],
                highPerformance: !0,
                description: 'An experiment in mecha world creation. Create, adopt and set them free.'
            },
            virtualartsessions: {
                id: 'virtualartsessions',
                url: 'https://virtualart.chromeexperiments.com/vr/',
                title: 'Virtual Art Sessions',
                author: 'Google',
                image: 'site/virtualartsessions.jpg',
                logo: 'site/virtualartsessions.png',
                entervr: [
                    ['click', '#webvr_button', 2000]
                ],
                audio: ['default', 0.5],
                description: 'Six world-renowned artists given a new way to paint, draw, and sculpt. Observe them as they paint.'
            },
            webvrlab: {
                id: 'webvrlab',
                url: 'https://playcanv.as//index/GgVZJtha',
                title: 'WebVR Lab',
                author: 'PlayCanvas',
                image: 'site/playcanvaswebvrlab.jpg',
                logo: 'site/playcanvaswebvrlab.png',
                entervr: [
                    ['click', '#vr-button', 100]
                ],
                highPerformance: !0,
                description: 'Fire some confetti and play the record. A small lab demonstrating various interactions in VR. Teleport, grab, throw.'
            },
            pokemon: {
                id: 'pokemon',
                url: 'https://ngokevin.github.io/kframe/scenes/pokemon/',
                title: 'Pokemon',
                author: 'Kevin Ngo',
                image: 'site/pokemon.jpg',
                logo: 'site/pokemon.png',
                description: 'Stand from the trainer\'s stand at the Pokemon Stadium with Pikachu against Charizard.'
            },
            destroyedsubway: {
                id: 'destroyedsubway',
                url: 'https://sketchfab.com/models/d7fbea6211aa4116ae8a3a882af55c6c',
                title: 'Destroyed Subway',
                author: 'Aur<C3><83><C2><A9>lien Marlle',
                image: 'site/destroyedsubway.jpg',
                logo: 'site/destroyedsubway.png',
                description: 'A subway that won\'t be in service any time soon. Inspired by post-apocalyptic horror game Metro 2033.',
                audio: ['', 0]
            },
            sherwoodforest: {
                id: 'sherwoodforest',
                url: 'https://sketchfab.com/models/63dd568f5bc64e8694d5f4252924c99e',
                title: 'Sherwood Forest',
                author: 'Lisa Shcheglova',
                image: 'site/robinhoodinsherwoodforest.jpg',
                logo: 'site/robinhoodinsherwoodforest.png',
                description: 'Welcome to Sherwood Forest!',
                audio: ['https://supermedium.com/superassets/audio/unthunk-flummox.mp3', 1]
            },
            sika: {
                id: 'sika',
                url: 'https://sketchfab.com/models/7bb67d1dea724a6eb4ebe21bcf94b09e',
                title: 'SIKA',
                author: 'Marine Quiviger',
                image: 'site/sika.jpg',
                logo: 'site/sika.png',
                description: 'Deer under a cherry blossom on an island in the moonlit lake.',
                audio: ['https://supermedium.com/superassets/audio/chanwaitfat-dream.mp3', 0.75]
            },
            sketchfab: {
                id: 'sketchfab',
                url: 'https://sketchfab.com/vr-launcher?model=c0022acc4f3242e2bcae8043e08df8cc&vr_link_navigation=1#home?cursor=firstPage',
                title: 'Sketchfab VR',
                author: 'Sketchfab',
                image: 'site/sketchfabvr.jpg',
                logo: 'site/sketchfabvr.png',
                description: 'Browse from Sketchfab\'s repository of 3D models in VR.',
                audio: ['default', 0.5]
            },
            gridofcylinders: {
                id: 'gridofcylinders',
                url: 'https://www.shadertoy.com/view/4dSGW1',
                title: 'Grid of Cylinders',
                author: 'Inigo Quilez (iq)',
                image: 'site/gridofcylinders.jpg',
                logo: 'site/gridofcylinders.png',
                description: 'An infinite grid of cylinders, like the swelling waves of the ocean. An expanse of mountains, rising and falling, forever.',
                audio: ['https://super.xyz/superassets/audio/iansutherland-giant.mp3', 0.5]
            },
            cubescape: {
                id: 'cubescape',
                url: 'https://www.shadertoy.com/view/Msl3Rr',
                title: 'Cubescape',
                author: 'Inigo Quilez (iq)',
                image: 'site/cubescape.jpg',
                logo: 'site/cubescape.png',
                description: 'Marvel at the fine detail of the wood-grained waveforms. Rounded pulsating cubes that bounce to the beat.'
            },
            worms: {
                id: 'worms',
                url: 'https://www.shadertoy.com/view/XsjXR1',
                title: 'Worms',
                author: 'Inigo Quilez (iq)',
                image: 'site/worms.jpg',
                logo: 'site/worms.png',
                audio: ['https://ucarecdn.com/a74adaa6-c896-4419-a7f0-cd217a651059/', 0.1],
                description: 'A surreal experience in a forest of strand things.'
            },
            witchesbrew: {
                id: 'witchesbrew',
                url: 'https://ravenworks.ca/witch/',
                title: 'Witch\'s Brew',
                author: 'Andrew Fraticelli (@ravenworks)',
                image: 'site/witchsbrew.jpg',
                logo: 'site/witchsbrew.png',
                description: 'Mix together a red potion, some blue potion, a bit of yellow potion, and baby you\'ve got a stew going.'
            },
            puppetrilla: {
                id: 'puppetrilla',
                url: 'https://www.jorgefuentes.net/projects/puppetrilla/',
                title: 'Ye Olde Puppetrilla',
                author: 'Jorge Fuentes (@jorgefuentesnet)',
                image: 'site/puppetrilla.jpg',
                logo: 'site/puppetrilla.png',
                description: 'Ye Olde Puppetrilla has arrived in town and everybody\'s here to enjoy your puppeteering skills. It\'s showtime!'
            },
            epicmedievalbattle: {
                id: 'epicmedievalbattle',
                url: 'https://www.thedart76.com/webvr/epic-medieval-battle/emb.html',
                title: 'Medieval Dance Battle',
                author: 'Danilo Pasquariello (@thedart76)',
                image: 'site/epicmedievalbattle.jpg',
                logo: 'site/epicmedievalbattle.png',
                description: 'A medieval dance-off. Sit back and be the judge, who\'s got the moves?'
            },
            panomoments: {
                id: 'panomoments',
                url: 'https://my.panomoments.com',
                title: 'PanoMoments',
                author: 'PanoMoments',
                image: 'site/panomoments.jpg',
                logo: 'site/panomoments.png',
                audio: ['default', 0.5],
                description: 'The GIFs of VR, control time with your gaze! Press any button navigate through visual stories and living photos.'
            },
            composure: {
                id: 'composure',
                url: 'https://composure.site/prelude',
                title: 'C O M P O S U R E',
                author: 'Jeff McSpadden & Ian Petrarca',
                image: 'site/composure.jpg',
                logo: 'site/composure.png',
                description: 'Immersive music experience for stress relief.'
            },
            trajectilecommand: {
                id: 'trajectilecommand',
                url: 'http://micosmo.com/trajectilecommand/',
                title: 'Trajectile Command',
                author: '@AdamAlexandr',
                image: 'site/trajectilecommand.jpg',
                logo: 'site/trajectilecommand.png',
                description: 'Defend your cities from missiles and bombers! Inspired by an old arcade classic.'
            },
            supercraft: {
                id: 'supercraft',
                url: 'https://supermedium.com/craft/',
                title: 'Supercraft',
                author: 'Supermedium',
                image: 'site/supercraft.jpg',
                logo: 'site/supercraft.png',
                description: 'Build a VR world in minutes! Publish your creation instantly to the Web to share with your friends.'
            },
            supercraftdragon: {
                id: 'supercraftdragon',
                url: 'https://supermedium.com/craft/bawdy-wealth',
                title: 'Dragon',
                author: 'Diego F. Goberna',
                image: 'site/supercraftdragon.jpg',
                isSupercraft: !0
            },
            supercraftblimps: {
                id: 'supercraftblimps',
                url: 'https://supermedium.com/craft/fierce-talk',
                title: 'Blimps',
                author: 'Diego F. Goberna',
                image: 'site/supercraftblimps.jpg',
                isSupercraft: !0
            },
            supercraftcastle: {
                id: 'supercraftcastle',
                url: 'https://supermedium.com/craft/icky-snake',
                title: 'Castle of Mystery',
                author: 'Diego F. Goberna',
                image: 'site/supercraftcastle.jpg',
                isSupercraft: !0
            },
            supercraftmecha: {
                id: 'supercraftmecha',
                url: 'https://supermedium.com/craft/cooperative-potato',
                title: 'Mecha',
                author: 'Diego F. Goberna',
                image: 'site/supercraftmecha.jpg',
                isSupercraft: !0
            },
            supercrafttoymountain: {
                id: 'supercrafttoymountain',
                url: 'https://supermedium.com/craft/shocking-hose',
                title: 'Toy Mountain',
                author: 'Diego F. Goberna',
                image: 'site/supercrafttoymountain.jpg',
                isSupercraft: !0
            },
            supercraftdanger: {
                id: 'supercraftdanger',
                url: 'https://supermedium.com/craft/onerous-chalk',
                title: 'Danger',
                author: 'Diego F. Goberna',
                image: 'site/supercraftdanger.jpg',
                isSupercraft: !0
            },
            supercrafthomer: {
                id: 'supercrafthomer',
                url: 'https://supermedium.com/craft/dangerous-cars',
                title: 'Homer',
                author: 'Diego F. Goberna',
                image: 'site/supercrafthomer.jpg',
                isSupercraft: !0
            },
            supercraftpowerpuff: {
                id: 'supercraftpowerpuff',
                url: 'https://supermedium.com/craft/previous-acoustics',
                title: 'Powerpuff',
                author: 'Diego F. Goberna',
                image: 'site/supercraftpowerpuff.jpg',
                isSupercraft: !0
            },
            supercraftcave: {
                id: 'supercraftcave',
                url: 'https://supermedium.com/craft/wealthy-dock',
                title: 'Cave',
                author: 'Kevin Ngo',
                image: 'site/supercraftcave.jpg',
                isSupercraft: !0
            },
            supercraftcanyon: {
                id: 'supercraftcanyon',
                url: 'https://supermedium.com/craft/optimal-marble',
                title: 'Canyon',
                author: 'Diego F. Goberna',
                image: 'site/supercraftcanyon.jpg',
                isSupercraft: !0
            },
            walkingsimulator: {
                id: 'walkingsimulator',
                url: 'https://projects.gatunes.com/wsvr/#/61331/446,-446',
                title: 'Walking Simulator VR',
                author: 'Daniel Esteban (@danigatunes)',
                image: 'site/walkingsimulator.jpg',
                logo: 'site/walkingsimulator.png',
                description: 'Not all who wander are lost. An infinite generated Minecraft-like world.'
            },
            vrbeats: {
                id: 'vrbeats',
                url: 'https://vrbeats.gatunes.com/',
                title: 'VR Beats',
                author: 'Daniel Esteban (@danigatunes)',
                image: 'site/vrbeats.jpg',
                logo: 'site/vrbeats.png',
                description: 'Come on, DJ, turn the music up. Mix and sequence your own rhythms and tunes!'
            }
        }
    }
}, function(e) {
    e.exports = function(e) {
        return JSON.parse(JSON.stringify(e))
    }
}, function(e, t, a) {
    'use strict';

    function o(e, t) {
        var o = a(0),
            r = this;
        'function' == typeof Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : r.stack = new Error().stack || 'Cannot get a stacktrace, browser is too old', this.name = 'AlgoliaSearchError', this.message = e || 'Unknown error', t && o(t, function(e, t) {
            r[t] = e
        })
    }

    function r(e, t) {
        function a() {
            var a = Array.prototype.slice.call(arguments, 0);
            'string' != typeof a[0] && a.unshift(t), o.apply(this, a), this.name = 'AlgoliaSearch' + e + 'Error'
        }
        return n(a, o), a
    }
    var n = a(11);
    n(o, Error), e.exports = {
        AlgoliaSearchError: o,
        UnparsableJSON: r('UnparsableJSON', 'Could not parse the incoming response as JSON, see err.more for details'),
        RequestTimeout: r('RequestTimeout', 'Request timedout before getting a response'),
        Network: r('Network', 'Network issue, see err.more for details'),
        JSONPScriptFail: r('JSONPScriptFail', '<script> was loaded but did not call our provided callback'),
        JSONPScriptError: r('JSONPScriptError', '<script> unable to load due to an `error` event on it'),
        Unknown: r('Unknown', 'Unknown error occured')
    }
}, function(e, t, a) {
    (function(o) {
        function r() {
            var e;
            try {
                e = t.storage.debug
            } catch (t) {}
            return !e && 'undefined' != typeof o && 'env' in o && (e = o.env.DEBUG), e
        }
        t = e.exports = a(100), t.log = function() {
            return 'object' == typeof console && console.log && Function.prototype.apply.call(console.log, console, arguments)
        }, t.formatArgs = function(e) {
            var a = this.useColors;
            if (e[0] = (a ? '%c' : '') + this.namespace + (a ? ' %c' : ' ') + e[0] + (a ? '%c ' : ' ') + '+' + t.humanize(this.diff), !!a) {
                var o = 'color: ' + this.color;
                e.splice(1, 0, o, 'color: inherit');
                var r = 0,
                    n = 0;
                e[0].replace(/%[a-zA-Z%]/g, function(e) {
                    '%%' === e || (r++, '%c' === e && (n = r))
                }), e.splice(n, 0, o)
            }
        }, t.save = function(e) {
            try {
                null == e ? t.storage.removeItem('debug') : t.storage.debug = e
            } catch (t) {}
        }, t.load = r, t.useColors = function() {
            return 'undefined' != typeof window && window.process && 'renderer' === window.process.type || 'undefined' != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || 'undefined' != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || 'undefined' != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && 31 <= parseInt(RegExp.$1, 10) || 'undefined' != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)
        }, t.storage = 'undefined' != typeof chrome && 'undefined' != typeof chrome.storage ? chrome.storage.local : function() {
            try {
                return window.localStorage
            } catch (t) {}
        }(), t.colors = ['lightseagreen', 'forestgreen', 'goldenrod', 'dodgerblue', 'darkorchid', 'crimson'], t.formatters.j = function(e) {
            try {
                return JSON.stringify(e)
            } catch (e) {
                return '[UnexpectedJSONParseError]: ' + e.message
            }
        }, t.enable(r())
    }).call(t, a(9))
}, function(e) {
    var t = function() {
        return this
    }();
    try {
        t = t || Function('return this')() || (1, eval)('this')
    } catch (a) {
        'object' == typeof window && (t = window)
    }
    e.exports = t
}, function(e, t, a) {
    var o = a(0);
    e.exports = function(e, t) {
        var a = [];
        return o(e, function(o, r) {
            a.push(t(o, r, e))
        }), a
    }
}, function(e) {
    e.exports.truncate = function(e, t, a) {
        return e ? (a && (e = e.replace('https://', '').replace('http://', '')), e.length >= t ? e.substring(0, t - 3) + '...' : e) : ''
    }
}, function(e) {
    var t = {}.toString;
    e.exports = Array.isArray || function(e) {
        return '[object Array]' == t.call(e)
    }
}, function(e) {
    function t() {
        throw new Error('setTimeout has not been defined')
    }

    function a() {
        throw new Error('clearTimeout has not been defined')
    }

    function o(e) {
        if (u === setTimeout) return setTimeout(e, 0);
        if ((u === t || !u) && setTimeout) return u = setTimeout, setTimeout(e, 0);
        try {
            return u(e, 0)
        } catch (t) {
            try {
                return u.call(null, e, 0)
            } catch (t) {
                return u.call(this, e, 0)
            }
        }
    }

    function r(e) {
        if (p === clearTimeout) return clearTimeout(e);
        if ((p === a || !p) && clearTimeout) return p = clearTimeout, clearTimeout(e);
        try {
            return p(e)
        } catch (t) {
            try {
                return p.call(null, e)
            } catch (t) {
                return p.call(this, e)
            }
        }
    }

    function n() {
        g && b && (g = !1, b.length ? m = b.concat(m) : h = -1, m.length && s())
    }

    function s() {
        if (!g) {
            var e = o(n);
            g = !0;
            for (var t = m.length; t;) {
                for (b = m, m = []; ++h < t;) b && b[h].run();
                h = -1, t = m.length
            }
            b = null, g = !1, r(e)
        }
    }

    function l(e, t) {
        this.fun = e, this.array = t
    }

    function d() {}
    var c = e.exports = {},
        u, p;
    (function() {
        try {
            u = 'function' == typeof setTimeout ? setTimeout : t
        } catch (a) {
            u = t
        }
        try {
            p = 'function' == typeof clearTimeout ? clearTimeout : a
        } catch (t) {
            p = a
        }
    })();
    var m = [],
        g = !1,
        h = -1,
        b;
    c.nextTick = function(e) {
        var t = Array(arguments.length - 1);
        if (1 < arguments.length)
            for (var a = 1; a < arguments.length; a++) t[a - 1] = arguments[a];
        m.push(new l(e, t)), 1 !== m.length || g || o(s)
    }, l.prototype.run = function() {
        this.fun.apply(null, this.array)
    }, c.title = 'browser', c.browser = !0, c.env = {}, c.argv = [], c.version = '', c.versions = {}, c.on = d, c.addListener = d, c.once = d, c.off = d, c.removeListener = d, c.removeAllListeners = d, c.emit = d, c.prependListener = d, c.prependOnceListener = d, c.listeners = function() {
        return []
    }, c.binding = function() {
        throw new Error('process.binding is not supported')
    }, c.cwd = function() {
        return '/'
    }, c.chdir = function() {
        throw new Error('process.chdir is not supported')
    }, c.umask = function() {
        return 0
    }
}, function(e, t, a) {
    e.exports = function(e, t) {
        return function(a, r, n) {
            if ('function' == typeof a && 'object' == typeof r || 'object' == typeof n) throw new o.AlgoliaSearchError('index.search usage is index.search(query, params, cb)');
            0 === arguments.length || 'function' == typeof a ? (n = a, a = '') : (1 === arguments.length || 'function' == typeof r) && (n = r, r = void 0), 'object' == typeof a && null !== a ? (r = a, a = void 0) : (void 0 === a || null === a) && (a = '');
            var s = '';
            void 0 !== a && (s += e + '=' + encodeURIComponent(a));
            var l;
            return void 0 !== r && (r.additionalUA && (l = r.additionalUA, delete r.additionalUA), s = this.as._getSearchParams(r, s)), this._search(s, t, n, l)
        }
    };
    var o = a(3)
}, function(e) {
    e.exports = 'function' == typeof Object.create ? function(e, t) {
        e.super_ = t, e.prototype = Object.create(t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        })
    } : function(e, t) {
        e.super_ = t;
        var a = function() {};
        a.prototype = t.prototype, e.prototype = new a, e.prototype.constructor = e
    }
}, function(e) {
    e.exports = 'uniform mat4 inverseMatrix;\nvarying vec2 vUv;\nvarying vec3 vLocalCameraPosition;\nvarying vec3 vNormal;\nvarying vec3 vWorldPosition;\n\nvoid main() {\n  vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n  vWorldPosition = worldPosition.xyz;\n\n  // Transform global camera position to local space of object.\n  vLocalCameraPosition = vec4(vec4(cameraPosition, 1.0) * inverseMatrix).xyz;\n  vUv = uv;\n  vNormal = normal;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n'
}, function(e, t, a) {
    function o(e, t) {
        var a, o, r, n;
        return r = t.split('.'), o = r[0], n = r[1], a = e.components[o] || AFRAME.components[o], a ? n && !a.schema[n] ? null : n ? a.schema[n].type : a.schema.type : null
    }

    function r(e) {
        e.x = THREE.Math.degToRad(e.x), e.y = THREE.Math.degToRad(e.y), e.z = THREE.Math.degToRad(e.z)
    }

    function n(e, t, a) {
        var o;
        for (o = 0; o < t.length; o++) e.addEventListener(t[o], a)
    }

    function s(e, t, a) {
        var o;
        for (o = 0; o < t.length; o++) e.removeEventListener(t[o], a)
    }

    function l(e, t) {
        var a, o, r;
        for (o = c(t), r = e, a = 0; a < o.length; a++) r = r[o[a]];
        return r
    }

    function d(e, t, a, o) {
        var r, n, s, l;
        for (n = c(t), l = e, r = 0; r < n.length - 1; r++) l = l[n[r]];
        return s = n[n.length - 1], o === v ? void('r' in l[s] ? (l[s].r = a.r, l[s].g = a.g, l[s].b = a.b) : (l[s].x = a.r, l[s].y = a.g, l[s].z = a.b)) : void(l[s] = a)
    }

    function c(e) {
        return e in f ? f[e] : (f[e] = e.split('.'), f[e])
    }

    function u(e) {
        return e.isRawProperty || e.property.startsWith(x) || e.property.startsWith(A)
    }
    var p = a(42);
    if (AFRAME.anime = p, 'undefined' == typeof AFRAME) throw new Error('Component attempted to register before AFRAME was available.');
    var m = new THREE.Color,
        g = new THREE.Color,
        h = AFRAME.utils,
        b = h.entity.getComponentProperty,
        y = h.entity.setComponentProperty,
        f = {},
        v = 'color',
        k = 'rotation',
        x = 'components',
        A = 'object3D';
    AFRAME.registerComponent('animation', {
        schema: {
            autoplay: {
                default: !0
            },
            delay: {
                default: 0
            },
            dir: {
                default: ''
            },
            dur: {
                default: 1e3
            },
            easing: {
                default: 'easeInQuad'
            },
            elasticity: {
                default: 400
            },
            from: {
                default: ''
            },
            loop: {
                default: 0,
                parse: function(e) {
                    return !0 === e || 'true' === e || (!1 === e || 'false' === e ? !1 : parseInt(e, 10))
                }
            },
            property: {
                default: ''
            },
            startEvents: {
                type: 'array'
            },
            pauseEvents: {
                type: 'array'
            },
            resumeEvents: {
                type: 'array'
            },
            to: {
                default: ''
            },
            type: {
                default: ''
            },
            isRawProperty: {
                default: !1
            }
        },
        multiple: !0,
        init: function() {
            var e = this;
            this.eventDetail = {
                name: this.attrName
            }, this.time = 0, this.animation = null, this.animationIsPlaying = !1, this.onStartEvent = this.onStartEvent.bind(this), this.beginAnimation = this.beginAnimation.bind(this), this.pauseAnimation = this.pauseAnimation.bind(this), this.resumeAnimation = this.resumeAnimation.bind(this), this.fromColor = {}, this.toColor = {}, this.targets = {}, this.targetsArray = [], this.updateConfigForDefault = this.updateConfigForDefault.bind(this), this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this), this.config = {
                complete: function() {
                    e.animationIsPlaying = !1, e.el.emit('animationcomplete', e.eventDetail)
                }
            }
        },
        update: function() {
            var e = this.config,
                t = this.data;
            this.animationIsPlaying = !1, t.property && (e.autoplay = !1, e.direction = t.dir, e.duration = t.dur, e.easing = t.easing, e.elasticity = t.elasticity, e.loop = t.loop, this.createAndStartAnimation())
        },
        tick: function(e, t) {
            this.animationIsPlaying && (this.time += t, this.animation.tick(this.time))
        },
        remove: function() {
            this.pauseAnimation(), this.removeEventListeners()
        },
        pause: function() {
            this.paused = !0, this.pausedWasPlaying = !0, this.pauseAnimation(), this.removeEventListeners()
        },
        play: function() {
            this.paused && (this.paused = !1, this.addEventListeners(), this.pausedWasPlaying && (this.resumeAnimation(), this.pausedWasPlaying = !1))
        },
        createAndStartAnimation: function() {
            var e = this.data;
            return this.updateConfig(), this.animationIsPlaying = !1, this.animation = p(this.config), this.removeEventListeners(), this.addEventListeners(), !e.autoplay || e.startEvents && e.startEvents.length ? void 0 : e.delay ? void setTimeout(this.beginAnimation, e.delay) : void this.beginAnimation()
        },
        beginAnimation: function() {
            this.updateConfig(), this.time = 0, this.animation.seek(0), this.animationIsPlaying = !0, this.stopRelatedAnimations(), this.el.emit('animationbegin', this.eventDetail)
        },
        pauseAnimation: function() {
            this.animationIsPlaying = !1
        },
        resumeAnimation: function() {
            this.animationIsPlaying = !0
        },
        onStartEvent: function() {
            return this.data.delay ? void setTimeout(this.beginAnimation, this.data.delay) : void this.beginAnimation()
        },
        updateConfigForRawColor: function() {
            var e = this.config,
                t = this.data,
                a = this.el,
                o, r, n;
            if (!this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {
                for (r in o = t.from || l(a, t.property), n = t.to, this.setColorConfig(o, n), o = this.fromColor, n = this.toColor, this.targetsArray.length = 0, this.targetsArray.push(o), e.targets = this.targetsArray, n) e[r] = n[r];
                e.update = function() {
                    var e = {
                        r: o.r,
                        g: o.g,
                        b: o.b
                    };
                    return function(o) {
                        var r;
                        r = o.animatables[0].target, r.r === e.r && r.g === e.g && r.b === e.b || d(a, t.property, r, t.type)
                    }
                }()
            }
        },
        updateConfigForDefault: function() {
            var e = this.config,
                t = this.data,
                a = this.el,
                o, r, n, s;
            this.waitComponentInitRawProperty(this.updateConfigForDefault) || (o = t.from || (u(t) ? l(a, t.property) : b(a, t.property)), s = t.to, n = !isNaN(o || s), n ? (o = parseFloat(o), s = parseFloat(s)) : (o = o ? o.toString() : o, s = s ? s.toString() : s), r = 'true' === s || 'false' === s, r && (o = 'true' === t.from ? 1 : 0, s = 'true' === t.to ? 1 : 0), this.targets.aframeProperty = o, e.targets = this.targets, e.aframeProperty = s, e.update = function() {
                var e = o;
                return function(o) {
                    var n;
                    n = o.animatables[0].target.aframeProperty, n === e || (e = n, r && (n = !!(1 <= n)), u(t) ? d(a, t.property, n, t.type) : y(a, t.property, n))
                }
            }())
        },
        updateConfigForVector: function() {
            var e = this.config,
                t = this.data,
                a = this.el,
                o, n, s;
            for (o in n = t.from ? AFRAME.utils.coordinates.parse(t.from) : b(a, t.property), s = AFRAME.utils.coordinates.parse(t.to), t.property === k && (r(n), r(s)), this.targetsArray.length = 0, this.targetsArray.push(n), e.targets = this.targetsArray, s) e[o] = s[o];
            return t.property === 'position' || t.property === k || t.property === 'scale' ? void(e.update = function() {
                var e = {
                    x: n.x,
                    y: n.y,
                    z: n.z
                };
                return function(o) {
                    var r = o.animatables[0].target;
                    r.x === e.x && r.y === e.y && r.z === e.z || (e.x = r.x, e.y = r.y, e.z = r.z, a.object3D[t.property].set(r.x, r.y, r.z))
                }
            }()) : void(e.update = function() {
                var e = {
                    x: n.x,
                    y: n.y,
                    z: n.z
                };
                return function(o) {
                    var r = o.animations[0].target;
                    r.x === e.x && r.y === e.y && r.z === e.z || (e.x = r.x, e.y = r.y, e.z = r.z, y(a, t.property, r))
                }
            }())
        },
        updateConfig: function() {
            var e;
            e = o(this.el, this.data.property), u(this.data) && this.data.type === v ? this.updateConfigForRawColor() : 'vec2' === e || 'vec3' === e || 'vec4' === e ? this.updateConfigForVector() : this.updateConfigForDefault()
        },
        waitComponentInitRawProperty: function(e) {
            var t = this.data,
                a = this.el,
                o;
            return !t.from && !!t.property.startsWith(x) && (o = c(t.property)[1], !a.components[o]) && (a.addEventListener('componentinitialized', function t(r) {
                r.detail.name !== o || (e(), a.removeEventListener('componentinitialized', t))
            }), !0)
        },
        stopRelatedAnimations: function() {
            var e, t;
            for (t in this.el.components)(e = this.el.components[t], t !== this.attrName) && 'animation' === e.name && e.data.property === this.data.property && (e.animationIsPlaying = !1)
        },
        addEventListeners: function() {
            var e = this.data,
                t = this.el;
            n(t, e.startEvents, this.onStartEvent), n(t, e.pauseEvents, this.pauseAnimation), n(t, e.resumeEvents, this.resumeAnimation)
        },
        removeEventListeners: function() {
            var e = this.data,
                t = this.el;
            s(t, e.startEvents, this.onStartEvent), s(t, e.pauseEvents, this.pauseAnimation), s(t, e.resumeEvents, this.resumeAnimation)
        },
        setColorConfig: function(e, t) {
            m.set(e), g.set(t), e = this.fromColor, t = this.toColor, e.r = m.r, e.g = m.g, e.b = m.b, t.r = g.r, t.g = g.g, t.b = g.b
        }
    })
}, function() {
    function e(e) {
        var t = {},
            a;
        for (a in e) t[a] = 'function' == typeof e[a] ? e[a] : 'object' == typeof e[a] ? AFRAME.utils.clone(e[a]) : e[a];
        return t
    }
    document.registerElement('a-timeline'), document.registerElement('a-timeline-group'), document.registerElement('a-timeline-animation'), AFRAME.registerComponent('animation-timeline', {
        schema: {
            direction: {
                type: 'string',
                default: 'normal'
            },
            loop: {
                default: 0,
                parse: function(e) {
                    return !('true' !== e) || 'false' !== e && parseInt(e, 10)
                }
            },
            pauseEvents: {
                type: 'array'
            },
            startEvents: {
                type: 'array'
            },
            timeline: {
                type: 'string'
            }
        },
        multiple: !0,
        init: function() {
            var e = this.data,
                t;
            for (this.animationIsPlaying = !1, this.beginAnimation = this.beginAnimation.bind(this), this.eventDetail = {
                    name: this.id
                }, this.time = 0, this.timeline = null, t = 0; t < e.startEvents.length; t++) this.el.addEventListener(e.startEvents[t], this.beginAnimation);
            for (t = 0; t < e.pauseEvents.length; t++) this.el.addEventListener(e.pauseEvents[t], this.pauseAnimation)
        },
        play: function() {
            this.data.startEvents.length || this.beginAnimation()
        },
        tick: function(e, t) {
            this.animationIsPlaying && this.timeline && (this.time += t, this.timeline.tick(this.time))
        },
        beginAnimation: function() {
            var e = this,
                t, a, o, r, n, s, l;
            if (s = document.querySelector(this.data.timeline), 'A-TIMELINE' !== s.tagName) throw new Error('[animation-timeline] timeline must be a selector to <a-timeline> element.');
            for (this.animationIsPlaying = !0, this.time = 0, this.timeline = AFRAME.anime.timeline({
                    autoplay: !1,
                    complete: function() {
                        e.animationIsPlaying = !1, e.el.emit('animationtimelinecomplete', e.eventDetail)
                    },
                    direction: this.data.direction,
                    loop: this.data.loop
                }), n = 0, t = 0; t < s.children.length; t++) {
                if ('A-TIMELINE-GROUP' === s.children[t].tagName) {
                    for (l = s.children[t], r = 0, a = 0; a < l.children.length; a++) o = this.addAnimationToTimeline(l.children[a], n), o > r && (r = o);
                    n += r;
                    continue
                }
                'A-TIMELINE-ANIMATION' === s.children[t].tagName && (n += this.addAnimationToTimeline(s.children[t], n))
            }
        },
        addAnimationToTimeline: function(t, a) {
            var o, r, n, s, l, d, c;
            if (r = 'animation__' + t.getAttribute('name'), c = t.getAttribute('select'), l = this.el.sceneEl.querySelectorAll(c), !l.length) return console.warn('[animation-timeline] No entities found for select="' + c + '"'), 0;
            for (o = parseFloat(t.getAttribute('offset') || 0, 10), d = 0; d < l.length; d++) {
                if (n = l[d].components[r], !n) throw new Error('Could not find animation `' + r + '` for `' + t.getAttribute('select') + '`.');
                n.updateConfig(), n.stopRelatedAnimations(), s = e(n.config), s.offset = a + o, this.timeline.add(s)
            }
            return (s.duration || 0) + (s.delay || 0) + o
        },
        pauseAnimation: function() {
            this.animationIsPlaying = !1
        }
    })
}, function() {
    var e = AFRAME.utils.styleParser;
    if ('undefined' == typeof AFRAME) throw new Error('Component attempted to register before AFRAME was available.');
    AFRAME.registerComponent('event-set', {
        schema: {
            default: '',
            parse: function(t) {
                return e.parse(t)
            }
        },
        multiple: !0,
        init: function() {
            this.eventHandler = null, this.eventName = null
        },
        update: function() {
            this.removeEventListener(), this.updateEventListener(), this.addEventListener()
        },
        remove: function() {
            this.removeEventListener()
        },
        pause: function() {
            this.removeEventListener()
        },
        play: function() {
            this.addEventListener()
        },
        updateEventListener: function() {
            var e = this.data,
                t = this.el,
                a, o, r;
            a = e._event || this.id, o = e._target, r = o ? t.sceneEl.querySelector(o) : t, this.eventName = a, this.eventHandler = function() {
                for (var t in e) '_event' !== t && '_target' !== t && AFRAME.utils.entity.setComponentProperty.call(this, r, t, e[t])
            }
        },
        addEventListener: function() {
            this.el.addEventListener(this.eventName, this.eventHandler)
        },
        removeEventListener: function() {
            this.el.removeEventListener(this.eventName, this.eventHandler)
        }
    })
}, function() {
    var e = {},
        t = {};
    AFRAME.registerComponent('gltf-part', {
        schema: {
            buffer: {
                default: !0
            },
            part: {
                type: 'string'
            },
            src: {
                type: 'asset'
            }
        },
        init: function() {
            var e = this.el;
            this.getModel(function(t) {
                t && e.setObject3D('mesh', t)
            })
        },
        getModel: function(a) {
            var o = this;
            return t[this.data.src] ? void a(this.selectFromModel(t[this.data.src])) : e[this.data.src] ? e[this.data.src].then(function(e) {
                a(o.selectFromModel(e))
            }) : void(e[this.data.src] = new Promise(function(r) {
                new THREE.GLTFLoader().load(o.data.src, function(n) {
                    var s = n.scene || n.scenes[0];
                    t[o.data.src] = s, delete e[o.data.src], a(o.selectFromModel(s)), r(s)
                }, function() {}, console.error)
            }))
        },
        selectFromModel: function(e) {
            var t, a;
            return (a = e.getObjectByName(this.data.part), !a) ? void console.error('[gltf-part] `' + this.data.part + '` not found in model.') : (t = a.getObjectByProperty('type', 'Mesh').clone(!0), this.data.buffer) ? (t.geometry = t.geometry.toNonIndexed(), t) : (t.geometry = new THREE.Geometry().fromBufferGeometry(t.geometry), t)
        }
    })
}, function(e) {
    function t(e, t, a) {
        var o = [],
            r = Math.ceil(t / e.columns),
            n, s, l;
        n = e.marginColumn, s = e.marginRow, a && (n = e.margin, s = e.margin);
        for (var d = 0; d < r; d++)
            for (var c = 0; c < e.columns; c++) l = [0, 0, 0], 0 === e.plane.indexOf('x') && (l[0] = c * n), 0 === e.plane.indexOf('y') && (l[1] = c * n), 1 === e.plane.indexOf('y') && (l[1] = d * s), 1 === e.plane.indexOf('z') && (l[2] = d * s), o.push(l);
        return o
    }

    function a(e, t) {
        for (var a = Math.cos, o = [], r = 0; r < t; r++) {
            var n = isNaN(e.angle) ? r * (2 * Math.PI) / t : 0.01745329252 * (r * e.angle);
            var s = [];
            0 === e.plane.indexOf('x') && (s[0] = e.radius * a(n)), 0 === e.plane.indexOf('y') && (s[1] = e.radius * a(n)), 1 === e.plane.indexOf('y') && (s[1] = e.radius * c(n)), 1 === e.plane.indexOf('z') && (s[2] = e.radius * c(n)), o.push(s)
        }
        return o
    }

    function o(e, a) {
        return e.columns = a, t(e, a, !0)
    }

    function r(e) {
        return l([
            [1, 0, 0],
            [0, 1, 0],
            [0, 0, 1],
            [-1, 0, 0],
            [0, -1, 0],
            [0, 0, -1]
        ], e.radius / 2)
    }

    function n(e) {
        var t = (1 + 2.23606797749979) / 2,
            a = 1 / t,
            o = 2 - t,
            r = -1 * a,
            n = -1 * o;
        return l([
            [-1, o, 0],
            [-1, n, 0],
            [0, -1, o],
            [0, -1, n],
            [0, 1, o],
            [0, 1, n],
            [1, o, 0],
            [1, n, 0],
            [a, a, a],
            [a, a, r],
            [a, r, a],
            [a, r, r],
            [o, 0, 1],
            [o, 0, -1],
            [r, a, a],
            [r, a, r],
            [r, r, a],
            [r, r, r],
            [n, 0, 1],
            [n, 0, -1]
        ], e.radius / 2)
    }

    function s(e) {
        var t = -1 / 1.7320508075688772;
        return l([
            [0, 0, 1.7320508075688772 + t],
            [-1, 0, t],
            [1, 0, t],
            [0, 0.816496580927726 * 2, 0]
        ], e.radius / 2)
    }

    function l(e, t) {
        return e.map(function(e) {
            return e.map(function(e) {
                return e * t
            })
        })
    }

    function d(e, t) {
        e.forEach(function(e, a) {
            var o = t[a];
            e.setAttribute('position', {
                x: o[0],
                y: o[1],
                z: o[2]
            })
        })
    }
    var c = Math.sin;
    AFRAME.registerComponent('layout', {
        schema: {
            angle: {
                type: 'number',
                default: !1,
                min: 0,
                max: 360,
                if: {
                    type: ['circle']
                }
            },
            columns: {
                default: 1,
                min: 0,
                if: {
                    type: ['box']
                }
            },
            margin: {
                default: 1,
                min: 0,
                if: {
                    type: ['box', 'line']
                }
            },
            marginColumn: {
                default: 1,
                min: 0,
                if: {
                    type: ['box']
                }
            },
            marginRow: {
                default: 1,
                min: 0,
                if: {
                    type: ['box']
                }
            },
            plane: {
                default: 'xy'
            },
            radius: {
                default: 1,
                min: 0,
                if: {
                    type: ['circle', 'cube', 'dodecahedron', 'pyramid']
                }
            },
            reverse: {
                default: !1
            },
            type: {
                default: 'line',
                oneOf: ['box', 'circle', 'cube', 'dodecahedron', 'line', 'pyramid']
            },
            fill: {
                default: !0,
                if: {
                    type: ['circle']
                }
            }
        },
        init: function() {
            var e = this,
                t = this.el;
            this.children = t.getChildEntities(), this.initialPositions = [], this.children.forEach(function(t) {
                function a() {
                    var a = t.getAttribute('position');
                    e.initialPositions.push([a.x, a.y, a.z])
                }
                return t.hasLoaded ? a() : void t.addEventListener('loaded', a)
            }), t.addEventListener('child-attached', function(a) {
                a.detail.el.parentNode !== t || (e.children.push(a.detail.el), e.update())
            }), t.addEventListener('child-detached', function(t) {
                -1 === e.children.indexOf(t.detail.el) || (e.children.splice(e.children.indexOf(t.detail.el), 1), e.initialPositions.splice(e.children.indexOf(t.detail.el), 1), e.update())
            })
        },
        update: function() {
            var e = this.children,
                l = this.data,
                c = this.el,
                u = e.length,
                p, m;
            switch (l.type) {
                case 'box':
                    {
                        p = t;
                        break
                    }
                case 'circle':
                    {
                        p = a;
                        break
                    }
                case 'cube':
                    {
                        p = r;
                        break
                    }
                case 'dodecahedron':
                    {
                        p = n;
                        break
                    }
                case 'pyramid':
                    {
                        p = s;
                        break
                    }
                default:
                    p = o;
            }
            m = p(l, u, 'margin' in c.getDOMAttribute('layout')), l.reverse && m.reverse(), d(e, m)
        },
        remove: function() {
            this.el.removeEventListener('child-attached', this.childAttachedCallback), d(this.children, this.initialPositions)
        }
    }), e.exports.getBoxPositions = t, e.exports.getCirclePositions = a, e.exports.getLinePositions = o, e.exports.getCubePositions = r, e.exports.getDodecahedronPositions = n, e.exports.getPyramidPositions = s
}, function() {
    AFRAME.registerComponent('proxy-event', {
        schema: {
            captureBubbles: {
                default: !1
            },
            event: {
                type: 'string'
            },
            to: {
                type: 'string'
            },
            as: {
                type: 'string'
            },
            bubbles: {
                default: !1
            }
        },
        multiple: !0,
        init: function() {
            var e = this.data,
                t = this.el,
                a = this,
                o;
            o = 'CHILDREN' === e.to ? t.querySelectorAll('*') : 'SELF' === e.to ? [t] : document.querySelectorAll(e.to), t.addEventListener(e.event, function(e) {
                var r = a.data,
                    n;
                if (r.captureBubbles || e.target === t)
                    for (n = 0; n < o.length; n++) o[n].emit(r.as || r.event, null, r.bubbles)
            })
        }
    })
}, function() {
    function e(e) {
        return 'back' === e ? THREE.BackSide : 'double' === e ? THREE.DoubleSide : THREE.FrontSide
    }
    if ('undefined' == typeof AFRAME) throw new Error('Component attempted to register before AFRAME was available.');
    AFRAME.registerComponent('slice9', {
        schema: {
            bottom: {
                default: 0,
                min: 0
            },
            color: {
                type: 'color',
                default: '#fff'
            },
            debug: {
                default: !1
            },
            height: {
                default: 1,
                min: 0
            },
            left: {
                default: 0,
                min: 0
            },
            opacity: {
                default: 1,
                min: 0,
                max: 1
            },
            padding: {
                default: 0.1,
                min: 0.01
            },
            right: {
                default: 0,
                min: 0
            },
            side: {
                default: 'front',
                oneOf: ['front', 'back', 'double']
            },
            src: {
                type: 'map'
            },
            top: {
                default: 0,
                min: 0
            },
            transparent: {
                default: !0
            },
            width: {
                default: 1,
                min: 0
            },
            usingCustomMaterial: {
                default: !1
            },
            usingAtlas: {
                default: !1
            },
            uvAtlasMin: {
                type: 'vec2'
            },
            uvAtlasMax: {
                type: 'vec2'
            }
        },
        init: function() {
            var e = this.data,
                t, a;
            this.textureSrc = null, t = this.geometry = new THREE.PlaneBufferGeometry(e.width, e.height, 3, 3), e.usingCustomMaterial ? this.plane = new THREE.Mesh(t) : (a = this.material = new THREE.MeshBasicMaterial({
                color: e.color,
                opacity: e.opacity,
                transparent: e.transparent,
                wireframe: e.debug
            }), this.plane = new THREE.Mesh(t, a)), this.el.setObject3D('mesh', this.plane)
        },
        regenerateMesh: function() {
            function e(e, t, a) {
                o[3 * e] = t, o[3 * e + 1] = a
            }

            function t(e, t, o) {
                a.usingAtlas && (t = a.uvAtlasMin.x + t * (a.uvAtlasMax.x - a.uvAtlasMin.x), o = a.uvAtlasMin.y + o * (a.uvAtlasMax.y - a.uvAtlasMin.y)), r[2 * e] = t, r[2 * e + 1] = o
            }
            var a = this.data,
                o = this.geometry.attributes.position.array,
                r = this.geometry.attributes.uv.array,
                n, s, l;
            if (!this.material || this.material.map) {
                a.usingCustomMaterial ? (n = 1, l = 1) : (n = this.material.map.image.width, l = this.material.map.image.width), s = {
                    left: a.left / l,
                    right: a.right / l,
                    top: a.top / n,
                    bottom: a.bottom / n
                }, t(1, s.left, 1), t(2, s.right, 1), t(4, 0, s.bottom), t(5, s.left, s.bottom), t(6, s.right, s.bottom), t(7, 1, s.bottom), t(8, 0, s.top), t(9, s.left, s.top), t(10, s.right, s.top), t(11, 1, s.top), t(13, s.left, 0), t(14, s.right, 0), a.usingAtlas && (t(0, 0, 1), t(3, 1, 1), t(12, 0, 0), t(15, 1, 0));
                var d = a.width / 2,
                    c = a.height / 2,
                    u = -d + a.padding,
                    p = d - a.padding,
                    m = c - a.padding,
                    g = -c + a.padding;
                e(0, -d, c), e(1, u, c), e(2, p, c), e(3, d, c), e(4, -d, m), e(5, u, m), e(6, p, m), e(7, d, m), e(8, -d, g), e(9, u, g), e(10, p, g), e(11, d, g), e(13, u, -c), e(14, p, -c), e(12, -d, -c), e(15, d, -c), this.geometry.attributes.position.needsUpdate = !0, this.geometry.attributes.uv.needsUpdate = !0
            }
        },
        update: function(t) {
            var a = this.data,
                o;
            o = AFRAME.utils.diff(a, t), a.usingCustomMaterial || (this.material.color.setStyle(a.color), this.material.opacity = a.opacity, this.material.transparent = a.transparent, this.material.wireframe = a.debug, this.material.side = e(a.side), 'src' in o && this.updateMap()), ('width' in o || 'height' in o || 'padding' in o || 'left' in o || 'top' in o || 'bottom' in o || 'right' in o) && this.regenerateMesh()
        },
        updateMap: function() {
            function e(e) {
                this.material.map = e, this.material.needsUpdate = !0, this.regenerateMesh()
            }
            var t = this.data.src;
            return t ? t === this.textureSrc ? void 0 : (this.textureSrc = t, void this.el.sceneEl.systems.material.loadTexture(t, {
                src: t
            }, e.bind(this))) : void(!this.material.map || e(null))
        }
    })
}, function(e) {
    (function(t, a) {
        e.exports = a()
    })('undefined' == typeof self ? this : self, function() {
        return function(e) {
            function t(o) {
                if (a[o]) return a[o].exports;
                var r = a[o] = {
                    i: o,
                    l: !1,
                    exports: {}
                };
                return e[o].call(r.exports, r, r.exports, t), r.l = !0, r.exports
            }
            var a = {};
            return t.m = e, t.c = a, t.d = function(e, a, o) {
                t.o(e, a) || Object.defineProperty(e, a, {
                    configurable: !1,
                    enumerable: !0,
                    get: o
                })
            }, t.n = function(e) {
                var a = e && e.__esModule ? function() {
                    return e['default']
                } : function() {
                    return e
                };
                return t.d(a, 'a', a), a
            }, t.o = function(e, t) {
                return Object.prototype.hasOwnProperty.call(e, t)
            }, t.p = '', t(t.s = 0)
        }([function(e, t, a) {
            'use strict';

            function o(e, t, a, o) {
                var n, s, l, d, c, m;
                if (m = u(t, /\s+/), 1 === m.length) return r(e, t, a, o);
                for (x.length = 0, p(k, m), l = 0; l < k.length; l++) {
                    if (-1 === v.indexOf(k[l])) {
                        x.push(k[l]);
                        continue
                    }
                    s = r(e, x.pop()), c = k[l + 1].replace(y, ''), n = -1 === k[l].indexOf('!') ? s === c : s !== c, x.push(n), l++
                }
                if (1 === x.length) return x[0];
                for (d = x[0].constructor === Boolean ? x[0] : r(e, x[0], a, o), l = 1; l < x.length; l += 2)(x[l] === f || x[l] === b) && (x[l + 1] = x[l + 1].constructor === Boolean ? x[l + 1] : r(e, x[l + 1]), x[l] === f ? d = d || x[l + 1] : x[l] === b && (d = d && x[l + 1]));
                return d
            }

            function r(e, t, a, o) {
                var n, s, l, d;
                for (a && t.startsWith(a.for) && (s = t, t = a.in), d = e, l = u(c(t), '.'), n = 0; n < l.length; n++) d = d[l[n]];
                if (a)
                    for (n = 0; n < d.length; n++)
                        if (d[n][a.key] === o) {
                            d = r(d[n], s.replace(a.for+'.', ''));
                            break
                        }
                return '!' === t[0] && '!' === t[1] ? !!d : '!' === t[0] ? !d : d
            }

            function n(e) {
                for (var t in e) delete e[t]
            }

            function s() {
                var e = arguments;
                return function() {
                    var t;
                    for (t = 0; t < e.length; t++) e[t].apply(this, arguments)
                }
            }

            function l(e, t) {
                var a, o;
                for (o = t.split(/\s+/), a = 0; a < o.length; a++) - 1 !== A.indexOf(o[a]) || o[a].startsWith('\'') || -1 !== e.indexOf(o[a]) || e.push(d(o[a]))
            }

            function d(e) {
                var t;
                return e = c(e.trim()), t = e.indexOf('.'), -1 === t ? e : e.substring(0, e.indexOf('.'))
            }

            function c(e) {
                if (0 === e.indexOf('!!')) return e.replace('!!', '');
                return 0 === e.indexOf('!') ? e.replace('!', '') : e
            }

            function u(e, t) {
                return (S[t] || (S[t] = {}), S[t][e]) ? S[t][e] : (S[t][e] = e.split(t), S[t][e])
            }

            function p(e, t) {
                var a;
                for (e.length = 0, a = 0; a < t.length; a++) e[a] = t[a]
            }
            var m = 'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator ? function(e) {
                    return typeof e
                } : function(e) {
                    return e && 'function' == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? 'symbol' : typeof e
                },
                g = a(1).wrapArray,
                h = {
                    initialState: {},
                    handlers: {},
                    computeState: function() {}
                };
            AFRAME.registerState = function(e) {
                AFRAME.utils.extend(h, e)
            }, AFRAME.registerSystem('state', {
                init: function() {
                    var e = this,
                        t;
                    for (t in this.diff = {}, this.state = AFRAME.utils.clone(h.initialState), this.subscriptions = [], this.initEventHandlers(), this.state) this.state[t].constructor === Array && (this.state[t].__dirty = !0, g(this.state[t]));
                    this.lastState = AFRAME.utils.clone(this.state), this.eventDetail = {
                        lastState: this.lastState,
                        state: this.state
                    }, this.el.addEventListener('loaded', function() {
                        var t;
                        for (t = 0; t < e.subscriptions.length; t++) e.subscriptions[t].onStateUpdate(e.state, '@@INIT', {})
                    })
                },
                dispatch: function(e, t) {
                    var a, o;
                    for (o in h.handlers[e](this.state, t), h.computeState(this.state), this.diff) delete this.diff[o];
                    for (AFRAME.utils.diff(this.lastState, this.state, this.diff), a = 0; a < this.subscriptions.length; a++) {
                        if ('bind-for' === this.subscriptions[a].name) {
                            if (!this.state[this.subscriptions[a].keysToWatch[0]].__dirty) continue;
                        } else if (!this.shouldUpdate(this.subscriptions[a].keysToWatch, this.diff)) continue;
                        this.subscriptions[a].onStateUpdate()
                    }
                    for (o in this.state) this.state[o].constructor === Array && (this.state[o].__dirty = !1);
                    this.copyState(this.lastState, this.state), this.eventDetail.action = e, this.eventDetail.payload = t, this.el.emit('stateupdate', this.eventDetail)
                },
                copyState: function(e, t) {
                    for (var a in t) {
                        if (t[a] && t[a].constructor === Object) {
                            if (!(a in e)) {
                                e[a] = AFRAME.utils.clone(t[a]);
                                continue
                            }
                            this.copyState(e[a], t[a]);
                            continue
                        }
                        e[a] = t[a]
                    }
                },
                subscribe: function(e) {
                    this.subscriptions.push(e)
                },
                unsubscribe: function(e) {
                    this.subscriptions.splice(this.subscriptions.indexOf(e), 1)
                },
                shouldUpdate: function(e, t) {
                    for (var a in t)
                        if (-1 !== e.indexOf(a)) return !0;
                    return !1
                },
                initEventHandlers: function() {
                    function e(e) {
                        var t = this;
                        this.el.addEventListener(e, function(a) {
                            t.dispatch(e, a.detail)
                        })
                    }
                    var t = [],
                        a = this,
                        o;
                    for (o in e = e.bind(this), h.handlers) - 1 === t.indexOf(o) && (t.push(o), e(o))
                },
                renderTemplate: function() {
                    var e = document.createElement('template'),
                        t = /{{\s*(\w*\.)?([\w.]+)\s*}}/g;
                    return function(a, r, n) {
                        var s, l;
                        for (l = a; s = t.exec(a);) l = l.replace(s[0], o(r, s[2]) || '');
                        return n ? l : (e.innerHTML = l, e.content)
                    }
                }(),
                select: o
            }), AFRAME.registerComponent('bind', {
                schema: {
                    default: {},
                    parse: function(e) {
                        var t, a, o, r;
                        if (e.constructor === Object) return e;
                        if (-1 === e.indexOf(':')) return e;
                        for (t = {}, o = u(e, ';'), a = 0; a < o.length; a++) r = u(o[a].trim(), ':'), t[r[0]] = r[1].trim();
                        return t
                    }
                },
                multiple: !0,
                init: function() {
                    var e = this.data;
                    this.keysToWatch = [], this.onStateUpdate = this.onStateUpdate.bind(this), this.system = this.el.sceneEl.systems.state, this.isNamespacedBind = this.id && this.id in AFRAME.components && !AFRAME.components[this.id].isSingleProp || this.id in AFRAME.systems, this.lastData = {}, this.updateObj = {}, this.system.subscribe(this)
                },
                update: function() {
                    var e = this.data,
                        t, a;
                    if (this.keysToWatch.length = 0, 'string' == typeof e) l(this.keysToWatch, e);
                    else
                        for (a in e) l(this.keysToWatch, e[a]);
                    t = this.el.closest('[bind-for]'), t ? (this.bindFor = t.getAttribute('bind-for'), this.bindForKey = this.el.getAttribute('data-bind-for-key'), this.keysToWatch.push(this.bindFor.in), t.addEventListener('bindforrender', this.onStateUpdate.bind(this))) : (this.bindFor = '', this.bindForKey = ''), this.onStateUpdate()
                },
                onStateUpdate: function() {
                    var e = !1,
                        t = this.el,
                        a, r, s, l;
                    if (this.isNamespacedBind && n(this.updateObj), s = this.system.state, 'object' !== m(this.data)) {
                        try {
                            l = o(s, this.data, this.bindFor, this.bindForKey)
                        } catch (t) {
                            throw new Error('[aframe-state-component] Key \'' + this.data + '\' not found in state.' + (' #' + this.el.getAttribute('id') + '[' + this.attrName + ']'))
                        }
                        return 'object ' != typeof l && 'object' !== m(this.lastData) && this.lastData === l ? void 0 : (AFRAME.utils.entity.setComponentProperty(t, this.id, l), void(this.lastData = l))
                    }
                    for (a in this.data) {
                        r = this.data[a].trim();
                        try {
                            l = o(s, r, this.bindFor, this.bindForKey)
                        } catch (t) {
                            throw new Error('[aframe-state-component] Key \'' + r + '\' not found in state.' + (' #' + this.el.getAttribute('id') + '[' + this.attrName + ']'))
                        }
                        if ('object' === ('undefined' == typeof l ? 'undefined' : m(l)) || 'object' === m(this.lastData[a]) || this.lastData[a] !== l) {
                            if (a in AFRAME.components && void 0 === l) return void t.removeAttribute(a);
                            this.isNamespacedBind ? this.updateObj[a] = l : AFRAME.utils.entity.setComponentProperty(t, a, l), this.lastData[a] = l
                        }
                    }
                    for (e in this.updateObj);
                    this.isNamespacedBind && e && t.setAttribute(this.id, this.updateObj)
                },
                remove: function() {
                    this.system.unsubscribe(this)
                }
            }), AFRAME.registerComponent('bind-toggle', {
                schema: {
                    type: 'string'
                },
                multiple: !0,
                init: function() {
                    this.system = this.el.sceneEl.systems.state, this.keysToWatch = [], this.onStateUpdate = this.onStateUpdate.bind(this), this.system.subscribe(this), this.onStateUpdate()
                },
                update: function() {
                    this.keysToWatch.length = 0, l(this.keysToWatch, this.data)
                },
                onStateUpdate: function() {
                    var e = this.el,
                        t, a;
                    t = this.system.state;
                    try {
                        a = o(t, this.data)
                    } catch (t) {
                        throw new Error('[aframe-state-component] Key \'' + this.data + '\' not found in state.' + (' #' + this.el.getAttribute('id') + '[' + this.attrName + ']'))
                    }
                    a ? e.setAttribute(this.id, '') : e.removeAttribute(this.id)
                },
                remove: function() {
                    this.system.unsubscribe(this)
                }
            }), AFRAME.registerComponent('bind-for', {
                schema: {
                    for: {
                        type: 'string'
                    },
                    in: {
                        type: 'string'
                    },
                    key: {
                        type: 'string'
                    },
                    template: {
                        type: 'string'
                    }
                },
                init: function() {
                    this.system = this.el.sceneEl.systems.state, this.onStateUpdate = this.onStateUpdate.bind(this), this.keysToWatch = [], this.renderedKeys = [], this.system.subscribe(this)
                },
                update: function() {
                    this.keysToWatch[0] = this.data.in, this.template = this.el.children[0] && 'TEMPLATE' === this.el.children[0].tagName ? this.el.children[0].innerHTML.trim() : document.querySelector(this.data.template).innerHTML.trim(), this.onStateUpdate()
                },
                onStateUpdate: function() {
                    var e = [],
                        t = [];
                    return function() {
                        var a = this.data,
                            r = this.el,
                            n, s, l, d;
                        try {
                            s = o(this.system.state, a.in)
                        } catch (t) {
                            throw new Error('[aframe-state-component] Key \'' + a.in + '\' not found in state.' + (' #' + r.getAttribute('id') + '[' + this.attrName + ']'))
                        }
                        for (e.length = 0, n = 0; n < s.length; n++)
                            if (d = s[n], e.push(d[a.key]), -1 === this.renderedKeys.indexOf(d[a.key])) {
                                r.appendChild(this.system.renderTemplate(this.template, d)), r.children[r.children.length - 1].setAttribute('data-bind-for-key', d[a.key]), this.renderedKeys.push(d[a.key]);
                                continue
                            }
                        for (t.length = 0, n = 0; n < r.children.length; n++) 'TEMPLATE' !== r.children[n].tagName && (l = r.children[n].getAttribute('data-bind-for-key'), -1 === e.indexOf(l) && (t.push(r.children[n]), this.renderedKeys.splice(this.renderedKeys.indexOf(l), 1)));
                        for (n = 0; n < t.length; n++) t[n].parentNode.removeChild(t[n])
                    }
                }()
            });
            var b = '&&',
                y = /'/g,
                f = '||',
                v = ['==', '===', '!=', '!=='],
                k = [],
                x = [];
            e.exports.composeHandlers = function() {
                var e = arguments,
                    t, a, o;
                for (o = {}, a = 0; a < e.length; a++)
                    for (t in e[a]) t in o ? o[t].constructor === Array ? o[t].push(e[a][t]) : o[t] = [o[t], e[a][t]] : o[t] = e[a][t];
                for (t in o) o[t].constructor === Array && (o[t] = s.apply(this, o[t]));
                return o
            }, e.exports.composeFunctions = s;
            var A = ['||', '&&', '!=', '!==', '==', '==='],
                S = {}
        }, function(e) {
            'use strict';

            function t(e, t) {
                var a = e[t];
                e[t] = function() {
                    a.apply(e, arguments), e.__dirty = !0
                }
            }
            var a = ['push', 'pop', 'shift', 'unshift', 'splice'];
            e.exports.wrapArray = function(e) {
                var o;
                if (!e.__wrapped) {
                    for (o = 0; o < a.length; o++) t(e, a[o]);
                    e.__wrapped = !0
                }
            }
        }])
    })
}, function(e) {
    e.exports = [{
        domain: 'www.shadertoy.com',
        injectScript: 'injectScripts/shadertoy.js',
        entervr: [
            ['click', '#myVR', 1000]
        ]
    }, {
        domain: 'sketchfab.com',
        injectScript: 'injectScripts/sketchfab.js',
        entervr: [
            ['click', '.viewer', 500],
            ['click', '.control.vr', 500]
        ],
        waitForWebVRReady: !0,
        audio: ['default', 0.5]
    }, {
        domain: 'vrporn.com',
        injectScript: 'injectScripts/delightvideo.js',
        waitForWebVRReady: !0
    }, {
        domain: 'my.matterport.com',
        injectScript: 'injectScripts/matterport.js',
        waitForWebVRReady: !0,
        entervr: [
            ['click', 'body', 500],
            ['click', 'window', 500],
            ['click', 'canvas', 500],
            ['click', '#player', 500]
        ],
        audio: ['default', 0.5]
    }, {
        domain: 'patches.vizor.io',
        entervr: [
            ['click', '#entervr', 200]
        ],
        injectScript: 'injectScripts/vizor.js',
        waitForWebVRReady: !0
    }]
}, function() {
    var e = Math.min;
    (function(e) {
        function t(o) {
            if (a[o]) return a[o].exports;
            var r = a[o] = {
                exports: {},
                id: o,
                loaded: !1
            };
            return e[o].call(r.exports, r, r.exports, t), r.loaded = !0, r.exports
        }
        var a = {};
        return t.m = e, t.c = a, t.p = '/dist/', t(0)
    })([function(e, t, a) {
        e.exports = a(1)
    }, function(e, t, a) {
        'use strict';
        (function() {
            return AFRAME ? void(!AFRAME.ASSETS_PATH && (AFRAME.ASSETS_PATH = './assets'), a(2), a(3), a(5), a(14), a(15), a(18), a(19), a(22), a(25), a(28)) : console.error('AFRAME is required!')
        })()
    }, function() {
        ! function(o) {
            function t(a) {
                if (e[a]) return e[a].exports;
                var r = e[a] = {
                    exports: {},
                    id: a,
                    loaded: !1
                };
                return o[a].call(r.exports, r, r.exports, t), r.loaded = !0, r.exports
            }
            var e = {};
            return t.m = o, t.c = e, t.p = '', t(0)
        }([function() {
            AFRAME.registerComponent('rounded', {
                schema: {
                    enabled: {
                        default: !0
                    },
                    width: {
                        type: 'number',
                        default: 1
                    },
                    height: {
                        type: 'number',
                        default: 1
                    },
                    radius: {
                        type: 'number',
                        default: .3
                    },
                    topLeftRadius: {
                        type: 'number',
                        default: -1
                    },
                    topRightRadius: {
                        type: 'number',
                        default: -1
                    },
                    bottomLeftRadius: {
                        type: 'number',
                        default: -1
                    },
                    bottomRightRadius: {
                        type: 'number',
                        default: -1
                    },
                    color: {
                        type: 'color',
                        default: '#F0F0F0'
                    },
                    opacity: {
                        type: 'number',
                        default: 1
                    }
                },
                init: function() {
                    this.rounded = new THREE.Mesh(this.draw(), new THREE.MeshPhongMaterial({
                        color: new THREE.Color(this.data.color),
                        side: THREE.DoubleSide
                    })), this.updateOpacity(), this.el.setObject3D('mesh', this.rounded)
                },
                update: function() {
                    this.data.enabled ? this.rounded && (this.rounded.visible = !0, this.rounded.geometry = this.draw(), this.rounded.material.color = new THREE.Color(this.data.color), this.updateOpacity()) : this.rounded.visible = !1
                },
                updateOpacity: function() {
                    0 > this.data.opacity && (this.data.opacity = 0), 1 < this.data.opacity && (this.data.opacity = 1), this.rounded.material.transparent = !!(1 > this.data.opacity), this.rounded.material.opacity = this.data.opacity
                },
                tick: function() {},
                remove: function() {
                    this.rounded && (this.el.object3D.remove(this.rounded), this.rounded = null)
                },
                draw: function() {
                    function o(n, l, e, a, c, d, o, u, r) {
                        d || (d = 1e-5), o || (o = 1e-5), u || (u = 1e-5), r || (r = 1e-5), n.moveTo(l, e + d), n.lineTo(l, e + c - d), n.quadraticCurveTo(l, e + c, l + d, e + c), n.lineTo(l + a - o, e + c), n.quadraticCurveTo(l + a, e + c, l + a, e + c - o), n.lineTo(l + a, e + r), n.quadraticCurveTo(l + a, e, l + a - r, e), n.lineTo(l + u, e), n.quadraticCurveTo(l, e, l, e + u)
                    }
                    var t = new THREE.Shape,
                        e = [this.data.radius, this.data.radius, this.data.radius, this.data.radius];
                    return -1 != this.data.topLeftRadius && (e[0] = this.data.topLeftRadius), -1 != this.data.topRightRadius && (e[1] = this.data.topRightRadius), -1 != this.data.bottomLeftRadius && (e[2] = this.data.bottomLeftRadius), -1 != this.data.bottomRightRadius && (e[3] = this.data.bottomRightRadius), o(t, 0, 0, this.data.width, this.data.height, e[0], e[1], e[2], e[3]), new THREE.ShapeBufferGeometry(t)
                },
                pause: function() {},
                play: function() {}
            }), AFRAME.registerPrimitive('a-rounded', {
                defaultComponents: {
                    rounded: {}
                },
                mappings: {
                    enabled: 'rounded.enabled',
                    width: 'rounded.width',
                    height: 'rounded.height',
                    radius: 'rounded.radius',
                    "top-left-radius": 'rounded.topLeftRadius',
                    "top-right-radius": 'rounded.topRightRadius',
                    "bottom-left-radius": 'rounded.bottomLeftRadius',
                    "bottom-right-radius": 'rounded.bottomRightRadius',
                    color: 'rounded.color',
                    opacity: 'rounded.opacity'
                }
            })
        }])
    }, function(t, a, o) {
        'use strict';
        var r = o(4),
            n = function(e) {
                this.el.object3D.traverse(function(t) {
                    t.material && (t.material.transparent = !0, t.material.opacity = e)
                });
                var t = !0,
                    a = !1,
                    o;
                try {
                    for (var r = this.textEntities[Symbol.iterator](), n, s; !(t = (n = r.next()).done); t = !0)(s = n.value, !!s.components.text) && (s.components.text.material.uniforms.opacity.value = e)
                } catch (e) {
                    a = !0, o = e
                } finally {
                    try {
                        !t && r.return && r.return()
                    } finally {
                        if (a) throw o
                    }
                }
            };
        AFRAME.registerComponent('fadein', {
            schema: {
                duration: {
                    type: 'int',
                    default: 200
                }
            },
            init: function() {
                this.textEntities = this.el.querySelectorAll('a-text'), this.opacityUpdate(0), this.start = null
            },
            tick: function(a) {
                this.start || (this.start = a);
                var t = e((a - this.start) / this.data.duration, 1);
                this.opacityUpdate(t), 1 === t && (this.el.removeAttribute('fadein'), r.emit(this.el, 'animationend'))
            },
            opacityUpdate: n
        }), AFRAME.registerComponent('fadeout', {
            schema: {
                duration: {
                    type: 'int',
                    default: 200
                }
            },
            init: function() {
                this.textEntities = this.el.querySelectorAll('a-text'), this.opacityUpdate(1), this.start = null
            },
            tick: function(a) {
                this.start || (this.start = a);
                var t = 1 - e((a - this.start) / this.data.duration, 1);
                this.opacityUpdate(t), 0 == t && (this.el.removeAttribute('fadeout'), r.emit(this.el, 'animationend'))
            },
            opacityUpdate: n
        }), AFRAME.registerComponent('show', {
            init: function() {
                this.textEntities = this.el.querySelectorAll('a-text'), this.opacityUpdate(1), setTimeout(() => {
                    this.el.removeAttribute('show')
                }, 100)
            },
            opacityUpdate: n
        }), AFRAME.registerComponent('hide', {
            init: function() {
                this.textEntities = this.el.querySelectorAll('a-text'), this.opacityUpdate(0), setTimeout(() => {
                    this.el.removeAttribute('hide')
                }, 100)
            },
            opacityUpdate: n
        })
    }, function(e) {
        'use strict';
        e.exports = {
            emit: function(e, t, a) {
                e.dispatchEvent(new CustomEvent(t, {
                    detail: a
                }))
            }
        }
    }, function(e, t, a) {
        'use strict';
        var o = a(6),
            r = a(7),
            n = a(11),
            s = a(12),
            l = a(4);
        AFRAME.registerComponent('keyboard', {
            schema: {
                isOpen: {
                    type: 'boolean',
                    default: !1
                },
                physicalKeyboard: {
                    type: 'boolean',
                    default: !1
                }
            },
            currentInput: null,
            init: function() {
                var e = this;
                s.init(this.el), r.init(this.el);
                var t = r.numericalUI(),
                    a = r.mainUI(),
                    o = r.actionsUI();
                this.el.alphabeticalLayout = r.alphabeticalLayout(), t.appendChild(r.numericalLayout()), a.appendChild(this.el.alphabeticalLayout), o.appendChild(r.actionsLayout()), this.el.appendChild(t), this.el.appendChild(a), this.el.appendChild(o), this.el.show = function() {
                    n.showKeyboard(e.el)
                }, this.el.hide = function() {
                    n.hideKeyboard(e.el)
                }, this.el.open = function() {
                    n.openKeyboard(e.el)
                }, this.el.dismiss = function() {
                    n.dismissKeyboard(e.el)
                }, this.el.destroy = function() {
                    n.destroyKeyboard(e.el)
                }, this.el.setAttribute('scale', '2 2 2'), this.el.setAttribute('rotation', '-20 0 0'), this.el.setAttribute('position', '-1.5 -0.3 -2'), this.el.addEventListener('input', this.inputEvent.bind(this)), this.el.addEventListener('backspace', this.backspaceEvent.bind(this)), this.el.addEventListener('dismiss', this.dismissEvent.bind(this)), document.addEventListener('keydown', this.keydownEvent.bind(this)), document.body.addEventListener('didfocusinput', this.didFocusInputEvent.bind(this)), document.body.addEventListener('didblurinput', this.didBlurInputEvent.bind(this))
            },
            update: function() {
                this.data.isOpen ? n.showKeyboard(this.el) : n.hideKeyboard(this.el)
            },
            tick: function() {},
            remove: function() {
                this.el.removeEventListener('input', this.inputEvent.bind(this)), this.el.removeEventListener('backspace', this.backspaceEvent.bind(this)), this.el.removeEventListener('dismiss', this.dismissEvent.bind(this)), document.removeEventListener('keydown', this.keydownEvent.bind(this)), document.body.removeEventListener('didfocusinput', this.didFocusInputEvent.bind(this)), document.body.removeEventListener('didblurinput', this.didBlurInputEvent.bind(this))
            },
            pause: function() {},
            play: function() {},
            inputEvent: function(t) {
                this.currentInput && this.currentInput.appendString(t.detail)
            },
            backspaceEvent: function() {
                this.currentInput && this.currentInput.deleteLast()
            },
            dismissEvent: function() {
                this.currentInput && this.currentInput.blur()
            },
            keydownEvent: function(t) {
                this.currentInput && this.data.physicalKeyboard && (t.preventDefault(), t.stopPropagation(), 'Enter' === t.key ? (l.emit(n.el, 'input', '\n'), l.emit(n.el, 'enter', '\n')) : 'Backspace' === t.key ? l.emit(n.el, 'backspace') : 'Escape' === t.key ? l.emit(n.el, 'dismiss') : 2 > t.key.length && l.emit(n.el, 'input', t.key))
            },
            didFocusInputEvent: function(t) {
                this.currentInput && this.currentInput.blur(!0), this.currentInput = t.detail, this.el.isOpen || n.openKeyboard(this.el)
            },
            didBlurInputEvent: function() {
                this.currentInput = null, n.dismissKeyboard(this.el)
            }
        }), AFRAME.registerPrimitive('a-keyboard', {
            defaultComponents: {
                keyboard: {}
            },
            mappings: {
                "is-open": 'keyboard.isOpen',
                "physical-keyboard": 'keyboard.physicalKeyboard'
            }
        })
    }, function(e) {
        'use strict';
        var t = {};
        t.preloadAssets = function(e) {
            var t = document.querySelector('a-assets'),
                a;
            if (!t) {
                var o = document.querySelector('a-scene');
                t = document.createElement('a-assets'), o.appendChild(t)
            }
            var r = !0,
                n = !1,
                s;
            try {
                for (var l = e[Symbol.iterator](), d, c; !(r = (d = l.next()).done); r = !0) {
                    c = d.value, a = !1;
                    var u = !0,
                        p = !1,
                        m = void 0;
                    try {
                        for (var g = Array.from(t.children)[Symbol.iterator](), h, b; !(u = (h = g.next()).done); u = !0) b = h.value, c.id === b.id && (a = !0)
                    } catch (e) {
                        p = !0, m = e
                    } finally {
                        try {
                            !u && g.return && g.return()
                        } finally {
                            if (p) throw m
                        }
                    }
                    if (!a) {
                        var y = document.createElement(c.type);
                        y.setAttribute('id', c.id), y.setAttribute('src', c.src), t.appendChild(y)
                    }
                }
            } catch (e) {
                n = !0, s = e
            } finally {
                try {
                    !r && l.return && l.return()
                } finally {
                    if (n) throw s
                }
            }
        }, t.extend = function(e, t) {
            for (var a in t) t.hasOwnProperty(a) && (e[a] = t[a]);
            return e
        }, t.clone = function(e) {
            if (Array.isArray(e)) return e.slice(0);
            var t = Object.create(Object.getPrototypeOf(e)),
                a = Object.getOwnPropertyNames(e),
                o;
            for (o = 0; o < a.length;) Object.defineProperty(t, a[o], Object.getOwnPropertyDescriptor(e, a[o])), o++;
            return t
        }, t.updateOpacity = function(e, t) {
            if (e.hasAttribute('text')) {
                var a = e.getAttribute('text');
                a && (a.opacity = t, e.setAttribute('text', a))
            }
            e.object3D.traverse(function(e) {
                e.material && (e.material.transparent = !0, e.material.opacity = t)
            });
            var o = !0,
                r = !1,
                n;
            try {
                for (var s = e.querySelectorAll('a-text')[Symbol.iterator](), l, d; !(o = (l = s.next()).done); o = !0) d = l.value, d.setAttribute('opacity', t)
            } catch (e) {
                r = !0, n = e
            } finally {
                try {
                    !o && s.return && s.return()
                } finally {
                    if (r) throw n
                }
            }
        }, t.getWidthFactor = function(e, t) {
            var a = 1e-5;
            return e.components.text && e.components.text.currentFont && (a = e.components.text.currentFont.widthFactor, a = (0.5 + t) * a), a
        }, e.exports = t
    }, function(e, t, a) {
        'use strict';
        var o = a(8),
            r = a(9),
            n = a(10),
            s = a(11),
            l = {};
        l.el = null, l.init = function(e) {
            l.el = e, s.el = e, s.SFX = e.SFX
        }, l.numericalUI = function() {
            var e = document.createElement('a-entity');
            e.setAttribute('position', '0.025 0 0.12'), e.setAttribute('rotation', '0 25 0'), e.setAttribute('data-ui', !0);
            var t = document.createElement('a-rounded');
            return t.setAttribute('width', '0.280'), t.setAttribute('height', '0.360'), t.setAttribute('radius', '0.02'), t.setAttribute('color', n.KEYBOARD_COLOR), setTimeout(function() {
                t.setAttribute('material', {
                    color: n.KEYBOARD_COLOR,
                    shader: 'flat'
                })
            }), e.appendChild(t), e
        }, l.mainUI = function() {
            var e = document.createElement('a-entity');
            e.setAttribute('position', '0.312 0 0'), e.setAttribute('data-ui', !0);
            var t = document.createElement('a-rounded');
            return t.setAttribute('width', '0.840'), t.setAttribute('height', '0.360'), t.setAttribute('radius', '0.02'), t.setAttribute('color', n.KEYBOARD_COLOR), setTimeout(function() {
                t.setAttribute('material', {
                    color: n.KEYBOARD_COLOR,
                    shader: 'flat'
                })
            }), e.appendChild(t), e
        }, l.actionsUI = function() {
            var e = document.createElement('a-entity');
            e.setAttribute('position', '1.180 0 0.01'), e.setAttribute('rotation', '0 -25 0'), e.setAttribute('data-ui', !0);
            var t = document.createElement('a-rounded');
            return t.setAttribute('width', '0.180'), t.setAttribute('height', '0.360'), t.setAttribute('radius', '0.02'), t.setAttribute('color', n.KEYBOARD_COLOR), setTimeout(function() {
                t.setAttribute('material', {
                    color: n.KEYBOARD_COLOR,
                    shader: 'flat'
                })
            }), e.appendChild(t), e
        }, l.numericalLayout = function() {
            var e = r.numerical,
                t = document.createElement('a-entity');
            t.setAttribute('position', '0.02 0.26 0.001');
            var a = 0;
            for (var o in e) {
                var s = l.key('num-' + o, e[o].type, e[o].value),
                    d = o % 3,
                    c = n.KEY_WIDTH * d,
                    u = n.KEY_WIDTH * a;
                s.setAttribute('position', c + ' -' + u + ' 0'), 2 == d && a++, t.appendChild(s)
            }
            return t
        }, l.alphabeticalLayout = function() {
            var e = r.alphabetical,
                t = document.createElement('a-entity');
            t.setAttribute('position', '0.02 0.26 0.001');
            var a = 0,
                o = 0,
                s = !1;
            for (var d in e) {
                var c = l.key('main-' + d, e[d].type, e[d].value),
                    u = n.KEY_WIDTH * o,
                    p = n.KEY_WIDTH * a;
                1 == a && (u += n.KEY_WIDTH / 2), s && (u = u + n.SPACE_KEY_WIDTH - n.KEY_WIDTH + 2 * 0.055), 'spacebar' === e[d].type && (s = !0, u += 0.205, p = n.KEY_WIDTH * a - 0.01), c.setAttribute('position', u + ' -' + p + ' 0'), 1 == a && 8 == o ? (o = -1, a++) : 9 == o && (o = -1, a++), o++, t.appendChild(c)
            }
            return t
        }, l.symbolsLayout = function() {
            var e = r.symbols,
                t = document.createElement('a-entity');
            t.setAttribute('position', '0.02 0.26 0.001');
            var a = 0,
                o = 0,
                s = !1;
            for (var d in e) {
                var c = l.key('symbols-' + d, e[d].type, e[d].value),
                    u = n.KEY_WIDTH * o,
                    p = n.KEY_WIDTH * a;
                s && (u = u + n.SPACE_KEY_WIDTH - n.KEY_WIDTH + 2 * 0.055), 'spacebar' === e[d].type && (s = !0, u += 0.085, p = n.KEY_WIDTH * a - 0.01), c.setAttribute('position', u + ' -' + p + ' 0'), 9 == o && (o = -1, a++), o++, t.appendChild(c)
            }
            return t
        }, l.actionsLayout = function() {
            var e = r.actions,
                t = document.createElement('a-entity');
            t.setAttribute('position', '0.02 0.26 0.001');
            var a = 0;
            for (var o in e) {
                var s = l.key('action-' + o, e[o].type, e[o].value);
                s.setAttribute('position', '0 -' + a + ' 0'), 0 == o ? a += n.ACTION_WIDTH + 0.01 : 1 == o && (a += n.KEY_WIDTH + 0.01), t.appendChild(s)
            }
            return t
        }, l.key = function(e, t, a) {
            var r = document.createElement('a-rounded');
            if (r.setAttribute('key-id', e), r.setAttribute('width', n.KEY_WIDTH), r.setAttribute('height', n.KEY_WIDTH), r.setAttribute('radius', '0.008'), r.setAttribute('position', '0 0 0'), r.setAttribute('key-type', t), r.setAttribute('key-value', a), r.setAttribute('color', n.KEYBOARD_COLOR), setTimeout(function() {
                    r.setAttribute('material', {
                        color: n.KEYBOARD_COLOR,
                        shader: 'flat'
                    })
                }), s.addKeyEvents(r), 'text' === t || 'spacebar' === t || 'symbol' === t) {
                var d = document.createElement('a-text');
                d.setAttribute('mixin', 'font'), d.setAttribute('value', a), d.setAttribute('color', '#dbddde'), d.setAttribute('position', n.KEY_WIDTH / 2 + ' ' + (n.KEY_WIDTH / 2 - 0.02) + ' 0.015'), d.setAttribute('scale', '0.16 0.16 0.16'), d.setAttribute('align', 'center'), d.setAttribute('baseline', 'center'), r.appendChild(d)
            }
            if ('spacebar' === t) {
                var c = function(e, t) {
                    setTimeout(function() {
                        e.setAttribute('color', n.KEY_COLOR_ACTIVE), t.setAttribute('color', n.KEY_COLOR_ACTIVE)
                    }, 500)
                };
                r.setAttribute('width', n.SPACE_KEY_WIDTH), r.setAttribute('height', n.SPACE_KEY_HEIGHT), c(r, d), d.setAttribute('scale', '0.12 0.12 0.12'), d.setAttribute('position', n.SPACE_KEY_WIDTH / 2 + .03 + ' ' + n.SPACE_KEY_HEIGHT / 2 + ' 0')
            } else 'symbol' === t && d.setAttribute('scale', '0.12 0.12 0.12');
            if (('backspace' === t || 'enter' === t || 'dismiss' === t) && r.setAttribute('width', n.ACTION_WIDTH), 'shift' === t) {
                var u = document.createElement('a-image');
                u.setAttribute('data-type', 'icon'), u.setAttribute('width', '0.032'), u.setAttribute('height', '0.032'), u.setAttribute('position', '0.04 0.04 0.01'), u.setAttribute('src', o.aframeKeyboardShift), r.appendChild(u), l.el.shiftKey = r
            } else if ('global' === t) {
                var u = document.createElement('a-image');
                u.setAttribute('width', '0.032'), u.setAttribute('height', '0.032'), u.setAttribute('position', '0.04 0.04 0.01'), u.setAttribute('src', o.aframeKeyboardGlobal), r.appendChild(u)
            } else if ('backspace' === t) {
                var u = document.createElement('a-image');
                u.setAttribute('width', '0.046'), u.setAttribute('height', '0.046'), u.setAttribute('position', '0.07 0.04 0.01'), u.setAttribute('src', o.aframeKeyboardBackspace), r.appendChild(u)
            } else if ('enter' === t) {
                r.setAttribute('height', n.ACTION_WIDTH);
                var p = document.createElement('a-circle');
                p.setAttribute('color', '#4285f4'), p.setAttribute('radius', 0.044), p.setAttribute('position', '0.07 0.07 0.01'), r.appendChild(p);
                var u = document.createElement('a-image');
                u.setAttribute('width', '0.034'), u.setAttribute('height', '0.034'), u.setAttribute('position', '0.07 0.07 0.011'), u.setAttribute('src', o.aframeKeyboardEnter), r.appendChild(u)
            } else if ('dismiss' === t) {
                var u = document.createElement('a-image');
                u.setAttribute('width', '0.046'), u.setAttribute('height', '0.046'), u.setAttribute('position', '0.07 0.04 0.01'), u.setAttribute('src', o.aframeKeyboardDismiss), r.appendChild(u)
            }
            return r
        }, e.exports = l
    }, function(e) {
        'use strict';
        e.exports = {
            aframeKeyboardShift: AFRAME.ASSETS_PATH + '/images/ShiftIcon.png',
            aframeKeyboardShiftActive: AFRAME.ASSETS_PATH + '/images/ShiftActiveIcon.png',
            aframeKeyboardGlobal: AFRAME.ASSETS_PATH + '/images/GlobalIcon.png',
            aframeKeyboardBackspace: AFRAME.ASSETS_PATH + '/images/BackspaceIcon.png',
            aframeKeyboardEnter: AFRAME.ASSETS_PATH + '/images/EnterIcon.png',
            aframeKeyboardDismiss: AFRAME.ASSETS_PATH + '/images/DismissIcon.png',
            aframeKeyboardShadow: AFRAME.ASSETS_PATH + '/images/KeyShadow.png',
            aframeKeyboardKeyIn: AFRAME.ASSETS_PATH + '/sounds/KeyIn.mp3',
            aframeKeyboardKeyDown: AFRAME.ASSETS_PATH + '/sounds/KeyDown.mp3'
        }
    }, function(e) {
        'use strict';
        e.exports = {
            numerical: [{
                type: 'text',
                value: '1'
            }, {
                type: 'text',
                value: '2'
            }, {
                type: 'text',
                value: '3'
            }, {
                type: 'text',
                value: '4'
            }, {
                type: 'text',
                value: '5'
            }, {
                type: 'text',
                value: '6'
            }, {
                type: 'text',
                value: '7'
            }, {
                type: 'text',
                value: '8'
            }, {
                type: 'text',
                value: '9'
            }, {
                type: 'text',
                value: '.'
            }, {
                type: 'text',
                value: '0'
            }, {
                type: 'text',
                value: '-'
            }],
            alphabetical: [{
                type: 'text',
                value: 'q'
            }, {
                type: 'text',
                value: 'w'
            }, {
                type: 'text',
                value: 'e'
            }, {
                type: 'text',
                value: 'r'
            }, {
                type: 'text',
                value: 't'
            }, {
                type: 'text',
                value: 'y'
            }, {
                type: 'text',
                value: 'u'
            }, {
                type: 'text',
                value: 'i'
            }, {
                type: 'text',
                value: 'o'
            }, {
                type: 'text',
                value: 'p'
            }, {
                type: 'text',
                value: 'a'
            }, {
                type: 'text',
                value: 's'
            }, {
                type: 'text',
                value: 'd'
            }, {
                type: 'text',
                value: 'f'
            }, {
                type: 'text',
                value: 'g'
            }, {
                type: 'text',
                value: 'h'
            }, {
                type: 'text',
                value: 'j'
            }, {
                type: 'text',
                value: 'k'
            }, {
                type: 'text',
                value: 'l'
            }, {
                type: 'shift'
            }, {
                type: 'text',
                value: 'z'
            }, {
                type: 'text',
                value: 'x'
            }, {
                type: 'text',
                value: 'c'
            }, {
                type: 'text',
                value: 'v'
            }, {
                type: 'text',
                value: 'b'
            }, {
                type: 'text',
                value: 'n'
            }, {
                type: 'text',
                value: 'm'
            }, {
                type: 'text',
                value: '!'
            }, {
                type: 'text',
                value: '?'
            }, {
                type: 'spacebar',
                value: ''
            }],
            symbols: [{
                type: 'text',
                value: '@'
            }, {
                type: 'text',
                value: '#'
            }, {
                type: 'text',
                value: '$'
            }, {
                type: 'text',
                value: '%'
            }, {
                type: 'text',
                value: '&'
            }, {
                type: 'text',
                value: '*'
            }, {
                type: 'text',
                value: '-'
            }, {
                type: 'text',
                value: '+'
            }, {
                type: 'text',
                value: '('
            }, {
                type: 'text',
                value: ')'
            }, {
                type: 'text',
                value: '~'
            }, {
                type: 'text',
                value: '`'
            }, {
                type: 'text',
                value: '"'
            }, {
                type: 'text',
                value: '\''
            }, {
                type: 'text',
                value: ':'
            }, {
                type: 'text',
                value: ';'
            }, {
                type: 'text',
                value: '_'
            }, {
                type: 'text',
                value: '='
            }, {
                type: 'text',
                value: '\\'
            }, {
                type: 'text',
                value: '/'
            }, {
                type: 'text',
                value: '{'
            }, {
                type: 'text',
                value: '}'
            }, {
                type: 'text',
                value: '['
            }, {
                type: 'text',
                value: ']'
            }, {
                type: 'text',
                value: '<'
            }, {
                type: 'text',
                value: '>'
            }, {
                type: 'text',
                value: '^'
            }, {
                type: 'text',
                value: '|'
            }, {
                type: 'text',
                value: '!'
            }, {
                type: 'text',
                value: '?'
            }, {
                type: 'symbol',
                value: 'ABC'
            }, {
                type: 'text',
                value: '@'
            }, {
                type: 'spacebar',
                value: ''
            }, {
                type: 'text',
                value: ','
            }, {
                type: 'text',
                value: '.'
            }],
            actions: [{
                type: 'backspace',
                value: 'Del'
            }, {
                type: 'enter',
                value: 'OK'
            }, {
                type: 'dismiss',
                value: 'W'
            }]
        }
    }, function(e) {
        'use strict';
        e.exports = {
            KEYBOARD_COLOR: '#263238',
            KEY_COLOR_HIGHLIGHT: '#39464c',
            KEY_COLOR_ACTIVE: '#404b50',
            SPACEBAR_COLOR_ACTIVE: '#3c464b',
            SPACEBAR_COLOR_HIGHLIGHT: '#445055',
            KEY_WIDTH: 0.08,
            SPACE_KEY_WIDTH: 0.368,
            SPACE_KEY_HEIGHT: 0.05,
            ACTION_WIDTH: 0.14
        }
    }, function(e, t, a) {
        'use strict';
        var o = a(8),
            r = a(10),
            n = a(6),
            s = a(4),
            l = a(12),
            d = {};
        d.el = null, d.showKeyboard = function(e) {
            e.o_position && e.object3D.position.copy(e.o_position), e.isOpen = !0;
            var t = !0,
                a = !1,
                o;
            try {
                for (var r = e.querySelectorAll('[data-ui]')[Symbol.iterator](), n; !(t = (n = r.next()).done); t = !0) {
                    var s = n.value,
                        l = !0,
                        d = !1,
                        c = void 0;
                    try {
                        for (var u = s.children[Symbol.iterator](), p, m; !(l = (p = u.next()).done); l = !0) m = p.value, m.setAttribute('show', !0)
                    } catch (e) {
                        d = !0, c = e
                    } finally {
                        try {
                            !l && u.return && u.return()
                        } finally {
                            if (d) throw c
                        }
                    }
                }
            } catch (e) {
                a = !0, o = e
            } finally {
                try {
                    !t && r.return && r.return()
                } finally {
                    if (a) throw o
                }
            }
            var g = e.parentNode;
            g || e.sceneEl.appendChild(e)
        }, d.hideKeyboard = function(e) {
            var t = e.getAttribute('position'); - 1e4 !== t.x && (!e.o_position && (e.o_position = new THREE.Vector3), e.o_position.copy(t)), e.isOpen = !1, e.setAttribute('position', '-10000 -10000 -10000'), e.setAttribute('fadeout', {
                duration: 1
            })
        }, d.destroyKeyboard = function(e) {
            var t = e.parentNode;
            t && t.removeChild(e)
        }, d.openKeyboard = function(e) {
            e.o_position && e.object3D.position.copy(e.o_position), e.isOpen = !0, e._transitioning = !0;
            var t = e.parentNode;
            t || e.sceneEl.appendChild(e);
            var a = !0,
                o = !1,
                r;
            try {
                for (var n = function() {
                        function t() {
                            a.children[0].removeEventListener('animationend', t), setTimeout(function() {
                                a.children[1].setAttribute('fadein', {
                                    duration: 160
                                }), s.emit(d.el, 'didopen'), e._transitioning = !1
                            }, 10)
                        }
                        var a = c.value,
                            o = !0,
                            r = !1,
                            n;
                        try {
                            for (var l = a.children[Symbol.iterator](), u, p; !(o = (u = l.next()).done); o = !0) p = u.value, p.setAttribute('hide', !0)
                        } catch (e) {
                            r = !0, n = e
                        } finally {
                            try {
                                !o && l.return && l.return()
                            } finally {
                                if (r) throw n
                            }
                        }
                        a.children[0].setAttribute('fadein', {
                            duration: 160
                        }), a.children[0].addEventListener('animationend', t)
                    }, l = e.querySelectorAll('[data-ui]')[Symbol.iterator](), c; !(a = (c = l.next()).done); a = !0) n()
            } catch (e) {
                o = !0, r = e
            } finally {
                try {
                    !a && l.return && l.return()
                } finally {
                    if (o) throw r
                }
            }
        }, d.dismissKeyboard = function(e) {
            e._transitioning = !0;
            var t = !0,
                a = !1,
                o;
            try {
                for (var r = function() {
                        function t() {
                            a.children[1].removeEventListener('animationend', t), setTimeout(function() {
                                function t() {
                                    a.children[0].removeEventListener('animationend', t), d.hideKeyboard(e), s.emit(d.el, 'diddismiss'), e._transitioning = !1
                                }
                                a.children[0].setAttribute('fadeout', {
                                    duration: 160
                                }), a.children[0].addEventListener('animationend', t)
                            }, 10)
                        }
                        var a = l.value,
                            o = !0,
                            r = !1,
                            n;
                        try {
                            for (var c = a.children[Symbol.iterator](), u, p; !(o = (u = c.next()).done); o = !0) p = u.value, p.setAttribute('show', !0)
                        } catch (e) {
                            r = !0, n = e
                        } finally {
                            try {
                                !o && c.return && c.return()
                            } finally {
                                if (r) throw n
                            }
                        }
                        e.isOpen = !1, a.children[1].setAttribute('fadeout', {
                            duration: 160
                        }), a.children[1].addEventListener('animationend', t)
                    }, n = e.querySelectorAll('[data-ui]')[Symbol.iterator](), l; !(t = (l = n.next()).done); t = !0) r()
            } catch (e) {
                a = !0, o = e
            } finally {
                try {
                    !t && n.return && n.return()
                } finally {
                    if (a) throw o
                }
            }
        }, d.addKeyEvents = function(e) {
            e.addEventListener('click', d.keyClick), e.addEventListener('mousedown', d.keyDown), e.addEventListener('mouseup', d.keyOut), e.addEventListener('mouseenter', d.keyIn), e.addEventListener('mouseleave', d.keyOut)
        }, d.keyClick = function() {
            l.keyDown(d.el);
            var e = this.getAttribute('key-type'),
                t = this.getAttribute('key-value');
            'text' === e || 'spacebar' === e ? ('spacebar' === e && (t = ' '), d.isShiftEnabled ? (t = t.toUpperCase(), d.shiftToggle()) : d.isSymbols && d.symbolsToggle(), s.emit(d.el, 'input', t)) : 'shift' === e ? d.shiftToggle() : 'symbol' === e ? d.symbolsToggle() : 'backspace' === e ? s.emit(d.el, 'backspace') : 'enter' === e ? (s.emit(d.el, 'input', '\n'), s.emit(d.el, 'enter', '\n')) : 'dismiss' === e && s.emit(d.el, 'dismiss')
        }, d.keyDown = function() {
            d.el._transitioning || (this.object3D.position.z = 3e-3, 'spacebar' === this.getAttribute('key-type') ? this.setAttribute('color', r.SPACEBAR_COLOR_ACTIVE) : this.setAttribute('color', r.KEY_COLOR_ACTIVE))
        }, d.keyIn = function() {
            d.el._transitioning || this.object3D.children[2] && this.object3D.children[2].material && !this.object3D.children[2].material.opacity || (l.keyIn(d.el), 'spacebar' === this.getAttribute('key-type') ? this.setAttribute('color', r.SPACEBAR_COLOR_HIGHLIGHT) : this.setAttribute('color', r.KEY_COLOR_HIGHLIGHT))
        }, d.keyOut = function() {
            this.object3D.position.z = 0, 'spacebar' === this.getAttribute('key-type') ? this.setAttribute('color', r.KEY_COLOR_ACTIVE) : this.setAttribute('color', r.KEYBOARD_COLOR)
        }, d.isShiftEnabled = !1, d.shiftToggle = function() {
            d.isShiftEnabled = !d.isShiftEnabled;
            var e = d.el.shiftKey.querySelector('[data-type]');
            d.isShiftEnabled ? e.setAttribute('src', o.aframeKeyboardShiftActive) : e.setAttribute('src', o.aframeKeyboardShift);
            var t = !0,
                a = !1,
                r;
            try {
                for (var n = document.querySelectorAll('[key-id]')[Symbol.iterator](), s; !(t = (s = n.next()).done); t = !0) {
                    var l = s.value,
                        c = l.getAttribute('key-id'),
                        u = l.getAttribute('key-type');
                    if (c.startsWith('main-') && 'text' === u) {
                        var p = l.querySelector('a-text');
                        if (p) {
                            var m = p.getAttribute('value').toLowerCase();
                            this.isShiftEnabled && (m = m.toUpperCase()), p.setAttribute('value', m)
                        }
                    }
                }
            } catch (e) {
                a = !0, r = e
            } finally {
                try {
                    !t && n.return && n.return()
                } finally {
                    if (a) throw r
                }
            }
        }, d.isSymbols = !1, d.symbolsToggle = function() {
            if (d.isSymbols = !d.isSymbols, !d.isSymbols) {
                var e = d.el.symbolsLayout.parentNode;
                e.removeChild(d.el.symbolsLayout), e.appendChild(d.el.alphabeticalLayout), setTimeout(function() {
                    n.updateOpacity(d.el.alphabeticalLayout, 1)
                }, 0)
            } else {
                var t = d.el.alphabeticalLayout.parentNode;
                t.removeChild(d.el.alphabeticalLayout), t.appendChild(d.el.symbolsLayout)
            }
        }, e.exports = d
    }, function(e, t, a) {
        'use strict';
        var o = a(13);
        e.exports = {
            init: function(e) {
                var t = document.createElement('a-sound');
                t.setAttribute('key', 'aframeKeyboardKeyInSound'), t.setAttribute('sfx', !0), t.setAttribute('src', o.aframeKeyboardKeyIn), t.setAttribute('position', '0 2 5'), e.appendChild(t), t = document.createElement('a-sound'), t.setAttribute('key', 'aframeKeyboardKeyDownSound'), t.setAttribute('sfx', !0), t.setAttribute('src', o.aframeKeyboardKeyDown), t.setAttribute('position', '0 2 5'), e.appendChild(t)
            },
            keyIn: function(e) {
                var t = e.querySelector('[key=aframeKeyboardKeyInSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            },
            keyDown: function(e) {
                var t = e.querySelector('[key=aframeKeyboardKeyDownSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            }
        }
    }, function(e) {
        'use strict';
        e.exports = {
            aframeKeyboardShift: AFRAME.ASSETS_PATH + '/images/ShiftIcon.png',
            aframeKeyboardShiftActive: AFRAME.ASSETS_PATH + '/images/ShiftActiveIcon.png',
            aframeKeyboardGlobal: AFRAME.ASSETS_PATH + '/images/GlobalIcon.png',
            aframeKeyboardBackspace: AFRAME.ASSETS_PATH + '/images/BackspaceIcon.png',
            aframeKeyboardEnter: AFRAME.ASSETS_PATH + '/images/EnterIcon.png',
            aframeKeyboardDismiss: AFRAME.ASSETS_PATH + '/images/DismissIcon.png',
            aframeKeyboardShadow: AFRAME.ASSETS_PATH + '/images/KeyShadow.png',
            aframeKeyboardKeyIn: AFRAME.ASSETS_PATH + '/sounds/KeyIn.mp3',
            aframeKeyboardKeyDown: AFRAME.ASSETS_PATH + '/sounds/KeyDown.mp3'
        }
    }, function(e, t, a) {
        'use strict';
        var o = a(6),
            r = a(4);
        AFRAME.registerComponent('input', {
            schema: {
                value: {
                    type: 'string',
                    default: ''
                },
                name: {
                    type: 'string',
                    default: ''
                },
                disabled: {
                    type: 'boolean',
                    default: !1
                },
                color: {
                    type: 'color',
                    default: '#000'
                },
                align: {
                    type: 'string',
                    default: 'left'
                },
                font: {
                    type: 'string',
                    default: ''
                },
                letterSpacing: {
                    type: 'int',
                    default: 0
                },
                lineHeight: {
                    type: 'string',
                    default: ''
                },
                opacity: {
                    type: 'number',
                    default: 1
                },
                side: {
                    type: 'string',
                    default: 'front'
                },
                tabSize: {
                    type: 'int',
                    default: 4
                },
                placeholder: {
                    type: 'string',
                    default: ''
                },
                placeholderColor: {
                    type: 'color',
                    default: '#AAA'
                },
                maxLength: {
                    type: 'int',
                    default: 0
                },
                type: {
                    type: 'string',
                    default: 'text'
                },
                width: {
                    type: 'number',
                    default: 1
                },
                cursorWidth: {
                    type: 'number',
                    default: 0.01
                },
                cursorHeight: {
                    type: 'number',
                    default: 0.08
                },
                cursorColor: {
                    type: 'color',
                    default: '#007AFF'
                },
                backgroundColor: {
                    type: 'color',
                    default: '#FFF'
                },
                backgroundOpacity: {
                    type: 'number',
                    default: 1
                }
            },
            init: function() {
                var e = this;
                this.background = document.createElement('a-rounded'), this.background.setAttribute('radius', 0.01), this.background.setAttribute('height', 0.18), this.background.setAttribute('side', 'double'), this.el.appendChild(this.background), this.cursor = document.createElement('a-plane'), this.cursor.setAttribute('position', '0 0 0.003'), this.cursor.setAttribute('visible', !1), this.el.appendChild(this.cursor), this.text = document.createElement('a-entity'), this.text.setAttribute('mixin', 'font'), this.el.appendChild(this.text), this.placeholder = document.createElement('a-entity'), this.placeholder.setAttribute('mixin', 'font'), this.placeholder.setAttribute('visible', !1), this.el.appendChild(this.placeholder), this.el.focus = this.focus.bind(this), this.el.blur = this.blur.bind(this), this.el.appendString = this.appendString.bind(this), this.el.deleteLast = this.deleteLast.bind(this), this.blink(), this.el.addEventListener('click', function() {
                    this.components.input.data.disabled || e.focus()
                }), Object.defineProperty(this.el, 'value', {
                    get: function() {
                        return this.getAttribute('value')
                    },
                    set: function(e) {
                        this.setAttribute('value', e)
                    },
                    enumerable: !0,
                    configurable: !0
                })
            },
            blink: function() {
                var e = this;
                return this.isFocused ? void(this.cursorInterval = setInterval(function() {
                    e.cursor.setAttribute('visible', !e.cursor.getAttribute('visible'))
                }, 500)) : (e.cursor.setAttribute('visible', !1), clearInterval(this.cursorInterval), void(this.cursorInterval = null))
            },
            isFocused: !1,
            focus: function(e) {
                this.isFocused || (this.isFocused = !0, this.cursor.setAttribute('visible', !0), this.blink(), r.emit(this.el, 'focus'), !e && r.emit(document.body, 'didfocusinput', this.el))
            },
            blur: function(e) {
                this.isFocused && (this.isFocused = !1, this.cursorInterval && (clearInterval(this.cursorInterval), this.cursorInterval = null), this.cursor.setAttribute('visible', !1), r.emit(this.el, 'blur'), !e && r.emit(document.body, 'didblurinput', this.el))
            },
            appendString: function(e) {
                if ('\n' === e) return this.blur();
                var t = this.el.getAttribute('value');
                t || (t = ''), t += e, this.el.setAttribute('value', t), r.emit(this.el, 'change', t)
            },
            deleteLast: function() {
                var e = this.el.getAttribute('value');
                e || (e = ''), e = e.slice(0, -1), this.el.setAttribute('value', e), r.emit(this.el, 'change', e)
            },
            updateText: function() {
                function e(t, n, s, l) {
                    if (!t.object3D || !t.object3D.children || !t.object3D.children[0]) return 0;
                    var d = t.object3D.children[0].geometry.visibleGlyphs;
                    if (!d) return 0;
                    if (d = d[d.length - 1], !d) return 0;
                    if (d.line) return n.value = s ? n.value.substr(1) : n.value.slice(0, -1), t.setAttribute('text', n), e(t, n, s);
                    l || (l = o.getWidthFactor(t, n.wrapCount)), d = (d.position[0] + d.data.width) / (l / a.data.width);
                    var c = (d + r.left + r.right) / a.data.width;
                    return 1 < c ? (n.value = s ? n.value.substr(1) : n.value.slice(0, -1), t.setAttribute('text', n), e(t, n, s, l)) : d
                }
                var t = this,
                    a = this,
                    r = {
                        left: 0.021,
                        right: 0.021
                    },
                    n = {
                        color: this.data.color,
                        align: this.data.align,
                        side: this.data.side,
                        tabSize: this.data.tabSize,
                        wrapCount: 24 * this.data.width,
                        width: this.data.width
                    },
                    s = this.text.getAttribute('text');
                s && this.data.value !== s.value && (this.cursorInterval && (clearInterval(this.cursorInterval), this.cursorInterval = null), this.cursorTimer && (clearTimeout(this.cursorTimer), this.cursorTimer = null), this.cursor.setAttribute('visible', !0), this.cursorTimer = setTimeout(function() {
                    a.blink()
                }, 50)), this.data.maxLength ? (n.value = this.data.value.substring(0, this.data.maxLength), this.el.setAttribute('value', n.value)) : n.value = this.data.value, 'password' === this.data.type && (n.value = '*'.repeat(this.data.value.length)), this.data.font.length && (n.font = this.data.font), this.data.letterSpacing && (n.letterSpacing = this.data.letterSpacing), this.data.lineHeight.length && (n.lineHeight = this.data.lineHeight), this.text.setAttribute('visible', !1), this.text.setAttribute('text', n), n.value.length ? this.placeholder.setAttribute('visible', !1) : this.placeholder.setAttribute('visible', !0);
                var l = o.clone(n);
                l.value = this.data.placeholder, l.color = this.data.placeholderColor, this.placeholder.setAttribute('text', l), setTimeout(function() {
                    if (a.text.object3D) {
                        var t = a.text.object3D.children;
                        if (t[0] && t[0].geometry && t[0].geometry.visibleGlyphs) {
                            var o = 0;
                            t[0].geometry.visibleGlyphs.length && (o = e(a.text, n, !0), a.text.setAttribute('visible', !0)), a.cursor.setAttribute('position', o + r.left + ' 0 0.003')
                        } else a.cursor.setAttribute('position', r.left + ' 0 0.003')
                    } else a.cursor.setAttribute('position', r.left + ' 0 0.003');
                    e(a.placeholder, l)
                }, 0), this.background.setAttribute('color', this.data.backgroundColor), setTimeout(function() {
                    t.background.setAttribute('material', {
                        shader: 'flat',
                        color: t.data.backgroundColor
                    })
                }), this.background.setAttribute('width', this.data.width), this.background.setAttribute('position', '0 -0.09 0.001'), this.text.setAttribute('position', r.left - 1e-3 + this.data.width / 2 + ' -0.055 0.002'), this.placeholder.setAttribute('position', r.left - 1e-3 + this.data.width / 2 + ' -0.055 0.002')
            },
            updateCursor: function() {
                this.cursor.setAttribute('width', this.data.cursorWidth), this.cursor.setAttribute('height', this.data.cursorHeight), this.cursor.setAttribute('color', this.data.cursorColor)
            },
            update: function() {
                this;
                setTimeout(function() {}, 0), this.updateCursor(), this.updateText()
            },
            tick: function() {},
            remove: function() {},
            pause: function() {},
            play: function() {}
        }), AFRAME.registerPrimitive('a-input', {
            defaultComponents: {
                input: {}
            },
            mappings: {
                value: 'input.value',
                name: 'input.name',
                disabled: 'input.disabled',
                color: 'input.color',
                align: 'input.align',
                font: 'input.font',
                "letter-spacing": 'input.letterSpacing',
                "line-height": 'input.lineHeight',
                opacity: 'input.opacity',
                side: 'input.side',
                "tab-size": 'input.tabSize',
                placeholder: 'input.placeholder',
                "placeholder-color": 'input.placeholderColor',
                "max-length": 'input.maxLength',
                type: 'input.type',
                width: 'input.width',
                "cursor-width": 'input.cursorWidth',
                "cursor-height": 'input.cursorHeight',
                "cursor-color": 'input.cursorColor',
                "background-color": 'input.backgroundColor',
                "background-opacity": 'input.backgroundOpacity'
            }
        })
    }, function(e, t, a) {
        'use strict';
        var o = a(6),
            r = a(4),
            n = a(16),
            s = a(17);
        AFRAME.registerComponent('switch', {
            schema: {
                name: {
                    type: 'string',
                    default: ''
                },
                enabled: {
                    type: 'boolean',
                    default: !1
                },
                disabled: {
                    type: 'boolean',
                    default: !1
                },
                fillColor: {
                    type: 'color',
                    default: '#bababa'
                },
                knobColor: {
                    type: 'color',
                    default: '#f5f5f5'
                },
                fillColorEnabled: {
                    type: 'color',
                    default: '#80a8ff'
                },
                knobColorEnabled: {
                    type: 'color',
                    default: '#4076fd'
                },
                fillColorDisabled: {
                    type: 'color',
                    default: '#939393'
                },
                knobColorDisabled: {
                    type: 'color',
                    default: '#a2a2a2'
                }
            },
            init: function() {
                this;
                o.preloadAssets(n), s.init(this.el), this.el.fill = document.createElement('a-rounded'), this.el.fill.setAttribute('width', 0.36), this.el.fill.setAttribute('height', 0.16), this.el.fill.setAttribute('radius', 0.08), this.el.fill.setAttribute('side', 'double'), this.el.fill.setAttribute('position', '0 0 0.01'), this.el.appendChild(this.el.fill), this.el.knob = document.createElement('a-circle'), this.el.knob.setAttribute('position', '0.06 0.08 0.02'), this.el.knob.setAttribute('radius', 0.12), this.el.knob.setAttribute('side', 'double'), this.el.appendChild(this.el.knob), this.el.shadow_el = document.createElement('a-image'), this.el.shadow_el.setAttribute('width', 1.25 * 0.24), this.el.shadow_el.setAttribute('height', 1.25 * 0.24), this.el.shadow_el.setAttribute('position', '0 0 -0.001'), this.el.shadow_el.setAttribute('src', '#aframeSwitchShadow'), this.el.knob.appendChild(this.el.shadow_el), this.el.addEventListener('click', function() {
                    this.components.switch.data.disabled || (this.setAttribute('enabled', !this.components.switch.data.enabled), r.emit(this, 'change', this.components.switch.data.enabled))
                }), this.el.addEventListener('mousedown', function() {
                    return this.components.switch.data.disabled ? s.clickDisabled(this) : void s.click(this)
                }), Object.defineProperty(this.el, 'enabled', {
                    get: function() {
                        return this.getAttribute('enabled')
                    },
                    set: function(e) {
                        this.setAttribute('enabled', e)
                    },
                    enumerable: !0,
                    configurable: !0
                })
            },
            on: function() {
                this.el.fill.setAttribute('color', this.data.fillColorEnabled), this.el.knob.setAttribute('position', '0.32 0.08 0.02'), this.el.knob.setAttribute('color', this.data.knobColorEnabled)
            },
            off: function() {
                this.el.fill.setAttribute('color', this.data.fillColor), this.el.knob.setAttribute('position', '0.06 0.08 0.02'), this.el.knob.setAttribute('color', this.data.knobColor)
            },
            disable: function() {
                this.el.fill.setAttribute('color', this.data.fillColorDisabled), this.el.knob.setAttribute('color', this.data.knobColorDisabled)
            },
            update: function() {
                this.data.enabled ? this.on() : this.off(), this.data.disabled && this.disable()
            },
            tick: function() {},
            remove: function() {},
            pause: function() {},
            play: function() {}
        }), AFRAME.registerPrimitive('a-switch', {
            defaultComponents: {
                switch: {}
            },
            mappings: {
                name: 'switch.name',
                enabled: 'switch.enabled',
                disabled: 'switch.disabled',
                "fill-color": 'switch.fillColor',
                "knob-color": 'switch.knobColor',
                "fill-color-enabled": 'switch.fillColorEnabled',
                "knob-color-enabled": 'switch.knobColorEnabled',
                "fill-color-disabled": 'switch.fillColorDisabled',
                "knob-color-disabled": 'switch.knobColorDisabled'
            }
        })
    }, function(e) {
        'use strict';
        e.exports = [{
            type: 'img',
            id: 'aframeSwitchShadow',
            src: AFRAME.ASSETS_PATH + '/images/SwitchShadow.png'
        }, {
            type: 'audio',
            id: 'aframeSwitchClick',
            src: AFRAME.ASSETS_PATH + '/sounds/InputClick.mp3'
        }, {
            type: 'audio',
            id: 'aframeSwitchClickDisabled',
            src: AFRAME.ASSETS_PATH + '/sounds/ButtonClickDisabled.mp3'
        }]
    }, function(e) {
        'use strict';
        e.exports = {
            init: function(e) {
                var t = document.createElement('a-sound');
                t.setAttribute('key', 'aframeSwitchClickSound'), t.setAttribute('sfx', !0), t.setAttribute('src', '#aframeSwitchClick'), t.setAttribute('position', '0 2 5'), e.appendChild(t), t = document.createElement('a-sound'), t.setAttribute('key', 'aframeSwitchClickDisabledSound'), t.setAttribute('sfx', !0), t.setAttribute('src', '#aframeSwitchClickDisabled'), t.setAttribute('position', '0 2 5'), e.appendChild(t)
            },
            click: function(e) {
                var t = e.querySelector('[key=aframeSwitchClickSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            },
            clickDisabled: function(e) {
                var t = e.querySelector('[key=aframeSwitchClickDisabledSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            }
        }
    }, function(e, t, a) {
        'use strict';
        var o = a(6),
            r = a(4);
        AFRAME.registerComponent('form', {
            schema: {},
            init: function() {},
            update: function() {},
            tick: function() {},
            remove: function() {},
            pause: function() {},
            play: function() {}
        }), AFRAME.registerPrimitive('a-form', {
            defaultComponents: {
                form: {}
            },
            mappings: {}
        })
    }, function(e, t, a) {
        'use strict';
        var o = a(6),
            r = a(4),
            n = a(20),
            s = a(21);
        AFRAME.registerComponent('radio', {
            schema: {
                checked: {
                    type: 'boolean',
                    default: !1
                },
                disabled: {
                    type: 'boolean',
                    default: !1
                },
                name: {
                    type: 'string',
                    default: ''
                },
                value: {
                    type: 'string',
                    default: ''
                },
                label: {
                    type: 'string',
                    default: ''
                },
                radioColor: {
                    type: 'color',
                    default: '#757575'
                },
                radioColorChecked: {
                    type: 'color',
                    default: '#4076fd'
                },
                color: {
                    type: 'color',
                    default: '#757575'
                },
                font: {
                    type: 'string',
                    default: ''
                },
                letterSpacing: {
                    type: 'int',
                    default: 0
                },
                lineHeight: {
                    type: 'string',
                    default: ''
                },
                opacity: {
                    type: 'number',
                    default: 1
                },
                width: {
                    type: 'number',
                    default: 1
                }
            },
            init: function() {
                var e = this;
                o.preloadAssets(n), s.init(this.el), this.hitbox = document.createElement('a-plane'), this.hitbox.setAttribute('height', 0.2), this.hitbox.setAttribute('opacity', 0), this.hitbox.setAttribute('position', '0 0 0.001'), this.el.appendChild(this.hitbox), this.outline = document.createElement('a-ring'), this.outline.setAttribute('radius-outer', 0.1), this.outline.setAttribute('radius-inner', 0.078), this.outline.setAttribute('position', '0.1 0 0.002'), this.el.appendChild(this.outline), this.circle = document.createElement('a-circle'), this.circle.setAttribute('radius', 0.05), this.circle.setAttribute('position', '0.1 0 0.002'), this.el.appendChild(this.circle), this.label = document.createElement('a-entity'), this.el.appendChild(this.label), this.el.addEventListener('click', function() {
                    this.components.radio.data.disabled || (this.setAttribute('checked', !0), e.onClick())
                }), this.el.addEventListener('mousedown', function() {
                    return this.components.radio.data.disabled ? s.clickDisabled(this) : void s.click(this)
                }), Object.defineProperty(this.el, 'value', {
                    get: function() {
                        return this.getAttribute('value')
                    },
                    set: function(e) {
                        this.setAttribute('value', e)
                    },
                    enumerable: !0,
                    configurable: !0
                })
            },
            onClick: function(e) {
                if (this.data.name) {
                    var t = this.el.closest('a-form');
                    if (t) {
                        var a = !1,
                            o = Array.from(t.querySelectorAll('[name=' + this.data.name + ']'));
                        o.reverse();
                        var n = !0,
                            s = !1,
                            l;
                        try {
                            for (var d = o[Symbol.iterator](), c, u; !(n = (c = d.next()).done); n = !0) u = c.value, u.components.radio && (u === this.el && u.hasAttribute('checked') ? (a = !0, u.components.radio.check(), !e && r.emit(u, 'change', !0)) : a || this.data.checked || !u.hasAttribute('checked') ? u.components.radio.uncheck() : (a = !0, u.components.radio.check()))
                        } catch (e) {
                            s = !0, l = e
                        } finally {
                            try {
                                !n && d.return && d.return()
                            } finally {
                                if (s) throw l
                            }
                        }!a && this.el.hasAttribute('checked') && (this.check(), !e && r.emit(this.el, 'change', !0))
                    }
                }
            },
            check: function() {
                this.outline.setAttribute('color', this.data.radioColorChecked), this.circle.setAttribute('color', this.data.radioColorChecked), this.circle.setAttribute('visible', !0), this.data.disabled && this.disabled()
            },
            uncheck: function() {
                this.outline.setAttribute('color', this.data.radioColor), this.circle.setAttribute('visible', !1), this.data.disabled && this.disabled()
            },
            disabled: function() {
                this.outline.setAttribute('color', this.data.radioColor), this.circle.setAttribute('color', this.data.radioColor)
            },
            update: function() {
                function e(r, n) {
                    if (!r.object3D || !r.object3D.children || !r.object3D.children[0]) return 0;
                    var s = r.object3D.children[0].geometry.visibleGlyphs;
                    if (!s) return 0;
                    if (s = s[s.length - 1], !s) return 0;
                    if (s.line) return a.value = a.value.slice(0, -1), r.setAttribute('text', a), e(r);
                    n || (n = o.getWidthFactor(r, a.wrapCount)), s = (s.position[0] + s.data.width) / (n / t.data.width);
                    var l = s / t.data.width;
                    return 1 < l ? (a.value = a.value.slice(0, -1), r.setAttribute('text', a), e(r, n)) : s
                }
                var t = this;
                this.onClick(!0), this.hitbox.setAttribute('width', this.data.width), this.hitbox.setAttribute('position', this.data.width / 2 + ' 0 0.001');
                var a = {
                    color: this.data.color,
                    align: 'left',
                    wrapCount: 10 * (this.data.width + 0.2),
                    width: this.data.width
                };
                this.data.font && (a.font = this.data.font), a.value = this.data.label, a.color = this.data.color, this.label.setAttribute('text', a), this.label.setAttribute('position', this.data.width / 2 + 0.24 + ' 0 0.002'), setTimeout(function() {
                    if (t.data.label.length && e(t.label), t.data.disabled) var a = setInterval(function() {
                        t.outline.object3D.children[0] && (clearInterval(a), o.updateOpacity(t.outline, 0.4), o.updateOpacity(t.circle, 0.4), o.updateOpacity(t.label, 0.4))
                    }, 10);
                    else var r = setInterval(function() {
                        t.outline.object3D.children[0] && (clearInterval(r), o.updateOpacity(t.outline, 1), o.updateOpacity(t.circle, 1), o.updateOpacity(t.label, 1))
                    }, 10)
                }, 0)
            },
            tick: function() {},
            remove: function() {},
            pause: function() {},
            play: function() {}
        }), AFRAME.registerPrimitive('a-radio', {
            defaultComponents: {
                radio: {}
            },
            mappings: {
                checked: 'radio.checked',
                disabled: 'radio.disabled',
                name: 'radio.name',
                value: 'radio.value',
                label: 'radio.label',
                "radio-color": 'radio.radioColor',
                "radio-color-checked": 'radio.radioColorChecked',
                color: 'radio.color',
                align: 'radio.align',
                font: 'radio.font',
                "letter-spacing": 'radio.letterSpacing',
                "line-height": 'radio.lineHeight',
                opacity: 'radio.opacity',
                width: 'radio.width'
            }
        })
    }, function(e) {
        'use strict';
        e.exports = [{
            type: 'audio',
            id: 'aframeRadioClick',
            src: AFRAME.ASSETS_PATH + '/sounds/InputClick.mp3'
        }, {
            type: 'audio',
            id: 'aframeRadioClickDisabled',
            src: AFRAME.ASSETS_PATH + '/sounds/ButtonClickDisabled.mp3'
        }]
    }, function(e) {
        'use strict';
        e.exports = {
            init: function(e) {
                var t = document.createElement('a-sound');
                t.setAttribute('key', 'aframeRadioClickSound'), t.setAttribute('sfx', !0), t.setAttribute('src', '#aframeRadioClick'), t.setAttribute('position', '0 2 5'), e.appendChild(t), t = document.createElement('a-sound'), t.setAttribute('key', 'aframeRadioClickDisabledSound'), t.setAttribute('sfx', !0), t.setAttribute('src', '#aframeRadioClickDisabled'), t.setAttribute('position', '0 2 5'), e.appendChild(t)
            },
            click: function(e) {
                var t = e.querySelector('[key=aframeRadioClickSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            },
            clickDisabled: function(e) {
                var t = e.querySelector('[key=aframeRadioClickDisabledSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            }
        }
    }, function(e, t, a) {
        'use strict';
        var o = a(6),
            r = a(4),
            n = a(23),
            s = a(24);
        AFRAME.registerComponent('checkbox', {
            schema: {
                checked: {
                    type: 'boolean',
                    default: !1
                },
                disabled: {
                    type: 'boolean',
                    default: !1
                },
                name: {
                    type: 'string',
                    default: ''
                },
                value: {
                    type: 'string',
                    default: ''
                },
                label: {
                    type: 'string',
                    default: ''
                },
                checkboxColor: {
                    type: 'color',
                    default: '#757575'
                },
                checkboxColorChecked: {
                    type: 'color',
                    default: '#4076fd'
                },
                color: {
                    type: 'color',
                    default: '#757575'
                },
                font: {
                    type: 'string',
                    default: ''
                },
                letterSpacing: {
                    type: 'int',
                    default: 0
                },
                lineHeight: {
                    type: 'string',
                    default: ''
                },
                opacity: {
                    type: 'number',
                    default: 1
                },
                width: {
                    type: 'number',
                    default: 1
                }
            },
            init: function() {
                var e = this;
                o.preloadAssets(n), s.init(this.el), this.hitbox = document.createElement('a-plane'), this.hitbox.setAttribute('height', 0.2), this.hitbox.setAttribute('opacity', 0), this.el.appendChild(this.hitbox), this.outline = document.createElement('a-rounded'), this.outline.setAttribute('width', 0.2), this.outline.setAttribute('height', 0.2), this.outline.setAttribute('radius', 0.02), this.outline.setAttribute('position', '0 -0.1 0.01'), this.el.appendChild(this.outline), this.inside = document.createElement('a-rounded'), this.inside.setAttribute('width', 0.156), this.inside.setAttribute('height', 0.156), this.inside.setAttribute('radius', 0.01), this.inside.setAttribute('color', '#EEE'), this.inside.setAttribute('position', '0.0195 -0.078 0.02'), this.el.appendChild(this.inside), this.checkmark = document.createElement('a-image'), this.checkmark.setAttribute('width', 0.16), this.checkmark.setAttribute('height', 0.16), this.checkmark.setAttribute('src', '#aframeCheckboxMark'), this.checkmark.setAttribute('position', '0.1 0 0.03'), this.el.appendChild(this.checkmark), this.label = document.createElement('a-entity'), this.el.appendChild(this.label), this.el.addEventListener('click', function() {
                    this.components.checkbox.data.disabled || (this.components.checkbox.data.checked = !this.components.checkbox.data.checked, this.setAttribute('checked', this.components.checkbox.data.checked), e.onClick())
                }), this.el.addEventListener('mousedown', function() {
                    return this.components.checkbox.data.disabled ? s.clickDisabled(this) : void s.click(this)
                }), Object.defineProperty(this.el, 'value', {
                    get: function() {
                        return this.getAttribute('value')
                    },
                    set: function(e) {
                        this.setAttribute('value', e)
                    },
                    enumerable: !0,
                    configurable: !0
                })
            },
            onClick: function(e) {
                this.data.checked ? this.check() : this.uncheck(), e || r.emit(this.el, 'change', this.data.checked)
            },
            check: function() {
                this.outline.setAttribute('color', this.data.checkboxColorChecked), this.inside.setAttribute('color', this.data.checkboxColorChecked), this.checkmark.setAttribute('visible', !0), this.data.disabled && this.disabled()
            },
            uncheck: function() {
                this.outline.setAttribute('color', this.data.checkboxColor), this.inside.setAttribute('color', '#EEE'), this.checkmark.setAttribute('visible', !1), this.data.disabled && this.disabled()
            },
            disabled: function() {
                this.outline.setAttribute('color', this.data.checkboxColor), this.inside.setAttribute('color', this.data.checkboxColor)
            },
            update: function() {
                function e(r, n) {
                    if (!r.object3D || !r.object3D.children || !r.object3D.children[0]) return 0;
                    var s = r.object3D.children[0].geometry.visibleGlyphs;
                    if (!s) return 0;
                    if (s = s[s.length - 1], !s) return 0;
                    if (s.line) return a.value = a.value.slice(0, -1), r.setAttribute('text', a), e(r);
                    n || (n = o.getWidthFactor(r, a.wrapCount)), s = (s.position[0] + s.data.width) / (n / t.data.width);
                    var l = s / t.data.width;
                    return 1 < l ? (a.value = a.value.slice(0, -1), r.setAttribute('text', a), e(r, n)) : s
                }
                var t = this;
                this.onClick(!0), this.hitbox.setAttribute('width', this.data.width), this.hitbox.setAttribute('position', this.data.width / 2 + ' 0 0.01');
                var a = {
                    color: this.data.color,
                    align: 'left',
                    wrapCount: 10 * (this.data.width + 0.2),
                    width: this.data.width
                };
                this.data.font && (a.font = this.data.font), a.value = this.data.label, a.color = this.data.color, this.label.setAttribute('text', a), this.label.setAttribute('position', this.data.width / 2 + 0.24 + ' 0 0.01'), setTimeout(function() {
                    if (t.data.label.length && e(t.label), t.data.disabled) var a = setInterval(function() {
                        t.checkmark.object3D.children[0] && (clearInterval(a), o.updateOpacity(t.checkmark, 0.4), o.updateOpacity(t.label, 0.4))
                    }, 10);
                    else var r = setInterval(function() {
                        t.checkmark.object3D.children[0] && (clearInterval(r), o.updateOpacity(t.checkmark, 1), o.updateOpacity(t.label, 1))
                    }, 10)
                }, 0)
            },
            tick: function() {},
            remove: function() {},
            pause: function() {},
            play: function() {}
        }), AFRAME.registerPrimitive('a-checkbox', {
            defaultComponents: {
                checkbox: {}
            },
            mappings: {
                checked: 'checkbox.checked',
                disabled: 'checkbox.disabled',
                name: 'checkbox.name',
                value: 'checkbox.value',
                label: 'checkbox.label',
                "checkbox-color": 'checkbox.checkboxColor',
                "checkbox-color-checked": 'checkbox.checkboxColorChecked',
                color: 'checkbox.color',
                align: 'checkbox.align',
                font: 'checkbox.font',
                "letter-spacing": 'checkbox.letterSpacing',
                "line-height": 'checkbox.lineHeight',
                opacity: 'checkbox.opacity',
                width: 'checkbox.width'
            }
        })
    }, function(e) {
        'use strict';
        e.exports = [{
            type: 'img',
            id: 'aframeCheckboxMark',
            src: AFRAME.ASSETS_PATH + '/images/CheckmarkIcon.png'
        }, {
            type: 'audio',
            id: 'aframeCheckboxClick',
            src: AFRAME.ASSETS_PATH + '/sounds/InputClick.mp3'
        }, {
            type: 'audio',
            id: 'aframeCheckboxClickDisabled',
            src: AFRAME.ASSETS_PATH + '/sounds/ButtonClickDisabled.mp3'
        }]
    }, function(e) {
        'use strict';
        e.exports = {
            init: function(e) {
                var t = document.createElement('a-sound');
                t.setAttribute('key', 'aframeCheckboxClickSound'), t.setAttribute('sfx', !0), t.setAttribute('src', '#aframeCheckboxClick'), t.setAttribute('position', '0 2 5'), e.appendChild(t), t = document.createElement('a-sound'), t.setAttribute('key', 'aframeButtonClickDisabledSound'), t.setAttribute('sfx', !0), t.setAttribute('src', '#aframeButtonClickDisabled'), t.setAttribute('position', '0 2 5'), e.appendChild(t)
            },
            click: function(e) {
                var t = e.querySelector('[key=aframeCheckboxClickSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            },
            clickDisabled: function(e) {
                var t = e.querySelector('[key=aframeButtonClickDisabledSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            }
        }
    }, function(e, t, a) {
        'use strict';
        var o = a(6),
            r = a(4),
            n = a(26),
            s = a(27);
        AFRAME.registerComponent('button', {
            schema: {
                disabled: {
                    type: 'boolean',
                    default: !1
                },
                type: {
                    type: 'string',
                    default: 'raised'
                },
                name: {
                    type: 'string',
                    default: ''
                },
                value: {
                    type: 'string',
                    default: 'Button'
                },
                buttonColor: {
                    type: 'color',
                    default: '#4076fd'
                },
                color: {
                    type: 'color',
                    default: '#FFF'
                },
                font: {
                    type: 'string',
                    default: ''
                },
                letterSpacing: {
                    type: 'int',
                    default: 0
                },
                lineHeight: {
                    type: 'string',
                    default: ''
                },
                opacity: {
                    type: 'number',
                    default: 1
                },
                width: {
                    type: 'number',
                    default: 1
                }
            },
            init: function() {
                var e = this;
                o.preloadAssets(n), s.init(this.el), this.wrapper = document.createElement('a-entity'), this.wrapper.setAttribute('position', '0 0 0.01'), this.el.appendChild(this.wrapper), this.shadow = document.createElement('a-image'), this.shadow.setAttribute('height', 1.25 * 0.36), this.shadow.setAttribute('src', '#aframeButtonShadow'), this.wrapper.appendChild(this.shadow), this.outline = document.createElement('a-rounded'), this.outline.setAttribute('height', 0.36), this.outline.setAttribute('radius', 0.03), this.outline.setAttribute('position', '0 -0.18 0.01'), this.wrapper.appendChild(this.outline), this.label = document.createElement('a-entity'), this.outline.appendChild(this.label), this.el.addEventListener('click', function() {
                    this.components.button && this.components.button.data.disabled || e.onClick()
                }), this.el.addEventListener('mousedown', function() {
                    return this.components.button && this.components.button.data.disabled ? s.clickDisabled(this) : void(e.wrapper.setAttribute('position', '0 0 0.036'), s.click(this))
                }), this.el.addEventListener('mouseup', function() {
                    this.components.button && this.components.button.data.disabled || e.wrapper.setAttribute('position', '0 0 0')
                }), this.el.getWidth = this.getWidth.bind(this), Object.defineProperty(this.el, 'value', {
                    get: function() {
                        return this.getAttribute('value')
                    },
                    set: function(e) {
                        this.setAttribute('value', e)
                    },
                    enumerable: !0,
                    configurable: !0
                })
            },
            onClick: function() {},
            getWidth: function() {
                return this.__width
            },
            update: function() {
                function e(r, n, s) {
                    if (!r.object3D || !r.object3D.children || !r.object3D.children[0]) return setTimeout(function() {
                        e(r, n)
                    }, 10);
                    var l = r.object3D.children[0].geometry.visibleGlyphs;
                    if (!l) return setTimeout(function() {
                        e(r, n)
                    }, 10);
                    if (l = l[l.length - 1], !l) return n(0);
                    if (l.line) return a.value = a.value.slice(0, -1), r.setAttribute('text', a), e(r, n);
                    s || (s = o.getWidthFactor(r, a.wrapCount)), l = (l.position[0] + l.data.width) / (s / t.data.width);
                    var d = l / t.data.width;
                    return 1 < d ? (a.value = a.value.slice(0, -1), r.setAttribute('text', a), e(r, n, s)) : n(l)
                }
                var t = this;
                this.outline.setAttribute('color', this.data.buttonColor);
                var a = {
                    color: this.data.color,
                    align: 'center',
                    wrapCount: 10 * this.data.width,
                    width: this.data.width
                };
                this.data.font && (a.font = this.data.font), 'flat' === this.data.type && (a.color = this.data.buttonColor), a.value = this.data.value.toUpperCase(), this.label.setAttribute('text', a), this.label.setAttribute('position', this.data.width / 2 + 0.24 + ' 0 0.01'), setTimeout(function() {
                    if (t.data.value.length && e(t.label, function(e) {
                            t.label.setAttribute('position', e / 2 + 0.28 / 2 + ' ' + 0.36 / 2 + ' 0.02'), e += 0.28, t.outline.setAttribute('width', e), t.__width = e, t.shadow.setAttribute('width', 1.17 * e), t.shadow.setAttribute('position', e / 2 + ' 0 0'), r.emit(t.el, 'change:width', e)
                        }), t.data.disabled) {
                        t.shadow.setAttribute('visible', !1);
                        var a = setInterval(function() {
                            t.label.object3D.children[0] && t.label.object3D.children[0].geometry.visibleGlyphs && (clearInterval(a), o.updateOpacity(t.el, 0.4))
                        }, 10)
                    } else var n = setInterval(function() {
                        t.label.object3D.children[0] && t.label.object3D.children[0].geometry.visibleGlyphs && (clearInterval(n), o.updateOpacity(t.el, 1))
                    }, 10);
                    if ('flat' === t.data.type) {
                        t.shadow.setAttribute('visible', !1);
                        var s = setInterval(function() {
                            t.label.object3D.children[0] && t.label.object3D.children[0].geometry.visibleGlyphs && (clearInterval(s), o.updateOpacity(t.outline, 0), t.data.disabled && o.updateOpacity(t.label, 0.4))
                        }, 10)
                    }
                }, 0)
            },
            tick: function() {},
            remove: function() {},
            pause: function() {},
            play: function() {}
        }), AFRAME.registerPrimitive('a-button', {
            defaultComponents: {
                button: {}
            },
            mappings: {
                disabled: 'button.disabled',
                type: 'button.type',
                name: 'button.name',
                value: 'button.value',
                "button-color": 'button.buttonColor',
                color: 'button.color',
                font: 'button.font',
                "letter-spacing": 'button.letterSpacing',
                "line-height": 'button.lineHeight',
                opacity: 'button.opacity',
                width: 'button.width'
            }
        })
    }, function(e) {
        'use strict';
        e.exports = [{
            type: 'img',
            id: 'aframeButtonShadow',
            src: AFRAME.ASSETS_PATH + '/images/ButtonShadow.png'
        }, {
            type: 'audio',
            id: 'aframeButtonClick',
            src: AFRAME.ASSETS_PATH + '/sounds/ButtonClick.mp3'
        }, {
            type: 'audio',
            id: 'aframeButtonClickDisabled',
            src: AFRAME.ASSETS_PATH + '/sounds/ButtonClickDisabled.mp3'
        }]
    }, function(e) {
        'use strict';
        e.exports = {
            init: function(e) {
                var t = document.createElement('a-sound');
                t.setAttribute('key', 'aframeButtonClickSound'), t.setAttribute('sfx', !0), t.setAttribute('src', '#aframeButtonClick'), t.setAttribute('position', '0 2 5'), e.appendChild(t), t = document.createElement('a-sound'), t.setAttribute('key', 'aframeButtonClickDisabledSound'), t.setAttribute('sfx', !0), t.setAttribute('src', '#aframeButtonClickDisabled'), t.setAttribute('position', '0 2 5'), e.appendChild(t)
            },
            click: function(e) {
                var t = e.querySelector('[key=aframeButtonClickSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            },
            clickDisabled: function(e) {
                var t = e.querySelector('[key=aframeButtonClickDisabledSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            }
        }
    }, function(e, t, a) {
        'use strict';
        var o = a(6),
            r = a(4),
            n = a(29),
            s = a(30);
        AFRAME.registerComponent('toast', {
            schema: {
                message: {
                    type: 'string',
                    default: 'You are cool'
                },
                action: {
                    type: 'string',
                    default: ''
                },
                backgroundColor: {
                    type: 'color',
                    default: '#222'
                },
                actionColor: {
                    type: 'color',
                    default: '#4076fd'
                },
                color: {
                    type: 'color',
                    default: '#FFF'
                },
                font: {
                    type: 'string',
                    default: ''
                },
                letterSpacing: {
                    type: 'int',
                    default: 0
                },
                lineHeight: {
                    type: 'string',
                    default: ''
                },
                width: {
                    type: 'number',
                    default: 3
                },
                duration: {
                    type: 'number',
                    default: 2e3
                },
                autoshow: {
                    type: 'boolean',
                    default: !0
                }
            },
            init: function() {
                var t = this;
                o.preloadAssets(n), s.init(this.el), this.el.setAttribute('position', '10000 10000 10000'), this.el.setAttribute('rotation', '-25 0 0'), this.el.setAttribute('scale', '0.3 0.3 0.3'), this.background = document.createElement('a-rounded'), this.background.setAttribute('height', 0.44), this.background.setAttribute('radius', 0.03), this.background.setAttribute('position', '0 -0.18 0.001'), this.el.appendChild(this.background), this.label = document.createElement('a-entity'), this.el.appendChild(this.label), this.action = document.createElement('a-button'), t.action.setAttribute('button-color', '#222'), this.el.appendChild(this.action), this.action.addEventListener('change:width', function(a) {
                    var e = t.label.getAttribute('text');
                    e.width = t.data.width - a.detail, e.wrapCount = 10 * e.width, t.label.setAttribute('text', e), t.label.setAttribute('position', e.width / 2 + 0.14 + ' 0.04 0.001'), this.setAttribute('position', t.data.width - a.detail + ' ' + (0.44 - 0.36) / 2 + ' 0.001')
                }), this.action.addEventListener('click', function() {
                    r.emit(t.el, 'actionclick')
                });
                var e = setInterval(function() {
                    t.action.object3D && t.action.object3D.children[0] && (clearInterval(e), o.updateOpacity(t.el, 0), o.updateOpacity(t.label, 0), o.updateOpacity(t.action, 0), t.data.autoshow && t.show())
                }, 10);
                this.el.show = this.show.bind(this), this.el.hide = this.hide.bind(this)
            },
            show: function() {
                this.hideTimer && clearTimeout(this.hideTimer), this.el.setAttribute('position', -this.data.width / (2 / this.el.object3D.scale.x) + ' 0.25 -1.6');
                var e = this;
                setTimeout(function() {
                    e.el.setAttribute('fadein', {
                        duration: 160
                    }), setTimeout(function() {
                        o.updateOpacity(e.label, 1), e.action.components.button.shadow.setAttribute('visible', !1)
                    }, 10)
                }, 0), this.hideTimer = setTimeout(function() {
                    e.hide()
                }, this.data.duration), s.show(this.el)
            },
            hide: function() {
                var e = this;
                setTimeout(function() {
                    o.updateOpacity(e.label, 0), e.action.components.button.shadow.setAttribute('visible', !1), setTimeout(function() {
                        e.el.setAttribute('fadeout', {
                            duration: 160
                        }), setTimeout(function() {
                            e.el.setAttribute('position', '10000 10000 10000')
                        }, 200)
                    }, 10)
                }, 0)
            },
            update: function() {
                this;
                this.background.setAttribute('color', this.data.backgroundColor), this.background.setAttribute('width', this.data.width);
                var e = {
                    color: this.data.color,
                    align: 'left',
                    wrapCount: 10 * this.data.width,
                    width: this.data.width,
                    lineHeight: 64
                };
                this.data.font && (e.font = this.data.font), 'flat' === this.data.type && (e.color = this.data.buttonColor), e.value = this.data.message, this.label.setAttribute('text', e), this.label.setAttribute('position', this.data.width / 2 + 0.14 + ' 0 0.001'), this.action.setAttribute('value', this.data.action.toUpperCase()), this.action.setAttribute('color', this.data.actionColor)
            },
            tick: function() {},
            remove: function() {},
            pause: function() {},
            play: function() {}
        }), AFRAME.registerPrimitive('a-toast', {
            defaultComponents: {
                toast: {}
            },
            mappings: {
                message: 'toast.message',
                action: 'toast.action',
                "action-color": 'toast.actionColor',
                "background-color": 'toast.backgroundColor',
                color: 'toast.color',
                font: 'toast.font',
                "letter-spacing": 'toast.letterSpacing',
                "line-height": 'toast.lineHeight',
                width: 'toast.width',
                duration: 'toast.duration',
                autoshow: 'toast.autoshow'
            }
        })
    }, function(e) {
        'use strict';
        e.exports = [{
            type: 'audio',
            id: 'aframeToastShow',
            src: AFRAME.ASSETS_PATH + '/sounds/ToastShow.mp3'
        }]
    }, function(e) {
        'use strict';
        e.exports = {
            init: function(e) {
                var t = document.createElement('a-sound');
                t.setAttribute('key', 'aframeToastShowSound'), t.setAttribute('sfx', !0), t.setAttribute('src', '#aframeToastShow'), t.setAttribute('position', '0 2 5'), e.appendChild(t)
            },
            show: function(e) {
                var t = e.querySelector('[key=aframeToastShowSound]');
                t && (t.components.sound.stopSound(), t.components.sound.playSound())
            }
        }
    }])
}, function(e, t, a) {
    var o = a(98);
    'string' == typeof o && (o = [
        [e.i, o, '']
    ]);
    var r = {
            hmr: !0
        },
        n;
    r.transform = n;
    a(107)(o, r);
    o.locals && (e.exports = o.locals), !1
}, function(e, t, a) {
    function o(e) {
        return a(r(e))
    }

    function r(e) {
        var t = n[e];
        if (!(t + 1)) throw new Error('Cannot find module \'' + e + '\'.');
        return t
    }
    var n = {
        "./auto-enter-vr.js": 43,
        "./background-animation.js": 44,
        "./background-audio.js": 45,
        "./background-shader.js": 46,
        "./cancel-button.js": 47,
        "./cascade-raycastable.js": 48,
        "./click-out.js": 49,
        "./collection-shader.js": 50,
        "./console-shortcuts.js": 51,
        "./content-page-loaded.js": 52,
        "./controller-button-feedback.js": 53,
        "./controller.js": 54,
        "./cursor-mesh.js": 55,
        "./cursor-toggler.js": 56,
        "./debug-controller.js": 57,
        "./debug-cursor.js": 58,
        "./debug-links.js": 59,
        "./enter-site-button.js": 60,
        "./fade-shader.js": 61,
        "./fade-text-shader.js": 62,
        "./feed-collection.js": 63,
        "./feed-single.js": 64,
        "./feed-tiles.js": 65,
        "./gpu-preloader.js": 66,
        "./help-back-lobby.js": 67,
        "./high-performance.js": 68,
        "./keyboard-raycastable.js": 69,
        "./layout-collections.js": 70,
        "./layout-feed.js": 71,
        "./link-shader.js": 72,
        "./loading-ring.js": 73,
        "./loading-screen.js": 74,
        "./logo.js": 75,
        "./navigate.js": 76,
        "./notification.js": 77,
        "./pagination-dots.js": 78,
        "./paginator.js": 79,
        "./play-audio.js": 80,
        "./post-message-receiver.js": 81,
        "./propertyTypes/object.js": 82,
        "./raycastable.js": 83,
        "./recenter.js": 84,
        "./refresh.js": 85,
        "./screen-manager.js": 86,
        "./search.js": 87,
        "./sub-object.js": 88,
        "./superlink.js": 89,
        "./tab-switch-fade.js": 90,
        "./thumb-paginator.js": 91,
        "./tutorial-modal-image.js": 92,
        "./tutorial-modal.js": 93,
        "./visible-delay.js": 94,
        "./visible-fade.js": 95
    };
    o.keys = function() {
        return Object.keys(n)
    }, o.resolve = r, e.exports = o, o.id = 24
}, function(e, t, a) {
    window.addEventListener('load', () => {
        a(117), a(118)
    })
}, function(e, t, a) {
    function o(e) {
        return a(r(e))
    }

    function r(e) {
        var t = n[e];
        if (!(t + 1)) throw new Error('Cannot find module \'' + e + '\'.');
        return t
    }
    var n = {
        "./index.js": 97
    };
    o.keys = function() {
        return Object.keys(n)
    }, o.resolve = r, e.exports = o, o.id = 26
}, function(e, t, a) {
    var o = Math.floor;
    (function(t) {
        function r(e, t, o) {
            var r = a(4)('algoliasearch'),
                s = a(2),
                l = a(8),
                d = a(6),
                u = 'Usage: algoliasearch(applicationID, apiKey, opts)';
            if (!0 !== o._allowEmptyCredentials && !e) throw new c.AlgoliaSearchError('Please provide an application ID. ' + u);
            if (!0 !== o._allowEmptyCredentials && !t) throw new c.AlgoliaSearchError('Please provide an API key. ' + u);
            this.applicationID = e, this.apiKey = t, this.hosts = {
                read: [],
                write: []
            }, o = o || {};
            var p = o.protocol || 'https:';
            if (this._timeouts = o.timeouts || {
                    connect: 1000,
                    read: 2000,
                    write: 30000
                }, o.timeout && (this._timeouts.connect = this._timeouts.read = this._timeouts.write = o.timeout), /:$/.test(p) || (p += ':'), 'http:' !== o.protocol && 'https:' !== o.protocol) throw new c.AlgoliaSearchError('protocol must be `http:` or `https:` (was `' + o.protocol + '`)');
            if (this._checkAppIdData(), !o.hosts) {
                var m = d(this._shuffleResult, function(t) {
                    return e + '-' + t + '.algolianet.com'
                });
                this.hosts.read = [this.applicationID + '-dsn.algolia.net'].concat(m), this.hosts.write = [this.applicationID + '.algolia.net'].concat(m)
            } else l(o.hosts) ? (this.hosts.read = s(o.hosts), this.hosts.write = s(o.hosts)) : (this.hosts.read = s(o.hosts.read), this.hosts.write = s(o.hosts.write));
            this.hosts.read = d(this.hosts.read, n(p)), this.hosts.write = d(this.hosts.write, n(p)), this.extraHeaders = {}, this.cache = o._cache || {}, this._ua = o._ua, this._useCache = void 0 === o._useCache || o._cache || o._useCache, this._useFallback = void 0 === o.useFallback || o.useFallback, this._setTimeout = o._setTimeout, r('init done, %j', this)
        }

        function n(e) {
            return function(t) {
                return e + '//' + t.toLowerCase()
            }
        }

        function s(e) {
            if (void 0 === Array.prototype.toJSON) return JSON.stringify(e);
            var t = Array.prototype.toJSON;
            delete Array.prototype.toJSON;
            var a = JSON.stringify(e);
            return Array.prototype.toJSON = t, a
        }

        function l(e) {
            for (var t = e.length, a, r; 0 !== t;) r = o(Math.random() * t), t -= 1, a = e[t], e[t] = e[r], e[r] = a;
            return e
        }

        function d(e) {
            var t = {};
            for (var a in e)
                if (Object.prototype.hasOwnProperty.call(e, a)) {
                    var o;
                    o = 'x-algolia-api-key' == a || 'x-algolia-application-id' == a ? '**hidden for security purposes**' : e[a], t[a] = o
                }
            return t
        }
        e.exports = r;
        var c = a(3),
            u = a(36),
            p = a(28),
            m = a(40),
            g = t.env.RESET_APP_DATA_TIMER && parseInt(t.env.RESET_APP_DATA_TIMER, 10) || 120000;
        r.prototype.initIndex = function(e) {
            return new p(this, e)
        }, r.prototype.setExtraHeader = function(e, t) {
            this.extraHeaders[e.toLowerCase()] = t
        }, r.prototype.getExtraHeader = function(e) {
            return this.extraHeaders[e.toLowerCase()]
        }, r.prototype.unsetExtraHeader = function(e) {
            delete this.extraHeaders[e.toLowerCase()]
        }, r.prototype.addAlgoliaAgent = function(e) {
            -1 === this._ua.indexOf(';' + e) && (this._ua += ';' + e)
        }, r.prototype._jsonRequest = function(e) {
            function t(a, u) {
                function v() {
                    return r('retrying request'), p._incrementHostIndex(e.hostType), t(a, u)
                }

                function k() {
                    return r('retrying request with higher timeout'), p._incrementHostIndex(e.hostType), p._incrementTimeoutMultipler(), u.timeouts = p._getTimeoutsForRequest(e.hostType), t(a, u)
                }
                p._checkAppIdData();
                var x = new Date,
                    A;
                if (p._useCache && (A = e.url), p._useCache && b && (A += '_body_' + u.body), p._useCache && l && void 0 !== l[A]) return r('serving response from cache'), p._promise.resolve(JSON.parse(l[A]));
                if (m >= p.hosts[e.hostType].length) return !h || g ? (r('could not get any response'), p._promise.reject(new c.AlgoliaSearchError('Cannot connect to the AlgoliaSearch API. Send an email to support@algolia.com to report and resolve the issue. Application id was: ' + p.applicationID, {
                    debugData: f
                }))) : (r('switching to fallback'), m = 0, u.method = e.fallback.method, u.url = e.fallback.url, u.jsonBody = e.fallback.body, u.jsonBody && (u.body = s(u.jsonBody)), y = p._computeRequestHeaders({
                    additionalUA: n,
                    headers: e.headers
                }), u.timeouts = p._getTimeoutsForRequest(e.hostType), p._setHostIndexByType(0, e.hostType), g = !0, t(p._request.fallback, u));
                var S = p._getHostByType(e.hostType),
                    w = S + u.url,
                    C = {
                        body: u.body,
                        jsonBody: u.jsonBody,
                        method: u.method,
                        headers: y,
                        timeouts: u.timeouts,
                        debug: r
                    };
                return r('method: %s, url: %s, headers: %j, timeouts: %d', C.method, w, C.headers, C.timeouts), a === p._request.fallback && r('using fallback'), a.call(p, w, C).then(function(e) {
                    var t = e && e.body && e.body.message && e.body.status || e.statusCode || e && e.body && 200;
                    r('received response: statusCode: %s, computed statusCode: %d, headers: %j', e.statusCode, t, e.headers);
                    var a = 2 === o(t / 100),
                        n = new Date;
                    if (f.push({
                            currentHost: S,
                            headers: d(y),
                            content: b || null,
                            contentLength: void 0 === b ? null : b.length,
                            method: u.method,
                            timeouts: u.timeouts,
                            url: u.url,
                            startTime: x,
                            endTime: n,
                            duration: n - x,
                            statusCode: t
                        }), a) return p._useCache && l && (l[A] = e.responseText), e.body;
                    var s = 4 !== o(t / 100);
                    if (s) return m += 1, v();
                    r('unrecoverable error');
                    var g = new c.AlgoliaSearchError(e.body && e.body.message, {
                        debugData: f,
                        statusCode: t
                    });
                    return p._promise.reject(g)
                }, function(t) {
                    r('error: %s, stack: %s', t.message, t.stack);
                    var a = new Date;
                    return f.push({
                        currentHost: S,
                        headers: d(y),
                        content: b || null,
                        contentLength: void 0 === b ? null : b.length,
                        method: u.method,
                        timeouts: u.timeouts,
                        url: u.url,
                        startTime: x,
                        endTime: a,
                        duration: a - x
                    }), t instanceof c.AlgoliaSearchError || (t = new c.Unknown(t && t.message, t)), m += 1, t instanceof c.Unknown || t instanceof c.UnparsableJSON || m >= p.hosts[e.hostType].length && (g || !h) ? (t.debugData = f, p._promise.reject(t)) : t instanceof c.RequestTimeout ? k() : v()
                })
            }
            this._checkAppIdData();
            var r = a(4)('algoliasearch:' + e.url),
                n = e.additionalUA || '',
                l = e.cache,
                p = this,
                m = 0,
                g = !1,
                h = p._useFallback && p._request.fallback && e.fallback,
                b, y;
            this.apiKey.length > 500 && e.body !== void 0 && (e.body.params !== void 0 || e.body.requests !== void 0) ? (e.body.apiKey = this.apiKey, y = this._computeRequestHeaders({
                additionalUA: n,
                withApiKey: !1,
                headers: e.headers
            })) : y = this._computeRequestHeaders({
                additionalUA: n,
                headers: e.headers
            }), e.body !== void 0 && (b = s(e.body)), r('request start');
            var f = [],
                v = t(p._request, {
                    url: e.url,
                    method: e.method,
                    body: b,
                    jsonBody: e.body,
                    timeouts: p._getTimeoutsForRequest(e.hostType)
                });
            return 'function' == typeof e.callback ? void v.then(function(t) {
                u(function() {
                    e.callback(null, t)
                }, p._setTimeout || setTimeout)
            }, function(t) {
                u(function() {
                    e.callback(t)
                }, p._setTimeout || setTimeout)
            }) : v
        }, r.prototype._getSearchParams = function(e, t) {
            if (e === void 0 || null === e) return t;
            for (var a in e) null !== a && void 0 !== e[a] && e.hasOwnProperty(a) && (t += '' === t ? '' : '&', t += a + '=' + encodeURIComponent('[object Array]' === Object.prototype.toString.call(e[a]) ? s(e[a]) : e[a]));
            return t
        }, r.prototype._computeRequestHeaders = function(e) {
            var t = a(0),
                o = e.additionalUA ? this._ua + ';' + e.additionalUA : this._ua,
                r = {
                    "x-algolia-agent": o,
                    "x-algolia-application-id": this.applicationID
                };
            return !1 !== e.withApiKey && (r['x-algolia-api-key'] = this.apiKey), this.userToken && (r['x-algolia-usertoken'] = this.userToken), this.securityTags && (r['x-algolia-tagfilters'] = this.securityTags), t(this.extraHeaders, function(e, t) {
                r[t] = e
            }), e.headers && t(e.headers, function(e, t) {
                r[t] = e
            }), r
        }, r.prototype.search = function(e, t, o) {
            var r = a(8),
                n = a(6);
            if (!r(e)) throw new Error('Usage: client.search(arrayOfQueries[, callback])');
            'function' == typeof t ? (o = t, t = {}) : void 0 === t && (t = {});
            var s = this,
                l = {
                    requests: n(e, function(e) {
                        var t = '';
                        return void 0 !== e.query && (t += 'query=' + encodeURIComponent(e.query)), {
                            indexName: e.indexName,
                            params: s._getSearchParams(e.params, t)
                        }
                    })
                },
                d = n(l.requests, function(e, t) {
                    return t + '=' + encodeURIComponent('/1/indexes/' + encodeURIComponent(e.indexName) + '?' + e.params)
                }).join('&'),
                c = '/1/indexes/*/queries';
            return void 0 !== t.strategy && (c += '?strategy=' + t.strategy), this._jsonRequest({
                cache: this.cache,
                method: 'POST',
                url: c,
                body: l,
                hostType: 'read',
                fallback: {
                    method: 'GET',
                    url: '/1/indexes/*',
                    body: {
                        params: d
                    }
                },
                callback: o
            })
        }, r.prototype.setSecurityTags = function(e) {
            if ('[object Array]' === Object.prototype.toString.call(e)) {
                for (var t = [], a = 0; a < e.length; ++a)
                    if ('[object Array]' === Object.prototype.toString.call(e[a])) {
                        for (var o = [], r = 0; r < e[a].length; ++r) o.push(e[a][r]);
                        t.push('(' + o.join(',') + ')')
                    } else t.push(e[a]);
                e = t.join(',')
            }
            this.securityTags = e
        }, r.prototype.setUserToken = function(e) {
            this.userToken = e
        }, r.prototype.clearCache = function() {
            this.cache = {}
        }, r.prototype.setRequestTimeout = function(e) {
            e && (this._timeouts.connect = this._timeouts.read = this._timeouts.write = e)
        }, r.prototype.setTimeouts = function(e) {
            this._timeouts = e
        }, r.prototype.getTimeouts = function() {
            return this._timeouts
        }, r.prototype._getAppIdData = function() {
            var e = m.get(this.applicationID);
            return null !== e && this._cacheAppIdData(e), e
        }, r.prototype._setAppIdData = function(e) {
            return e.lastChange = new Date().getTime(), this._cacheAppIdData(e), m.set(this.applicationID, e)
        }, r.prototype._checkAppIdData = function() {
            var e = this._getAppIdData(),
                t = new Date().getTime();
            return null === e || t - e.lastChange > g ? this._resetInitialAppIdData(e) : e
        }, r.prototype._resetInitialAppIdData = function(e) {
            var t = e || {};
            return t.hostIndexes = {
                read: 0,
                write: 0
            }, t.timeoutMultiplier = 1, t.shuffleResult = t.shuffleResult || l([1, 2, 3]), this._setAppIdData(t)
        }, r.prototype._cacheAppIdData = function(e) {
            this._hostIndexes = e.hostIndexes, this._timeoutMultiplier = e.timeoutMultiplier, this._shuffleResult = e.shuffleResult
        }, r.prototype._partialAppIdDataUpdate = function(e) {
            var t = a(0),
                o = this._getAppIdData();
            return t(e, function(e, t) {
                o[t] = e
            }), this._setAppIdData(o)
        }, r.prototype._getHostByType = function(e) {
            return this.hosts[e][this._getHostIndexByType(e)]
        }, r.prototype._getTimeoutMultiplier = function() {
            return this._timeoutMultiplier
        }, r.prototype._getHostIndexByType = function(e) {
            return this._hostIndexes[e]
        }, r.prototype._setHostIndexByType = function(e, t) {
            var o = a(2),
                r = o(this._hostIndexes);
            return r[t] = e, this._partialAppIdDataUpdate({
                hostIndexes: r
            }), e
        }, r.prototype._incrementHostIndex = function(e) {
            return this._setHostIndexByType((this._getHostIndexByType(e) + 1) % this.hosts[e].length, e)
        }, r.prototype._incrementTimeoutMultipler = function() {
            var e = Math.max(this._timeoutMultiplier + 1, 4);
            return this._partialAppIdDataUpdate({
                timeoutMultiplier: e
            })
        }, r.prototype._getTimeoutsForRequest = function(e) {
            return {
                connect: this._timeouts.connect * this._timeoutMultiplier,
                complete: this._timeouts[e] * this._timeoutMultiplier
            }
        }
    }).call(t, a(9))
}, function(e, t, a) {
    function o(e, t) {
        this.indexName = t, this.as = e, this.typeAheadArgs = null, this.typeAheadValueOption = null, this.cache = {}
    }
    var r = a(10),
        n = a(34),
        s = a(35);
    e.exports = o, o.prototype.clearCache = function() {
        this.cache = {}
    }, o.prototype.search = r('query'), o.prototype.similarSearch = r('similarQuery'), o.prototype.browse = function(e, t, o) {
        var r = a(37),
            n = this,
            s, l;
        0 === arguments.length || 1 === arguments.length && 'function' == typeof arguments[0] ? (s = 0, o = arguments[0], e = void 0) : 'number' == typeof arguments[0] ? (s = arguments[0], 'number' == typeof arguments[1] ? l = arguments[1] : 'function' == typeof arguments[1] && (o = arguments[1], l = void 0), e = void 0, t = void 0) : 'object' == typeof arguments[0] ? ('function' == typeof arguments[1] && (o = arguments[1]), t = arguments[0], e = void 0) : 'string' == typeof arguments[0] && 'function' == typeof arguments[1] && (o = arguments[1], t = void 0), t = r({}, t || {}, {
            page: s,
            hitsPerPage: l,
            query: e
        });
        var d = this.as._getSearchParams(t, '');
        return this.as._jsonRequest({
            method: 'POST',
            url: '/1/indexes/' + encodeURIComponent(n.indexName) + '/browse',
            body: {
                params: d
            },
            hostType: 'read',
            callback: o
        })
    }, o.prototype.browseFrom = function(e, t) {
        return this.as._jsonRequest({
            method: 'POST',
            url: '/1/indexes/' + encodeURIComponent(this.indexName) + '/browse',
            body: {
                cursor: e
            },
            hostType: 'read',
            callback: t
        })
    }, o.prototype.searchForFacetValues = function(e, t) {
        var o = a(2),
            r = a(38);
        if (e.facetName === void 0 || e.facetQuery === void 0) throw new Error('Usage: index.searchForFacetValues({facetName, facetQuery, ...params}[, callback])');
        var n = e.facetName,
            s = r(o(e), function(e) {
                return 'facetName' === e
            }),
            l = this.as._getSearchParams(s, '');
        return this.as._jsonRequest({
            method: 'POST',
            url: '/1/indexes/' + encodeURIComponent(this.indexName) + '/facets/' + encodeURIComponent(n) + '/query',
            hostType: 'read',
            body: {
                params: l
            },
            callback: t
        })
    }, o.prototype.searchFacet = n(function(e, t) {
        return this.searchForFacetValues(e, t)
    }, s('index.searchFacet(params[, callback])', 'index.searchForFacetValues(params[, callback])')), o.prototype._search = function(e, t, a, o) {
        return this.as._jsonRequest({
            cache: this.cache,
            method: 'POST',
            url: t || '/1/indexes/' + encodeURIComponent(this.indexName) + '/query',
            body: {
                params: e
            },
            hostType: 'read',
            fallback: {
                method: 'GET',
                url: '/1/indexes/' + encodeURIComponent(this.indexName),
                body: {
                    params: e
                }
            },
            callback: a,
            additionalUA: o
        })
    }, o.prototype.getObject = function(e, t, a) {
        var o = this;
        (1 === arguments.length || 'function' == typeof t) && (a = t, t = void 0);
        var r = '';
        if (t !== void 0) {
            r = '?attributes=';
            for (var n = 0; n < t.length; ++n) 0 !== n && (r += ','), r += t[n]
        }
        return this.as._jsonRequest({
            method: 'GET',
            url: '/1/indexes/' + encodeURIComponent(o.indexName) + '/' + encodeURIComponent(e) + r,
            hostType: 'read',
            callback: a
        })
    }, o.prototype.getObjects = function(e, t, o) {
        var r = a(8),
            n = a(6);
        if (!r(e)) throw new Error('Usage: index.getObjects(arrayOfObjectIDs[, callback])');
        var s = this;
        (1 === arguments.length || 'function' == typeof t) && (o = t, t = void 0);
        var l = {
            requests: n(e, function(e) {
                var a = {
                    indexName: s.indexName,
                    objectID: e
                };
                return t && (a.attributesToRetrieve = t.join(',')), a
            })
        };
        return this.as._jsonRequest({
            method: 'POST',
            url: '/1/indexes/*/objects',
            hostType: 'read',
            body: l,
            callback: o
        })
    }, o.prototype.as = null, o.prototype.indexName = null, o.prototype.typeAheadArgs = null, o.prototype.typeAheadValueOption = null
}, function(e, t, a) {
    'use strict';
    var o = a(27),
        r = a(30);
    e.exports = r(o, '(lite) ')
}, function(e, t, a) {
    'use strict';
    var o = a(102),
        r = o.Promise || a(101).Promise;
    e.exports = function(e, t) {
        function n(e, t, o) {
            var r = a(2),
                l = a(31);
            return o = r(o || {}), void 0 === o.protocol && (o.protocol = l()), o._ua = o._ua || n.ua, new s(e, t, o)
        }

        function s() {
            e.apply(this, arguments)
        }
        var l = a(11),
            d = a(3),
            c = a(32),
            u = a(33),
            p = a(39);
        t = t || '', !1, n.version = a(41), n.ua = 'Algolia for vanilla JavaScript ' + t + n.version, n.initPlaces = p(n), o.__algolia = {
            debug: a(4),
            algoliasearch: n
        };
        var m = {
            hasXMLHttpRequest: 'XMLHttpRequest' in o,
            hasXDomainRequest: 'XDomainRequest' in o
        };
        return m.hasXMLHttpRequest && (m.cors = 'withCredentials' in new XMLHttpRequest), l(s, e), s.prototype._request = function(e, t) {
            return new r(function(a, o) {
                function r() {
                    g = !0, l.abort(), o(new d.RequestTimeout)
                }

                function n() {
                    u = !0, clearTimeout(p), p = setTimeout(r, t.timeouts.complete)
                }
                if (!m.cors && !m.hasXDomainRequest) return void o(new d.Network('CORS not supported'));
                e = c(e, t.headers);
                var s = t.body,
                    l = m.cors ? new XMLHttpRequest : new XDomainRequest,
                    u = !1,
                    p, g;
                p = setTimeout(r, t.timeouts.connect), l.onprogress = function() {
                    u || n()
                }, 'onreadystatechange' in l && (l.onreadystatechange = function() {
                    !u && 1 < l.readyState && n()
                }), l.onload = function() {
                    if (!g) {
                        clearTimeout(p);
                        var e;
                        try {
                            e = {
                                body: JSON.parse(l.responseText),
                                responseText: l.responseText,
                                statusCode: l.status,
                                headers: l.getAllResponseHeaders && l.getAllResponseHeaders() || {}
                            }
                        } catch (t) {
                            e = new d.UnparsableJSON({
                                more: l.responseText
                            })
                        }
                        e instanceof d.UnparsableJSON ? o(e) : a(e)
                    }
                }, l.onerror = function(e) {
                    g || (clearTimeout(p), o(new d.Network({
                        more: e
                    })))
                }, l instanceof XMLHttpRequest ? l.open(t.method, e, !0) : l.open(t.method, e), m.cors && (s && ('POST' === t.method ? l.setRequestHeader('content-type', 'application/x-www-form-urlencoded') : l.setRequestHeader('content-type', 'application/json')), l.setRequestHeader('accept', 'application/json')), l.send(s)
            })
        }, s.prototype._request.fallback = function(e, t) {
            return e = c(e, t.headers), new r(function(a, o) {
                u(e, t, function(e, t) {
                    return e ? void o(e) : void a(t)
                })
            })
        }, s.prototype._promise = {
            reject: function(e) {
                return r.reject(e)
            },
            resolve: function(e) {
                return r.resolve(e)
            },
            delay: function(e) {
                return new r(function(t) {
                    setTimeout(t, e)
                })
            }
        }, n
    }
}, function(e) {
    'use strict';
    e.exports = function() {
        var e = window.document.location.protocol;
        return 'http:' !== e && 'https:' !== e && (e = 'http:'), e
    }
}, function(e, t, a) {
    'use strict';
    e.exports = function(e, t) {
        return e += /\?/.test(e) ? '&' : '?', e + o(t)
    };
    var o = a(106)
}, function(e, t, a) {
    'use strict';
    e.exports = function(e, t, a) {
        function n() {
            t.debug('JSONP: success');
            g || c || (g = !0, !d && (t.debug('JSONP: Fail. Script loaded but did not call the callback'), s(), a(new o.JSONPScriptFail)))
        }

        function s() {
            clearTimeout(h), p.onload = null, p.onreadystatechange = null, p.onerror = null, u.removeChild(p)
        }

        function l() {
            try {
                delete window[m], delete window[m + '_loaded']
            } catch (t) {
                window[m] = window[m + '_loaded'] = void 0
            }
        }
        if ('GET' !== t.method) return void a(new Error('Method ' + t.method + ' ' + e + ' is not supported by JSONP.'));
        t.debug('JSONP: start');
        var d = !1,
            c = !1;
        r += 1;
        var u = document.getElementsByTagName('head')[0],
            p = document.createElement('script'),
            m = 'algoliaJSONP_' + r,
            g = !1;
        window[m] = function(e) {
            return l(), c ? void t.debug('JSONP: Late answer, ignoring') : void(d = !0, s(), a(null, {
                body: e
            }))
        }, e += '&callback=' + m, t.jsonBody && t.jsonBody.params && (e += '&' + t.jsonBody.params);
        var h = setTimeout(function() {
            t.debug('JSONP: Script timeout'), c = !0, s(), a(new o.RequestTimeout)
        }, t.timeouts.complete);
        p.onreadystatechange = function() {
            ('loaded' === this.readyState || 'complete' === this.readyState) && n()
        }, p.onload = n, p.onerror = function() {
            t.debug('JSONP: Script error');
            g || c || (s(), a(new o.JSONPScriptError))
        }, p.async = !0, p.defer = !0, p.src = e, u.appendChild(p)
    };
    var o = a(3),
        r = 0
}, function(e) {
    e.exports = function(e, t) {
        var a = !1;
        return function() {
            return a || (console.warn(t), a = !0), e.apply(this, arguments)
        }
    }
}, function(e) {
    e.exports = function(e, t) {
        var a = e.toLowerCase().replace(/[\.\(\)]/g, '');
        return 'algoliasearch: `' + e + '` was replaced by `' + t + '`. Please see https://github.com/algolia/algoliasearch-client-javascript/wiki/Deprecated#' + a
    }
}, function(e) {
    e.exports = function(e, t) {
        t(e, 0)
    }
}, function(e, t, a) {
    var o = a(0);
    e.exports = function e(t) {
        var a = Array.prototype.slice.call(arguments);
        return o(a, function(a) {
            for (var o in a) a.hasOwnProperty(o) && ('object' == typeof t[o] && 'object' == typeof a[o] ? t[o] = e({}, t[o], a[o]) : void 0 !== a[o] && (t[o] = a[o]))
        }), t
    }
}, function(e, t, a) {
    e.exports = function(e, t) {
        var o = a(104),
            r = a(0),
            n = {};
        return r(o(e), function(a) {
            !0 !== t(a) && (n[a] = e[a])
        }), n
    }
}, function(e, t, a) {
    e.exports = function(e) {
        return function(t, r, n) {
            var s = a(2);
            n = n && s(n) || {}, n.hosts = n.hosts || ['places-dsn.algolia.net', 'places-1.algolianet.com', 'places-2.algolianet.com', 'places-3.algolianet.com'], (0 === arguments.length || 'object' == typeof t || void 0 === t) && (t = '', r = '', n._allowEmptyCredentials = !0);
            var l = e(t, r, n),
                d = l.initIndex('places');
            return d.search = o('query', '/1/places/query'), d.getObject = function(e, t) {
                return this.as._jsonRequest({
                    method: 'GET',
                    url: '/1/places/' + encodeURIComponent(e),
                    hostType: 'read',
                    callback: t
                })
            }, d
        }
    };
    var o = a(10)
}, function(e, t, a) {
    (function(t) {
        function o(t, a) {
            return l('localStorage failed with', a), s(), u = c, u.get(t)
        }

        function r(e, t) {
            return 1 === arguments.length ? u.get(e) : u.set(e, t)
        }

        function n() {
            try {
                return 'localStorage' in t && null !== t.localStorage && (t.localStorage[d] || t.localStorage.setItem(d, JSON.stringify({})), !0)
            } catch (e) {
                return !1
            }
        }

        function s() {
            try {
                t.localStorage.removeItem(d)
            } catch (e) {}
        }
        var l = a(4)('algoliasearch:src/hostIndexState.js'),
            d = 'algoliasearch-client-js',
            c = {
                state: {},
                set: function(e, t) {
                    return this.state[e] = t, this.state[e]
                },
                get: function(e) {
                    return this.state[e] || null
                }
            },
            u;
        u = n() ? {
            set: function(a, e) {
                c.set(a, e);
                try {
                    var r = JSON.parse(t.localStorage[d]);
                    return r[a] = e, t.localStorage[d] = JSON.stringify(r), r[a]
                } catch (t) {
                    return o(a, t)
                }
            },
            get: function(a) {
                try {
                    return JSON.parse(t.localStorage[d])[a] || null
                } catch (t) {
                    return o(a, t)
                }
            }
        } : c, e.exports = {
            get: r,
            set: r,
            supportsLocalStorage: n
        }
    }).call(t, a(5))
}, function(e) {
    'use strict';
    e.exports = '3.24.12'
}, function(t, a, e) {
    var o = Math.max,
        r = Math.min,
        s = Math.PI;
    (function(n) {
        var l = {
                scope: {}
            },
            d, c, u;
        l.defineProperty = 'function' == typeof Object.defineProperties ? Object.defineProperty : function(t, e, a) {
            if (a.get || a.set) throw new TypeError('ES3 does not support getters and setters.');
            t != Array.prototype && t != Object.prototype && (t[e] = a.value)
        }, l.getGlobal = function(t) {
            return 'undefined' != typeof window && window === t ? t : 'undefined' != typeof n && null != n ? n : t
        }, l.global = l.getGlobal(this), l.SYMBOL_PREFIX = 'jscomp_symbol_', l.initSymbol = function() {
            l.initSymbol = function() {}, l.global.Symbol || (l.global.Symbol = l.Symbol)
        }, l.symbolCounter_ = 0, l.Symbol = function(t) {
            return l.SYMBOL_PREFIX + (t || '') + l.symbolCounter_++
        }, l.initSymbolIterator = function() {
            l.initSymbol();
            var t = l.global.Symbol.iterator;
            t || (t = l.global.Symbol.iterator = l.global.Symbol('iterator')), 'function' != typeof Array.prototype[t] && l.defineProperty(Array.prototype, t, {
                configurable: !0,
                writable: !0,
                value: function() {
                    return l.arrayIterator(this)
                }
            }), l.initSymbolIterator = function() {}
        }, l.arrayIterator = function(t) {
            var e = 0;
            return l.iteratorPrototype(function() {
                return e < t.length ? {
                    done: !1,
                    value: t[e++]
                } : {
                    done: !0
                }
            })
        }, l.iteratorPrototype = function(t) {
            return l.initSymbolIterator(), t = {
                next: t
            }, t[l.global.Symbol.iterator] = function() {
                return this
            }, t
        }, l.array = l.array || {}, l.iteratorFromArray = function(t, e) {
            l.initSymbolIterator(), t instanceof String && (t += '');
            var a = 0,
                o = {
                    next: function() {
                        if (a < t.length) {
                            var r = a++;
                            return {
                                value: e(r, t[r]),
                                done: !1
                            }
                        }
                        return o.next = function() {
                            return {
                                done: !0,
                                value: void 0
                            }
                        }, o.next()
                    }
                };
            return o[Symbol.iterator] = function() {
                return o
            }, o
        }, l.polyfill = function(t, e, a, o) {
            if (e) {
                for (a = l.global, t = t.split('.'), o = 0; o < t.length - 1; o++) {
                    var n = t[o];
                    n in a || (a[n] = {}), a = a[n]
                }
                t = t[t.length - 1], o = a[t], e = e(o), e != o && null != e && l.defineProperty(a, t, {
                    configurable: !0,
                    writable: !0,
                    value: e
                })
            }
        }, l.polyfill('Array.prototype.keys', function(t) {
            return t ? t : function() {
                return l.iteratorFromArray(this, function(t) {
                    return t
                })
            }
        }, 'es6-impl', 'es3');
        var e = this;
        (function(o, e) {
            c = [], d = e, u = 'function' == typeof d ? d.apply(a, c) : d, !(u !== void 0 && (t.exports = u))
        })(this, function() {
            function t(e) {
                if (!W.col(e)) try {
                    return document.querySelectorAll(e)
                } catch (e) {}
            }

            function g(e, t) {
                for (var a = e.length, o = 2 <= arguments.length ? arguments[1] : void 0, r = [], s = 0; s < a; s++)
                    if (s in e) {
                        var n = e[s];
                        t.call(o, n, s, e) && r.push(n)
                    }
                return r
            }

            function n(e) {
                return e.reduce(function(e, t) {
                    return e.concat(W.arr(t) ? n(t) : t)
                }, [])
            }

            function l(e) {
                return W.arr(e) ? e : (W.str(e) && (e = t(e) || e), e instanceof NodeList || e instanceof HTMLCollection ? [].slice.call(e) : [e])
            }

            function p(e, t) {
                return e.some(function(e) {
                    return e === t
                })
            }

            function u(e) {
                var t = {},
                    a;
                for (a in e) t[a] = e[a];
                return t
            }

            function m(e, t) {
                var a = u(e),
                    o;
                for (o in e) a[o] = t.hasOwnProperty(o) ? t[o] : e[o];
                return a
            }

            function x(e, t) {
                var a = u(e),
                    o;
                for (o in t) a[o] = W.und(e[o]) ? t[o] : e[o];
                return a
            }

            function k(e) {
                e = e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, function(e, t, a, o) {
                    return t + t + a + a + o + o
                });
                var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);
                e = parseInt(t[1], 16);
                var a = parseInt(t[2], 16),
                    t = parseInt(t[3], 16);
                return 'rgba(' + e + ',' + a + ',' + t + ',1)'
            }

            function w(e) {
                function t(e, t, a) {
                    return 0 > a && (a += 1), 1 < a && --a, a < 1 / 6 ? e + 6 * (t - e) * a : .5 > a ? t : a < 2 / 3 ? e + 6 * ((t - e) * (2 / 3 - a)) : e
                }
                var a = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e) || /hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e);
                e = parseInt(a[1]) / 360;
                var o = parseInt(a[2]) / 100,
                    r = parseInt(a[3]) / 100,
                    a = a[4] || 1;
                if (0 == o) r = o = e = r;
                else {
                    var s = .5 > r ? r * (1 + o) : r + o - r * o,
                        n = 2 * r - s,
                        r = t(n, s, e + 1 / 3),
                        o = t(n, s, e);
                    e = t(n, s, e - 1 / 3)
                }
                return 'rgba(' + 255 * r + ',' + 255 * o + ',' + 255 * e + ',' + a + ')'
            }

            function C(e) {
                if (e = /([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e)) return e[2]
            }

            function y(e) {
                return -1 < e.indexOf('translate') || 'perspective' === e ? 'px' : -1 < e.indexOf('rotate') || -1 < e.indexOf('skew') ? 'deg' : void 0
            }

            function T(e, t) {
                return W.fnc(e) ? e(t.target, t.id, t.total) : e
            }

            function f(e, t) {
                if (t in e.style) return getComputedStyle(e).getPropertyValue(t.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()) || '0'
            }

            function E(e, t) {
                return W.dom(e) && p(S, t) ? 'transform' : W.dom(e) && (e.getAttribute(t) || W.svg(e) && e[t]) ? 'attribute' : W.dom(e) && 'transform' !== t && f(e, t) ? 'css' : null == e[t] ? void 0 : 'object'
            }

            function d(e, t) {
                var o = y(t),
                    o = -1 < t.indexOf('scale') ? 1 : 0 + o;
                if (e = e.style.transform, !e) return o;
                for (var r = [], s = [], l = [], n = /(\w+)\((.+?)\)/g; r = n.exec(e);) s.push(r[1]), l.push(r[2]);
                return e = g(l, function(e, a) {
                    return s[a] === t
                }), e.length ? e[0] : o
            }

            function j(e, t) {
                switch (E(e, t)) {
                    case 'transform':
                        return d(e, t);
                    case 'css':
                        return f(e, t);
                    case 'attribute':
                        return e.getAttribute(t);
                }
                return e[t] || 0
            }

            function _(e, t) {
                var a = /^(\*=|\+=|-=)/.exec(e);
                if (!a) return e;
                var o = C(e) || 0;
                switch (t = parseFloat(t), e = parseFloat(e.replace(a[0], '')), a[0][0]) {
                    case '+':
                        return t + e + o;
                    case '-':
                        return t - e + o;
                    case '*':
                        return t * e + o;
                }
            }

            function L(e, t) {
                return Math.sqrt(q(t.x - e.x, 2) + q(t.y - e.y, 2))
            }

            function b(e) {
                e = e.points;
                for (var t = 0, a = 0, o, r; a < e.numberOfItems; a++) r = e.getItem(a), 0 < a && (t += L(o, r)), o = r;
                return t
            }

            function D(e) {
                if (e.getTotalLength) return e.getTotalLength();
                switch (e.tagName.toLowerCase()) {
                    case 'circle':
                        return 2 * s * e.getAttribute('r');
                    case 'rect':
                        return 2 * e.getAttribute('width') + 2 * e.getAttribute('height');
                    case 'line':
                        return L({
                            x: e.getAttribute('x1'),
                            y: e.getAttribute('y1')
                        }, {
                            x: e.getAttribute('x2'),
                            y: e.getAttribute('y2')
                        });
                    case 'polyline':
                        return b(e);
                    case 'polygon':
                        var t = e.points;
                        return b(e) + L(t.getItem(t.numberOfItems - 1), t.getItem(0));
                }
            }

            function a(e, t) {
                function a(a) {
                    return a = void 0 === a ? 0 : a, e.el.getPointAtLength(1 <= t + a ? t + a : 0)
                }
                var o = a(),
                    r = a(-1),
                    l = a(1);
                switch (e.property) {
                    case 'x':
                        return o.x;
                    case 'y':
                        return o.y;
                    case 'angle':
                        return 180 * Math.atan2(l.y - r.y, l.x - r.x) / s;
                }
            }

            function I(e, t) {
                var a = /-?\d*\.?\d+/g,
                    o;
                if (o = W.pth(e) ? e.totalLength : e, !W.col(o)) r = (r = C(o)) ? o.substr(0, o.length - r.length) : o, o = t && !/\s/g.test(o) ? r + t : r;
                else if (W.rgb(o)) {
                    var r = /rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(o);
                    o = r ? 'rgba(' + r[1] + ',1)' : o
                } else o = W.hex(o) ? k(o) : W.hsl(o) ? w(o) : void 0;
                return o += '', {
                    original: o,
                    numbers: o.match(a) ? o.match(a).map(Number) : [0],
                    strings: W.str(e) || t ? o.split(a) : []
                }
            }

            function O(e) {
                return e = e ? n(W.arr(e) ? e.map(l) : l(e)) : [], g(e, function(e, t, a) {
                    return a.indexOf(e) === t
                })
            }

            function P(e) {
                var t = O(e);
                return t.map(function(e, o) {
                    return {
                        target: e,
                        id: o,
                        total: t.length
                    }
                })
            }

            function c(e, t) {
                var o = u(t);
                if (W.arr(e)) {
                    var r = e.length;
                    2 !== r || W.obj(e[0]) ? W.fnc(t.duration) || (o.duration = t.duration / r) : e = {
                        value: e
                    }
                }
                return l(e).map(function(e, o) {
                    return o = o ? 0 : t.delay, e = W.obj(e) && !W.pth(e) ? e : {
                        value: e
                    }, W.und(e.delay) && (e.delay = o), e
                }).map(function(e) {
                    return x(e, o)
                })
            }

            function M(e, t) {
                var a = {},
                    o;
                for (o in e) {
                    var r = T(e[o], t);
                    W.arr(r) && (r = r.map(function(e) {
                        return T(e, t)
                    }), 1 === r.length && (r = r[0])), a[o] = r
                }
                return a.duration = parseFloat(a.duration), a.delay = parseFloat(a.delay), a
            }

            function N(e) {
                return W.arr(e) ? h.apply(this, e) : A[e]
            }

            function F(t, a) {
                var n;
                return t.tweens.map(function(s) {
                    s = M(s, a);
                    var l = s.value,
                        d = j(a.target, t.name),
                        e = n ? n.to.original : d,
                        e = W.arr(l) ? l[0] : e,
                        c = _(W.arr(l) ? l[1] : l, e),
                        d = C(c) || C(e) || C(d);
                    return s.from = I(e, d), s.to = I(c, d), s.start = n ? n.end : t.offset, s.end = s.start + s.delay + s.duration, s.easing = N(s.easing), s.elasticity = (1E3 - r(o(s.elasticity, 1), 999)) / 1E3, s.isPath = W.pth(l), s.isColor = W.col(s.from.original), s.isColor && (s.round = 1), n = s
                })
            }

            function U(e, t) {
                return g(n(e.map(function(e) {
                    return t.map(function(t) {
                        var o = E(e.target, t.name);
                        if (o) {
                            var r = F(t, e);
                            t = {
                                type: o,
                                property: t.name,
                                animatable: e,
                                tweens: r,
                                duration: r[r.length - 1].end,
                                delay: r[0].delay
                            }
                        } else t = void 0;
                        return t
                    })
                })), function(e) {
                    return !W.und(e)
                })
            }

            function K(e, t, a, n) {
                var s = 'delay' === e;
                return t.length ? (s ? r : o).apply(Math, t.map(function(t) {
                    return t[e]
                })) : s ? n.delay : a.offset + n.delay + n.duration
            }

            function R(t) {
                var o = m(G, t),
                    r = m(V, t),
                    n = P(t.targets),
                    s = [],
                    l = x(o, r),
                    e;
                for (e in t) l.hasOwnProperty(e) || 'targets' === e || s.push({
                    name: e,
                    offset: l.offset,
                    tweens: c(t[e], r)
                });
                return t = U(n, s), x(o, {
                    children: [],
                    animatables: n,
                    animations: t,
                    duration: K('duration', t, o, r),
                    delay: K('delay', t, o, r)
                })
            }

            function z(n) {
                function s() {
                    return window.Promise && new Promise(function(e) {
                        return l = e
                    })
                }

                function c(e) {
                    return S.reversed ? S.duration - e : e
                }

                function d(s) {
                    for (var u = 0, y = {}, c = S.animations, d = c.length; u < d;) {
                        var v = c[u],
                            e = v.animatable,
                            k = v.tweens,
                            h = k.length - 1,
                            n = k[h];
                        h && (n = g(k, function(e) {
                            return s < e.end
                        })[0] || n);
                        for (var k = r(o(s - n.start - n.delay, 0), n.duration) / n.duration, l = isNaN(k) ? 1 : n.easing(k, n.elasticity), k = n.to.strings, A = n.round, h = [], p = void 0, p = n.to.numbers.length, m = 0; m < p; m++) {
                            var t = void 0,
                                t = n.to.numbers[m],
                                x = n.from.numbers[m],
                                t = n.isPath ? a(n.value, l * t) : x + l * (t - x);
                            A && (n.isColor && 2 < m || (t = Math.round(t * A) / A)), h.push(t)
                        }
                        if (n = k.length)
                            for (p = k[0], l = 0; l < n; l++) A = k[l + 1], m = h[l], isNaN(m) || (p = A ? p + (m + A) : p + (m + ' '));
                        else p = h[0];
                        Y[v.type](e.target, v.property, p, y, e.id), v.currentValue = p, u++
                    }
                    if (u = Object.keys(y).length)
                        for (c = 0; c < u; c++) J || (J = f(document.body, 'transform') ? 'transform' : '-webkit-transform'), S.animatables[c].target.style[J] = y[c].join(' ');
                    S.currentTime = s, S.progress = 100 * (s / S.duration)
                }

                function b(e) {
                    S[e] && S[e](S)
                }

                function y() {
                    S.remaining && !0 !== S.remaining && S.remaining--
                }

                function e(e) {
                    var t = S.duration,
                        a = S.offset,
                        o = a + S.delay,
                        n = S.currentTime,
                        r = S.reversed,
                        g = c(e);
                    if (S.children.length) {
                        var f = S.children,
                            u = f.length;
                        if (g >= S.currentTime)
                            for (var v = 0; v < u; v++) f[v].seek(g);
                        else
                            for (; u--;) f[u].seek(g)
                    }(g >= o || !t) && (S.began || (S.began = !0, b('begin')), b('run')), g > a && g < t ? d(g) : (g <= a && 0 !== n && (d(0), r && y()), g >= t && n !== t || !t) && (d(t), r || y()), b('update'), e >= t && (S.remaining ? (h = m, 'alternate' === S.direction && (S.reversed = !S.reversed)) : (S.pause(), S.completed || (S.completed = !0, b('complete'), 'Promise' in window && (l(), p = s()))), A = 0)
                }
                n = void 0 === n ? {} : n;
                var A = 0,
                    l = null,
                    p = s(),
                    S = R(n),
                    m, h;
                return S.reset = function() {
                    var e = S.direction,
                        t = S.loop;
                    for (S.currentTime = 0, S.progress = 0, S.paused = !0, S.began = !1, S.completed = !1, S.reversed = 'reverse' === e, S.remaining = 'alternate' === e && 1 === t ? 2 : t, d(0), e = S.children.length; e--;) S.children[e].reset()
                }, S.tick = function(t) {
                    m = t, h || (h = m), e((A + m - h) * z.speed)
                }, S.seek = function(t) {
                    e(c(t))
                }, S.pause = function() {
                    var e = X.indexOf(S); - 1 < e && X.splice(e, 1), S.paused = !0
                }, S.play = function() {
                    S.paused && (S.paused = !1, h = 0, A = c(S.currentTime), X.push(S), v || B())
                }, S.reverse = function() {
                    S.reversed = !S.reversed, h = 0, A = c(S.currentTime)
                }, S.restart = function() {
                    S.pause(), S.reset(), S.play()
                }, S.finished = p, S.reset(), S.autoplay && S.play(), S
            }
            var q = Math.pow,
                G = {
                    update: void 0,
                    begin: void 0,
                    run: void 0,
                    complete: void 0,
                    loop: 1,
                    direction: 'normal',
                    autoplay: !0,
                    offset: 0
                },
                V = {
                    duration: 1E3,
                    delay: 0,
                    easing: 'easeOutElastic',
                    elasticity: 500,
                    round: 0
                },
                S = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skewX', 'skewY', 'perspective'],
                W = {
                    arr: function(e) {
                        return Array.isArray(e)
                    },
                    obj: function(e) {
                        return -1 < Object.prototype.toString.call(e).indexOf('Object')
                    },
                    pth: function(e) {
                        return W.obj(e) && e.hasOwnProperty('totalLength')
                    },
                    svg: function(e) {
                        return e instanceof SVGElement
                    },
                    dom: function(e) {
                        return e.nodeType || W.svg(e)
                    },
                    str: function(e) {
                        return 'string' == typeof e
                    },
                    fnc: function(e) {
                        return 'function' == typeof e
                    },
                    und: function(e) {
                        return 'undefined' == typeof e
                    },
                    hex: function(e) {
                        return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)
                    },
                    rgb: function(e) {
                        return /^rgb/.test(e)
                    },
                    hsl: function(e) {
                        return /^hsl/.test(e)
                    },
                    col: function(e) {
                        return W.hex(e) || W.rgb(e) || W.hsl(e)
                    }
                },
                h = function() {
                    function t(e, t, o) {
                        return (((1 - 3 * o + 3 * t) * e + (3 * o - 6 * t)) * e + 3 * t) * e
                    }
                    return function(a, o, r, s) {
                        if (0 <= a && 1 >= a && 0 <= r && 1 >= r) {
                            var d = new Float32Array(11);
                            if (a !== o || r !== s)
                                for (var e = 0; 11 > e; ++e) d[e] = t(.1 * e, a, r);
                            return function(e) {
                                if (a === o && r === s) return e;
                                if (0 === e) return 0;
                                if (1 === e) return 1;
                                for (var c = 0, u = 1; 10 !== u && d[u] <= e; ++u) c += .1;
                                --u;
                                var u = c + .1 * ((e - d[u]) / (d[u + 1] - d[u])),
                                    l = 3 * (1 - 3 * r + 3 * a) * u * u + 2 * (3 * r - 6 * a) * u + 3 * a;
                                if (.001 <= l) {
                                    for (c = 0; 4 > c && (l = 3 * (1 - 3 * r + 3 * a) * u * u + 2 * (3 * r - 6 * a) * u + 3 * a, 0 != l); ++c) var n = t(u, a, r) - e,
                                        u = u - n / l;
                                    e = u
                                } else if (0 == l) e = u;
                                else {
                                    var u = c,
                                        c = c + .1,
                                        p = 0;
                                    do n = u + (c - u) / 2, l = t(n, a, r) - e, 0 < l ? c = n : u = n; while (1e-7 < Math.abs(l) && 10 > ++p);
                                    e = n
                                }
                                return t(e, o, s)
                            }
                        }
                    }
                }(),
                A = function() {
                    function t(e, t) {
                        return 0 === e || 1 === e ? e : -q(2, 10 * (e - 1)) * Math.sin(2 * (e - 1 - 1.5707963267948966 * (t / (2 * s))) * s / t)
                    }
                    var o = ['Quad', 'Cubic', 'Quart', 'Quint', 'Sine', 'Expo', 'Circ', 'Back', 'Elastic'],
                        a = {
                            In: [
                                [0.55, 0.085, 0.68, 0.53],
                                [0.55, 0.055, 0.675, 0.19],
                                [0.895, 0.03, 0.685, 0.22],
                                [0.755, 0.05, 0.855, 0.06],
                                [0.47, 0, 0.745, 0.715],
                                [0.95, 0.05, 0.795, 0.035],
                                [0.6, 0.04, 0.98, 0.335],
                                [0.6, -0.28, 0.735, 0.045], t
                            ],
                            Out: [
                                [0.25, 0.46, 0.45, 0.94],
                                [0.215, 0.61, 0.355, 1],
                                [0.165, 0.84, 0.44, 1],
                                [0.23, 1, 0.32, 1],
                                [0.39, 0.575, 0.565, 1],
                                [0.19, 1, 0.22, 1],
                                [0.075, 0.82, 0.165, 1],
                                [0.175, 0.885, 0.32, 1.275],
                                function(e, a) {
                                    return 1 - t(1 - e, a)
                                }
                            ],
                            InOut: [
                                [0.455, 0.03, 0.515, 0.955],
                                [0.645, 0.045, 0.355, 1],
                                [0.77, 0, 0.175, 1],
                                [0.86, 0, 0.07, 1],
                                [0.445, 0.05, 0.55, 0.95],
                                [1, 0, 0, 1],
                                [0.785, 0.135, 0.15, 0.86],
                                [0.68, -0.55, 0.265, 1.55],
                                function(e, a) {
                                    return .5 > e ? t(2 * e, a) / 2 : 1 - t(-2 * e + 2, a) / 2
                                }
                            ]
                        },
                        r = {
                            linear: h(.25, .25, .75, .75)
                        },
                        n = {},
                        l;
                    for (l in a) n.type = l, a[n.type].forEach(function(t) {
                        return function(a, n) {
                            r['ease' + t.type + o[n]] = W.fnc(a) ? a : h.apply(e, a)
                        }
                    }(n)), n = {
                        type: n.type
                    };
                    return r
                }(),
                Y = {
                    css: function(e, t, a) {
                        return e.style[t] = a
                    },
                    attribute: function(e, t, a) {
                        return e.setAttribute(t, a)
                    },
                    object: function(e, t, a) {
                        return e[t] = a
                    },
                    transform: function(e, t, a, o, r) {
                        o[r] || (o[r] = []), o[r].push(t + '(' + a + ')')
                    }
                },
                X = [],
                v = 0,
                B = function() {
                    function e() {
                        v = requestAnimationFrame(t)
                    }

                    function t(t) {
                        var a = X.length;
                        if (a) {
                            for (var o = 0; o < a;) X[o] && X[o].tick(t), o++;
                            e()
                        } else cancelAnimationFrame(v), v = 0
                    }
                    return e
                }(),
                J;
            return z.version = '2.2.0', z.speed = 1, z.running = X, z.remove = function(e) {
                e = O(e);
                for (var t = X.length; t--;)
                    for (var a = X[t], o = a.animations, r = o.length; r--;) p(e, o[r].animatable.target) && (o.splice(r, 1), o.length || a.pause())
            }, z.getValue = j, z.path = function(e, o) {
                var r = W.str(e) ? t(e)[0] : e;
                return function(e) {
                    return {
                        el: r,
                        property: e,
                        totalLength: D(r) * ((o || 100) / 100)
                    }
                }
            }, z.setDashoffset = function(e) {
                var t = D(e);
                return e.setAttribute('stroke-dasharray', t), t
            }, z.bezier = h, z.easings = A, z.timeline = function(t) {
                var a = z(t);
                return a.pause(), a.duration = 0, a.add = function(e) {
                    return a.children.forEach(function(e) {
                        e.began = !0, e.completed = !0
                    }), l(e).forEach(function(o) {
                        var r = x(o, m(V, t || {}));
                        r.targets = r.targets || t.targets, o = a.duration;
                        var n = r.offset;
                        r.autoplay = !1, r.direction = a.direction, r.offset = W.und(n) ? o : _(n, o), a.began = !0, a.completed = !0, a.seek(r.offset), r = z(r), r.began = !0, r.completed = !0, r.duration > o && (a.duration = r.duration), a.children.push(r)
                    }), a.seek(0), a.reset(), a.autoplay && a.restart(), a
                }, a
            }, z.random = function(e, t) {
                return Math.floor(Math.random() * (t - e + 1)) + e
            }, z
        })
    }).call(a, e(5))
}, function() {
    AFRAME.registerComponent('auto-enter-vr', {
        init: function() {
            var e;
            document.hidden || (window.dispatchEvent(new MouseEvent('click')), setTimeout(() => {
                this.el.sceneEl.enterVR()
            }, 2e3)), e = document.getElementById('plugyourheadset'), this.el.sceneEl.addEventListener('enter-vr', () => {
                AFRAME.utils.device.checkHeadsetConnected() ? document.getElementById('plugyourheadset').classList.remove('slideup') : document.getElementById('plugyourheadset').classList.add('slideup')
            }), window.addEventListener('message', (e) => {
                'switchToLobby' === e.data.action && this.el.sceneEl.enterVR().catch(() => {
                    setTimeout(() => {
                        this.el.sceneEl.enterVR().catch(() => {
                            window.postMessage({
                                action: 'forceExitVRCommand'
                            }, '*'), setTimeout(() => {
                                this.el.sceneEl.enterVR()
                            }, 250)
                        })
                    }, 250)
                })
            })
        }
    })
}, function() {
    AFRAME.registerComponent('background-animation', {
        schema: {
            isCollectionOpen: {
                default: !1
            }
        },
        init: function() {
            var e = this.el;
            this.onNavigateStart = this.onNavigateStart.bind(this), this.onNavigateEnd = this.onNavigateEnd.bind(this), e.sceneEl.addEventListener('navigate', this.onNavigateStart), e.sceneEl.addEventListener('preSwitchToContent', this.onNavigateEnd), e.sceneEl.addEventListener('cancelloading', this.onNavigateEnd), this.animationSet = {}
        },
        onNavigateStart: function() {
            var e = this.el;
            this.animationSet.from = e.components.material.material.uniforms.brightness.value, this.animationSet.to = 0.2, e.setAttribute('animation__navigate', this.animationSet), e.emit('navigatebackgroundanimation')
        },
        onNavigateEnd: function() {
            var e = this.el;
            this.animationSet.from = e.components.material.material.uniforms.brightness.value, this.animationSet.to = this.data.isCollectionOpen ? 0.5 : 0.9, e.setAttribute('animation__navigate', this.animationSet), e.emit('navigatebackgroundanimation')
        }
    })
}, function() {
    AFRAME.registerComponent('background-audio', {
        schema: {
            src: {
                type: 'string'
            },
            volume: {
                type: 'number'
            }
        },
        init: function() {
            this.audio = document.querySelector(this.data.src), this.audio.volume = this.data.volume, document.addEventListener('visibilitychange', () => {
                'hidden' === document.visibilityState ? this.fadeOut() : this.fadeIn()
            }, !1)
        },
        play: function() {
            document.hidden || this.audio.play()
        },
        fadeIn: function() {
            var e = this.audio,
                t;
            this.audio.play(), t = setInterval(() => {
                e.volume <= this.data.volume && (e.volume += 5e-3), e.volume >= this.data.volume && clearInterval(t)
            }, 100)
        },
        fadeOut: function() {
            var e = this.audio,
                t;
            t = setInterval(() => {
                5e-3 <= e.volume ? e.volume -= 5e-3 : e.volume = 0, 0 >= e.volume && (clearInterval(t), this.audio.pause())
            }, 100)
        }
    })
}, function(e, t, a) {
    AFRAME.registerComponent('background-shader', {
        play: function() {
            this.camera = this.el.sceneEl.camera.el.object3D, this.uniform = this.el.components.material.material.uniforms.camera.value
        },
        tick: function() {
            this.uniform.x = this.camera.position.x, this.uniform.y = this.camera.position.y, this.uniform.z = this.camera.position.z
        }
    }), AFRAME.registerShader('backgroundShader', {
        schema: {
            brightness: {
                type: 'number',
                default: 0.9,
                min: 0,
                max: 1,
                is: 'uniform'
            },
            time: {
                type: 'number',
                default: 0,
                is: 'uniform'
            },
            tint: {
                type: 'color',
                default: '#000',
                is: 'uniform'
            },
            camera: {
                type: 'vec3',
                is: 'uniform'
            },
            opacity: {
                type: 'number',
                default: 1,
                is: 'uniform'
            }
        },
        vertexShader: a(110),
        fragmentShader: a(109)
    })
}, function() {
    AFRAME.registerComponent('cancel-button', {
        schema: {
            version: {
                default: 0
            }
        },
        init: function() {
            var e = this.el;
            this.postMessageData = {
                action: 'cancelLoading'
            }, e.addEventListener('click', () => {
                e.sceneEl.emit('cancelloading'), window.postMessage(this.postMessageData, '*')
            })
        },
        update: function() {
            this.el.object3D.visible = !this.data.version || 2.4 <= this.data.version
        }
    })
}, function() {
    AFRAME.registerComponent('cascade-raycastable', {
        schema: {
            type: 'string'
        },
        play: function() {
            var e, t;
            setTimeout(() => {
                for (e = this.el.querySelectorAll('*'), t = 0; t < e.length; t++) this.data ? e[t].setAttribute('bind-toggle__raycastable', this.data) : e[t].setAttribute('raycastable', '')
            }, 100)
        }
    })
}, function() {
    AFRAME.registerComponent('click-out', {
        init: function() {
            this.onClick = this.onClick.bind(this), this.el.addEventListener('triggerdown', this.onClick), this.el.addEventListener('abuttondown', this.onClick), this.el.addEventListener('bbuttondown', this.onClick), this.el.addEventListener('xbuttondown', this.onClick), this.el.addEventListener('ybuttondown', this.onClick), 'mouseCursor' === this.el.getAttribute('id') && (this.isMouseCursor = !0, window.addEventListener('click', (e) => {
                e.isTrusted && this.onClick()
            })), window.addEventListener('keydown', (e) => {
                27 !== e.keyCode || this.onClick()
            })
        },
        onClick: function() {
            var e, t;
            if (this.el.sceneEl.isPlaying) return t = this.el.sceneEl.systems.state.state, e = this.el.components.raycaster.intersectedEls[0], t.isLoadingSite || 'tutorialmodal' === t.screen ? void 0 : 'search' === t.screen && e && 'cursorDummy' === e.getAttribute('id') ? void document.getElementById('keyboard').dismiss() : void(!t.screen || e && 'cursorDummy' !== e.getAttribute('id') || this.el.sceneEl.emit('screenpop'))
        }
    })
}, function(e, t, a) {
    AFRAME.registerShader('collectionShader', {
        schema: {
            color: {
                default: '#FFF',
                type: 'color',
                is: 'uniform'
            },
            opacity: {
                default: 1,
                is: 'uniform'
            },
            src: {
                default: '#whitePixelImg',
                type: 'map',
                is: 'uniform'
            }
        },
        vertexShader: a(12),
        fragmentShader: a(111)
    })
}, function() {
    AFRAME.registerComponent('console-shortcuts', {
        play: function() {
            window.scene = this.el, window.state = this.el.systems.state.state
        }
    })
}, function() {
    AFRAME.registerComponent('content-page-loaded', {
        init: function() {
            var e = !0;
            window.addEventListener('message', (t) => 'contentPageLoaded' === t.data.action ? e ? void(e = !1) : void this.el.emit('contentpageloaded') : void 0)
        }
    })
}, function() {
    AFRAME.registerComponent('controller-button-feedback', {
        init: function() {
            this.trigger = this.el.querySelector('.controller-trigger'), this.thumbstick = this.el.querySelector('.controller-thumbstick')
        },
        tick: function() {
            var e = this.el,
                t, a, o;
            t = e.components['tracked-controls'];
            t && (a = this.trigger ? this.trigger.getObject3D('mesh') : null, o = this.thumbstick ? this.thumbstick.getObject3D('mesh') : null, a && t.buttonStates[1] && (a.rotation.x = THREE.Math.lerp(0, -Math.PI / 9, t.buttonStates[1].value)), o && (o.rotation.z = 0.4 * -t.axis[0], o.rotation.x = 0.4 * t.axis[1]))
        }
    })
}, function() {
    var e = {
        right: {
            hand: 'right',
            model: !1
        },
        left: {
            hand: 'left',
            model: !1
        }
    };
    AFRAME.registerComponent('controller', {
        schema: {
            hand: {
                default: 'right'
            },
            isLoadingSite: {
                default: !1
            }
        },
        init: function() {
            var t = this.config,
                a = this.data,
                o = this.el,
                r;
            this.originalGamepad = void 0, this.originalUpdateGamepad = void 0, this.proxyController = {}, o.setAttribute('oculus-touch-controls', e[a.hand]), o.setAttribute('oculus-touch-controls', 'model', !0), o.setAttribute('vive-controls', e[a.hand]), o.setAttribute('windows-motion-controls', e[a.hand]), o.addEventListener('controllerconnected', (e) => {
                var a = o.querySelector('.controllerLaser'),
                    n;
                if (n = t[e.detail.name], n.raycaster && o.setAttribute('raycaster', n.raycaster || {}), n.cursor && o.setAttribute('cursor', n.cursor || {}), n.laser && (a.setAttribute('position', n.laser.position), a.setAttribute('rotation', n.laser.rotation)), !o.getAttribute(e.detail.name).model) {
                    for (r = 0; r < n.parts.length; r++) o.querySelector('.controller-' + n.parts[r]).setAttribute('gltf-part', {
                        src: n.asset,
                        part: n.parts[r]
                    });
                    !AFRAME.utils.getUrlParameter('debug') && e.detail.name && gtag('set', {
                        headset: e.detail.name.split('-')[0]
                    })
                }
            }), AFRAME.utils.getUrlParameter('debug') && o.emit('controllerconnected', {
                name: 'vive-controls'
            }), window.addEventListener('message', (e) => {
                e.data && e.data.action && (this.data.isLoadingSite && 'contentPageReady' === e.data.action && (this.el.object3D.visible = !1), 'switchToLobby' === e.data.action && this.restoreGamepad())
            })
        },
        update: function(e) {
            var t = this.data,
                a = this.el;
            return e ? a.components['tracked-controls'] ? !e.isLoadingSite && t.isLoadingSite ? (a.object3D.visible = !1, void this.useProxyGamepad()) : void(e.isLoadingSite && !t.isLoadingSite && this.restoreGamepad()) : void 0 : void 0
        },
        tick: function() {
            var e, t;
            if (this.data.isLoadingSite && (t = localStorage.getItem('proxyGamepads'), !!t))
                for (t = JSON.parse(t), e = 0; e < t.length; e++) t[e] && t[e].hand === this.data.hand && t[e].pose && (this.el.object3D.visible = !0, this.proxyController.buttons = t[e].buttons, this.proxyController.pose = t[e].pose)
        },
        useProxyGamepad: function() {
            var e = this.el,
                t = this.proxyController;
            e.components['tracked-controls'].controller && (localStorage.setItem('proxyGamepads', ''), this.originalGamepad = e.components['tracked-controls'].controller, this.originalUpdateGamepad = e.components['tracked-controls'].updateGamepad, t.axes = this.originalGamepad.axes, t.buttons = this.originalGamepad.buttons, t.hand = this.originalGamepad.hand, t.pose = this.originalGamepad.pose, e.components['tracked-controls'].controller = this.proxyController, e.components['tracked-controls'].updateGamepad = () => {})
        },
        restoreGamepad: function() {
            var e = this.el;
            this.originalGamepad && (e.components['tracked-controls'].controller = this.originalGamepad, e.components['tracked-controls'].updateGamepad = this.originalUpdateGamepad), setTimeout(() => {
                e.object3D.visible = !0
            }, 1e3)
        },
        config: {
            "daydream-controls": {
                asset: '#controller-vive',
                parts: ['body', 'menu', 'touchpad', 'trigger', 'logo'],
                cursor: {
                    downEvents: ['trackpaddown'],
                    upEvents: ['trackpadup']
                }
            },
            "gearvr-controls": {
                asset: '#controller-vive',
                parts: ['body', 'menu', 'touchpad', 'trigger', 'logo'],
                cursor: {
                    downEvents: ['trackpaddown'],
                    upEvents: ['trackpadup']
                },
                raycaster: {
                    origin: {
                        x: 0,
                        y: 5e-4,
                        z: 0
                    }
                }
            },
            "oculus-touch-controls": {
                asset: '#controller-oculus',
                parts: ['body', 'thumbstick', 'buttona', 'buttonb', 'trigger', 'logo'],
                cursor: {
                    downEvents: ['triggerdown', 'gripdown', 'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown'],
                    upEvents: ['triggerup', 'gripup', 'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup']
                },
                raycaster: {
                    origin: {
                        x: 0,
                        y: -5e-3,
                        z: 0
                    },
                    direction: {
                        x: 0,
                        y: -1,
                        z: -1
                    },
                    showLine: !1
                },
                laser: {
                    position: {
                        x: 0,
                        y: -0.06,
                        z: -0.06
                    },
                    rotation: {
                        x: 45,
                        y: 0,
                        z: 0
                    }
                }
            },
            "vive-controls": {
                asset: '#controller-vive',
                parts: ['body', 'menu', 'touchpad', 'trigger', 'logo'],
                cursor: {
                    downEvents: ['triggerdown', 'gripdown'],
                    upEvents: ['triggerup', 'gripup']
                }
            },
            "windows-motion-controls": {
                asset: '#controller-vive',
                parts: ['body', 'menu', 'touchpad', 'trigger', 'logo'],
                cursor: {
                    downEvents: ['trackpaddown', 'triggerdown', 'gripdown'],
                    upEvents: ['trackpadup', 'triggerup', 'gripup']
                },
                raycaster: {
                    showLine: !1
                }
            }
        }
    })
}, function() {
    AFRAME.registerComponent('cursor-mesh', {
        schema: {
            cursorEl: {
                type: 'selector'
            }
        },
        init: function() {
            this.scenePivotEl = document.getElementById('scenePivot')
        },
        tick: function() {
            var e = this.data.cursorEl,
                t = this.el,
                a = this.el.object3D,
                o = this.scenePivotEl,
                r, n, s;
            (r = e.components.cursor, !!r) && (s = e.components.cursor.intersectedEl, s && (n = e.components.raycaster.getIntersection(s), t.object3D.position.copy(n.point), t.object3D.rotation.copy(o.object3D.rotation)))
        }
    })
}, function() {
    AFRAME.registerComponent('cursor-toggler', {
        schema: {
            camera: {
                default: 'camera'
            },
            cursorMesh: {
                default: 'cursorMesh'
            },
            fuseMode: {
                default: !1
            },
            handOne: {
                default: 'primaryHand'
            },
            handTwo: {
                default: 'secondaryHand'
            },
            mouseCursor: {
                default: 'mouseCursor'
            }
        },
        init: function() {
            var e = this.data,
                t;
            this.cameraEl = document.getElementById(e.camera), this.cursorMesh = document.getElementById(e.cursorMesh), t = document.getElementById(e.mouseCursor), this.el.sceneEl.addEventListener('controllerconnected', () => {
                this.toggle(document.getElementById(e.handOne), document.getElementById(e.handTwo), this.cursorMesh), t.setAttribute('raycaster', 'enabled', !1)
            })
        },
        update: function(e) {
            return !e.fuseMode && this.data.fuseMode ? (this.lastCursorEl = this.currentCursorEl, void this.toggle(this.cameraEl, this.currentCursorEl)) : void(e.fuseMode && !this.data.fuseMode && this.toggle(this.lastCursorEl, this.cameraEl))
        },
        play: function() {
            var e = this.data,
                t, a, o;
            a = document.getElementById(e.handOne), o = document.getElementById(e.handTwo);
            a && o && (a.querySelector('.controllerLaser').object3D.visible = !0, a.addEventListener('buttonup', () => {
                this.toggle(a, o, t)
            }), o.addEventListener('buttonup', () => {
                this.toggle(o, a, t)
            }))
        },
        toggle: function(e, t) {
            this.currentCursorEl = e, this.cursorMesh.object3D.visible = !1, this.cursorMesh.setAttribute('cursor-mesh', 'cursorEl', e), e.querySelector('.controllerLaser') && (e.querySelector('.controllerLaser').object3D.visible = !0), e.setAttribute('raycaster', 'enabled', !0), t.querySelector('.controllerLaser') && (t.querySelector('.controllerLaser').object3D.visible = !1), t.setAttribute('raycaster', 'enabled', !1), setTimeout(() => {
                cursorMesh.object3D.visible = !0
            })
        }
    })
}, function() {
    AFRAME.registerComponent('debug-controller', {
        schema: {
            enabled: {
                default: !1
            }
        },
        init: function() {
            var e, t;
            (this.data.enabled || AFRAME.utils.getUrlParameter('debug')) && (console.log('%c debug-controller enabled ', 'background: #111; color: red'), this.isTriggerDown = !1, e = document.getElementById('primaryHandContainer'), t = document.getElementById('secondaryHandContainer'), e.setAttribute('position', {
                x: 0.2,
                y: 1.5,
                z: -0.5
            }), t.setAttribute('position', {
                x: -0.2,
                y: 1.5,
                z: -0.5
            }), e.setAttribute('rotation', {
                x: 0,
                y: 0,
                z: 0
            }), t.setAttribute('rotation', {
                x: 0,
                y: 0,
                z: 0
            }), document.addEventListener('keydown', (a) => {
                var o, r, n;
                if (a.shiftKey) {
                    if (32 === a.keyCode) return void(this.isTriggerDown ? (e.emit('triggerup'), this.isTriggerDown = !1) : (e.emit('triggerdown'), this.isTriggerDown = !0));
                    78 === a.keyCode && (this.secondaryGripDown ? (t.emit('gripup'), this.secondaryGripDown = !1) : (t.emit('gripdown'), this.secondaryGripDown = !0)), 77 === a.keyCode && (this.primaryGripDown ? (e.emit('gripup'), this.primaryGripDown = !1) : (e.emit('gripdown'), this.primaryGripDown = !0)), a.ctrlKey ? (n = t.object3D.position, 72 === a.keyCode && (n.x -= 0.01), 74 === a.keyCode && (n.y -= 0.01), 75 === a.keyCode && (n.y += 0.01), 76 === a.keyCode && (n.x += 0.01), (59 === a.keyCode || 186 === a.keyCode) && (n.z -= 0.01), 222 === a.keyCode && (n.z += 0.01)) : (o = e.object3D.position, 72 === a.keyCode && (o.x -= 0.01), 74 === a.keyCode && (o.y -= 0.01), 75 === a.keyCode && (o.y += 0.01), 76 === a.keyCode && (o.x += 0.01), (59 === a.keyCode || 186 === a.keyCode) && (o.z -= 0.01), 222 === a.keyCode && (o.z += 0.01));
                    var r, s;
                    a.ctrlKey ? (s = t.getAttribute('rotation'), 89 === a.keyCode && (s.x -= 10), 79 === a.keyCode && (s.x += 10), 85 === a.keyCode && (s.y -= 10), 73 === a.keyCode && (s.y += 10)) : (r = e.getAttribute('rotation'), 89 === a.keyCode && (r.x -= 10), 79 === a.keyCode && (r.x += 10), 85 === a.keyCode && (r.y -= 10), 73 === a.keyCode && (r.y += 10)), e.setAttribute('rotation', AFRAME.utils.clone(r)), t.setAttribute('rotation', AFRAME.utils.clone(s))
                }
            }))
        }
    })
}, function() {
    AFRAME.registerComponent('debug-cursor', {
        init: function() {},
        log: function(e, t, a) {
            t.id ? console.log(`%c[${e}] ${t.id}`, `color: ${a}`) : (console.log(`%c[${e}]`, `color: ${a}`), console.log(t))
        }
    })
}, function() {
    AFRAME.registerComponent('debug-links', {
        init: function() {
            this.initLinkClickShortcut(), this.initPaginateShortcut()
        },
        initLinkClickShortcut: function() {
            var e = document.getElementById('links');
            window.addEventListener('keyup', (t) => {
                !t.shiftKey || 49 > t.keyCode || 54 < t.keyCode || e.children[t.keyCode - 49].emit('click')
            })
        },
        initPaginateShortcut: function() {
            var e = !1;
            window.addEventListener('keydown', (t) => {
                80 === t.keyCode && (e = !0)
            }), window.addEventListener('keyup', (t) => {
                80 === t.keyCode && (e = !1);
                !e || 48 > t.keyCode || 54 < t.keyCode || this.el.emit('pagegoto', {
                    page: t.keyCode - 48
                })
            })
        }
    })
}, function() {
    AFRAME.registerComponent('enter-site-button', {
        schema: {
            enabled: {
                default: !1
            }
        },
        init: function() {
            var e = this.el;
            e.addEventListener('click', () => {
                this.data.enabled && (e.sceneEl.emit('entersite'), window.postMessage({
                    action: 'switchToContent',
                    isReenter: !0
                }, '*'), gtag('event', 'entersitebutton'))
            })
        }
    })
}, function(e, t, a) {
    AFRAME.registerComponent('fade-shader', {
        dependencies: ['material'],
        init: function() {
            var e = this.el;
            this.matrix = new THREE.Matrix4, this.updateUniforms = this.updateUniforms.bind(this), this.el.sceneEl.addEventListener('enter-vr', this.updateUniforms), this.el.setAttribute('material', 'transparent', !0), this.updateUniforms()
        },
        updateUniforms: function() {
            var e = this.el,
                t = this.matrix,
                a, o;
            a = e.getObject3D('mesh');
            a && (o = a.material, t.getInverse(e.object3D.matrixWorld), o.uniforms.inverseMatrix = {
                value: t
            })
        }
    }), AFRAME.registerShader('fadeShader', {
        schema: {
            color: {
                default: '#FFF',
                type: 'color',
                is: 'uniform'
            },
            opacity: {
                default: 1,
                is: 'uniform'
            },
            src: {
                default: '#whitePixelImg',
                type: 'map',
                is: 'uniform'
            }
        },
        vertexShader: a(12),
        fragmentShader: a(112)
    })
}, function(e, t, a) {
    AFRAME.registerShader('fadeTextShader', {
        schema: {
            alphaTest: {
                type: 'number',
                is: 'uniform',
                default: 0.5
            },
            color: {
                type: 'color',
                is: 'uniform',
                default: 'white'
            },
            map: {
                type: 'map',
                is: 'uniform'
            },
            negate: {
                type: 'boolean',
                is: 'uniform',
                default: !0
            },
            opacity: {
                type: 'number',
                is: 'uniform',
                default: 1
            }
        },
        raw: !0,
        vertexShader: a(114),
        fragmentShader: a(113)
    })
}, function() {
    AFRAME.registerComponent('feed-collection', {
        schema: {
            collectionId: {
                type: 'string'
            }
        },
        init: function() {
            var e = this.el;
            e.addEventListener('click', () => {
                e.closest('[data-is-scrolling]') || (e.sceneEl.emit('collectionset', this.data), setTimeout(() => {
                    e.sceneEl.emit('collectionopen')
                }))
            })
        }
    })
}, function() {
    AFRAME.registerComponent('feed-single', {
        schema: {
            siteId: {
                type: 'string'
            }
        },
        init: function() {
            var e = this.el;
            e.addEventListener('click', () => {
                e.sceneEl.emit('linkdetailopen', this.data)
            })
        }
    })
}, function(e, t, a) {
    'use strict';

    function o(e, t) {
        var a, o;
        for (o = 0, a = 0; a < e.length; a++) o += e.charCodeAt(a);
        return parseFloat('0.' + Math.sin(9999 * o * t + 1).toString().substr(7))
    }
    Object.defineProperty(t, '__esModule', {
        value: !0
    });
    var r = a(1),
        n = a.n(r),
        s = Object.keys(n.a.SITES),
        l = new Date,
        d = `${l.getYear()}-${l.getMonth()}-${l.getDate()}`;
    AFRAME.registerComponent('feed-tiles', {
        schema: {
            isDailyMix: {
                default: !1
            }
        },
        init: function() {
            var e = this.data,
                t = this.el,
                a = 0,
                o, r, s, l, d;
            if (o = document.createElement('template'), s = document.getElementById('linkTemplate').innerHTML, e.isDailyMix)
                for (d = []; 6 > d.length;)(r = this.getRandomSite(a++), -1 === d.indexOf(r)) && d.push(r);
            else d = JSON.parse(t.dataset.sites);
            for (a = 0; a < d.length; a++) l = n.a.SITES[d[a]], t.appendChild(t.sceneEl.systems.state.renderTemplate(s, l))
        },
        getRandomSite: function(e) {
            return s[Math.floor(o(d, e) * s.length)]
        }
    })
}, function() {
    var e = 0;
    AFRAME.registerComponent('gpu-preloader', {
        play: function() {
            var e, t, a;
            for (t = this.el.querySelectorAll('.linkImage'), e = 0; e < t.length; e++) this.preloadLinkImage(t[e]);
            for (a = this.el.querySelectorAll('.linkLogo'), e = 0; e < a.length; e++) this.preloadLinkLogo(a[e]);
            this.preloadKeyboard()
        },
        preloadLinkImage: function(e) {
            return e.components.material.material.uniforms.src.value ? void this.preload(e.components.material.material.uniforms.src.value) : void e.addEventListener('materialtextureloaded', () => {
                this.preload(e.components.material.material.uniforms.src.value)
            })
        },
        preloadLinkLogo: function(e) {
            return e.components.material.material.map ? void this.preload(e.components.material.material.map) : void e.addEventListener('materialtextureloaded', () => {
                this.preload(e.components.material.material.map)
            })
        },
        preloadKeyboard: function() {
            document.getElementById('keyboard').object3D.traverse((e) => e.material ? e.el.components.material ? void e.el.addEventListener('materialtextureloaded', () => {
                setTimeout(() => {
                    this.preload(e.material.map)
                })
            }) : void(e.el.components.text && e.el.addEventListener('textfontset', () => {
                this.preload(e.material.uniforms.map.value)
            })) : void 0, !0)
        },
        preload: function(t) {
            e++, 16 < e && (e = 0), this.el.renderer.setTexture2D(t, e)
        }
    })
}, function() {
    AFRAME.registerComponent('help-back-lobby', {
        schema: {
            container: {
                default: 'helpBackLobby'
            }
        },
        init: function() {
            var e = this.el,
                t;
            t = document.getElementById(this.data.container), e.addEventListener('controllerconnected', (e) => {
                t.dataset.controller = e.detail.name
            })
        }
    })
}, function() {
    AFRAME.registerComponent('high-performance', {
        schema: {
            developerUrl: {
                type: 'string'
            },
            linkDetailSiteId: {
                type: 'number'
            },
            switchedToLobby: {
                default: !1
            }
        },
        init: function() {
            window.highPerformance && (window.addEventListener('vrdisplayfocus', this.onVRDisplayFocus.bind(this)), this.eventDetail = {})
        },
        onVRDisplayFocus: function() {
            var e = this.data,
                t = this.el;
            !1 !== e.switchedToLobby && -1 !== e.linkDetailIndex && (0 !== e.linkDetailIndex || e.developerUrl) && (this.eventDetail.siteId = this.data.linkDetailSiteId, t.emit('linkdetailopen', this.eventDetail), e.switchedToLobby = !1)
        }
    })
}, function() {}, function(e, t, a) {
    'use strict';
    var o = Math.abs;
    Object.defineProperty(t, '__esModule', {
        value: !0
    });
    var r = a(1),
        n = a.n(r),
        s = 6,
        l = 0.666;
    AFRAME.registerComponent('layout-collection', {
        schema: {
            collectionId: {
                default: ''
            },
            isOpen: {
                default: !1
            },
            page: {
                default: 0
            }
        },
        init: function() {
            this.background = document.getElementById('background'), this.collectionTitle = document.getElementById('collectionTitle'), this.mask = document.getElementById('screenMask'), this.isScrolling = !1, this.pageWidth = 3 * l, this.scroll = 0, this.scrollGoal = 0, this.scrollSpeed = 0.1, this.el.sceneEl.addEventListener('collectionset', () => {
                setTimeout(() => {
                    this.updateLayout()
                })
            })
        },
        update: function() {
            var e = new THREE.Color;
            return function(t) {
                var a = this.data,
                    o;
                a.collectionId && (e.set(n.a.COLLECTIONS[a.collectionId].color), e.multiplyScalar(0.3), o = `#${e.getHexString()}`, this.background.setAttribute('animation__addtint', 'to', o), this.background.setAttribute('animation__removetint', 'from', o), this.mask.setAttribute('animation__addtint', 'to', o), this.mask.setAttribute('animation__removetint', 'from', o)), t.page !== a.page && this.updateLayout(), t.isOpen !== a.isOpen && this.updateLinkRaycastables(a.isOpen)
            }
        }(),
        tick: function() {
            this.isScrolling && (0.25 > o(this.scrollGoal - this.scroll) && (this.el.removeAttribute('data-is-scrolling', ''), this.updateLinkRaycastables(this.data.isOpen)), 1e-3 > o(this.scrollGoal - this.scroll) ? (this.isScrolling = !1, this.scroll = this.scrollGoal) : this.scroll += (this.scrollGoal - this.scroll) * this.scrollSpeed, this.el.object3D.position.x = -1 * this.scroll)
        },
        updateLayout: function() {
            var e = this.el,
                t, a, o, r, n, l;
            for (this.numPages = Math.ceil(e.children.length / s), t = this.data.page * s + s, n = this.data.page * s, a = 0; a < e.children.length; a++) {
                var d, c;
                d = e.children[a], c = a >= n && a < t, d.setAttribute('superlink', 'isActive', c), l = a % 2, d.object3D.position.set(this.getPositionX(a), l * 0.42, 0), d.object3D.scale.set(1.2, 1.2, 1.2), o = !1, (a === t || a === t + 1 || a === t + 2 || a === t + 3) && (o = !0, d.object3D.position.x += 0.2, d.object3D.position.z = -0.15), d.setAttribute('superlink', 'isLeftPaginator', o), r = !1, (a === n - 1 || a === n - 2 || a === n - 3 || a === n - 4) && (r = !0, d.object3D.position.x -= 0.2, d.object3D.position.z = -0.15), d.setAttribute('superlink', 'isRightPaginator', r)
            }
            this.startScrolling()
        },
        getPositionX: function(e) {
            var t;
            return t = Math.floor(e / 2), t * l - l
        },
        startScrolling: function() {
            this.isScrolling = !0, this.scrollGoal = this.data.page * this.pageWidth, this.updateLinkRaycastables(!1)
        },
        updateLinkRaycastables: function(e) {
            var t = this.el,
                a, o;
            for (o = t.querySelectorAll('[data-raycastable]'), a = 0; a < o.length; a++) e ? o[a].setAttribute('raycastable', '') : o[a].removeAttribute('raycastable')
        }
    })
}, function() {
    var e = Math.abs;
    AFRAME.registerComponent('layout-feed', {
        schema: {
            isOpen: {
                default: !0
            },
            page: {
                default: 0
            }
        },
        init: function() {
            this.isScrolling = !1, this.scroll = 0, this.scrollGoal = 0, this.scrollSpeed = 0.1, this.setPageRaycastable(0, !0)
        },
        update: function(e) {
            var t = this.el,
                a = this.data;
            'page' in e && (this.visibleTimeout && clearTimeout(this.visibleTimeout), e.page !== a.page && (-1 === a.page && t.sceneEl.emit('collectionset', {
                collectionId: 'usercollection'
            }, !1), this.startScrolling(), this.setPageVisible(a.page - 1, !0), this.setPageVisible(a.page, !0), this.setPageVisible(a.page + 1, !0), this.visibleTimeout = setTimeout(() => {
                this.setPageVisible(a.page - 2, !1), this.setPageVisible(a.page + 2, !1)
            }), this.setPageRaycastable(e.page, !1)), e.isOpen !== a.isOpen && this.setPageRaycastable(a.page, a.isOpen))
        },
        tick: function() {
            this.isScrolling && (0.25 > e(this.scrollGoal - this.scroll) && (this.el.removeAttribute('data-is-scrolling', ''), this.setPageRaycastable(this.data.page, this.data.isOpen)), 1e-3 > e(this.scrollGoal - this.scroll) ? (this.isScrolling = !1, this.scroll = this.scrollGoal) : this.scroll += (this.scrollGoal - this.scroll) * this.scrollSpeed, this.el.object3D.position.x = -1 * this.scroll)
        },
        startScrolling: function() {
            this.isScrolling = !0, this.scrollGoal = this.data.page * (3 * 0.666)
        },
        setPageVisible: function(e, t) {
            var a = this.el;
            a.children[e + 1] && (a.children[e + 1].object3D.visible = t)
        },
        setPageRaycastable: function(e, t) {
            var a, o, r;
            if (o = this.el.children[e + 1], !!o)
                for (r = o.querySelectorAll('[data-raycastable]'), a = 0; a < r.length; a++) t ? r[a].setAttribute('raycastable', '') : r[a].removeAttribute('raycastable')
        }
    })
}, function(e, t, a) {
    AFRAME.registerComponent('link-shader', {
        dependencies: ['material'],
        init: function() {
            var e = this.el;
            this.matrix = new THREE.Matrix4, this.updateUniforms = this.updateUniforms.bind(this), this.el.sceneEl.addEventListener('enter-vr', this.updateUniforms), this.updateUniforms()
        },
        updateUniforms: function() {
            var e = this.el,
                t = e.getObject3D('mesh'),
                a = this.matrix,
                o;
            t && (o = t.material, a.getInverse(e.object3D.matrixWorld), o.uniforms.inverseMatrix = {
                value: a
            }, e.setAttribute('material', 'meshPosition', e.object3D.position))
        }
    }), AFRAME.registerShader('linkShader', {
        schema: {
            brightness: {
                default: 1,
                is: 'uniform'
            },
            glare: {
                type: 'number',
                default: 0,
                is: 'uniform'
            },
            meshPosition: {
                type: 'vec3',
                is: 'uniform'
            },
            opacity: {
                default: 1,
                is: 'uniform'
            },
            src: {
                type: 'map',
                is: 'uniform'
            },
            uvXClamp: {
                type: 'float',
                default: 1,
                is: 'uniform'
            },
            uvXOffset: {
                type: 'float',
                default: 0,
                is: 'uniform'
            }
        },
        vertexShader: a(116),
        fragmentShader: a(115)
    })
}, function() {
    AFRAME.registerComponent('loading-ring', {
        schema: {
            errorColor: {
                default: '#EF3054'
            },
            hasError: {
                default: !1
            },
            isLoadingSite: {
                default: !1
            },
            isSiteLoaded: {
                default: !1
            },
            loadedColor: {
                default: '#50B527'
            },
            loadingColor: {
                default: '#FF8522'
            }
        },
        play: function() {
            this.el.emit('startloadingringanimation')
        },
        update: function() {
            var e = this.data,
                t = this.el;
            return e.isSiteLoaded ? void(t.emit('stoploadingringanimation'), t.setAttribute('material', 'opacity', 1), t.object3D.scale.set(0.8, 0.8, 0.8), e.hasError ? t.setAttribute('material', 'color', e.errorColor) : e.isSiteLoaded && t.setAttribute('material', 'color', e.loadedColor)) : (t.setAttribute('material', 'color', e.loadingColor), e.isLoadingSite && (t.setAttribute('animation__opacity', 'dur', 500), t.setAttribute('animation__scale', 'dur', 500)), void t.emit('startloadingringanimation'))
        }
    })
}, function() {
    AFRAME.registerComponent('loading-screen', {
        play: function() {
            var e;
            e = document.getElementById('loadingIndicatorContainer'), e.parentNode.removeChild(e)
        }
    })
}, function() {
    AFRAME.registerComponent('logo', {
        init: function() {
            var e = this.el,
                t = this.data;
            e.sceneEl.addEventListener('navigate', () => {
                e.emit('navigate', null, !1)
            }), e.sceneEl.addEventListener('contentPageLoaded', () => {
                e.emit('stopnavigate'), e.setAttribute('material', 'opacity', 1)
            }), e.sceneEl.addEventListener('cancelloading', () => {
                e.emit('stopnavigate'), e.setAttribute('material', 'opacity', 1)
            })
        }
    })
}, function() {
    AFRAME.registerComponent('navigate', {
        schema: {
            on: {
                default: 'click'
            },
            url: {
                type: 'string'
            },
            siteId: {
                type: 'string'
            }
        },
        play: function() {
            var e = this.el,
                t, a, o;
            for (this.eventDetail = {}, this.postMessageData = {
                    action: 'navigateCommand'
                }, this.visitedLinks = JSON.parse(localStorage.getItem('visitedLinks')), null === this.visitedLinks && (this.visitedLinks = {}), a = document.querySelectorAll('.link'), t = 0; t < a.length; t++) o = a[t].getAttribute('data-url'), a[t].setAttribute('superlink', 'isVisited', void 0 !== this.visitedLinks[o]);
            e.addEventListener(this.data.on, () => {
                var t;
                this.eventDetail.url = this.data.url, this.postMessageData.url = this.data.url, e.sceneEl.emit('navigate', this.eventDetail), window.postMessage(this.postMessageData, '*'), document.getElementById(`link-${this.data.siteId}`).setAttribute('superlink', 'isVisited', !0), t = '' + this.data.url, this.visitedLinks[t] === void 0 && (this.visitedLinks[t] = 0), this.visitedLinks[t]++, window.localStorage.setItem('visitedLinks', JSON.stringify(this.visitedLinks))
            })
        }
    })
}, function() {
    var e = {
        error: '#ca2242',
        info: '#111',
        success: '#3772ff'
    };
    AFRAME.registerComponent('notification', {
        schema: {
            message: {
                type: 'string'
            },
            type: {
                type: 'string'
            }
        },
        init: function() {
            this.hideNotification = this.hideNotification.bind(this), this.textEl = this.el.children[0], this.bgEl = this.el.children[1]
        },
        update: function() {
            var t = this.data,
                a = this.el;
            t.message && ('error' === t.type && AFRAME.utils.device.checkHeadsetConnected() && gtag('event', 'notificationerror', {
                event_label: a.sceneEl.systems.state.state.site.url
            }), this.textEl.setAttribute('text', 'value', t.message), this.bgEl.setAttribute('slice9', 'color', e[t.type || 'info']), a.emit('notificationreceived'), setTimeout(this.hideNotification, 2e4))
        },
        hideNotification: function() {
            this.el.emit('notificationhide')
        }
    })
}, function(e, t, a) {
    'use strict';
    Object.defineProperty(t, '__esModule', {
        value: !0
    });
    var o = a(1),
        r = a.n(o),
        n = r.a.FEED.length;
    AFRAME.registerComponent('pagination-dots', {
        schema: {
            currentPage: {
                default: 0
            },
            margin: {
                default: 0.05
            }
        },
        init: function() {
            var e = this.el,
                t, a;
            for (a = 0; a < n; a++) t = document.createElement('a-entity'), t.setAttribute('mixin', 'paginationDot'), e.appendChild(t)
        },
        update: function() {
            var e = this.data,
                t = this.el,
                a, o, r;
            for (o = t.children, r = 0; r < o.length; r++) a = r === e.currentPage, o[r].setAttribute('material', {
                color: a ? '#82F2E7' : '#222',
                opacity: a ? 0.8 : 0.2
            })
        },
        play: function() {
            var e = this.el.children,
                t;
            for (t = 0; t < e.length; t++) e[t].object3D.position.x = -1 * (this.data.margin * (e.length - 1) / 2) + t * this.data.margin
        }
    })
}, function() {
    AFRAME.registerComponent('paginator', {
        schema: {
            currentPage: {
                default: 0
            },
            direction: {
                type: 'string'
            },
            hasLeft: {
                default: !0
            },
            hasRight: {
                default: !0
            },
            target: {
                default: ''
            }
        },
        init: function() {
            var e = this.el,
                t = this.data;
            e.addEventListener('mouseenter', () => {
                this.isActive() && (this.isHovered = !0, e.emit('paginatorenter', null, !1))
            }), e.addEventListener('mouseleave', () => {
                this.isActive() && (this.isHovered = !1, e.emit('paginatorleave', null, !1))
            }), e.addEventListener('click', () => {
                this.target.hasAttribute('data-is-scrolling') || ('left' === t.direction ? (this.target.setAttribute('data-is-scrolling', ''), e.sceneEl.emit('pageleft')) : (this.target.setAttribute('data-is-scrolling', ''), e.sceneEl.emit('pageright')))
            })
        },
        update: function(e) {
            var t = this.el,
                a = this.data;
            this.target = document.getElementById(a.target || 'feed'), this.el.getObject3D('mesh') ? this.updateOpacity() : this.el.addEventListener('object3dset', () => {
                this.updateOpacity()
            }), e && e.currentPage !== a.currentPage && this.isHovered && !this.isActive() && t.emit('paginatorleave', null, !1)
        },
        isActive: function() {
            var e = this.data;
            return 'left' === e.direction && e.hasLeft || 'right' === e.direction && e.hasRight
        },
        updateOpacity: function() {
            var e = this.el,
                t = this.data,
                a;
            a = this.isActive(), setTimeout(() => {
                a && 0 === e.getObject3D('mesh').material.opacity && e.emit('fadein', null, !1), !a && 0 < e.getObject3D('mesh').material.opacity && e.emit('fadeout', null, !1)
            }, 100)
        }
    })
}, function() {
    AFRAME.registerComponent('play-audio', {
        schema: {
            audio: {
                type: 'string'
            },
            event: {
                type: 'string'
            },
            volume: {
                type: 'number',
                default: 1
            }
        },
        multiple: !0,
        init: function() {
            var e;
            e = document.querySelector(this.data.audio), e.volume = this.data.volume, this.el.addEventListener(this.data.event, (t) => {
                'mouseenter' === this.data.event && t.target.classList.contains('linkHighlight') || (!e.paused && (e.pause(), e.currentTime = 0), e.play())
            })
        }
    })
}, function() {
    AFRAME.registerComponent('post-message-receiver', {
        init: function() {
            window.addEventListener('message', (e) => {
                e.data.action && (e.data.version && (this.el.emit('version', e.data.displayVersion), document.querySelector('.version').innerHTML = `Supermedium v${e.data.displayVersion}`), !1, this.el.emit(e.data.action, e.data, !1))
            })
        }
    })
}, function(e, t) {
    'use strict';
    Object.defineProperty(t, '__esModule', {
        value: !0
    }), t['default'] = {
        default: {},
        parse: function(e) {
            return e ? 'string' == typeof e ? (e = e.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g, '"$2": '), JSON.parse(e)) : e : null
        },
        stringify: JSON.stringify
    }
}, function() {
    AFRAME.registerComponent('raycastable', {})
}, function() {
    AFRAME.registerComponent('recenter', {
        schema: {
            target: {
                default: ''
            }
        },
        init: function() {
            var e = this.el.sceneEl;
            this.matrix = new THREE.Matrix4, this.frustum = new THREE.Frustum, this.rotationOffset = 0, this.euler = new THREE.Euler, this.euler.order = 'YXZ', this.menuPosition = new THREE.Vector3, this.recenter = this.recenter.bind(this), this.checkInViewAfterRecenter = this.checkInViewAfterRecenter.bind(this), this.target = document.querySelector(this.data.target), e.addEventListener('enter-vr', () => setTimeout(this.recenter, 100)), e.addEventListener('menudown', this.recenter), e.addEventListener('thumbstickdown', this.recenter), window.addEventListener('vrdisplaypresentchange', this.recenter)
        },
        recenter: function() {
            var e = this.euler;
            e.setFromRotationMatrix(this.el.sceneEl.camera.el.object3D.matrixWorld, 'YXZ'), this.el.object3D.rotation.y = e.y + this.rotationOffset, setTimeout(this.checkInViewAfterRecenter, 0)
        },
        checkInViewAfterRecenter: function() {
            var e = new THREE.Vector3,
                t = new THREE.Vector3;
            return function() {
                var a = this.el.sceneEl.camera,
                    o = this.frustum,
                    r = this.menuPosition;
                a.updateMatrix(), a.updateMatrixWorld(), o.setFromMatrix(this.matrix.multiplyMatrices(a.projectionMatrix, a.matrixWorldInverse)), r.setFromMatrixPosition(this.target.object3D.matrixWorld), e.copy(r).y -= 3, t.copy(r).y += 3;
                o.containsPoint(r) || o.containsPoint(e) || o.containsPoint(t) || (this.rotationOffset = 0 === this.rotationOffset ? Math.PI : 0, this.recenter())
            }
        }(),
        remove: function() {
            this.el.sceneEl.removeEventListener('enter-vr', this.recenter)
        }
    })
}, function() {
    AFRAME.registerComponent('refresh', {
        init: function() {
            var e = this.el;
            e.addEventListener('click', () => {
                e.sceneEl.emit('refresh'), window.postMessage({
                    action: 'refreshCommand'
                }, '*')
            })
        }
    })
}, function() {
    AFRAME.registerComponent('screen-manager', {
        schema: {
            screen: {
                type: 'string'
            }
        },
        init: function() {
            var e;
            this.mask = document.getElementById('screenMask'), this.screens = {}, this.screenHistory = this.el.systems.state.state.screenHistory, this.prevScreen = '', this.prevScreenHistoryLength = 0, e = document.createElement('a-mixin'), e.setAttribute('id', 'screen'), e.setAttribute('animation__screenmanager', 'property: object3D.position.z; dur: 200; easing: easeInOutCubic; delay: 50; startEvents: screenmanager'), this.el.querySelector('a-assets').appendChild(e), this.mixin = e
        },
        update: function(e) {
            var t = this.el,
                a = this.data;
            'screen' in e && (!e.screen && a.screen && this.mask.emit('fadein'), e.screen && !a.screen && this.mask.emit('fadeout'), this.screenHistory.length > this.prevScreenHistoryLength ? this.handlePush() : this.handlePop(), this.storePreviousScreen())
        },
        handlePush: function() {
            var e = this.screens,
                t = this.screenHistory,
                a;
            a = 1 === t.length ? 'main' : t[t.length - 2], e[a].setAttribute('animation__screenmanager', 'to', -0.4 * t.length), e[a].emit('screenmanager', null, !1)
        },
        handlePop: function() {
            var e = this.screens,
                t = this.screenHistory,
                a;
            a = 0 === t.length ? 'main' : t[t.length - 1], e[a].setAttribute('animation__screenmanager', 'to', 0), e[a].emit('screenmanager', null, !1), this.prevScreen && this.el.emit(`screenpop-${this.prevScreen}`)
        },
        storePreviousScreen: function() {
            var e = this.screenHistory;
            this.prevScreen = e[e.length - 1] || '', this.prevScreenHistoryLength = e.length
        },
        registerScreen: function(e, t) {
            this.screens[t] = e, setTimeout(() => {
                e.setAttribute('mixin', (e.getAttribute('mixin') || '') + ' screen')
            })
        }
    }), AFRAME.registerComponent('screen', {
        schema: {
            name: {
                type: 'string'
            }
        },
        play: function() {
            var e = this.el;
            e.sceneEl.components['screen-manager'].registerScreen(e, this.data.name)
        }
    })
}, function(e, t, a) {
    function o(e, t) {
        var a, o, r, s, l, d;
        for (r = 0; 6 > r; r++) {
            if (o = t[r], s = e.children[r], !o) {
                s.object3D.visible = !1;
                continue
            }
            s.object3D.visible = !0, Object.assign(s.dataset, o), l = n.truncate(o.title, 25), s.querySelector('.searchResultTitle').setAttribute('text', 'value', l), a = n.truncate(o.author, 35), s.querySelector('.searchResultAuthor').setAttribute('text', 'value', a), d = n.truncate(o.url, 35, !0), s.querySelector('.searchResultUrl').setAttribute('text', 'value', d)
        }
    }
    var r = a(29),
        n = a(7),
        s = r('QULTOY3ZWU', '4ac532d3ddfcadcecd3954894051527e'),
        l = s.initIndex('sites');
    AFRAME.registerComponent('search-input', {
        init: function() {
            var e = this.el;
            this.eventDetail = {
                results: []
            }, this.query = {}, e.addEventListener('change', (e) => {
                this.search(e.detail)
            })
        },
        search: function(e) {
            this.query.query = e, l.search(this.query, (e, t) => {
                t && (this.eventDetail.hits = t.hits, this.el.sceneEl.emit('searchresults', this.eventDetail), 4 < this.query.length && gtag('event', 'search', {
                    value: this.query
                }))
            })
        }
    }), AFRAME.registerComponent('search-result', {
        init: function() {
            var e = this.el;
            e.addEventListener('click', () => {
                e.object3D.visible && e.sceneEl.emit('linkdetailopensearch', e.dataset)
            })
        }
    }), AFRAME.registerComponent('search-result-list', {
        schema: {
            isSearching: {
                default: !1
            }
        },
        init: function() {
            var e = this.el;
            this.hits = null, e.sceneEl.addEventListener('searchresults', (t) => {
                this.hits = t.detail.hits, e.object3D.visible = this.data.isSearching && !!this.hits.length, o(e, this.hits)
            })
        },
        update: function() {
            this.data.isSearching ? this.hits && this.hits.length && (this.el.object3D.visible = !0) : this.el.object3D.visible = !1
        }
    })
}, function() {
    AFRAME.registerComponent('sub-object', {
        schema: {
            from: {
                default: '',
                type: 'selector'
            },
            name: {
                default: ''
            }
        },
        init: function() {
            var e = this.data;
            e.from.getObject3D('mesh') ? this.loadSubObject(e.from.getObject3D('mesh')) : e.from.addEventListener('model-loaded', (e) => {
                this.loadSubObject(e.detail.model)
            })
        },
        loadSubObject: function(e) {
            var t = this.data,
                a = this.el,
                o;
            o = e.getObjectByName(t.name), a.setObject3D('mesh', o.clone()), a.emit('subobjectloaded')
        }
    })
}, function() {
    var e, t, a;
    document.addEventListener('DOMContentLoaded', () => {
        e = document.getElementById('linkTitleLogoTemplate').innerHTML, t = document.getElementById('linkTitleTextTemplate').innerHTML, a = document.getElementById('linkTitleSupercraftTemplate').innerHTML
    }), AFRAME.registerComponent('superlink', {
        schema: {
            enabled: {
                default: !1
            },
            isActive: {
                default: !1
            },
            isLeftPaginator: {
                default: !1
            },
            isLoadingSite: {
                default: !1
            },
            isRightPaginator: {
                default: !1
            },
            isSupercraft: {
                default: !1
            },
            isVisited: {
                default: !1
            },
            logo: {
                default: ''
            },
            siteId: {
                default: ''
            },
            title: {
                default: ''
            },
            titleText: {
                default: ''
            }
        },
        init: function() {
            var e = this.el;
            this.eventDetail = {
                siteId: this.data.siteId
            }, this.isHovered = !1, this.linkAnimationContainer = e.querySelector('.linkAnimationContainer'), this.linkContainer = e.parentNode, this.linkImage = e.querySelector('.linkImage'), this.linkVisited = this.el.querySelector('.linkVisited'), this.raycastTarget = e.querySelector('.linkRaycastTarget'), e.addEventListener('mouseenter', this.onMouseEnter.bind(this)), e.addEventListener('mouseleave', this.onMouseLeave.bind(this)), e.addEventListener('click', this.onClick.bind(this)), e.sceneEl.addEventListener('pageleft', this.onPageTurn.bind(this)), e.sceneEl.addEventListener('pageright', this.onPageTurn.bind(this)), this.renderTitle()
        },
        update: function() {
            var e = this.el,
                t = this.data;
            this.linkVisited.object3D.visible = !this.data.isVisited, (t.isActive || t.isLeftPaginator || t.isRightPaginator) && (e.object3D.visible = !0), setTimeout(() => {
                var t = this.data,
                    a;
                a = t.isActive || t.isLeftPaginator || t.isRightPaginator;
                a || (e.object3D.visible = !1)
            }, 500)
        },
        renderTitle: function() {
            var o = this.data,
                r = this.el,
                n, s;
            s = o.isSupercraft ? a : o.logo ? e : t, n = r.querySelector('.linkTitle'), n.appendChild(r.sceneEl.systems.state.renderTemplate(s, o)), 'true' === r.dataset.isUserSite && r.querySelector('.linkImage').setAttribute('material', 'src', '/superassets/site/devlink.jpg')
        },
        onClick: function() {
            var e = this.data,
                t = this.el;
            !e.enabled || e.isLoadingSite || t.sceneEl.emit('linkdetailopen', this.eventDetail)
        },
        onMouseEnter: function() {
            var e = this.data,
                t = this.el,
                a, o;
            if (e.enabled && !e.isLoadingSite && !this.linkContainer.hasAttribute('data-is-scrolling')) {
                for (this.isHovered = !0, a = this.linkAnimationContainer.querySelectorAll('[animation__linkhoverstart]'), o = 0; o < a.length; o++) a[o].emit('linkhoverstart', null, !1);
                this.linkAnimationContainer.emit('linkhoverstart', null, !1)
            }
        },
        onMouseLeave: function() {
            var e = this.data,
                t = this.el,
                a, o;
            if (this.isHovered && !this.linkContainer.hasAttribute('data-is-scrolling')) {
                for (this.isHovered = !1, a = this.linkAnimationContainer.querySelectorAll('[animation__linkhoverend]'), o = 0; o < a.length; o++) a[o].emit('linkhoverend', null, !1);
                this.linkAnimationContainer.emit('linkhoverend', null, !1)
            }
        },
        onPageTurn: function() {
            var e = this.data,
                t = this.el,
                a;
            if (e.isActive && this.isHovered) {
                for (a = this.linkAnimationContainer.querySelectorAll('[animation__linkhoverend]'), i = 0; i < a.length; i++) a[i].emit('linkhoverend', null, !1);
                this.linkAnimationContainer.emit('linkhoverend', null, !1)
            }
        }
    })
}, function() {
    AFRAME.registerComponent('tab-switch-fade', {
        init: function() {
            window.addEventListener('message', (e) => {
                'preSwitchToContent' === e.data.action && this.el.emit('fadeout'), 'switchToLobby' === e.data.action && this.el.emit('fadein')
            })
        }
    })
}, function() {
    AFRAME.registerComponent('thumb-paginator', {
        dependencies: ['tracked-controls'],
        schema: {
            enabled: {
                default: !0
            }
        },
        init: function() {
            var e = this.el;
            this.lastTime = void 0, this.onViveTrackpadDown = this.onViveTrackpadDown.bind(this), e.addEventListener('controllerconnected', (t) => {
                'vive-controls' === t.detail.name ? e.addEventListener('trackpaddown', this.onViveTrackpadDown) : (this.tick = this.thumbstickTick, this.el.sceneEl.addBehavior(this))
            })
        },
        onViveTrackpadDown: function() {
            var e = this.el,
                t;
            t = e.components['tracked-controls'].axis[0], -0.5 >= t && e.sceneEl.emit('pageleft'), 0.5 <= t && e.sceneEl.emit('pageright')
        },
        thumbstickTick: function(e) {
            var t = this.el,
                a;
            this.lastTime && e < this.lastTime + 500 || !this.data.enabled || (a = t.components['tracked-controls'].axis[0], -0.5 >= a && (t.sceneEl.emit('pageleft'), this.lastTime = e), 0.5 <= a && (t.sceneEl.emit('pageright'), this.lastTime = e))
        }
    })
}, function() {
    AFRAME.registerComponent('tutorial-modal-image', {
        schema: {
            headset: {
                type: 'string'
            }
        },
        update: function() {
            var e = this.el,
                t = this.data,
                a;
            a = t.headset || 'vive', 'windows' === a && (a = 'oculus'), e.setAttribute('material', 'src', `assets/img/${a}-back.png`), 'oculus' === a ? e.object3D.position.set(0.157, 0.025, 0) : e.object3D.position.set(0.202, 0.023, 0)
        }
    })
}, function() {
    AFRAME.registerComponent('tutorial-modal', {
        schema: {
            tutorialModalOpen: {
                default: !1
            }
        },
        update: function(e) {
            return this.data.tutorialModalOpen ? void this.el.emit('tutorialmodalopen') : void(e.tutorialModalOpen && !this.data.tutorialModalOpen && this.el.emit('tutorialmodalclose'))
        }
    })
}, function() {
    AFRAME.registerComponent('visible-delay', {
        schema: {
            type: 'boolean'
        },
        update: function() {
            this.data ? setTimeout(() => {
                this.el.object3D.visible = !0
            }, 200) : this.el.object3D.visible = !1
        }
    })
}, function() {
    AFRAME.registerComponent('visible-fade', {
        schema: {
            delay: {
                type: 'number',
                default: 0
            },
            dur: {
                type: 'number',
                default: 150
            },
            property: {
                default: 'material.opacity'
            },
            visible: {
                default: !0
            }
        },
        init: function() {
            var e = this.data,
                t = this.el;
            t.setAttribute('animation__visiblefadein', {
                property: e.property,
                delay: e.delay,
                dur: e.dur,
                from: '0.0',
                easing: 'linear',
                startEvents: ['visiblefadein'],
                to: '1.0'
            }), t.setAttribute('animation__visiblefadeout', {
                property: e.property,
                delay: e.delay,
                dur: e.dur,
                easing: 'linear',
                from: '1',
                startEvents: ['visiblefadeout'],
                to: '0'
            })
        },
        update: function(e) {
            var t = this.data;
            !e.visible && t.visible && this.emitWithTextCheck('visiblefadein'), e.visible && !t.visible && this.emitWithTextCheck('visiblefadeout')
        },
        emitWithTextCheck: function(e) {
            var t = this.el,
                a = this.data;
            return 'text.opacity' !== a.property || t.components.text.texture.image ? void t.emit(e, null, !1) : void t.addEventListener('textfontset', () => {
                t.emit(e, null, !1)
            })
        }
    })
}, function(e, t, a) {
    function o(e) {
        e.keys().forEach(e)
    }

    function r() {
        var e, t;
        t = a(1).SITES, e = Object.keys(t).map((e) => t[e]), window.postMessage({
            action: 'provideData',
            siteData: e,
            wildSiteData: a(21),
            highPerformance: window.highPerformance
        }, '*')
    }
    window.$ = (e) => document.querySelector(e), window.$$ = (e) => document.querySelectorAll(e), window.highPerformance = !1, a(13), a(14), a(15), a(16), a(17), a(18), a(19), a(20), window.AFRAME.ASSETS_PATH = 'assets', a(22), a(23), o(a(24)), o(a(26)), a(25), window.addEventListener('load', r), window.addEventListener('developerurlupdated', r), navigator.serviceWorker.register('serviceWorker.js')
}, function(e, t, a) {
    'use strict';

    function o(e) {
        e.site.titleText = y.a.truncate(e.site.title, 55), e.site.urlText = y.a.truncate(e.site.url, 65), -1 !== e.site.url.indexOf('gunters-of-oasis') && (e.site.urlText = 'supermedium.com | Gunters of OASIS'), -1 !== e.linkDetail.url.indexOf('gunters-of-oasis') && (e.linkDetail.urlText = 'supermedium.com | Gunters of OASIS')
    }

    function r(e) {
        e.loadingText = `Loading ${e.site.title}...`, e.loadingUrl = e.linkDetail.url, 'oculus' === e.headset || 'windows' === e.headset ? (e.loadingReturnText = 'HOLD DOWN the THUMBSTICK any time to return home.', e.tooltipReturnText = 'From a site,\nHOLD DOWN the\nTHUMBSTICK\nto return home', e.tutorialImage = 'assets/img/oculus-back.png') : (e.loadingReturnText = 'HOLD DOWN the MENU BUTTON any time to return home.', e.tooltipReturnText = 'From a site,\nHOLD DOWN the\nMENU BUTTON\nto return home', e.tutorialImage = 'assets/img/vive-back.png')
    }

    function n(e, t) {
        e.linkDetail.author = t.author, e.linkDetail.description = t.description, e.linkDetail.image = `#siteImg-${t.id}`, e.linkDetail.isSupercraft = !!t.isSupercraft, e.linkDetail.logo = t.logo ? `#siteLogo-${t.id}` : '', e.linkDetail.siteId = t.id, e.linkDetail.title = t.title, e.linkDetail.titleText = y.a.truncate(t.title, 22), t.isSupercraft && (e.linkDetail.description = `"${t.title}", built with Supercraft.`), e.linkDetail.url = e.developerUrl && 'developer' === e.linkDetail.siteId ? e.developerUrl : t.url
    }

    function s(e, t) {
        e.linkDetail.urlText = y.a.truncate(t.url, 40, !0), t.description && (t.description = t.description.replace(/^\n|\n$/g, '')), e.linkDetail.description = y.a.truncate(e.linkDetail.description, 130), e.linkDetail.author = y.a.truncate(e.linkDetail.author, 40)
    }

    function l(e, t) {
        e.screen === t || (e.screenHistory.push(t), e.screen = t)
    }

    function d(e) {
        var t;
        return t = e.screenHistory.pop(), 0 === e.screenHistory.length ? void(e.screen = '') : void(e.screen = e.screenHistory[e.screenHistory.length - 1])
    }

    function c(e, t) {
        e.author = 'N/A', e.description = 'A site you added!', e.id = `userSite${t}`, e.isUserSite = !0, e.titleText = y.a.truncate(e.title, 25), h.a.SITES[e.id] = e
    }

    function u(e, t) {
        var a, o;
        if (e.activeCollection.length = 0, e.activeCollection.__dirty = !0, e.userCollectionActive = t === k, a = h.a.COLLECTIONS[t], e.activeCollectionId = a.id, e.activeCollectionDescription = a.description, e.activeCollectionTitle = a.title, t === k) {
            for (o = 0; o < e.userCollection.length; o++) e.activeCollection.push(e.userCollection[o]);
            return
        }
        for (o = 0; o < a.sites.length; o++) e.activeCollection.push(h.a.SITES[a.sites[o]])
    }

    function p(e) {
        return 'search' === e.screen ? (e.page.hasLeft = !1, void(e.page.hasRight = !1)) : 'collection' === e.screen ? (e.page.hasLeft = 0 !== e.page.collection, void(e.page.hasRight = 6 < e.activeCollection.length && e.page.collection < m(e) - 1)) : void(e.page.hasLeft = -1 !== e.page.feed, e.page.hasRight = e.page.feed < f - 1)
    }

    function m(e) {
        return 'collection' === e.screen ? Math.ceil(e.activeCollection.length / 6) : f
    }
    Object.defineProperty(t, '__esModule', {
        value: !0
    });
    var g = a(1),
        h = a.n(g),
        b = a(7),
        y = a.n(b),
        f = h.a.FEED.length;
    Object.keys(h.a.SITES).forEach((e) => {
        h.a.SITES[e].isUserSite = !1
    });
    var v = JSON.parse(localStorage.getItem('userCollection') || '[]');
    v.forEach(c);
    var k = 'usercollection';
    AFRAME.registerState({
        initialState: {
            activeCollection: [],
            activeCollectionDescription: '',
            activeCollectionId: '',
            activeCollectionTitle: '',
            controller: '',
            hasError: !1,
            headset: '',
            highPerformance: window.highPerformance,
            isLoadingSite: !1,
            isSiteEnterable: !1,
            isSiteLoaded: !1,
            isSiteLoadedWithoutError: !1,
            linkDetail: {
                author: '',
                description: '',
                image: '#noURL',
                isSupercraft: !1,
                title: '',
                titleText: '',
                siteId: '',
                url: '',
                urlText: ''
            },
            loadingText: '',
            loadingUrl: '',
            loadingReturnText: '',
            tooltipReturnText: '',
            notificationMessage: '',
            notificationType: '',
            page: {
                collection: 0,
                feed: 0,
                hasLeft: !0,
                hasRight: !0
            },
            screen: '',
            screenHistory: [],
            site: {
                image: '#noURL',
                title: '',
                titleText: '',
                url: '',
                urlText: 'Select a site to load'
            },
            switchedToLobby: !1,
            tutorialImage: '',
            urlBarActive: !1,
            userCollection: v,
            userCollectionActive: !1,
            version: 0
        },
        handlers: {
            cancelloading: function(e) {
                e.hasError = !1, e.isLoadingSite = !1, e.site.url = '', d(e)
            },
            collectionopen: function(e) {
                e.page.collection = 0, l(e, 'collection'), p(e), gtag('event', 'collectionopen', {
                    value: e.activeCollectionId
                })
            },
            collectionset: function(e, t) {
                u(e, t.collectionId)
            },
            contentPageReady: function(e) {
                e.hasError = !1, e.isLoadingSite = !1, d(e)
            },
            contentPageLoaded: function(e, t) {
                e.site.title = t.title, e.site.url = t.url
            },
            controllerconnected: function(e, t) {
                e.controller = t.name, e.headset = t.name.split('-')[0], gtag('event', 'controllerconnected', {
                    value: t.name
                }), JSON.parse(localStorage.getItem('hasSeenTutorialModal')) || l(e, 'tutorialmodal')
            },
            dismisstutorialmodal: function(e) {
                localStorage.setItem('hasSeenTutorialModal', !0), d(e)
            },
            historyStateUpdated: function(e, t) {
                e.site.url = t.url
            },
            linkdetailopen: function(e, t) {
                var a;
                a = h.a.SITES[t.siteId], n(e, a), s(e, a), gtag('event', 'linkdetailopen', {
                    value: e.linkDetail.url
                }), l(e, 'linkdetail')
            },
            linkdetailopensearch: function(e, t) {
                Object.assign(e.linkDetail, t), e.linkDetail.logo = '', s(e, t), l(e, 'linkdetail')
            },
            navigate: function(e) {
                e.isLoadingSite = !0, 'linkdetail' === e.screen && (e.site.image = e.linkDetail.image, e.site.title = e.linkDetail.title, e.site.url = e.linkDetail.url), e.hasError = !1, e.notificationMessage = '', e.notificationType = '', e.switchedToLobby = !1, gtag('event', 'navigatefeaturedlink', {
                    value: e.site.url
                })
            },
            notificationError: function(e) {
                e.hasError = !0, e.notificationMessage = 'This site is taking time to load. Wait a bit then and click the image on the URL bar to re-enter the site.', e.notificationType = 'error', gtag('event', 'notificationerror', {
                    value: e.site.url
                })
            },
            pageleft: function(e) {
                var t = 'collection' === e.screen ? 'collection' : 'feed';
                ('collection' != e.screen || 0 !== e.page.collection) && (e.screen || -1 !== e.page.feed) && (e.page[t]--, p(e), gtag('event', 'featuredpageleft'))
            },
            pageright: function(e) {
                var t = 'collection' === e.screen ? 'collection' : 'feed';
                e.page[t] >= m(e) - 1 || (e.page[t]++, p(e), gtag('event', 'featuredpageright'))
            },
            pageset: function(e, t) {
                var a = 'collection' === e.screen ? 'collection' : 'feed';
                0 > t || t >= m(e) || (e.page[a] = t)
            },
            preSwitchToContent: function(e) {
                e.isSiteLoading = !1
            },
            refresh: function(e) {
                e.isLoadingSite = !0, gtag('event', 'refresh')
            },
            screenpop: function(e) {
                d(e)
            },
            "screenpop-collection": function(e) {
                e.page.collection = 0, p(e)
            },
            "screenpop-linkdetail": function(e) {
                gtag('event', 'linkdetailclose', {
                    value: e.linkDetail.url
                }), e.isLoadingSite || (e.linkDetail.image = '#noURL')
            },
            searchblur: function(e) {
                d(e), p(e)
            },
            searchfocus: function(e) {
                gtag('event', 'startsearch'), l(e, 'search'), p(e)
            },
            switchToLobby: function(e, t) {
                t && t.tabScreenshot && (e.site.image = `url(${t.tabScreenshot})`), e.switchedToLobby = !0, gtag('event', 'switchtolobby')
            },
            usercollectionadd: function(e, t) {
                c(t, e.userCollection.length), e.userCollection.push(t), localStorage.setItem('userCollection', JSON.stringify(e.userCollection)), gtag('event', 'usercollectionadd'), u(e, k), e.page.feed = -1
            },
            usercollectionremove: function(e, t) {
                e.userCollection.splice(t.index, 1), localStorage.setItem('userCollection', JSON.stringify(e.userCollection)), u(e, k)
            },
            usercollectionupdatetitle: function(e, t) {
                e.userCollection[t.index].title = t.title, e.userCollection.__dirty = !0, e.userCollectionActive && (e.activeCollection.__dirty = !0)
            },
            version: function(e, t) {
                e.version = parseFloat(t, 10)
            }
        },
        computeState: function(e) {
            e.isSiteLoaded = !!e.site.url && !e.isLoadingSite && !e.site.url.endsWith('blank.html'), e.urlBarActive = e.isSiteLoaded && !e.screen && !e.isLoadingSite, o(e), r(e)
        }
    })
}, function(e, t, a) {
    t = e.exports = a(99)(void 0), t.push([e.i, 'html,\nbody {\n  background: #2b2b2b;\n  font: 16px \'Source Sans Pro\', sans-serif;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n}\n.a-enter-vr-button {\n  display: none !important;\n}\n.panelContainer h1,\n.panelContainer h2,\n.panelContainer h3 {\n  color: #71fce7;\n  font-family: \'Sanchez\';\n}\n.panelContainer h2 {\n  font-size: 30px;\n}\n.panelContainer h3 {\n  font-size: 20px;\n  font-weight: normal;\n}\n.panelContainer ul {\n  padding-left: 15px;\n}\n.panelContainer a {\n  color: #fd78b7;\n  -webkit-transition: color 0.1s;\n  transition: color 0.1s;\n}\n.panelContainer a:hover {\n  color: #fd93c5;\n}\n.panelContainer .button {\n  background: #71fce7;\n  border: none;\n  border-radius: 8px;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  font: 15px \'Source Sans Pro\', sans-serif;\n  font-weight: bold;\n  color: #4f4e4d;\n  cursor: pointer;\n  margin: 10px 0;\n  padding: 8px 0;\n  position: relative;\n  -webkit-transition: background-color 0.1s;\n  transition: background-color 0.1s;\n  width: 100%;\n}\n.panelContainer .button:hover {\n  background: #4dfbe1;\n}\n.panelContainer .button .buttonLoadingText {\n  display: none;\n}\n.panelContainer .button.buttonLoading {\n  background: #343434;\n  color: #aaa;\n  pointer-events: none;\n}\n.panelContainer .button.buttonLoading:before {\n  display: inline-block;\n}\n.panelContainer .button.buttonLoading .buttonText {\n  display: none;\n}\n.panelContainer .button.buttonLoading .buttonLoadingText {\n  display: inline-block;\n}\n.panelContainer .button:before {\n  -webkit-animation: loadingIndicator 1.4s infinite ease-in-out;\n          animation: loadingIndicator 1.4s infinite ease-in-out;\n  background-image: \'assets/img/logo-border.png\';\n  background-size: 20px 20px;\n  content: \'\';\n  display: none;\n  left: 12px;\n  position: absolute;\n  height: 20px;\n  top: 8px;\n  width: 20px;\n}\n.panelContainer .panelOptionContainer {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.panel,\n.panelSection {\n  border: 3px solid;\n  -o-border-image: linear-gradient(to bottom, #fd78b7, #71fce7) 1 100%;\n     border-image: -webkit-gradient(linear, left top, left bottom, from(#fd78b7), to(#71fce7)) 1 100%;\n     border-image: linear-gradient(to bottom, #fd78b7, #71fce7) 1 100%;\n  height: 100%;\n  opacity: 0.95;\n  padding: 10px 5px;\n  position: fixed;\n}\n.panelSection > :last-child {\n  padding-bottom: 30px;\n}\n.panel {\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  background: #333;\n  color: #fafafa;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  font-weight: bold;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  width: 72px;\n  z-index: 999999999999;\n}\n.panel .logo {\n  margin-top: 15px;\n  margin-bottom: 30px;\n  height: 48px;\n  width: 48px;\n}\n.panelOption {\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  color: #7d7d7d;\n  cursor: pointer;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  font-size: 13px;\n  font-weight: bold;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  margin-bottom: 30px;\n  margin-top: 0px;\n}\n.panelOption:hover {\n  color: #fafafa;\n}\n.panelOption.panelOptionActive {\n  color: #71fce7;\n}\n.panelOption svg {\n  fill: #4b4b4b;\n  height: 40px;\n  margin-bottom: 2px;\n  width: 40px;\n}\n.panelOption:hover svg,\n.panelOption.panelOptionActive svg {\n  fill: url("#svggrad");\n}\n.panelSection {\n  background: #4b4b4b;\n  color: #ddd;\n  overflow: auto;\n  padding-left: 107px;\n  padding-right: 25px;\n  -webkit-transition: -webkit-transform 0.2s;\n  transition: -webkit-transform 0.2s;\n  transition: transform 0.2s;\n  transition: transform 0.2s, -webkit-transform 0.2s;\n  z-index: 99998;\n}\n.panelSection.panelSectionSites {\n  -webkit-transform: translate3d(-482px, 0, 0);\n          transform: translate3d(-482px, 0, 0);\n  width: 350px;\n}\n.panelSection.panelSectionSites.panelSectionActive {\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n}\n.panelSection.panelSectionSites input[type="text"] {\n  background: #363636;\n  border: none;\n  border-radius: 10px;\n  color: #ccc;\n  font-size: 13px;\n  margin-bottom: 0;\n  padding: 8px 13px;\n  width: 100%;\n  font-weight: bold;\n}\n.siteDelete {\n  bottom: 5px;\n  font-size: 30px;\n  position: relative;\n  text-decoration: none;\n}\n.panelSection.panelSectionNews {\n  -webkit-transform: translate3d(-412px, 0, 0);\n          transform: translate3d(-412px, 0, 0);\n  width: 280px;\n}\n.panelSection.panelSectionNews ul {\n  list-style: disc;\n  padding-left: 15px;\n}\n.panelSection.panelSectionNews li {\n  margin-bottom: 10px;\n}\n.panelSection.panelSectionNews.panelSectionActive {\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n}\n.panelSection.panelSectionHelp {\n  -webkit-transform: translate3d(-412px, 0, 0);\n          transform: translate3d(-412px, 0, 0);\n  width: 280px;\n}\n.panelSection.panelSectionHelp.panelSectionActive {\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n}\n.panelContainer .siteContainer {\n  padding-bottom: 40px;\n  padding-left: 0;\n  width: 100%;\n}\n.site {\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  background: #404040;\n  border-radius: 10px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 8px;\n  padding-right: 10px;\n  margin: 10px 0;\n  -webkit-transition: color 0.1s;\n  transition: color 0.1s;\n}\n.site img {\n  margin-right: 10px;\n  height: 32px;\n  width: 32px;\n}\n.site p {\n  margin: 0;\n  font-size: 13px;\n  line-height: 18px;\n}\n.site p:first-child {\n  font-size: 20px;\n  font-weight: bold;\n}\n.site .siteData {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  max-width: 100%;\n}\n.aframe-inspector-opened .panelContainer {\n  display: none;\n}\n#svgGradient {\n  height: 0;\n  width: 0;\n}\n.helpBackLobbyVive {\n  display: none;\n}\n.helpBackLobbyOculus {\n  display: none;\n}\n#helpBackLobby[data-controller="vive-controls"] .helpBackLobbyVive {\n  display: block;\n}\n#helpBackLobby[data-controller="vive-controls"] .helpBackLobbyOculus {\n  display: none;\n}\n#helpBackLobby[data-controller="oculus-touch-controls"] .helpBackLobbyVive,\n#helpBackLobby[data-controller="windows-motion-controls"] .helpBackLobbyVive {\n  display: none;\n}\n#helpBackLobby[data-controller="oculus-touch-controls"] .helpBackLobbyOculus,\n#helpBackLobby[data-controller="windows-motion-controls"] .helpBackLobbyOculus {\n  display: block;\n}\n.helpBackLobby {\n  position: fixed;\n  right: 10px;\n  top: 0;\n  z-index: 9997;\n}\n.helpBackLobby img {\n  height: 200px;\n}\n.helpBackLobby div {\n  background: rgba(0,0,0,0.3);\n  border-radius: 13px;\n  color: #f0f0f0;\n  font: 15px \'Source Sans Pro\', sans-serif;\n  padding: 8px 14px 8px 10px;\n  position: absolute;\n  right: 185px;\n  text-align: right;\n  text-shadow: 0 0px 2px rgba(155,155,155,0.5);\n  top: 45px;\n  width: 170px;\n}\n#plugyourheadset {\n  background: #272727;\n  border-radius: 15px;\n  bottom: -100px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  font-size: 23px;\n  height: 80px;\n  left: 110px;\n  padding: 20px 30px;\n  position: absolute;\n  width: 350px;\n  z-index: 88888;\n}\n#plugyourheadset.slideup {\n  -webkit-animation: slide-top 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1s both;\n          animation: slide-top 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1s both;\n}\n#plugyourheadset.slideup img {\n  vertical-align: middle;\n  margin-right: 10px;\n  margin-bottom: 2px;\n}\n#devURLInput {\n  background-color: #88fee9;\n  color: #333;\n}\n#devURLInput:focus {\n  background-color: #363636;\n  color: #71fce7;\n}\nbody a-scene.fullscreen .a-canvas {\n  z-index: 0 !important;\n}\n#algoliaLogo img {\n  margin: 5px 0 20px 0;\n  width: 125px;\n}\n#loadingIndicatorContainer {\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  height: 100%;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  width: 100%;\n}\n#loadingIndicatorContainer p {\n  color: #fafafa;\n  font-weight: bold;\n  font-size: 24px;\n}\n#loadingIndicator {\n  -webkit-animation: pulse 3s infinite;\n          animation: pulse 3s infinite;\n  position: relative;\n  left: 15px;\n}\n@-webkit-keyframes loadingIndicator {\n  0% {\n    opacity: 0.05;\n  }\n  50% {\n    opacity: 0.85;\n  }\n  100% {\n    opacity: 0.05;\n  }\n}\n@keyframes loadingIndicator {\n  0% {\n    opacity: 0.05;\n  }\n  50% {\n    opacity: 0.85;\n  }\n  100% {\n    opacity: 0.05;\n  }\n}\n@-webkit-keyframes slide-top {\n  0% {\n    -webkit-transform: translateY(0);\n            transform: translateY(0);\n  }\n  100% {\n    -webkit-transform: translateY(-120px);\n            transform: translateY(-120px);\n  }\n}\n@keyframes slide-top {\n  0% {\n    -webkit-transform: translateY(0);\n            transform: translateY(0);\n  }\n  100% {\n    -webkit-transform: translateY(-120px);\n            transform: translateY(-120px);\n  }\n}\n@-webkit-keyframes pulse {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes pulse {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n', ''])
}, function(e) {
    function t(e, t) {
        var o = e[1] || '',
            r = e[3];
        if (!r) return o;
        if (t && 'function' == typeof btoa) {
            var n = a(r),
                s = r.sources.map(function(e) {
                    return '/*# sourceURL=' + r.sourceRoot + e + ' */'
                });
            return [o].concat(s).concat([n]).join('\n')
        }
        return [o].join('\n')
    }

    function a(e) {
        var t = btoa(unescape(encodeURIComponent(JSON.stringify(e))));
        return '/*# ' + ('sourceMappingURL=data:application/json;charset=utf-8;base64,' + t) + ' */'
    }
    e.exports = function(e) {
        var a = [];
        return a.toString = function() {
            return this.map(function(a) {
                var o = t(a, e);
                return a[2] ? '@media ' + a[2] + '{' + o + '}' : o
            }).join('')
        }, a.i = function(e, t) {
            'string' == typeof e && (e = [
                [null, e, '']
            ]);
            for (var o = {}, r = 0, n; r < this.length; r++) n = this[r][0], 'number' == typeof n && (o[n] = !0);
            for (r = 0; r < e.length; r++) {
                var s = e[r];
                'number' == typeof s[0] && o[s[0]] || (t && !s[2] ? s[2] = t : t && (s[2] = '(' + s[2] + ') and (' + t + ')'), a.push(s))
            }
        }, a
    }
}, function(e, t, a) {
    function o(e) {
        var a = 0,
            o;
        for (o in e) a = (a << 5) - a + e.charCodeAt(o), a |= 0;
        return t.colors[Math.abs(a) % t.colors.length]
    }

    function r(e) {
        function a() {
            if (a.enabled) {
                var e = a,
                    o = +new Date,
                    r = o - (n || o);
                e.diff = r, e.prev = n, e.curr = o, n = o;
                for (var s = Array(arguments.length), l = 0; l < s.length; l++) s[l] = arguments[l];
                s[0] = t.coerce(s[0]), 'string' != typeof s[0] && s.unshift('%O');
                var d = 0;
                s[0] = s[0].replace(/%([a-zA-Z%])/g, function(a, o) {
                    if ('%%' === a) return a;
                    d++;
                    var r = t.formatters[o];
                    if ('function' == typeof r) {
                        var n = s[d];
                        a = r.call(e, n), s.splice(d, 1), d--
                    }
                    return a
                }), t.formatArgs.call(e, s);
                var c = a.log || t.log || console.log.bind(console);
                c.apply(e, s)
            }
        }
        return a.namespace = e, a.enabled = t.enabled(e), a.useColors = t.useColors(), a.color = o(e), 'function' == typeof t.init && t.init(a), a
    }
    t = e.exports = r.debug = r['default'] = r, t.coerce = function(e) {
        return e instanceof Error ? e.stack || e.message : e
    }, t.disable = function() {
        t.enable('')
    }, t.enable = function(e) {
        t.save(e), t.names = [], t.skips = [];
        for (var a = ('string' == typeof e ? e : '').split(/[\s,]+/), o = a.length, r = 0; r < o; r++) a[r] && (e = a[r].replace(/\*/g, '.*?'), '-' === e[0] ? t.skips.push(new RegExp('^' + e.substr(1) + '$')) : t.names.push(new RegExp('^' + e + '$')))
    }, t.enabled = function(e) {
        var a, o;
        for (a = 0, o = t.skips.length; a < o; a++)
            if (t.skips[a].test(e)) return !1;
        for (a = 0, o = t.names.length; a < o; a++)
            if (t.names[a].test(e)) return !0;
        return !1
    }, t.humanize = a(103), t.names = [], t.skips = [], t.formatters = {};
    var n
}, function(e, t, a) {
    (function(t, a) {
        (function(t, a) {
            e.exports = a()
        })(this, function() {
            'use strict';

            function e(e) {
                var t = typeof e;
                return null !== e && ('object' == t || 'function' == t)
            }

            function o(e) {
                return 'function' == typeof e
            }

            function r() {
                return 'undefined' == typeof q ? n() : function() {
                    q(s)
                }
            }

            function n() {
                var e = setTimeout;
                return function() {
                    return e(s, 1)
                }
            }

            function s() {
                for (var e = 0; e < O; e += 2) {
                    var t = U[e],
                        a = U[e + 1];
                    t(a), U[e] = void 0, U[e + 1] = void 0
                }
                O = 0
            }

            function l(e, t) {
                var a = this,
                    o = new this.constructor(u);
                void 0 === o[G] && L(o);
                var r = a._state;
                if (r) {
                    var n = arguments[r - 1];
                    R(function() {
                        return C(r, o, n, a._result)
                    })
                } else A(a, o, e, t);
                return o
            }

            function d(e) {
                var t = this;
                if (e && 'object' == typeof e && e.constructor === t) return e;
                var a = new t(u);
                return f(a, e), a
            }

            function u() {}

            function c() {
                return new TypeError('You cannot resolve a promise with itself')
            }

            function p() {
                return new TypeError('A promises callback cannot return that same promise.')
            }

            function m(e) {
                try {
                    return e.then
                } catch (e) {
                    return Y.error = e, Y
                }
            }

            function g(e, t, a, o) {
                try {
                    e.call(t, a, o)
                } catch (t) {
                    return t
                }
            }

            function h(e, t, a) {
                R(function(e) {
                    var o = !1,
                        r = g(a, t, function(a) {
                            o || (o = !0, t === a ? k(e, a) : f(e, a))
                        }, function(t) {
                            o || (o = !0, x(e, t))
                        }, 'Settle: ' + (e._label || ' unknown promise'));
                    !o && r && (o = !0, x(e, r))
                }, e)
            }

            function b(e, t) {
                t._state === W ? k(e, t._result) : t._state === V ? x(e, t._result) : A(t, void 0, function(t) {
                    return f(e, t)
                }, function(t) {
                    return x(e, t)
                })
            }

            function y(e, t, a) {
                t.constructor === e.constructor && a === l && t.constructor.resolve === d ? b(e, t) : a === Y ? (x(e, Y.error), Y.error = null) : void 0 === a ? k(e, t) : o(a) ? h(e, t, a) : k(e, t)
            }

            function f(t, a) {
                t === a ? x(t, c()) : e(a) ? y(t, a, m(a)) : k(t, a)
            }

            function v(e) {
                e._onerror && e._onerror(e._result), S(e)
            }

            function k(e, t) {
                e._state !== Z || (e._result = t, e._state = W, 0 !== e._subscribers.length && R(S, e))
            }

            function x(e, t) {
                e._state !== Z || (e._state = V, e._result = t, R(v, e))
            }

            function A(e, t, a, o) {
                var r = e._subscribers,
                    n = r.length;
                e._onerror = null, r[n] = t, r[n + W] = a, r[n + V] = o, 0 === n && e._state && R(S, e)
            }

            function S(e) {
                var t = e._subscribers,
                    a = e._state;
                if (0 !== t.length) {
                    for (var o = void 0, r = void 0, n = e._result, s = 0; s < t.length; s += 3) o = t[s], r = t[s + a], o ? C(a, o, r, n) : r(n);
                    e._subscribers.length = 0
                }
            }

            function w(e, t) {
                try {
                    return e(t)
                } catch (t) {
                    return Y.error = t, Y
                }
            }

            function C(e, t, a, r) {
                var n = o(a),
                    s, l, d, c;
                if (!n) s = r, d = !0;
                else if (s = w(a, r), s === Y ? (c = !0, l = s.error, s.error = null) : d = !0, t === s) return void x(t, p());
                t._state !== Z || (n && d ? f(t, s) : c ? x(t, l) : e === W ? k(t, s) : e === V && x(t, s))
            }

            function E(t, e) {
                try {
                    e(function(e) {
                        f(t, e)
                    }, function(e) {
                        x(t, e)
                    })
                } catch (a) {
                    x(t, a)
                }
            }

            function T() {
                return X++
            }

            function L(e) {
                e[G] = X++, e._state = void 0, e._result = void 0, e._subscribers = []
            }

            function j() {
                return new Error('Array Methods must be provided an Array')
            }

            function _() {
                throw new TypeError('You must pass a resolver function as the first argument to the promise constructor')
            }

            function D() {
                throw new TypeError('Failed to construct \'Promise\': Please use the \'new\' operator, this object constructor cannot be called as a function.')
            }
            var I = Array.isArray ? Array.isArray : function(e) {
                return '[object Array]' === Object.prototype.toString.call(e)
            };
            var P = I,
                O = 0,
                R = function(e, t) {
                    U[O] = e, U[O + 1] = t, O += 2, 2 == O && (K ? K(s) : z())
                },
                M = 'undefined' == typeof window ? void 0 : window,
                N = M || {},
                H = N.MutationObserver || N.WebKitMutationObserver,
                B = 'undefined' == typeof self && 'undefined' != typeof t && '[object process]' === {}.toString.call(t),
                F = 'undefined' != typeof Uint8ClampedArray && 'undefined' != typeof importScripts && 'undefined' != typeof MessageChannel,
                U = Array(1e3),
                q, K, z;
            z = B ? function() {
                return function() {
                    return t.nextTick(s)
                }
            }() : H ? function() {
                var e = 0,
                    t = new H(s),
                    a = document.createTextNode('');
                return t.observe(a, {
                        characterData: !0
                    }),
                    function() {
                        a.data = e = ++e % 2
                    }
            }() : F ? function() {
                var e = new MessageChannel;
                return e.port1.onmessage = s,
                    function() {
                        return e.port2.postMessage(0)
                    }
            }() : void 0 !== M || 0 ? n() : function() {
                try {
                    var e = Function('return this')().require('vertx');
                    return q = e.runOnLoop || e.runOnContext, r()
                } catch (t) {
                    return n()
                }
            }();
            var G = Math.random().toString(36).substring(2),
                W = 1,
                V = 2,
                Y = {
                    error: null
                },
                X = 0,
                J = function() {
                    function e(e, t) {
                        this._instanceConstructor = e, this.promise = new e(u), this.promise[G] || L(this.promise), P(t) ? (this.length = t.length, this._remaining = t.length, this._result = Array(this.length), 0 === this.length ? k(this.promise, this._result) : (this.length = this.length || 0, this._enumerate(t), 0 === this._remaining && k(this.promise, this._result))) : x(this.promise, j())
                    }
                    return e.prototype._enumerate = function(e) {
                        for (var t = 0; this._state === Z && t < e.length; t++) this._eachEntry(e[t], t)
                    }, e.prototype._eachEntry = function(e, t) {
                        var a = this._instanceConstructor,
                            o = a.resolve;
                        if (o === d) {
                            var r = m(e);
                            if (r === l && e._state !== Z) this._settledAt(e._state, t, e._result);
                            else if ('function' != typeof r) this._remaining--, this._result[t] = e;
                            else if (a === Q) {
                                var n = new a(u);
                                y(n, e, r), this._willSettleAt(n, t)
                            } else this._willSettleAt(new a(function(t) {
                                return t(e)
                            }), t)
                        } else this._willSettleAt(o(e), t)
                    }, e.prototype._settledAt = function(e, t, a) {
                        var o = this.promise;
                        o._state === Z && (this._remaining--, e === V ? x(o, a) : this._result[t] = a), 0 === this._remaining && k(o, this._result)
                    }, e.prototype._willSettleAt = function(e, t) {
                        var a = this;
                        A(e, void 0, function(e) {
                            return a._settledAt(W, t, e)
                        }, function(e) {
                            return a._settledAt(V, t, e)
                        })
                    }, e
                }(),
                Q = function() {
                    function e(t) {
                        this[G] = T(), this._result = this._state = void 0, this._subscribers = [], u !== t && ('function' != typeof t && _(), this instanceof e ? E(this, t) : D())
                    }
                    return e.prototype.catch = function(e) {
                        return this.then(null, e)
                    }, e.prototype.finally = function(e) {
                        var t = this,
                            a = t.constructor;
                        return t.then(function(t) {
                            return a.resolve(e()).then(function() {
                                return t
                            })
                        }, function(t) {
                            return a.resolve(e()).then(function() {
                                throw t
                            })
                        })
                    }, e
                }(),
                Z;
            return Q.prototype.then = l, Q.all = function(e) {
                return new J(this, e).promise
            }, Q.race = function(e) {
                var t = this;
                return P(e) ? new t(function(a, o) {
                    for (var r = e.length, n = 0; n < r; n++) t.resolve(e[n]).then(a, o)
                }) : new t(function(e, t) {
                    return t(new TypeError('You must pass an array to race.'))
                })
            }, Q.resolve = d, Q.reject = function(e) {
                var t = this,
                    a = new t(u);
                return x(a, e), a
            }, Q._setScheduler = function(e) {
                K = e
            }, Q._setAsap = function(e) {
                R = e
            }, Q._asap = R, Q.polyfill = function() {
                var e;
                if ('undefined' != typeof a) e = a;
                else if ('undefined' != typeof self) e = self;
                else try {
                    e = Function('return this')()
                } catch (t) {
                    throw new Error('polyfill failed because global object is unavailable in this environment')
                }
                var t = e.Promise;
                if (t) {
                    var o = null;
                    try {
                        o = Object.prototype.toString.call(t.resolve())
                    } catch (t) {}
                    if ('[object Promise]' === o && !t.cast) return
                }
                e.Promise = Q
            }, Q.Promise = Q, Q
        })
    }).call(t, a(9), a(5))
}, function(e, t, a) {
    (function(t) {
        var a;
        a = 'undefined' == typeof window ? 'undefined' == typeof t ? 'undefined' == typeof self ? {} : self : t : window, e.exports = a
    }).call(t, a(5))
}, function(e) {
    function t(e) {
        if (e += '', !(100 < e.length)) {
            var t = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);
            if (t) {
                var a = parseFloat(t[1]),
                    o = (t[2] || 'ms').toLowerCase();
                return 'years' === o || 'year' === o || 'yrs' === o || 'yr' === o || 'y' === o ? a * d : 'days' === o || 'day' === o || 'd' === o ? a * u : 'hours' === o || 'hour' === o || 'hrs' === o || 'hr' === o || 'h' === o ? a * c : 'minutes' === o || 'minute' === o || 'mins' === o || 'min' === o || 'm' === o ? a * s : 'seconds' === o || 'second' === o || 'secs' === o || 'sec' === o || 's' === o ? a * l : 'milliseconds' === o || 'millisecond' === o || 'msecs' === o || 'msec' === o || 'ms' === o ? a : void 0
            }
        }
    }

    function a(e) {
        return e >= u ? n(e / u) + 'd' : e >= c ? n(e / c) + 'h' : e >= s ? n(e / s) + 'm' : e >= l ? n(e / l) + 's' : e + 'ms'
    }

    function o(e) {
        return r(e, u, 'day') || r(e, c, 'hour') || r(e, s, 'minute') || r(e, l, 'second') || e + ' ms'
    }

    function r(e, t, a) {
        return e < t ? void 0 : e < 1.5 * t ? Math.floor(e / t) + ' ' + a : Math.ceil(e / t) + ' ' + a + 's'
    }
    var n = Math.round,
        l = 1e3,
        s = 60 * l,
        c = 60 * s,
        u = 24 * c,
        d = 365.25 * u;
    e.exports = function(e, r) {
        r = r || {};
        var n = typeof e;
        if ('string' == n && 0 < e.length) return t(e);
        if ('number' == n && !1 === isNaN(e)) return r.long ? o(e) : a(e);
        throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(e))
    }
}, function(e, t, a) {
    'use strict';
    var o = Object.prototype.hasOwnProperty,
        r = Object.prototype.toString,
        n = Array.prototype.slice,
        s = a(105),
        l = Object.prototype.propertyIsEnumerable,
        d = !l.call({
            toString: null
        }, 'toString'),
        c = l.call(function() {}, 'prototype'),
        u = ['toString', 'toLocaleString', 'valueOf', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'constructor'],
        p = function(e) {
            var t = e.constructor;
            return t && t.prototype === e
        },
        m = {
            $console: !0,
            $external: !0,
            $frame: !0,
            $frameElement: !0,
            $frames: !0,
            $innerHeight: !0,
            $innerWidth: !0,
            $outerHeight: !0,
            $outerWidth: !0,
            $pageXOffset: !0,
            $pageYOffset: !0,
            $parent: !0,
            $scrollLeft: !0,
            $scrollTop: !0,
            $scrollX: !0,
            $scrollY: !0,
            $self: !0,
            $webkitIndexedDB: !0,
            $webkitStorageInfo: !0,
            $window: !0
        },
        g = function() {
            if ('undefined' == typeof window) return !1;
            for (var e in window) try {
                if (!m['$' + e] && o.call(window, e) && null !== window[e] && 'object' == typeof window[e]) try {
                    p(window[e])
                } catch (t) {
                    return !0
                }
            } catch (t) {
                return !0
            }
            return !1
        }(),
        h = function(e) {
            if ('undefined' == typeof window || !g) return p(e);
            try {
                return p(e)
            } catch (t) {
                return !1
            }
        },
        b = function(e) {
            var t = null !== e && 'object' == typeof e,
                a = '[object Function]' === r.call(e),
                n = s(e),
                l = t && '[object String]' === r.call(e),
                p = [];
            if (!t && !a && !n) throw new TypeError('Object.keys called on a non-object');
            if (l && 0 < e.length && !o.call(e, 0))
                for (var m = 0; m < e.length; ++m) p.push(m + '');
            if (n && 0 < e.length)
                for (var g = 0; g < e.length; ++g) p.push(g + '');
            else
                for (var b in e) !(c && a && 'prototype' == b) && o.call(e, b) && p.push(b + '');
            if (d)
                for (var y = h(e), f = 0; f < u.length; ++f) !(y && 'constructor' === u[f]) && o.call(e, u[f]) && p.push(u[f]);
            return p
        };
    b.shim = function() {
        if (Object.keys) {
            var e = function() {
                return 2 === (Object.keys(arguments) || '').length
            }(1, 2);
            if (!e) {
                var t = Object.keys;
                Object.keys = function(e) {
                    return s(e) ? t(n.call(e)) : t(e)
                }
            }
        } else Object.keys = b;
        return Object.keys || b
    }, e.exports = b
}, function(e) {
    'use strict';
    var t = Object.prototype.toString;
    e.exports = function(e) {
        var a = t.call(e),
            o = '[object Arguments]' === a;
        return o || (o = '[object Array]' !== a && null !== e && 'object' == typeof e && 'number' == typeof e.length && 0 <= e.length && '[object Function]' === t.call(e.callee)), o
    }
}, function(e) {
    'use strict';

    function t(e, t) {
        if (e.map) return e.map(t);
        for (var a = [], o = 0; o < e.length; o++) a.push(t(e[o], o));
        return a
    }
    var a = function(e) {
        switch (typeof e) {
            case 'string':
                return e;
            case 'boolean':
                return e ? 'true' : 'false';
            case 'number':
                return isFinite(e) ? e : '';
            default:
                return '';
        }
    };
    e.exports = function(e, n, s, l) {
        return n = n || '&', s = s || '=', null === e && (e = void 0), 'object' == typeof e ? t(r(e), function(r) {
            var l = encodeURIComponent(a(r)) + s;
            return o(e[r]) ? t(e[r], function(e) {
                return l + encodeURIComponent(a(e))
            }).join(n) : l + encodeURIComponent(a(e[r]))
        }).join(n) : l ? encodeURIComponent(a(l)) + s + encodeURIComponent(a(e)) : ''
    };
    var o = Array.isArray || function(e) {
            return '[object Array]' === Object.prototype.toString.call(e)
        },
        r = Object.keys || function(e) {
            var t = [];
            for (var a in e) Object.prototype.hasOwnProperty.call(e, a) && t.push(a);
            return t
        }
}, function(e, t, a) {
    function o(e, t) {
        for (var a = 0; a < e.length; a++) {
            var o = e[a],
                r = h[o.id];
            if (r) {
                r.refs++;
                for (var n = 0; n < r.parts.length; n++) r.parts[n](o.parts[n]);
                for (; n < o.parts.length; n++) r.parts.push(u(o.parts[n], t))
            } else {
                for (var s = [], n = 0; n < o.parts.length; n++) s.push(u(o.parts[n], t));
                h[o.id] = {
                    id: o.id,
                    refs: 1,
                    parts: s
                }
            }
        }
    }

    function r(e, t) {
        for (var a = [], o = {}, r = 0; r < e.length; r++) {
            var n = e[r],
                s = t.base ? n[0] + t.base : n[0],
                l = n[1],
                d = n[2],
                c = n[3],
                u = {
                    css: l,
                    media: d,
                    sourceMap: c
                };
            o[s] ? o[s].parts.push(u) : a.push(o[s] = {
                id: s,
                parts: [u]
            })
        }
        return a
    }

    function n(e, t) {
        var a = y(e.insertInto);
        if (!a) throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.');
        var o = k[k.length - 1];
        if ('top' === e.insertAt) o ? o.nextSibling ? a.insertBefore(t, o.nextSibling) : a.appendChild(t) : a.insertBefore(t, a.firstChild), k.push(t);
        else if ('bottom' === e.insertAt) a.appendChild(t);
        else if ('object' == typeof e.insertAt && e.insertAt.before) {
            var r = y(e.insertInto + ' ' + e.insertAt.before);
            a.insertBefore(t, r)
        } else throw new Error('[Style Loader]\n\n Invalid value for parameter \'insertAt\' (\'options.insertAt\') found.\n Must be \'top\', \'bottom\', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n')
    }

    function s(e) {
        if (null === e.parentNode) return !1;
        e.parentNode.removeChild(e);
        var t = k.indexOf(e);
        0 <= t && k.splice(t, 1)
    }

    function l(e) {
        var t = document.createElement('style');
        return e.attrs.type = 'text/css', c(t, e.attrs), n(e, t), t
    }

    function d(e) {
        var t = document.createElement('link');
        return e.attrs.type = 'text/css', e.attrs.rel = 'stylesheet', c(t, e.attrs), n(e, t), t
    }

    function c(e, t) {
        Object.keys(t).forEach(function(a) {
            e.setAttribute(a, t[a])
        })
    }

    function u(e, t) {
        var a, o, r, n;
        if (t.transform && e.css)
            if (n = t.transform(e.css), n) e.css = n;
            else return function() {};
        if (t.singleton) {
            var c = v++;
            a = f || (f = l(t)), o = p.bind(null, a, c, !1), r = p.bind(null, a, c, !0)
        } else e.sourceMap && 'function' == typeof URL && 'function' == typeof URL.createObjectURL && 'function' == typeof URL.revokeObjectURL && 'function' == typeof Blob && 'function' == typeof btoa ? (a = d(t), o = g.bind(null, a, t), r = function() {
            s(a), a.href && URL.revokeObjectURL(a.href)
        }) : (a = l(t), o = m.bind(null, a), r = function() {
            s(a)
        });
        return o(e),
            function(t) {
                if (t) {
                    if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap) return;
                    o(e = t)
                } else r()
            }
    }

    function p(e, t, a, o) {
        var r = a ? '' : o.css;
        if (e.styleSheet) e.styleSheet.cssText = A(t, r);
        else {
            var n = document.createTextNode(r),
                s = e.childNodes;
            s[t] && e.removeChild(s[t]), s.length ? e.insertBefore(n, s[t]) : e.appendChild(n)
        }
    }

    function m(e, t) {
        var a = t.css,
            o = t.media;
        if (o && e.setAttribute('media', o), e.styleSheet) e.styleSheet.cssText = a;
        else {
            for (; e.firstChild;) e.removeChild(e.firstChild);
            e.appendChild(document.createTextNode(a))
        }
    }

    function g(e, t, a) {
        var o = a.css,
            r = a.sourceMap,
            n = t.convertToAbsoluteUrls === void 0 && r;
        (t.convertToAbsoluteUrls || n) && (o = x(o)), r && (o += '\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(r)))) + ' */');
        var s = new Blob([o], {
                type: 'text/css'
            }),
            l = e.href;
        e.href = URL.createObjectURL(s), l && URL.revokeObjectURL(l)
    }
    var h = {},
        b = function(e) {
            var t;
            return function() {
                return 'undefined' == typeof t && (t = e.apply(this, arguments)), t
            }
        }(function() {
            return window && document && document.all && !window.atob
        }),
        y = function(e) {
            var t = {};
            return function(a) {
                if ('undefined' == typeof t[a]) {
                    var o = e.call(this, a);
                    if (o instanceof window.HTMLIFrameElement) try {
                        o = o.contentDocument.head
                    } catch (t) {
                        o = null
                    }
                    t[a] = o
                }
                return t[a]
            }
        }(function(e) {
            return document.querySelector(e)
        }),
        f = null,
        v = 0,
        k = [],
        x = a(108);
    e.exports = function(e, t) {
        if ('undefined' != typeof DEBUG && DEBUG && 'object' != typeof document) throw new Error('The style-loader cannot be used in a non-browser environment');
        t = t || {}, t.attrs = 'object' == typeof t.attrs ? t.attrs : {}, t.singleton || 'boolean' == typeof t.singleton || (t.singleton = b()), t.insertInto || (t.insertInto = 'head'), t.insertAt || (t.insertAt = 'bottom');
        var a = r(e, t);
        return o(a, t),
            function(e) {
                for (var n = [], s = 0; s < a.length; s++) {
                    var l = a[s],
                        d = h[l.id];
                    d.refs--, n.push(d)
                }
                if (e) {
                    var c = r(e, t);
                    o(c, t)
                }
                for (var s = 0, d; s < n.length; s++)
                    if (d = n[s], 0 === d.refs) {
                        for (var u = 0; u < d.parts.length; u++) d.parts[u]();
                        delete h[d.id]
                    }
            }
    };
    var A = function() {
        var e = [];
        return function(t, a) {
            return e[t] = a, e.filter(Boolean).join('\n')
        }
    }()
}, function(e) {
    e.exports = function(e) {
        var t = 'undefined' != typeof window && window.location;
        if (!t) throw new Error('fixUrls requires window.location');
        if (!e || 'string' != typeof e) return e;
        var a = t.protocol + '//' + t.host,
            o = a + t.pathname.replace(/\/[^\/]*$/, '/'),
            r = e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(e, t) {
                var r = t.trim().replace(/^"(.*)"$/, function(e, t) {
                    return t
                }).replace(/^'(.*)'$/, function(e, t) {
                    return t
                });
                if (/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r)) return e;
                var n;
                return n = 0 === r.indexOf('//') ? r : 0 === r.indexOf('/') ? a + r : o + r.replace(/^\.\//, ''), 'url(' + JSON.stringify(n) + ')'
            });
        return r
    }
}, function(e) {
    e.exports = 'uniform float brightness;\nuniform float time;\nuniform float opacity;\nuniform vec3 camera;\nuniform vec3 tint;\nvarying vec3 vWorldPosition;\n\nvoid main() {\n  vec2 uv = normalize(vWorldPosition - camera).xy;\n  vec3 c  = vec3(167.0, 204.0, 153.0) / 255.0;\n  vec3 floor = vec3(226.0, 142.0, 74.0) / 255.0;\n  vec3 c1 = vec3(79.0, 169.0, 198.0) / 255.0;\n  vec2 c1p = vec2(0.5, 0.5);\n  vec3 c2 = vec3(178.0, 86.0, 148.0) / 255.0;\n  vec2 c2p = vec2(0.0, 0.8);\n  c = mix(c, floor, 0.5 + (-uv.y - 0.2) * 0.5);\n  c = mix(c, c1, abs(1.0 - distance(c1p, uv)));\n  c = mix(c, c2, abs(1.0 - distance(c2p, uv)));\n  gl_FragColor = vec4((c + tint) * brightness, opacity);\n}\n'
}, function(e) {
    e.exports = 'varying vec3 vWorldPosition;\n\nvoid main() {\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n'
}, function(e) {
    e.exports = 'uniform sampler2D src;\nuniform vec3 color;\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vWorldPosition;\n\nfloat whenEqual(float x, float y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nfloat whenLessThan(float x, float y) {\n  return max(sign(y - x), 0.0);\n}\n\n/**\n * Simple lambert.\n */\nfloat lambert(vec3 N, vec3 L) {\n  vec3 nrmN = normalize(N);\n  vec3 nrmL = normalize(L);\n  float result = dot(nrmN, nrmL);\n  return max(result, 0.0);\n}\n\n/**\n * Gradient.\n */\nvec3 getColor(vec3 baseColor, vec2 uv) {\n  vec2 color1Position = vec2(0.5, 0.5);\n  vec2 color2Position = vec2(0.9, 0.4);\n  vec3 color1 = baseColor;\n  vec3 color2 = baseColor * 0.8;\n  vec3 floor = baseColor * 1.4;\n  vec3 outColor = baseColor;\n  outColor = mix(outColor, floor, 0.5 + (-uv.y - 0.2) * 0.5);\n  outColor = mix(outColor, color1, abs(1.0 - distance(color1Position, uv)));\n  outColor = mix(outColor, color2, abs(1.0 - distance(color2Position, uv)));\n  return outColor;\n}\n\nvoid main() {\n  vec3 gradientColor = getColor(color, vUv);\n\n  // Fade out next/prev links.\n  float fadeAlpha = 1.0 - smoothstep(2.25, 3.75, length(vWorldPosition.xz));\n\n  // Texture lookup.\n  vec4 tex = texture2D(src, vUv);\n\n  // Transform alpha = 0 to color.\n  tex.xyz = mix(tex.xyz, gradientColor, whenEqual(tex.w, 0.0));\n\n  // Blend the semi-transparent pieces.\n  float texAlpha = mix(tex.w, 1.0, whenEqual(tex.w, 0.0));\n  tex.xyz = mix(color, tex.xyz, texAlpha);\n\n  // Light.\n  vec3 diffuse = vec3(1.0, 1.0, 1.0);\n  vec3 lightPosition = vec3(0.2, 2, 4);\n  tex.xyz = tex.xyz * lambert(vNormal, lightPosition);\n\n  gl_FragColor = vec4(tex.xyz, min(1.0, fadeAlpha));\n}\n'
}, function(e) {
    e.exports = '// Parallax bounds.\n#define BOUND 1.25\n// Pagination\n#define PAGE_WIDTH 1.16\n#define FADE_WIDTH 1.6\n\nuniform vec3 color;\nuniform sampler2D src;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvarying vec2 vUv;\n\nvoid main() {\n  // Fade out next/prev links.\n  float alpha = 1.0 - smoothstep(2.25, 3.75, length(vWorldPosition.xz));\n  vec4 tex = texture2D(src, vUv) * vec4(color, 1.0);\n  gl_FragColor = vec4(tex.xyz, min(1.0, tex.w * alpha * opacity));\n}\n'
}, function(e) {
    e.exports = '#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives: enable\n#endif\n\nprecision highp float;\n// FIXME: Experimentally determined constants.\n#define BIG_ENOUGH 0.001\n#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\n#define ALL_SMOOTH 0.4\n#define ALL_ROUGH 0.02\n#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))\nuniform sampler2D map;\nuniform vec3 color;\nuniform float opacity;\nuniform float alphaTest;\nuniform bool negate;\nvarying vec2 vUV;\nvarying vec3 vWorldPosition;\n\nfloat median(float r, float g, float b) {\n  return max(min(r, g), min(max(r, g), b));\n}\nvoid main() {\n  vec3 sample = texture2D(map, vUV).rgb;\n  if (negate) {\n    sample = 1.0 - sample;\n  }\n  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;\n  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);\n  float dscale = 0.353505;\n  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));\n  float isBigEnough = max(abs(duv.x), abs(duv.y));\n\n  // When texel is too small, blend raw alpha value rather than supersampling.\n  // FIXME: Experimentally determined constant.\n  if (isBigEnough > BIG_ENOUGH) {\n    float ratio = BIG_ENOUGH / isBigEnough;\n    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);\n  }\n\n  // When texel is big enough, do standard alpha test.\n  // FIXME: Experimentally determined constant.\n  // Looks much better if we *don\'t* do this, but do we get Z fighting?\n  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }\n\n  // Else, do modified alpha test.\n  // FIXME: Experimentally determined constant.\n  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\n\n  // Fade out next/prev links.\n  float fadeAlpha = 1.0 - smoothstep(2.25, 3.75, length(vWorldPosition.xz));\n  gl_FragColor = vec4(color.xyz, alpha * opacity * fadeAlpha);\n}\n'
}, function(e) {
    e.exports = 'attribute vec2 uv;\nattribute vec3 position;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec2 vUV;\nvarying vec3 vWorldPosition;\n\nvoid main(void) {\n  vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n  vWorldPosition = worldPosition.xyz;\n  vUV = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n'
}, function(e) {
    e.exports = '// Parallax bounds.\n#define BOUND 1.25\n// Pagination\n#define PAGE_WIDTH 1.16\n#define FADE_WIDTH 1.6\nuniform sampler2D src;\nuniform float brightness;\nuniform float opacity;\nuniform float glare;\nuniform float uvXClamp;\nuniform float uvXOffset;\nuniform vec3 meshPosition;\nuniform vec3 sitesPosition;\n\nvarying vec3 vWorldPosition;\nvarying vec2 vUv;\nvarying vec3 vLocalCameraPosition;\n\nvoid main() {\n  float cameraOffsetX;\n  float cameraOffsetY;\n  float normalizedCameraOffsetX;\n  float normalizedCameraOffsetY;\n  float xMin;\n  float xMax;\n  float yMin;\n  float yMax;\n  vec2 sampleUV;\n\n  // Get offset of camera to image center.\n  cameraOffsetX = clamp(vLocalCameraPosition.x - meshPosition.x, -BOUND, BOUND);\n  cameraOffsetY = clamp(vLocalCameraPosition.y - meshPosition.y, -BOUND, BOUND);\n\n  // Convert [-BOUND, BOUND] to [0, 1].\n  normalizedCameraOffsetX = (cameraOffsetX + BOUND) / (2.0 * BOUND);\n  normalizedCameraOffsetY = (cameraOffsetY + BOUND) / (2.0 * BOUND);\n\n  // Given the camera offset, calculate the minimum and maximum UVs.\n  xMin = mix(0.10, 0.0, normalizedCameraOffsetX);\n  xMax = mix(1.0 * uvXClamp, 0.90 * uvXClamp, normalizedCameraOffsetX);\n  yMin = mix(0.10, 0.0, normalizedCameraOffsetY);\n  yMax = mix(1.0, 0.90, normalizedCameraOffsetY);\n\n  // Map UVs to the UVs bounds defined above.\n  sampleUV.x = mix(xMin, xMax, vUv.x) + uvXOffset;\n  sampleUV.y = mix(yMin, yMax, vUv.y);\n\n  // Fade out next/prev links.\n  float alpha  = 1.0 - smoothstep(2.25, 3.75, length(vWorldPosition.xz));\n\n  // Glare.\n  float g = smoothstep(0.0, 0.9, sin((1.0 - (1.0 - vUv.x) * vUv.y - glare * 2.0 - 1.0) * 3.14159)) * 0.14;\n\n  gl_FragColor = vec4(texture2D(src, sampleUV).xyz * vec3(brightness, brightness, brightness) + g, alpha * opacity);\n}\n'
}, function(e) {
    e.exports = 'uniform mat4 inverseMatrix;\nvarying vec3 vWorldPosition;\nvarying vec3 vLocalCameraPosition;\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n\n  // Transform global camera position to local space of object.\n  vLocalCameraPosition = vec4(vec4(cameraPosition, 1.0) * inverseMatrix).xyz;\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n'
}, function() {
    var e, t, a;
    t = $$('.panelOption'), a = $$('.panelSection'), e = $('.panelOptionContainer'), e.addEventListener('click', (o) => {
        var r, n, s, l;
        if (o.target !== e) {
            for (n = o.target.closest('[data-panel]'), l = n.dataset.panel, s = $(`.panelSection[data-panel=${l}]`), n.classList.contains('panelOptionActive') || gtag('event', 'panelsectionopen', {
                    value: n
                }), r = 0; r < t.length; r++) t[r] === n ? n.classList.toggle('panelOptionActive') : t[r].classList.remove('panelOptionActive');
            for (r = 0; r < a.length; r++) a[r] === s ? s.classList.toggle('panelSectionActive') : a[r].classList.remove('panelSectionActive')
        }
    }), window.addEventListener('keydown', (e) => {
        var a;
        49 > e.keyCode || 53 < e.keyCode || e.altKey && (a = e.keyCode - 49, t[a] && t[a].click())
    }), window.addEventListener('click', (e) => {
        var o;
        if ('CANVAS' === e.target.tagName) {
            for (o = 0; o < a.length; o++) a[o].classList.remove('panelSectionActive');
            for (o = 0; o < t.length; o++) t[o].classList.remove('panelOptionActive')
        }
    })
}, function(e, t, a) {
    function o(e, t, a, o) {
        var r, n, d;
        n = document.createElement('li'), n.classList.add('site'), n.classList.add('userSite'), n.innerHTML = u.replace('{url}', l.truncate(e, 45)).replace('{title}', l.truncate(t, 25)).replace('{image}', a), m.append(n), o && (r = s(n), d = new XMLHttpRequest, d.open('GET', e), d.addEventListener('load', () => {
            var e;
            e = /<title>(.*?)<\/title>/m.exec(d.responseText)[1], n.querySelector('.siteDataTitle').innerHTML = e, c.emit('usercollectionupdatetitle', {
                index: r,
                title: e
            }, !1)
        }), d.send())
    }

    function r(e, t, a) {
        c.emit('usercollectionadd', {
            url: e,
            title: t,
            image: a
        }, !1), setTimeout(() => {
            c.emit('collectionopen')
        }, 200)
    }

    function n(e) {
        c.emit('usercollectionremove', {
            index: e
        }), m.removeChild(m.children[e])
    }

    function s(e) {
        for (var t = 0; null !== (e = e.previousSibling);) t++;
        return t
    }
    var l = a(7),
        d, c, u, p, m;
    u = `
<img class="siteFavicon" src="{image}">
<div class="siteData">
  <p class="siteDataTitle">{title}</p>
  <p class="siteDataUrl">{url}</p>
</div>
<a class="siteDelete" href="#">&#x2a2f;</a>
`, c = AFRAME.scenes[0],
        function() {
            var e;
            for (p = c.systems.state.state.userCollection, m = $('.userSiteContainer'), e = 0; e < p.length; e++) o(p[e].url, p[e].title, p[e].image);
            d = $('#addSiteInput'), d.addEventListener('keydown', (e) => {
                var t, a, n;
                13 === e.keyCode && (n = d.value, n && (!n.startsWith('http') && (n = 'https://' + n), a = n.replace('https://', '').replace('http://', ''), t = 'assets/img/logo-bg.png', o(n, a, t, !0), r(n, a, t)))
            }), m.addEventListener('click', (e) => {
                e.target.classList.contains('siteDelete') && n(s(e.target.closest('.site')))
            })
        }()
}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMzYxMWFmODMwMTRhZWI1OGViZTEiLCJ3ZWJwYWNrOi8vLy4vfi9mb3JlYWNoL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9zaXRlcy5qc29uIiwid2VicGFjazovLy8uL34vYWxnb2xpYXNlYXJjaC9zcmMvY2xvbmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9hbGdvbGlhc2VhcmNoL3NyYy9lcnJvcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL34vYWxnb2xpYXNlYXJjaC9zcmMvbWFwLmpzIiwid2VicGFjazovLy8uL3NyYy9saWIvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vYWxnb2xpYXNlYXJjaC9zcmMvYnVpbGRTZWFyY2hNZXRob2QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NoYWRlcnMvZmFkZVZlcnRleC5nbHNsIiwid2VicGFjazovLy8uL34vYWZyYW1lLWFuaW1hdGlvbi1jb21wb25lbnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9hZnJhbWUtYW5pbWF0aW9uLXRpbWVsaW5lLWNvbXBvbmVudC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2FmcmFtZS1ldmVudC1zZXQtY29tcG9uZW50L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vYWZyYW1lLWdsdGYtcGFydC1jb21wb25lbnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9hZnJhbWUtbGF5b3V0LWNvbXBvbmVudC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2FmcmFtZS1wcm94eS1ldmVudC1jb21wb25lbnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9hZnJhbWUtc2xpY2U5LWNvbXBvbmVudC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2FmcmFtZS1zdGF0ZS1jb21wb25lbnQvZGlzdC9hZnJhbWUtc3RhdGUtY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy93aWxkU2l0ZURhdGEuanNvbiIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL2FmcmFtZS1tYXRlcmlhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY3NzL2luZGV4LnN0eWw/YTY1ZiIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cyBcXC5qcyQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVsL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9zdGF0ZSBcXC5qcyQiLCJ3ZWJwYWNrOi8vLy4vfi9hbGdvbGlhc2VhcmNoL3NyYy9BbGdvbGlhU2VhcmNoQ29yZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2FsZ29saWFzZWFyY2gvc3JjL0luZGV4Q29yZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2FsZ29saWFzZWFyY2gvc3JjL2Jyb3dzZXIvYnVpbGRzL2FsZ29saWFzZWFyY2hMaXRlLmpzIiwid2VicGFjazovLy8uL34vYWxnb2xpYXNlYXJjaC9zcmMvYnJvd3Nlci9jcmVhdGVBbGdvbGlhc2VhcmNoLmpzIiwid2VicGFjazovLy8uL34vYWxnb2xpYXNlYXJjaC9zcmMvYnJvd3Nlci9nZXQtZG9jdW1lbnQtcHJvdG9jb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9hbGdvbGlhc2VhcmNoL3NyYy9icm93c2VyL2lubGluZS1oZWFkZXJzLmpzIiwid2VicGFjazovLy8uL34vYWxnb2xpYXNlYXJjaC9zcmMvYnJvd3Nlci9qc29ucC1yZXF1ZXN0LmpzIiwid2VicGFjazovLy8uL34vYWxnb2xpYXNlYXJjaC9zcmMvZGVwcmVjYXRlLmpzIiwid2VicGFjazovLy8uL34vYWxnb2xpYXNlYXJjaC9zcmMvZGVwcmVjYXRlZE1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9hbGdvbGlhc2VhcmNoL3NyYy9leGl0UHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2FsZ29saWFzZWFyY2gvc3JjL21lcmdlLmpzIiwid2VicGFjazovLy8uL34vYWxnb2xpYXNlYXJjaC9zcmMvb21pdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2FsZ29saWFzZWFyY2gvc3JjL3BsYWNlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2FsZ29saWFzZWFyY2gvc3JjL3N0b3JlLmpzIiwid2VicGFjazovLy8uL34vYWxnb2xpYXNlYXJjaC9zcmMvdmVyc2lvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2FuaW1lanMvYW5pbWUubWluLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2F1dG8tZW50ZXItdnIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYmFja2dyb3VuZC1hbmltYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYmFja2dyb3VuZC1hdWRpby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9iYWNrZ3JvdW5kLXNoYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jYW5jZWwtYnV0dG9uLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2Nhc2NhZGUtcmF5Y2FzdGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY2xpY2stb3V0LmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxlY3Rpb24tc2hhZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbnNvbGUtc2hvcnRjdXRzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbnRlbnQtcGFnZS1sb2FkZWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci1idXR0b24tZmVlZGJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jdXJzb3ItbWVzaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jdXJzb3ItdG9nZ2xlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9kZWJ1Zy1jb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2RlYnVnLWN1cnNvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9kZWJ1Zy1saW5rcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9lbnRlci1zaXRlLWJ1dHRvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9mYWRlLXNoYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9mYWRlLXRleHQtc2hhZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2ZlZWQtY29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9mZWVkLXNpbmdsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9mZWVkLXRpbGVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2dwdS1wcmVsb2FkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvaGVscC1iYWNrLWxvYmJ5LmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2hpZ2gtcGVyZm9ybWFuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGF5b3V0LWNvbGxlY3Rpb25zLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xheW91dC1mZWVkLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xpbmstc2hhZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xvYWRpbmctcmluZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sb2FkaW5nLXNjcmVlbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sb2dvLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL25hdmlnYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL25vdGlmaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9wYWdpbmF0aW9uLWRvdHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcGFnaW5hdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3BsYXktYXVkaW8uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcG9zdC1tZXNzYWdlLXJlY2VpdmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3Byb3BlcnR5VHlwZXMvb2JqZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3JheWNhc3RhYmxlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3JlY2VudGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3JlZnJlc2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc2NyZWVuLW1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc2VhcmNoLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N1Yi1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3VwZXJsaW5rLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi1zd2l0Y2gtZmFkZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90aHVtYi1wYWdpbmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdHV0b3JpYWwtbW9kYWwtaW1hZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdHV0b3JpYWwtbW9kYWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdmlzaWJsZS1kZWxheS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy92aXNpYmxlLWZhZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9zdGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY3NzL2luZGV4LnN0eWwiLCJ3ZWJwYWNrOi8vLy4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2RlYnVnL3NyYy9kZWJ1Zy5qcyIsIndlYnBhY2s6Ly8vLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9nbG9iYWwvd2luZG93LmpzIiwid2VicGFjazovLy8uL34vbXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9vYmplY3Qta2V5cy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L29iamVjdC1rZXlzL2lzQXJndW1lbnRzLmpzIiwid2VicGFjazovLy8uL34vcXVlcnlzdHJpbmctZXMzL2VuY29kZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL34vc3R5bGUtbG9hZGVyL2xpYi91cmxzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NoYWRlcnMvYmFja2dyb3VuZEZyYWdtZW50Lmdsc2wiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc2hhZGVycy9iYWNrZ3JvdW5kVmVydGV4Lmdsc2wiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc2hhZGVycy9jb2xsZWN0aW9uRnJhZ21lbnQuZ2xzbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zaGFkZXJzL2ZhZGVGcmFnbWVudC5nbHNsIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NoYWRlcnMvZmFkZVRleHRGcmFnbWVudC5nbHNsIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NoYWRlcnMvZmFkZVRleHRWZXJ0ZXguZ2xzbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zaGFkZXJzL2xpbmtGcmFnbWVudC5nbHNsIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NoYWRlcnMvbGlua1ZlcnRleC5nbHNsIiwid2VicGFjazovLy8uL3NyYy9wYW5lbC9wYW5lbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWwvc2l0ZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IllBQ0EsY0FNQSxJQUNBLGlCQUdBLG1CQUNBLENBQ0EsSUFDQSxLQUlBLDJDQUdBLGFBR0EsT0FDQSxPQUlBLElBekJBLGVBNEJBLE1BR0EsbUJBQTJDLENBQWMsUUFHekQscUJBQ0EsR0FDQSxrQ0FDQSxDQUNBLGdCQUNBLGNBR0EsT0FHQSxpQkFDQSxZQUNBLHFCQUEyQixVQUEwQixVQUNyRCxZQUFpQyxDQUFlLFFBQ2hELEVBRUEsYUFEQSxRQUlBLG1CQUFzRCx3Q0FBK0QsU0FHckgsTUFHQSw0QkMvREEsdUJBQ0EsMkNBRUEseUJBQ0EsSUFDQSxvREFFQSx1Q0FDQSxjQUNBLGFBQXVCLEVBQU8sSUFDOUIsYUFHQSxzQkFDQSxVQUNBLG9CQUlBLHdCQ3BCQSxFQUE4MDZCLHV5M0JDQTkwNkIscUJBQ0Esd0JBQ0EsZ0NDRUEsYUFJQSxlQUNBLFNBRUEsS0FHQSxLQUNBLDZFQUVBLHdDQUdBLHdEQUNBLHFDQUdBLG9DQUNBLENBQ0EsTUFFQSxHQUlBLGVBQ0EsYUFDQSw0Q0FHQSxHQUNBLHlCQUdBLG1CQUNBLG9DQUNBLE9BRUEsQ0FHQSxNQURBLFNBR0EsQ0E1Q0EsWUF3QkEsV0FxQkEsVUFDQSxDQUNBLG9DQUNBLEVBQ0EsaUJBRUEsMEZBQ0EsRUFDQSxpQkFFQSxzREFDQSxFQUNBLFVBRUEsMkRBQ0EsRUFDQSxrQkFFQSwrRUFDQSxFQUNBLG1CQUVBLGlFQUNBLEVBQ0EsVUFFQSwwQ0M3RUEsYUFJQSxDQWlKQSxZQUNBLElBQ0EsTUFDQSxhQUNB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QUV0VyxtQkFBYyxDQUFDLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9BQVEsTUFBTyxLQUFPLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9BQVEsTUFBTyxLQUFPLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9BQVEsTUFBTyxLQUFPLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9BQVEsTUFBTyxLQUFPLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9BQVEsTUFBTyxLQUFPLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9BQVEsTUFBTyxLQUFPLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sU0FBVyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9BQVEsTUFBTyxLQUFPLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9BQVEsTUFBTyxLQUFPLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9BQVEsTUFBTyxLQUFPLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sV0FBWSxNQUU5M0IsYUFBUyxDQUFDLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9BQVEsTUFBTyxLQUFPLENBQUUsS0FBTSxPQUFRLE1BQU8sS0FBTyxDQUFFLEtBQU0sT0FBUSxNQUFPLEtBQU8sQ0FBRSxLQUFNLE9B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QyxJQUNBLDRCQUVBLDJDQUtBLDJCQUFhLE1BQTBCLE9BQ3ZDLElBQ0EsNEJBRUEsNENBR0Esc0JBRUEsR0FDQSx1Q0FDQSxJQUNBLGlCQUNBLGdCQUNBLHFCQUNBLEdBQ0EsV0FDQSxRQUVBLEdBQ0EscUNBQ0EsSUFDQSxNQUNBLG1DQUFhLE1BQTBCLE9BQ3ZDLDBCQUVBLDRCQUFhLE1BQXlCLE9BQ3RDLDBCQUVBLHFCQUFDLG9CQ0tELG1CQUNBLElBQ0EsR0FDQSxFQUdBLDJCQUNBLHNCQUNBLHdCQUNBLHdCQUNBLFVBQW1CLHFCQUNuQixhQUFxQix1QkFDckIsYUFDQSxlQUlBLGdCQUNBLFVBQ0EsdUJBQ0EsdUNBQ0EsSUFDQSxtREFDQSxxQ0FDQSxnREFBK0MsUUFDL0MsWUFDQSxLQUVBLE9BSUEsQ0FDQSxpQkFDQSw2QkFBbUMsY0FDbkMsNEJBQ0EsUUFDQSxpQkFBRyxFQUNILElBSUEsQ0FDQSxhQUNBLGdDQUNBLDBCQUNBLGFBRUEsYUFDQSxXQUNBLEVBQTZDLDhCQUM3QyxJQUNBLFNBcEhBLFFBT0EsR0FOQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBR0EsRUFPQTs7Ozs7OztDQWhCQSxDQWtCQSxtQkFPQSxVQUNBLElBRUEsK0JBQ0EsbUJBRUEsd0JBQWEsTUFBMkIsT0FDeEMsK0JBSUEsV0FDQSxtREFDQSxJQUNBLEdBQ0EsRUFFQSxFQUVBLHFCQUVBLHdCQUFrQyxZQUNsQywyREFDQSxNQUVBLHlCQUNBLFlBQ0EsVUFHQSxtQ0FDQSw2QkFDQSxvQ0FFQSxVQUNBLEVBSUEsQ0F4Q0EiLCJmaWxlIjoiYnVpbGQvYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA5Nik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMzYxMWFmODMwMTRhZWI1OGViZTEiLCJcbnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBmb3JFYWNoIChvYmosIGZuLCBjdHgpIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChmbikgIT09ICdbb2JqZWN0IEZ1bmN0aW9uXScpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaXRlcmF0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIHZhciBsID0gb2JqLmxlbmd0aDtcbiAgICBpZiAobCA9PT0gK2wpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGZuLmNhbGwoY3R4LCBvYmpbaV0sIGksIG9iaik7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBrIGluIG9iaikge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKG9iaiwgaykpIHtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKGN0eCwgb2JqW2tdLCBrLCBvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2ZvcmVhY2gvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSB7XCJGRUVEXCI6W1t7XCJ0eXBlXCI6XCJ0aWxlc1wiLFwidGl0bGVcIjpcIkZlYXR1cmVkXCIsXCJzaXRlc1wiOltcInNvdW5kYm94aW5nXCIsXCJ0cmFqZWN0aWxlY29tbWFuZFwiLFwid2Fsa2luZ3NpbXVsYXRvclwiLFwib2NlYW5vZnRob3VnaHRcIixcInN1cGVyY3JhZnRcIixcInZyYmVhdHNcIl19XSxbe1widHlwZVwiOlwiY29sbGVjdGlvblwiLFwiaWRcIjpcInN1cGVyY3JhZnRcIn0se1widHlwZVwiOlwic2luZ2xlXCIsXCJpZFwiOlwic3VwZXJjcmFmdFwifV0sW3tcInR5cGVcIjpcInRpbGVzXCIsXCJ0aXRsZVwiOlwiTmV3ZXN0XCIsXCJzaXRlc1wiOltcImNvbXBvc3VyZVwiLFwiZ3JpZG9mY3lsaW5kZXJzXCIsXCJzbGltZWZyZWlnaHRlclwiLFwic3VwZXJzYXlzXCIsXCJqZWxseWZhY2VcIixcInBhbm9tb21lbnRzXCJdfV0sW3tcInR5cGVcIjpcImNvbGxlY3Rpb25cIixcImlkXCI6XCJza2V0Y2hmYWJlbnZpcm9tZW50c1wifSx7XCJ0eXBlXCI6XCJzaW5nbGVcIixcImlkXCI6XCJzaGVybG9ja1wifV0sW3tcInR5cGVcIjpcInRpbGVzXCIsXCJ0aXRsZVwiOlwiRGFpbHkgTWl4XCIsXCJzaXRlc1wiOltdfV0sW3tcInR5cGVcIjpcImNvbGxlY3Rpb25cIixcImlkXCI6XCJ0aGVzb3VuZG9mdnJcIn0se1widHlwZVwiOlwic2luZ2xlXCIsXCJpZFwiOlwidW5kZXJuZW9ubGlnaHRzXCJ9XSxbe1widHlwZVwiOlwiY29sbGVjdGlvblwiLFwiaWRcIjpcIm1pbmlnYW1lc1wifSx7XCJ0eXBlXCI6XCJzaW5nbGVcIixcImlkXCI6XCJzb3VuZGJveGluZ1wifV0sW3tcInR5cGVcIjpcImNvbGxlY3Rpb25cIixcImlkXCI6XCJsaXR0bGVleHBlcmltZW50c1wifSx7XCJ0eXBlXCI6XCJzaW5nbGVcIixcImlkXCI6XCJncmlkb2ZjeWxpbmRlcnNcIn1dLFt7XCJ0eXBlXCI6XCJ0aWxlc1wiLFwic2l0ZXNcIjpbXCJ0aGVoYWxsXCIsXCJ1cHRoZXJlXCIsXCJzcGVha3RvZ29cIixcIm5pZ2h0ZXllXCIsXCJhY2Nlc3NtYXJzXCIsXCJtYXNzbWlncmF0aW9uc1wiXX1dLFt7XCJ0eXBlXCI6XCJjb2xsZWN0aW9uXCIsXCJpZFwiOlwiY3JlYXRlXCJ9LHtcInR5cGVcIjpcInNpbmdsZVwiLFwiaWRcIjpcImFwYWludGVyXCJ9XSxbe1widHlwZVwiOlwidGlsZXNcIixcInNpdGVzXCI6W1widGFiZWxcIixcIndpdGhpblwiLFwiYmVhcjcxXCIsXCJmaW5kaW5nbG92ZVwiLFwic29uaWN1bWJyZWxsYVwiLFwiYXVyb3JhXCJdfV0sW3tcInR5cGVcIjpcImNvbGxlY3Rpb25cIixcImlkXCI6XCJyZWxheFwifSx7XCJ0eXBlXCI6XCJzaW5nbGVcIixcImlkXCI6XCJwb2x5Z29uc2hyZWRkZXJcIn1dXSxcIkNPTExFQ1RJT05TXCI6e1widXNlcmNvbGxlY3Rpb25cIjp7XCJpZFwiOlwidXNlcmNvbGxlY3Rpb25cIixcInRpdGxlXCI6XCJZb3VyIFNpdGVzXCIsXCJkZXNjcmlwdGlvblwiOlwiWW91ciBwZXJzb25hbCBjb2xsZWN0aW9uIG9mIHNpdGVzIVwiLFwiaW1hZ2VcIjpcImNvbGxlY3Rpb24vdXNlci5wbmdcIixcImNvbG9yXCI6XCIjMzc3MkZGXCIsXCJzaXRlc1wiOltdfSxcImNyZWF0ZVwiOntcImlkXCI6XCJjcmVhdGVcIixcInRpdGxlXCI6XCJCdWlsZCBhbmQgQ3JlYXRlXCIsXCJkZXNjcmlwdGlvblwiOlwiR2V0IHRob3NlIGhhbmRzIHRvIHdvcmsuXCIsXCJpbWFnZVwiOlwiY29sbGVjdGlvbi9jcmVhdGUucG5nXCIsXCJjb2xvclwiOlwiI2Y3NWMwM1wiLFwic2l0ZXNcIjpbXCJzdXBlcmNyYWZ0XCIsXCJhcGFpbnRlclwiLFwiYXNhdHVyZGF5bmlnaHRcIixcImNpdHlidWlsZGVyXCIsXCJwYWludFwiXX0sXCJlZGl0b3JzY2hvaWNlXCI6e1wiaWRcIjpcImVkaXRvcnNjaG9pY2VcIixcInRpdGxlXCI6XCJFZGl0b3IncyBDaG9pY2VcIixcImRlc2NyaXB0aW9uXCI6XCJGYXZvcml0ZXMgZnJvbSB0aGUgU3VwZXJtZWRpdW0gdGVhbS5cIixcImltYWdlXCI6XCJjb2xsZWN0aW9uL2VkaXRvcnNjaG9pY2UucG5nXCIsXCJjb2xvclwiOlwiIzYzQ0NDQVwiLFwic2l0ZXNcIjpbXCJzb3VuZGJveGluZ1wiLFwiamVsbHlmYWNlXCIsXCJ1bmRlcm5lb25saWdodHNcIixcIm9jZWFub2Z0aG91Z2h0XCIsXCJvcmlnYW1pc2ltdWxhdG9yXCIsXCJzbGltZWZyZWlnaHRlclwiXX0sXCJsaXR0bGVleHBlcmltZW50c1wiOntcImlkXCI6XCJsaXR0bGVleHBlcmltZW50c1wiLFwidGl0bGVcIjpcIkxpdHRsZSBFeHBlcmltZW50c1wiLFwiZGVzY3JpcHRpb25cIjpcIlNob3J0IGxpdHRsZSBkZW1vcyBmcm9tIGRldmVsb3BlcnMuXCIsXCJpbWFnZVwiOlwiY29sbGVjdGlvbi9leHBlcmltZW50cy5wbmdcIixcImNvbG9yXCI6XCIjMDAxMjBCXCIsXCJzaXRlc1wiOltcInNob290aW5nc3RhcnNcIixcInB1cHBldHJpbGxhXCIsXCJzcGlkZXJcIixcImdyaWRvZmN5bGluZGVyc1wiLFwid29ybXNcIixcIndlYnZybGFiXCIsXCJlcGljbWVkaWV2YWxiYXR0bGVcIixcImRhcmtoYXplXCIsXCJmb3Jlc3R3YXZlXCIsXCJmbG9hdFwiLFwicmVzb25hdGVcIixcImV1dG93XCIsXCJwb2tlbW9uXCJdfSxcIm1pbmlnYW1lc1wiOntcImlkXCI6XCJtaW5pZ2FtZXNcIixcInRpdGxlXCI6XCJNaW5pLUdhbWVzXCIsXCJkZXNjcmlwdGlvblwiOlwiR3JhYiBzb21lIGhpZ2ggc2NvcmVzIVwiLFwiaW1hZ2VcIjpcImNvbGxlY3Rpb24vbWluaWdhbWVzLnBuZ1wiLFwiY29sb3JcIjpcIiNFRjQ3NkZcIixcInNpdGVzXCI6W1wic291bmRib3hpbmdcIixcImd1bnRlcnNvZm9hc2lzXCIsXCJhYmxhc3RcIixcImNyb3NzdGhlc3RyZWV0XCIsXCJzdXBlcnNheXNcIixcInNwYWNlcm9ja3NcIixcInNwYWNlZGlzYXN0ZXJcIl19LFwicmVsYXhcIjp7XCJpZFwiOlwicmVsYXhcIixcInRpdGxlXCI6XCJNZWRpdGF0ZVwiLFwiZGVzY3JpcHRpb25cIjpcIlJlbGF4IGFuZCBjaGlsbC5cIixcImltYWdlXCI6XCJjb2xsZWN0aW9uL3JlbGF4LnBuZ1wiLFwiY29sb3JcIjpcIiNFQkE2QTlcIixcInNpdGVzXCI6W1wicG9seWdvbnNocmVkZGVyXCIsXCJ3YWxraW5nc2ltdWxhdG9yXCIsXCJjb21wb3N1cmVcIixcIm9jZWFub2Z0aG91Z2h0XCIsXCJzaWthXCIsXCJmaW5kaW5nbG92ZVwiLFwic3RhaGxob3VzZVwiXX0sXCJza2V0Y2hmYWJlbnZpcm9tZW50c1wiOntcImlkXCI6XCJza2V0Y2hmYWJlbnZpcm9tZW50c1wiLFwidGl0bGVcIjpcIlNrZXRjaGZhYiBFbnZpcm9ubWVudHNcIixcImRlc2NyaXB0aW9uXCI6XCJUcmF2ZWwgM0QgZW52aXJvbm1lbnRzLlwiLFwiaW1hZ2VcIjpcImNvbGxlY3Rpb24vc2tldGNoZmFiLnBuZ1wiLFwiY29sb3JcIjpcIiMzQkMyRUVcIixcInNpdGVzXCI6W1widmFuZ29naHJvb21cIixcImFwb2xsbzExXCIsXCJzaGVybG9ja1wiLFwic2lrYVwiLFwibGlseWFuZHNub3V0XCIsXCJ0b21ib2ZuZWZlcnRhcmlcIixcInNlYXJhaWx3YXlcIixcInNoZXJ3b29kZm9yZXN0XCIsXCJza2V0Y2hmYWJcIl19LFwidGhlc291bmRvZnZyXCI6e1wiaWRcIjpcInRoZXNvdW5kb2Z2clwiLFwidGl0bGVcIjpcIlRoZSBTb3VuZCBvZiBWUlwiLFwiZGVzY3JpcHRpb25cIjpcIkdyb292ZSBhbG9uZyB0byBtdXNpY2FsIGV4cGVyaWVuY2VzLlwiLFwiaW1hZ2VcIjpcImNvbGxlY3Rpb24vbXVzaWMucG5nXCIsXCJjb2xvclwiOlwiIzREQTE2N1wiLFwic2l0ZXNcIjpbXCJ2cmJlYXRzXCIsXCJvY2Vhbm9mdGhvdWdodFwiLFwic2xpbWVmcmVpZ2h0ZXJcIixcInNvdW5kYm94aW5nXCIsXCJpbnNpZGVtdXNpY1wiLFwiZGFuY2V0b25pdGVcIixcInVuZGVybmVvbmxpZ2h0c1wiLFwiYnJva2VubWFudHJhXCIsXCJvYnNpZGlhblwiLFwicHV6emxlcmFpblwiLFwiZGFuY2V0b25pdGVcIl19LFwic3VwZXJjcmFmdFwiOntcImlkXCI6XCJzdXBlcmNyYWZ0XCIsXCJ0aXRsZVwiOlwiU3VwZXJjcmFmdCBTaXRlc1wiLFwiZGVzY3JpcHRpb25cIjpcIlJlbWl4IGhhbmRjcmFmdGVkIHdvcmxkcyFcIixcImltYWdlXCI6XCJjb2xsZWN0aW9uL3N1cGVyY3JhZnQucG5nXCIsXCJjb2xvclwiOlwiI0Y4NTMzM1wiLFwic2l0ZXNcIjpbXCJzdXBlcmNyYWZ0Y2FzdGxlXCIsXCJzdXBlcmNyYWZ0ZHJhZ29uXCIsXCJzdXBlcmNyYWZ0YmxpbXBzXCIsXCJzdXBlcmNyYWZ0ZGFuZ2VyXCIsXCJzdXBlcmNyYWZ0dG95bW91bnRhaW5cIixcInN1cGVyY3JhZnRjYXZlXCIsXCJzdXBlcmNyYWZ0Y2FueW9uXCIsXCJzdXBlcmNyYWZ0aG9tZXJcIixcInN1cGVyY3JhZnRwb3dlcnB1ZmZcIl19fSxcIlNJVEVTXCI6e1wic291bmRib3hpbmdcIjp7XCJpZFwiOlwic291bmRib3hpbmdcIixcInVybFwiOlwiaHR0cHM6Ly93ZWJ2ci5zb3VuZGJveGluZy5jby9cIixcInRpdGxlXCI6XCJTb3VuZGJveGluZyBCZXRhXCIsXCJhdXRob3JcIjpcIlNvdW5kYm94aW5nICsgU3VwZXJtZWRpdW1cIixcImltYWdlXCI6XCJzaXRlL3NvdW5kYm94aW5nLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9zb3VuZGJveGluZy5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJBIFZSIG11c2ljIGtpY2tib3hpbmcgZ2FtZSB3aXRoIGJlYXRzIGNyZWF0ZWQgYnkgcGVvcGxlLiBJZiB5b3UgZmVlbCB0aGUgdXJnZSB0byBkYW5jZSwgeW91J3JlIGRvaW5nIGl0IHJpZ2h0IVwifSxcImplbGx5ZmFjZVwiOntcImlkXCI6XCJqZWxseWZhY2VcIixcInVybFwiOlwiaHR0cHM6Ly9qb3Noc2hhZGlrLmdpdGh1Yi5pby9qZWxseS1mYWNlL1wiLFwidGl0bGVcIjpcIkplbGx5IEZhY2VcIixcImF1dGhvclwiOlwiSm9zaCBTaGFkaWtcIixcImltYWdlXCI6XCJzaXRlL2plbGx5ZmFjZS5qcGdcIixcImxvZ29cIjpcInNpdGUvamVsbHlmYWNlLnBuZ1wiLFwiZGVzY3JpcHRpb25cIjpcIlBpbmNoIGFuZCBzcXVlZXplIHRoZXNlIGNlbGVicml0aWVzJyBjaGVla3MsIG9yIHRoZWlyIGVudGlyZSBoZWFkISBHcmFuZG1hcyBsb3ZlIHRoaXMuXCJ9LFwib2NlYW5vZnRob3VnaHRcIjp7XCJpZFwiOlwib2NlYW5vZnRob3VnaHRcIixcInVybFwiOlwiaHR0cHM6Ly9wYXRjaGVzLnZpem9yLmlvL21hY2hpbmVkcnVtL29jZWFuLW9mLXRob3VnaHRcIixcInRpdGxlXCI6XCJPY2VhbiBvZiBUaG91Z2h0XCIsXCJhdXRob3JcIjpcIm1hY2hpbmVkcnVtICsgZnRociArIGxpbnR1XCIsXCJpbWFnZVwiOlwic2l0ZS9vY2Vhbm9mdGhvdWdodC5qcGdcIixcImxvZ29cIjpcInNpdGUvb2NlYW5vZnRob3VnaHQucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiQSBzdXJyZWFsIGFuZCByZWxheGl2ZSBtdXNpYyBleHBlcmllbmNlIGZvciBNYWNoaW5lIERydW0ncyBPY2VhbiBvZiBUaG91Z2h0LlwifSxcImd1bnRlcnNvZm9hc2lzXCI6e1wiaWRcIjpcImd1bnRlcnNvZm9hc2lzXCIsXCJ1cmxcIjpcImh0dHBzOi8vc3VwZXJtZWRpdW0uY29tL2d1bnRlcnMtb2Ytb2FzaXMtZGVwbG95L1wiLFwidGl0bGVcIjpcIkd1bnRlcnMgb2YgT0FTSVNcIixcImF1dGhvclwiOlwiU3VwZXJtZWRpdW1cIixcImltYWdlXCI6XCJzaXRlL2d1bnRlcnNvZm9hc2lzLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9ndW50ZXJzb2ZvYXNpcy5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJIdW5kcmVkcyBvZiBnZW5lcmF0ZWQgd29ybGRzLCBhbW9uZyBvbmUgbGllcyBhIGdvbGRlbiBlZ2cuIEZpcnN0IGd1bnRlcnMgdG8gZmluZCBpdCBpbmhlcml0IGhhbGYgYSBodW5kcmVkIGRvbGxhcnMgYW5kIHRoZSBPQVNJUy5cIn0sXCJvcmlnYW1pc2ltdWxhdG9yXCI6e1wiaWRcIjpcIm9yaWdhbWlzaW11bGF0b3JcIixcInVybFwiOlwiaHR0cDovL2FwcHMuYW1hbmRhZ2hhc3NhZWkuY29tL09yaWdhbWlTaW11bGF0b3IvXCIsXCJ0aXRsZVwiOlwiT3JpZ2FtaSBTaW11bGF0b3JcIixcImF1dGhvclwiOlwiQW1hbmRhIEdoYXNzYWVpXCIsXCJpbWFnZVwiOlwic2l0ZS9vcmlnYW1pc2ltdWxhdG9yLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9vcmlnYW1pc2ltdWxhdG9yLnBuZ1wiLFwiY29sb3JcIjpcIiMzZDk1NGNcIixcImVudGVydnJcIjpbW1wiY2xpY2tcIixcIiNlbnRlclZSXCIsMTAwMF1dLFwiYXVkaW9cIjpbXCJkZWZhdWx0XCIsMC41XSxcImhpZ2hQZXJmb3JtYW5jZVwiOnRydWUsXCJkZXNjcmlwdGlvblwiOlwiR3JhYiwgc3RyZXRjaCwgYW5kIHNpbXVsYXRlIGRvemVucyBvZiBvcmlnYW1pIHBhdHRlcm5zIGZvbGRpbmcgYW5kIGNyZWFzaW5nIHNpbXVsdGFuZW91c2x5IGluIDNELlwifSxcImluc2lkZW11c2ljXCI6e1wiaWRcIjpcImluc2lkZW11c2ljXCIsXCJ1cmxcIjpcImh0dHBzOi8vZXhwZXJpbWVudHMud2l0aGdvb2dsZS5jb20vd2VidnIvaW5zaWRlLW11c2ljL3ZpZXcvXCIsXCJ0aXRsZVwiOlwiSW5zaWRlIE11c2ljXCIsXCJhdXRob3JcIjpcIlNvbmcgRXhwbG9kZXIgKyBHb29nbGVcIixcImltYWdlXCI6XCJzaXRlL2luc2lkZW11c2ljLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9pbnNpZGVtdXNpYy5wbmdcIixcImVudGVydnJcIjpbW1wiY2xpY2tcIixcIi53ZWJ2ci11aS1idXR0b25cIiwxMDBdXSxcImluamVjdFNjcmlwdFwiOlwiaW5qZWN0U2NyaXB0cy9pbnNpZGVtdXNpYy5qc1wiLFwid2FpdEZvcldlYlZSUmVhZHlcIjp0cnVlLFwiZGVzY3JpcHRpb25cIjpcIlN0ZXAgaW5zaWRlIG11c2ljIHRvIGdldCBhIGNsb3NlciBsb29rIGF0IGhvdyB0aGV5J3JlIG1hZGUuIEV4cGxvZGUgc29uZ3MgdG8gdGhlaXIgaW5kaXZpZHVhbCBpbmdyZWRpZW50cy5cIn0sXCJzbGltZWZyZWlnaHRlclwiOntcImlkXCI6XCJzbGltZWZyZWlnaHRlclwiLFwidXJsXCI6XCJodHRwczovL3NsaW1lLWZyZWlnaHRlci5nbGl0Y2gubWUvP2F1dG9wbGF5PXRydWVcIixcInRpdGxlXCI6XCJTbGltZSBGcmVpZ2h0ZXJcIixcImF1dGhvclwiOlwiRXRoYW4gUmFiYiAoYWxnb3JhcGhpY3MpXCIsXCJpbWFnZVwiOlwic2l0ZS9zbGltZWZyZWlnaHRlci5qcGdcIixcImxvZ29cIjpcInNpdGUvc2xpbWVmcmVpZ2h0ZXIucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiQSB0cmlwIGRvd24gYSByb2FkLiBFbXBoYXNpcyBvbiB0cmlwLiBWUiBtdXNpYyBleHBlcmllbmNlIGZvciBCaWcgQmxhY2sgRGVsdGEncyAnU2lkZSBvZiB0aGUgUm9hZCcuXCIsXCJpbmplY3RTY3JpcHRcIjpcImluamVjdFNjcmlwdHMvc2xpbWVmcmVpZ2h0ZXIuanNcIn0sXCJ2YW5nb2docm9vbVwiOntcImlkXCI6XCJ2YW5nb2docm9vbVwiLFwidXJsXCI6XCJodHRwczovL3NrZXRjaGZhYi5jb20vbW9kZWxzLzMxMWQwNTJhOWYwMzRiYThiY2U1NWExYTgyOTZiNmY5XCIsXCJ0aXRsZVwiOlwiVmFuIEdvZ2ggUm9vbVwiLFwiYXV0aG9yXCI6XCJSdXNsYW4gU29rb2xvdnNreVwiLFwiaW1hZ2VcIjpcInNpdGUvdmFuZ29naHJvb20uanBnXCIsXCJsb2dvXCI6XCJzaXRlL3ZhbmdvZ2hyb29tLnBuZ1wiLFwiZGVzY3JpcHRpb25cIjpcIlRoZSByb29tIG9mIHRoZSBhcnRpc3QuIFJlY3JlYXRpb24gb2YgVmluY2VudCBWYW4gR29naCdzICdUaGUgQmVkcm9vbScgcGFpbnRpbmcuXCIsXCJhdWRpb1wiOltcImh0dHBzOi8vc3VwZXJtZWRpdW0uY29tL3N1cGVyYXNzZXRzL2F1ZGlvL2thaWVuZ2VsLXJlbWVkeWZvcm1lbGFuY2hvbHkubXAzXCIsMC43NV19LFwiYXBvbGxvMTFcIjp7XCJpZFwiOlwiYXBvbGxvMTFcIixcInVybFwiOlwiaHR0cHM6Ly9za2V0Y2hmYWIuY29tL21vZGVscy8yMzI0Zjk2ODU0MDQ0MzNmYTYyMzFjN2NiMmNkMmZmNVwiLFwidGl0bGVcIjpcIkFwb2xsbyAxMVwiLFwiYXV0aG9yXCI6XCJUaGUgQXJjayBQcm9qZWN0XCIsXCJpbWFnZVwiOlwic2l0ZS9hcG9sbG8xMS5qcGdcIixcImxvZ29cIjpcInNpdGUvYXBvbGxvMTEucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiTmVpbCBBcm1zdHJvbmcgJiBCdXp6IEFsZHJpbiBsYW5kZWQgb24gdGhlIG1vb24gSnVseSAyMCwgMTk2OS4gU3RlcCBvbnRvIHRoZSBsdW5hciBzdXJmYWNlIGFsb25nc2lkZSBBcm1zdHJvbmcuXCIsXCJhdWRpb1wiOltcIlwiLDBdfSxcInNoZXJsb2NrXCI6e1wiaWRcIjpcInNoZXJsb2NrXCIsXCJ1cmxcIjpcImh0dHBzOi8vc2tldGNoZmFiLmNvbS9tb2RlbHMvNjliZTEwN2NhNTIzNGNhOGE5ZmNmZjZiYTY4NTFlOWVcIixcInRpdGxlXCI6XCJTaGVybG9ja1wiLFwiYXV0aG9yXCI6XCJBdXJlbGllbiBNYXJ0ZWxcIixcImltYWdlXCI6XCJzaXRlL3NoZXJsb2NrLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9zaGVybG9jay5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJWaXNpdCAyMjFCIEJha2VyIFN0cmVldCwgaG9tZSBvZiB0aGUgd29ybGQncyBtb3N0IHJlbm93bmVkIGRldGVjdGl2ZS5cIixcImF1ZGlvXCI6W1wiaHR0cHM6Ly9zdXBlcm1lZGl1bS5jb20vc3VwZXJhc3NldHMvYXVkaW8vc2hlcmxvY2subXAzXCIsMC43NV19LFwic3VwZXJzYXlzXCI6e1wiaWRcIjpcInN1cGVyc2F5c1wiLFwidXJsXCI6XCJodHRwczovL3N1cGVybWVkaXVtLmNvbS9zdXBlcnNheXMvc3JjXCIsXCJ0aXRsZVwiOlwiU3VwZXIgU2F5c1wiLFwiYXV0aG9yXCI6XCJAZmVpc3NcIixcImltYWdlXCI6XCJzaXRlL3N1cGVyc2F5cy5qcGdcIixcImxvZ29cIjpcInNpdGUvc3VwZXJzYXlzLnBuZ1wiLFwiZGVzY3JpcHRpb25cIjpcIlRlc3QgeW91ciBtZW1vcnkgd2l0aCBTdXBlci4gTWVtb3JpemUgdGhlIGNvbG9yIHNlcXVlbmNlIGFuZCBncmFiIGEgaGlnaCBzY29yZSFcIn0sXCJsaWx5YW5kc25vdXRcIjp7XCJpZFwiOlwibGlseWFuZHNub3V0XCIsXCJ1cmxcIjpcImh0dHBzOi8vc2tldGNoZmFiLmNvbS9tb2RlbHMvNjE4ZWEwMjA5YjEwNDVlODliMmM2ZDJiNzRkMDk1NmVcIixcInRpdGxlXCI6XCJMaWx5ICYgU25vdXRcIixcImF1dGhvclwiOlwiU2tldGNoZmFiXCIsXCJpbWFnZVwiOlwic2l0ZS9saWx5YW5kc25vdXQuanBnXCIsXCJsb2dvXCI6XCJzaXRlL2xpbHlhbmRzbm91dC5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJBIGdpcmwsIGEgZHJhZ29uLCBhbmQgc29tZSBiZXJyaWVzLiBQaWNrIHlvdXIgdmFudGFnZSBwb2ludCBhbmQgd2F0Y2ggdGhpcyBjaGFybWluZyBWUiBzaG9ydC5cIixcImF1ZGlvXCI6W1wiXCIsMF19LFwidG9tYm9mbmVmZXJ0YXJpXCI6e1wiaWRcIjpcInRvbWJvZm5lZmVydGFyaVwiLFwidXJsXCI6XCJodHRwczovL3NrZXRjaGZhYi5jb20vbW9kZWxzLzkwMDM0Y2JlNTg5MDQ4MjhhMTE0MjkzOTVjZWY5MTI1XCIsXCJ0aXRsZVwiOlwiVG9tYiBvZiBOZWZlcnRhcmlcIixcImF1dGhvclwiOlwic2Npb25rXCIsXCJpbWFnZVwiOlwic2l0ZS9uZWZlcnRhcmkuanBnXCIsXCJsb2dvXCI6XCJzaXRlL25lZmVydGFyaS5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJBIDNEIHJlY29uc3RydWN0aW9uIG9mIFFWNjYsIHRoZSB0b21iIG9mIEVneXB0aWFuIHF1ZWVuIE5lZmVydGFyaSAoMTI1NSBCQyksIGluIHRoZSBWYWxsZXkgb2YgdGhlIFF1ZWVucy5cIixcImF1ZGlvXCI6W1wiXCIsMF19LFwic2VhcmFpbHdheVwiOntcImlkXCI6XCJzZWFyYWlsd2F5XCIsXCJ1cmxcIjpcImh0dHBzOi8vc2tldGNoZmFiLmNvbS9tb2RlbHMvNDc4ZDMyNTEzZWRhNDQzMzhiNTlhYTIyODRlZTAxYjhcIixcInRpdGxlXCI6XCJTZWEgUmFpbHdheVwiLFwiYXV0aG9yXCI6XCJmb25nb29zZVwiLFwiaW1hZ2VcIjpcInNpdGUvc3Bpcml0ZWRhd2F5c2VhcmFpbHdheS5qcGdcIixcImxvZ29cIjpcInNpdGUvc3Bpcml0ZWRhd2F5c2VhcmFpbHdheS5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJSZWxpdmUgdGhlIFNlYS1SYWlsd2F5IHNjZW5lIGZyb20gU3Bpcml0ZWQgQXdheS5cIixcImF1ZGlvXCI6W1wiXCIsMF19LFwiYXBhaW50ZXJcIjp7XCJpZFwiOlwiYXBhaW50ZXJcIixcInVybFwiOlwiaHR0cHM6Ly9hZnJhbWUuaW8vYS1wYWludGVyL1wiLFwidGl0bGVcIjpcIkEtUGFpbnRlclwiLFwiYXV0aG9yXCI6XCJBLUZyYW1lIEF1dGhvcnNcIixcImltYWdlXCI6XCJzaXRlL2FwYWludGVyLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9hcGFpbnRlci5wbmdcIixcImF1ZGlvXCI6W1wiZGVmYXVsdFwiLDAuNV0sXCJoaWdoUGVyZm9ybWFuY2VcIjp0cnVlLFwiZGVzY3JpcHRpb25cIjpcIlBhaW50IGluIFZSISBDcmVhdGUgYSBtYXN0ZXJwaWVjZSB3aXRoIGRvemVucyBvZiBicnVzaGVzIGF2YWlsYWJsZS4gU2F2ZSB5b3VyIHBhaW50aW5nIGFuZCBzaGFyZSBpdCB3aXRoIHlvdXIgZnJpZW5kcy5cIn0sXCJkYW5jZXRvbml0ZVwiOntcImlkXCI6XCJkYW5jZXRvbml0ZVwiLFwidXJsXCI6XCJodHRwczovL3Rvbml0ZS5kYW5jZS9cIixcInRpdGxlXCI6XCJEYW5jZSBUb25pdGVcIixcImF1dGhvclwiOlwiSm9uYXRoYW4gUHVja2V5IGFuZCBNb25pa2VyXCIsXCJpbWFnZVwiOlwic2l0ZS9kYW5jZXRvbml0ZS5qcGdcIixcImxvZ29cIjpcInNpdGUvZGFuY2V0b25pdGUucG5nXCIsXCJlbnRlcnZyXCI6W1tcImNsaWNrXCIsXCIuYnV0dG9uLXBsYXlcIiwyNTBdLFtcImNsaWNrXCIsXCIubW9kLWJvdHRvbS1yaWdodCAuYnV0dG9uLWl0ZW06Zmlyc3QtY2hpbGRcIiw1MDBdXSxcImhpZ2hQZXJmb3JtYW5jZVwiOnRydWUsXCJkZXNjcmlwdGlvblwiOlwiR28gZnJvbSByb29tIHRvIHJvb20gd2F0Y2hpbmcgZGFuY2VzIGNyZWF0ZWQgZW50aXJlbHkgYnkgZmFucy4gQW4gZXZlci1jaGFuZ2luZyBWUiBjb2xsYWJvcmF0aW9uIGJ5IExDRCBTb3VuZHN5c3RlbS5cIn0sXCJ1bmRlcm5lb25saWdodHNcIjp7XCJpZFwiOlwidW5kZXJuZW9ubGlnaHRzXCIsXCJ1cmxcIjpcImh0dHBzOi8vcGxheWVyLndpdGguaW4vZW1iZWQvP2lkPTU0MSZyZXNvbHV0aW9uPTE5MjAmZm9yY2VkPWZhbHNlJmF1dG9wbGF5PXRydWUmdD0wJmludGVybmFsPXRydWVcIixcInRpdGxlXCI6XCJVbmRlciBOZW9uIExpZ2h0c1wiLFwiYXV0aG9yXCI6XCJXaXRoaW5cIixcImltYWdlXCI6XCJzaXRlL3VuZGVybmVvbmxpZ2h0cy5qcGdcIixcImxvZ29cIjpcInNpdGUvdW5kZXJuZW9ubGlnaHRzLnBuZ1wiLFwiZGVzY3JpcHRpb25cIjpcIkVudGVyIGEgd29ybGQgb2YgaW1hZ2luYXRpb24gYW5kIGNvbG9yIGluIHRoaXMgaW50ZXJhY3RpdmUgbXVzaWMgZXhwZXJpZW5jZSBmb3IgVGhlIENoZW1pY2FsIEJyb3RoZXJzIFVuZGVyIE5lb24gTGlnaHRzLlwifSxcInRhYmVsXCI6e1wiaWRcIjpcInRhYmVsXCIsXCJ1cmxcIjpcImh0dHBzOi8vdGFiZWwud2l0aGdvb2dsZS5jb20vZmlsbVwiLFwidGl0bGVcIjpcIlRhYmVsXCIsXCJhdXRob3JcIjpcIkFydCBDb3B5ICYgQ29kZSArIEdvb2dsZVwiLFwiaW1hZ2VcIjpcInNpdGUvdGFiZWwuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3RhYmVsLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiLnZyLWNvbnRyb2xzXCIsMjAwXV0sXCJpbmplY3RTY3JpcHRcIjpcImluamVjdFNjcmlwdHMvdGFiZWwuanNcIixcIndhaXRGb3JXZWJWUlJlYWR5XCI6dHJ1ZSxcImRlc2NyaXB0aW9uXCI6XCJBIHRhc3R5IGFsbGVnb3J5IGZvciBnbG9iYWwgaW5hY3Rpb24gaW4gdGhlIGZhY2Ugb2YgY2xpbWF0ZSBjaGFuZ2UuIExpc3RlbiB0byB0aGUgY29udmVyc2F0aW9uIHlvdSB3YW50LlwifSxcIm11c2ljYWxmb3Jlc3RcIjp7XCJpZFwiOlwibXVzaWNhbGZvcmVzdFwiLFwidXJsXCI6XCJodHRwczovL2ZvcmVzdC53ZWJ2cmV4cGVyaW1lbnRzLmNvbS9cIixcInRpdGxlXCI6XCJNdXNpY2FsIEZvcmVzdFwiLFwiYXV0aG9yXCI6XCJHb29nbGUgQ3JlYXRpdmUgTGFiXCIsXCJjb2xvclwiOlwiI2YwOWU5M1wiLFwiaW1hZ2VcIjpcInNpdGUvbXVzaWNhbGZvcmVzdC5qcGdcIixcImxvZ29cIjpcInNpdGUvbXVzaWNhbGZvcmVzdC5wbmdcIixcImVudGVydnJcIjpbW1wiY2xpY2tcIixcIiNlbnRlckJ1dHRvbiAud2VidnItdWktYnV0dG9uXCIsMTAwMF1dLFwiZGVzY3JpcHRpb25cIjpcIkpvaW4gdXNlcnMgZnJvbSBhcm91bmQgdGhlIHdvcmxkIGluIGEgbXVzaWNhbCBmb3Jlc3QuIFRhcCBvciBjbGljayBhIHNoYXBlIHRvIHBsYXkgaXQuIFlvdSBjYW4gYWRkIHNoYXBlcyB0b28hXCJ9LFwicHV6emxlcmFpblwiOntcImlkXCI6XCJwdXp6bGVyYWluXCIsXCJ1cmxcIjpcImh0dHBzOi8vc3VwZXJtZWRpdW0uY29tL3B1enpsZS1yYWluL2FwcC8/bW9kZT1ub3JtYWxcIixcInRpdGxlXCI6XCJQdXp6bGUgUmFpblwiLFwiYXV0aG9yXCI6XCJNb3ppbGxhXCIsXCJpbWFnZVwiOlwic2l0ZS9wdXp6bGVyYWluLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9wdXp6bGVyYWluLnBuZ1wiLFwiZGVzY3JpcHRpb25cIjpcIkEgbXVzaWNhbCBXZWJWUiBqb3VybmV5LlwifSxcIm9ic2lkaWFuXCI6e1wiaWRcIjpcIm9ic2lkaWFuXCIsXCJ1cmxcIjpcImh0dHBzOi8veHBsc3YuZ2l0aHViLmlvL29ic2lkaWFuLz93ZWJ2clwiLFwidGl0bGVcIjpcIk9ic2lkaWFuXCIsXCJhdXRob3JcIjpcInhwbHN2ICsgTXIuZG9vYlwiLFwiaW1hZ2VcIjpcInNpdGUvb2JzaWRpYW4uanBnXCIsXCJsb2dvXCI6XCJzaXRlL29ic2lkaWFuLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiI2luZm8gYnV0dG9uOmxhc3QtY2hpbGRbb25jbGlja11cIiwxMDBdLFtcImNsaWNrXCIsXCJjYW52YXMgKyBidXR0b25cIiwxNTBdXSxcImRlc2NyaXB0aW9uXCI6XCJUbyB0aGUgZWxlY3Ryb25pYyBiZWF0IG9mIE9tIFVuaXQgYW5kIExvcm4sIHdhdGNoIGFuIGV2ZXItY2hhbmdpbmcgc3BoZXJlIGFzIHlvdSB0cmF2ZWwgZG93biBhIHR1bm5lbCBvZiBsaWdodHMgYm9tYmFyZGluZyB0aGUgc2Vuc2VzLlwifSxcImJyb2tlbm1hbnRyYVwiOntcImlkXCI6XCJicm9rZW5tYW50cmFcIixcInVybFwiOlwiaHR0cHM6Ly9tcmRvb2IuZ2l0aHViLmlvL2Jyb2tlbm1hbnRyYS8/d2VidnJcIixcInRpdGxlXCI6XCJCcm9rZW4gTWFudHJhXCIsXCJhdXRob3JcIjpcIk1yLmRvb2JcIixcImltYWdlXCI6XCJzaXRlL2Jyb2tlbm1hbnRyYS5qcGdcIixcImxvZ29cIjpcInNpdGUvYnJva2VubWFudHJhLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiI3N0YXJ0XCIsMTAwXSxbXCJjbGlja1wiLFwiYnV0dG9uXCIsMjAwXV0sXCJkZXNjcmlwdGlvblwiOlwiRmVlbCB0aGUgYmFzcyBpbiBhIGNvbXB1dGVyIGdlbmVyYXRlZCBtdXNpYyB2aWRlbyBmb3IgTG9ybidzICdCcm9rZW4gTWFudHJhJy4gT3JicywgcGFydGljbGVzLCBsaWdodHMsIHN0cmVha3MsIGdsaXRjaCwgbXVzaWMuXCJ9LFwic3RhaGxob3VzZVwiOntcImlkXCI6XCJzdGFobGhvdXNlXCIsXCJ1cmxcIjpcImh0dHA6Ly9wYXJhZ3JhbS5pby92aWV3Lz9pZD1zdGFobCZ2cj10cnVlXCIsXCJ0aXRsZVwiOlwiU3RhaGwgSG91c2VcIixcImF1dGhvclwiOlwiUGFyYWdyYW1cIixcImltYWdlXCI6XCJzaXRlL3N0YWhsaG91c2UuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3N0YWhsaG91c2UucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiVmlzaXQgU3RhaGwgSG91c2UgaW4gSG9sbHl3b29kIEhpbGxzLCBhbiBpY29uaWMgcmVwcmVzZW50YXRpb24gb2YgbW9kZXJuIGFyY2hpdGVjdHVyZSBpbiBMQS5cIn0sXCJwYWludFwiOntcImlkXCI6XCJwYWludFwiLFwidXJsXCI6XCJodHRwczovL3N1cGVybWVkaXVtLmNvbS90aHJlZS5qcy9leGFtcGxlcy93ZWJ2cl92aXZlX3BhaW50Lmh0bWxcIixcInRpdGxlXCI6XCJQYWludFwiLFwiYXV0aG9yXCI6XCJNci5kb29iXCIsXCJpbWFnZVwiOlwic2l0ZS9wYWludC5qcGdcIixcImxvZ29cIjpcInNpdGUvcGFpbnQucG5nXCIsXCJlbnRlcnZyXCI6W1tcImNsaWNrXCIsXCJib2R5ID4gYnV0dG9uOmxhc3QtY2hpbGRcIiw1MDBdXSxcImF1ZGlvXCI6W1wiZGVmYXVsdFwiLDAuNV0sXCJoaWdoUGVyZm9ybWFuY2VcIjp0cnVlLFwiZGVzY3JpcHRpb25cIjpcIlBhaW50LCBkcmF3LCBkb29kbGUsIHNrZXRjaC5cIn0sXCJzcGFjZWRpc2FzdGVyXCI6e1wiaWRcIjpcInNwYWNlZGlzYXN0ZXJcIixcInVybFwiOlwiaHR0cHM6Ly93d3cuYmxlbmQ0d2ViLmNvbS9hcHBzL3NwYWNlX2Rpc2FzdGVyL3NwYWNlX2Rpc2FzdGVyLmh0bWw/dj0wNjNlMzhkNzZmN2EyNDNhM2I1Yjk3ZTljZTVkMGI5NlwiLFwidGl0bGVcIjpcIlNwYWNlIERpc2FzdGVyXCIsXCJhdXRob3JcIjpcIkJsZW5kNFdlYlwiLFwiaW1hZ2VcIjpcInNpdGUvc3BhY2VkaXNhc3Rlci5qcGdcIixcImxvZ29cIjpcInNpdGUvc3BhY2VkaXNhc3Rlci5wbmdcIixcImVudGVydnJcIjpbW1wiY2xpY2tcIixcImNhbnZhc1wiLDEwMF1dLFwiaW5qZWN0U2NyaXB0XCI6XCJpbmplY3RTY3JpcHRzL3NwYWNlZGlzYXN0ZXIuanNcIixcIndhaXRGb3JXZWJWUlJlYWR5XCI6dHJ1ZSxcImNhcmRib2FyZFwiOnRydWUsXCJkZXNjcmlwdGlvblwiOlwiWmlwIHRocm91Z2ggdGhlIGFzdGVyb2lkIGJlbHQgaW4geW91ciBsYXNlci1lcXVpcHBlZCBzcGFjZXNoaXAuXCJ9LFwicG9seWdvbnNocmVkZGVyXCI6e1wiaWRcIjpcInBvbHlnb25zaHJlZGRlclwiLFwidXJsXCI6XCJodHRwOi8vc3dpbW1pbmdsZXNzb25zZm9ybW9kZXJubGlmZS5jb20vcG9seWdvbi1zaHJlZGRlci9cIixcInRpdGxlXCI6XCJQb2x5Z29uIFNocmVkZGVyXCIsXCJhdXRob3JcIjpcIkphdW1lIFNhbmNoZXogRWxpYXMgKEB0aGVzcGl0ZSlcIixcImltYWdlXCI6XCJzaXRlL3BvbHlnb25zaHJlZGRlci5qcGdcIixcImxvZ29cIjpcInNpdGUvcG9seWdvbnNocmVkZGVyLnBuZ1wiLFwiaGlnaFBlcmZvcm1hbmNlXCI6dHJ1ZSxcImRlc2NyaXB0aW9uXCI6XCJBIHdoaXJsd2luZCBvZiBjb25mZXR0aSBhbWFzc2VkIGZyb20gc2hyZWRkZWQgY3ViZXMgYW5kIHBvbHlnb25zLlwifSxcImZpbmRpbmdsb3ZlXCI6e1wiaWRcIjpcImZpbmRpbmdsb3ZlXCIsXCJ1cmxcIjpcImh0dHBzOi8vZmluZGluZ2xvdmUuYWN0aXZldGhlb3J5Lm5ldC9cIixcInRpdGxlXCI6XCJGaW5kaW5nIExvdmVcIixcImF1dGhvclwiOlwiQWN0aXZlIFRoZW9yeVwiLFwiaW1hZ2VcIjpcInNpdGUvZmluZGluZ2xvdmUuanBnXCIsXCJsb2dvXCI6XCJzaXRlL2ZpbmRpbmdsb3ZlLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiLkxvYWRlclVJQ1RBIC5oaXRcIiwxMDBdXSxcImluamVjdFNjcmlwdFwiOlwiaW5qZWN0U2NyaXB0cy9maW5kaW5nbG92ZS5qc1wiLFwid2FpdEZvcldlYlZSUmVhZHlcIjp0cnVlLFwiZGVzY3JpcHRpb25cIjpcIldlIGZhbGwgaW4gbG92ZSBieSBjaGFuY2UuIFdlIHN0YXkgaW4gbG92ZSBieSBjaGFuY2UuIEEgdmlydHVhbCByZWFsaXR5IHN0b3J5IGZvciB1cy5cIn0sXCJzb25pY3VtYnJlbGxhXCI6e1wiaWRcIjpcInNvbmljdW1icmVsbGFcIixcInVybFwiOlwiaHR0cHM6Ly9zb25pY3VtYnJlbGxhLmNvbS9cIixcInRpdGxlXCI6XCJTb25pYyBVbWJyZWxsYVwiLFwiYXV0aG9yXCI6XCJQbGFuIDhcIixcImltYWdlXCI6XCJzaXRlL3NvbmljdW1icmVsbGEuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3NvbmljdW1icmVsbGEucG5nXCIsXCJlbnRlcnZyXCI6W1tcImNsaWNrXCIsXCIjZW50ZXJWckJ1dHRvbkNvbnRhaW5lciAud2VidnItdWktYnV0dG9uXCIsNTAwXV0sXCJpbmplY3RTY3JpcHRcIjpcImluamVjdFNjcmlwdHMvc29uaWN1bWJyZWxsYS5qc1wiLFwid2FpdEZvcldlYlZSUmVhZHlcIjp0cnVlLFwiaGlnaFBlcmZvcm1hbmNlXCI6dHJ1ZSxcImRlc2NyaXB0aW9uXCI6XCJTdGFuZCB1bmRlciBhIHVtYnJlbGxhIGFuZCBoZWFyIHRoZSBzb3VuZHMgb2YgcmFpbmluZyBkb2cgdG95cywgcGluZyBwb25nIGJhbGxzLCBhbmQgbW9yZS4gTGlzdGVuIHRvIG9iamVjdHMgY3Jhc2hpbmcgYWxsIGFyb3VuZC5cIn0sXCJ1cHRoZXJlXCI6e1wiaWRcIjpcInVwdGhlcmVcIixcInVybFwiOlwiaHR0cHM6Ly9uZ29rZXZpbi5naXRodWIuaW8vdXAtdGhlcmUtd2VidnJcIixcInRpdGxlXCI6XCJVcCBUaGVyZVwiLFwiYXV0aG9yXCI6XCJDaGFybGllIEhvZXkgKEBmbGltc2hhdylcIixcImltYWdlXCI6XCJzaXRlL3VwdGhlcmUuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3VwdGhlcmUucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiUGxhbmV0YXJpdW0gb2YgMTAwSyByZWFsIHN0YXJzLiBTcG90IGV4b3BsYW5ldHMsIHRyYXZlbCB0aHJvdWdoIHRpbWUsIGhvbGQgdGhlIGdhbGF4eSBpbiB5b3VyIGhhbmRzIHdpdGggdGhlIGdyaXAgYnV0dG9ucy5cIn0sXCJzcGlkZXJcIjp7XCJpZFwiOlwic3BpZGVyXCIsXCJ1cmxcIjpcImh0dHBzOi8vZGVtby5tYXJwaS5wbC9zcGlkZXIvXCIsXCJ0aXRsZVwiOlwiU3BpZGVyXCIsXCJhdXRob3JcIjpcIk1hcnBpXCIsXCJpbWFnZVwiOlwic2l0ZS9zcGlkZXIuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3NwaWRlci5wbmdcIixcImF1ZGlvXCI6W1wiaHR0cHM6Ly9zdXBlcm1lZGl1bS5jb20vc3VwZXJhc3NldHMvYXVkaW8vYmx1ZWRvdHNlc3Npb25zLWJhdXhpdGUubXAzXCIsMC4yXSxcImVudGVydnJcIjpbW1wiY2xpY2tcIixcImltZzpsYXN0LWNoaWxkXCIsMTAwXV0sXCJoaWdoUGVyZm9ybWFuY2VcIjp0cnVlLFwiZGVzY3JpcHRpb25cIjpcIkNvbWUgdmlzaXQgeW91ciBsaXR0bGUgcGV0IHNwaWRlciBpbiBWUiFcIn0sXCJzaG9vdGluZ3N0YXJzXCI6e1wiaWRcIjpcInNob290aW5nc3RhcnNcIixcInVybFwiOlwiaHR0cHM6Ly9hZnJhbWUtc2hvb3Rpbmctc3RhcnMuZ2xpdGNoLm1lL1wiLFwidGl0bGVcIjpcIlNob290aW5nIFN0YXJzXCIsXCJhdXRob3JcIjpcIlBoaWxpcCBCZWxsXCIsXCJpbWFnZVwiOlwic2l0ZS9zaG9vdGluZ3N0YXJzLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9zaG9vdGluZ3N0YXJzLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiLmEtZW50ZXItdnItYnV0dG9uXCIsNTAwXV0sXCJoaWdoUGVyZm9ybWFuY2VcIjp0cnVlLFwiZGVzY3JpcHRpb25cIjpcIkdldCBsb3N0IGluIGFuIGV4cGxvc2lvbiBvZiBjb2xvcnMuXCJ9LFwiZmxvYXRcIjp7XCJpZFwiOlwiZmxvYXRcIixcInVybFwiOlwiaHR0cHM6Ly9uZ29rZXZpbi5naXRodWIuaW8vZmxvYXQvXCIsXCJ0aXRsZVwiOlwiRmxvYXRcIixcImF1dGhvclwiOlwiZWxlVlIgKGluY2wuIFZpIEhhcnQpXCIsXCJpbWFnZVwiOlwic2l0ZS9mbG9hdC5qcGdcIixcImxvZ29cIjpcInNpdGUvZmxvYXQucG5nXCIsXCJlbnRlcnZyXCI6W1tcImNsaWNrXCIsXCJjYW52YXMgKyBidXR0b25cIiw1MDBdXSxcImRlc2NyaXB0aW9uXCI6XCJBIHB1enpsZSBvZiBmbG9hdGluZyBwbGF0Zm9ybXMgYWRtaXN0IGJsb29taW5nIHBsYW50cyBhbmQgc2t5IGlzbGFuZHMuXCJ9LFwiYXVyb3JhXCI6e1wiaWRcIjpcImF1cm9yYVwiLFwidXJsXCI6XCJodHRwOi8vd3d3Lmdub21ldGVjaC5jb20vd2VidnIvYXVyb3JhL1wiLFwidGl0bGVcIjpcIkF1cm9yYVwiLFwiYXV0aG9yXCI6XCJHbm9tZXRlY2hcIixcImNhcmRib2FyZFwiOnRydWUsXCJpbWFnZVwiOlwic2l0ZS9hdXJvcmEuanBnXCIsXCJsb2dvXCI6XCJzaXRlL2F1cm9yYS5wbmdcIixcImF1ZGlvXCI6W1wiaHR0cHM6Ly9zdXBlcm1lZGl1bS5jb20vc3VwZXJhc3NldHMvYXVkaW8va2FpZW5nbGUtc3Vuc2V0Lm1wM1wiLDAuNF0sXCJoaWdoUGVyZm9ybWFuY2VcIjp0cnVlLFwiZGVzY3JpcHRpb25cIjpcIkNhdGNoIHRoZSBub3J0aGVybiBsaWdodHMgKGF1cm9yYSBib3JlYWxpcykgbGl2ZSBpbiBZZWxsb3drbmlmZSwgQ2FuYWRhLlwifSxcImZvcmVzdHdhdmVcIjp7XCJpZFwiOlwiZm9yZXN0d2F2ZVwiLFwidXJsXCI6XCJodHRwczovL2ZvcmVzdHdhdmUuZ2xpdGNoLm1lL1wiLFwidGl0bGVcIjpcIkZvcmVzdCBXYXZlXCIsXCJhdXRob3JcIjpcImFsZnJlZG9mcmxwXCIsXCJpbWFnZVwiOlwic2l0ZS9mb3Jlc3R3YXZlLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9mb3Jlc3R3YXZlLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiLmEtZW50ZXItdnItYnV0dG9uXCIsNTAwXV0sXCJkZXNjcmlwdGlvblwiOlwiVHJpcHB5IHNwYWNlIGZvcmVzdC5cIn0sXCJjcm9zc3RoZXN0cmVldFwiOntcImlkXCI6XCJjcm9zc3RoZXN0cmVldFwiLFwidXJsXCI6XCJodHRwczovL2Nyb3NzdGhlc3RyZWV0LmZ1bi9nYW1lL1wiLFwidGl0bGVcIjpcIkNyb3NzIHRoZSBTdHJlZXRcIixcImF1dGhvclwiOlwiU1JPTUxJTkVcIixcImltYWdlXCI6XCJzaXRlL2Nyb3NzdGhlc3RyZWV0LmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9jcm9zc3RoZXN0cmVldC5wbmdcIixcImVudGVydnJcIjpbW1wiY2xpY2tcIixcIi5hLWVudGVyLXZyLWJ1dHRvblwiLDEwMF1dLFwiZGVzY3JpcHRpb25cIjpcIkhvdyBtYW55IHRpbWVzIGNhbiB5b3UgY3Jvc3MgdGhlIEdvbGRlbiBHYXRlIGJyaWRnZSB3aXRob3V0IGdldHRpbmcgaGl0IGJ5IGEgY2FyPyBHZXQgb24gdGhlIGdsb2JhbCBsZWFkZXJib2FyZHMhXCJ9LFwiYmVhcjcxXCI6e1wiaWRcIjpcImJlYXI3MVwiLFwidXJsXCI6XCJodHRwczovL2JlYXI3MXZyLm5mYi5jYS9cIixcInRpdGxlXCI6XCJCZWFyIDcxXCIsXCJhdXRob3JcIjpcIk5hdGlvbmFsIEZpbG0gQm9hcmQgb2YgQ2FuYWRhXCIsXCJpbWFnZVwiOlwic2l0ZS9iZWFyNzEuanBnXCIsXCJsb2dvXCI6XCJzaXRlL2JlYXI3MS5wbmdcIixcImVudGVydnJcIjpbW1wibW91c2VvdmVyXCIsXCIjc3RhcnQtZXhwZXJpZW5jZS12ci1idXR0b25cIiwxMDBdLFtcIm1vdXNlZG93blwiLFwiI3N0YXJ0LWV4cGVyaWVuY2UtdnItYnV0dG9uXCIsMTUwXSxbXCJtb3VzZXVwXCIsXCIjc3RhcnQtZXhwZXJpZW5jZS12ci1idXR0b25cIiwyMDBdLFtcImNsaWNrXCIsXCIjc3RhcnQtZXhwZXJpZW5jZS12ci1idXR0b25cIiwyNTBdXSxcImNhcmRib2FyZFwiOnRydWUsXCJkZXNjcmlwdGlvblwiOlwiQmx1ciB0aGUgbGluZSBiZXR3ZWVuIHRoZSB3aWxkIHdvcmxkIGFuZCB0aGUgd2lyZWQgb25lLiBGb2xsb3cgQmVhciA3MSwgYSBmZW1hbGUgZ3JpenpseSBiZWFyIGxpdmluZyBpbiB0aGUgQ2FuYWRpYW4gUm9ja2llcy5cIn0sXCJ0aGVoYWxsXCI6e1wiaWRcIjpcInRoZWhhbGxcIixcInVybFwiOlwiaHR0cHM6Ly9jZWNyb3BpYS5naXRodWIuaW8vdGhlaGFsbGFmcmFtZS9cIixcInRpdGxlXCI6XCJUaGUgSGFsbFwiLFwiYXV0aG9yXCI6XCJDZWNyb3BpYSBTb2x1dGlvbnNcIixcImltYWdlXCI6XCJzaXRlL3RoZWhhbGwuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3RoZWhhbGwucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiQSBmaW5lIGxpdHRsZSBtdXNldW0uIFN0YXR1ZXMsIGtpbmVjdGljIHNjdWxwdHVyZXMsIGFuZCBwYWludGluZ3MuXCJ9LFwiY2l0eWJ1aWxkZXJcIjp7XCJpZFwiOlwiY2l0eWJ1aWxkZXJcIixcInVybFwiOlwiaHR0cHM6Ly9hZnJhbWUuY2l0eS9cIixcInRpdGxlXCI6XCJDaXR5IEJ1aWxkZXJcIixcImF1dGhvclwiOlwiS2llcmFuIEZhcnJcIixcImltYWdlXCI6XCJzaXRlL2NpdHlidWlsZGVyLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9jaXR5YnVpbGRlci5wbmdcIixcImVudGVydnJcIjpbW1wiY2xpY2tcIixcIi5hLWVudGVyLXZyLWJ1dHRvblwiLDUwMF1dLFwiYXVkaW9cIjpbXCJkZWZhdWx0XCIsMC41XSxcImRlc2NyaXB0aW9uXCI6XCJDcmVhdGUgYSB2aXJ0dWFsIGNpdHkgd2l0aCB5b3VyIGhhbmRzIHVzaW5nIGEgbGlicmFyeSBvZiBwaXhlbC1zdHlsZSBtb2RlbHMuIFlvdSBhcmUgdGhlIG1heW9yLlwifSxcIndpdGhpblwiOntcImlkXCI6XCJ3aXRoaW5cIixcInVybFwiOlwiaHR0cHM6Ly92ci53aXRoLmluL1wiLFwidGl0bGVcIjpcIldpdGhpblwiLFwiYXV0aG9yXCI6XCJXaXRoaW5cIixcImltYWdlXCI6XCJzaXRlL3dpdGhpbi5qcGdcIixcImxvZ29cIjpcInNpdGUvd2l0aGluLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiLmNvbnRhaW5lciAuYnV0dG9uOmxhc3QtY2hpbGRcIiwxMDBdXSxcImRlc2NyaXB0aW9uXCI6XCJFeHRyYW9yZGluYXJ5IHN0b3JpZXMgaW4gdmlydHVhbCByZWFsaXR5LiBTcGFjZSBhZHZlbnR1cmVzIGFuZCBtYXJpbmUgc2Vhc2NhcGVzLiBBIHByb2R1Y2VkIGxpYnJhcnkgb2YgMzYwLWRlZ3JlZSB2aWRlb3MuXCJ9LFwicmVzb25hdGVcIjp7XCJpZFwiOlwicmVzb25hdGVcIixcInVybFwiOlwiaHR0cHM6Ly9jbGFzc2VzLm1hcnBpLnBsL3Jlc29uYXRlL1wiLFwidGl0bGVcIjpcIlJlc29uYXRlOiBBdWRpbyBSZWFjdGl2ZVwiLFwiYXV0aG9yXCI6XCJNYXJwaVwiLFwiaW1hZ2VcIjpcInNpdGUvcmVzb25hdGUuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3Jlc29uYXRlLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiY2FudmFzICsgYnV0dG9uXCIsMTUwXV0sXCJoaWdoUGVyZm9ybWFuY2VcIjp0cnVlLFwiZGVzY3JpcHRpb25cIjpcIlJpZGUgdGhlIGF1ZGlvIHJlYWN0aXZlIHdhdmVzLiBGaXJzdCBpbnN0YWxsbWVudCBvZiBmZWF0dXJpbmcgZ2VuZXJhdGl2ZSBWUiB3b3JsZHMuXCJ9LFwic3BlYWt0b2dvXCI6e1wiaWRcIjpcInNwZWFrdG9nb1wiLFwidXJsXCI6XCJodHRwczovL3NwZWFrdG9nby53aXRoZ29vZ2xlLmNvbS9cIixcInRpdGxlXCI6XCJTcGVhayB0byBHb1wiLFwiYXV0aG9yXCI6XCJHb29nbGUgQ3JlYXRpdmUgTGFiXCIsXCJpbWFnZVwiOlwic2l0ZS9zcGVha3RvZ28uanBnXCIsXCJsb2dvXCI6XCJzaXRlL3NwZWFrdG9nby5wbmdcIixcImVudGVydnJcIjpbW1wiY2xpY2tcIixcIiNlbnRlcnZyLWJ1dHRvblwiLDEwMF1dLFwiY2FyZGJvYXJkXCI6dHJ1ZSxcImF1ZGlvXCI6W1wiaHR0cHM6Ly9zdXBlcm1lZGl1bS5jb20vc3VwZXJhc3NldHMvYXVkaW8vZ2lsbGljdWRkeS1zcHJpbmdpc2gubXAzXCIsMC41XSxcImhpZ2hQZXJmb3JtYW5jZVwiOnRydWUsXCJkZXNjcmlwdGlvblwiOlwiRGlzY292ZXIgc29tZXdoZXJlIG5ldyBpbiB0aGUgd29ybGQuIDM2MC1kZWdyZWUgaW1hZ2VyeSBmcm9tIGFyb3VuZCB0aGUgZ2xvYmUuIFByZXNzIHRoZSB0cmlnZ2VyIGluc3RlYWQgb2YgdGhlIHNwYWNlYmFyLlwifSxcInNwYWNlcm9ja3NcIjp7XCJpZFwiOlwic3BhY2Vyb2Nrc1wiLFwidXJsXCI6XCJodHRwczovL3NwYWNlcm9ja3MubW9hci5pby9cIixcInRpdGxlXCI6XCJTcGFjZSBSb2Nrc1wiLFwiYXV0aG9yXCI6XCJTdGV3YXJ0IFNtaXRoXCIsXCJpbWFnZVwiOlwic2l0ZS9zcGFjZXJvY2tzLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9zcGFjZXJvY2tzLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJtb3VzZWRvd25cIixcIiN2ci10b2dnbGUtY29udGFpbmVyXCIsMTAwXV0sXCJhdWRpb1wiOltcImh0dHBzOi8vc3VwZXJtZWRpdW0uY29tL3N1cGVyYXNzZXRzL2F1ZGlvL3J5YW5jdWxsaW5hbmUtcnVubmluZ3dpdGhkcnVtcy5tcDNcIiwwLjVdLFwiZGVzY3JpcHRpb25cIjpcIkVzY2FwZSB0aHJvdWdoIHNwYWNlIG9uIHN0b2xlbiBwbGFzbWEgZW5naW5lcyB3aGlsZSBzbGluZ2luZyBwaG90b24gYm9sdHMgYXQgZGVhZGx5IGFzdGVyb2lkcy4gSG93IG1hbnkgY2FuIHlvdSBibG93IGFwYXJ0P1wifSxcImRhcmtoYXplXCI6e1wiaWRcIjpcImRhcmtoYXplXCIsXCJ1cmxcIjpcImh0dHBzOi8vY2hyaXN0bWFzZXhwZXJpbWVudHMuY29tLy94cHMvMjAxNi8yNC9kYXJrLWhhemUvXCIsXCJ0aXRsZVwiOlwiRGFyayBIYXplXCIsXCJhdXRob3JcIjpcIkNhbiB4IEdsb29tIHggTWFycGkgeCBTcGl0ZVwiLFwiaW1hZ2VcIjpcInNpdGUvZGFya2hhemUuanBnXCIsXCJsb2dvXCI6XCJzaXRlL2RhcmtoYXplLnBuZ1wiLFwiY29sb3JcIjpcIiM5NTg2NjNcIixcImVudGVydnJcIjpbW1wiY2xpY2tcIixcImltZ1tzcmM9J2VudGVyLnBuZyddXCIsMTAwMF1dLFwiaGlnaFBlcmZvcm1hbmNlXCI6dHJ1ZSxcImRlc2NyaXB0aW9uXCI6XCJXaGVyZSBkdXN0LCBzbW9rZSBhbmQgb3RoZXIgZHJ5IHBhcnRpY2xlcyBvYnNjdXJlIHRoZSBjbGFyaXR5IG9mIHRoZSBza3kuIEEgQ2hyaXN0bWFzIEV4cGVyaW1lbnQuXCJ9LFwibmlnaHRleWVcIjp7XCJpZFwiOlwibmlnaHRleWVcIixcInVybFwiOlwiaHR0cHM6Ly9jaHJpc3RtYXNleHBlcmltZW50cy5jb20veHBzLzIwMTYvMDEvbmlnaHQtZXllL1wiLFwidGl0bGVcIjpcIk5pZ2h0IEV5ZVwiLFwiYXV0aG9yXCI6XCJMaW4uQmVydCBDb2xsZWN0aXZlXCIsXCJpbWFnZVwiOlwic2l0ZS9uaWdodGV5ZS5qcGdcIixcImxvZ29cIjpcInNpdGUvbmlnaHRleWUucG5nXCIsXCJjb2xvclwiOlwiIzRjOTI4YVwiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiI2VudGVyVnJcIiwyMDBdLFtcImNsaWNrXCIsXCIuYnV0dG9uLXNvdW5kXCIsMjAwXV0sXCJpbmplY3RTY3JpcHRcIjpcImluamVjdFNjcmlwdHMvbmlnaHRleWVzLmpzXCIsXCJ3YWl0Rm9yV2ViVlJSZWFkeVwiOnRydWUsXCJkZXNjcmlwdGlvblwiOlwiVXNpbmcgYWJzdHJhY3QgbGluZXMgdG8gcmVjcmVhdGUgdGhlIHNoYXBlIG9mIHRoZSBhbmltYWxzIGluIHRoZSBmb3Jlc3QuIENsaWNrIHRoZSB0aHVtYiBhdCB0aGUgd2luZHMgdG8gbW92ZS5cIn0sXCJhYmxhc3RcIjp7XCJpZFwiOlwiYWJsYXN0XCIsXCJ1cmxcIjpcImh0dHBzOi8vYWZyYW1lLmlvL2EtYmxhc3QvXCIsXCJ0aXRsZVwiOlwiQS1CbGFzdFwiLFwiYXV0aG9yXCI6XCJBLUZyYW1lIEF1dGhvcnNcIixcImltYWdlXCI6XCJzaXRlL2FibGFzdC5qcGdcIixcImxvZ29cIjpcInNpdGUvYWJsYXN0LnBuZ1wiLFwiZGVzY3JpcHRpb25cIjpcIlN0YXkgYWxlcnQgYXMgY3JlYXR1cmVzIGhhcHBpbHkgZmlyZSBhdCB5b3VyIGZyb20gYWxsIGFuZ2xlcy4gUHJvdGVjdCB5b3Vyc2VsZiB3aXRoIGxhc2VyIHBpc3RvbHMuIFNob290IGRvd24gcHJvamVjdGlsZXMgdGhhdCBjb21lIGF0IHlvdS5cIn0sXCJhc2F0dXJkYXluaWdodFwiOntcImlkXCI6XCJhc2F0dXJkYXluaWdodFwiLFwidXJsXCI6XCJodHRwczovL2FmcmFtZS5pby9hLXNhdHVyZGF5LW5pZ2h0L1wiLFwidGl0bGVcIjpcIkEgU2F0dXJkYXkgTmlnaHRcIixcImF1dGhvclwiOlwiQS1GcmFtZSBBdXRob3JzXCIsXCJpbWFnZVwiOlwic2l0ZS9hc2F0dXJkYXluaWdodC5qcGdcIixcImxvZ29cIjpcInNpdGUvYXNhdHVyZGF5bmlnaHQucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiVGhlIGhvdHRlc3QgZGFuY2UgY2x1Yi4gQmUgYSBiZWFyLCBhIGNoaWNrZW4sIEVsdmlzLCBvciBhIGRpc2NvIGxhZHksIGFuZCBzaGFrZSBpdCBvZmYuIFJlY29yZCBhIGRhbmNlIGluIFZSIGFuZCBzaG93IHRoZSB3b3JsZCB5b3VyIG1vdmVzLlwifSxcImFjY2Vzc21hcnNcIjp7XCJpZFwiOlwiYWNjZXNzbWFyc1wiLFwidXJsXCI6XCJodHRwczovL2FjY2Vzc21hcnMud2l0aGdvb2dsZS5jb20vXCIsXCJ0aXRsZVwiOlwiQWNjZXNzIE1hcnNcIixcImF1dGhvclwiOlwiR29vZ2xlIENyZWF0aXZlIExhYiAmIE5BU0EgSlBMXCIsXCJpbWFnZVwiOlwic2l0ZS9hY2Nlc3NtYXJzLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9hY2Nlc3NtYXJzLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiLndlYnZyLXVpLWJ1dHRvblwiLDEwMF1dLFwiYXVkaW9cIjpbXCJkZWZhdWx0XCIsMC41XSxcImRlc2NyaXB0aW9uXCI6XCJUaGUgcmVhbCBzdXJmYWNlIG9mIE1hcnMgZnJvbSBvdmVyIDIwMCwwMDAgcGhvdG9ncmFwaHMgc2VudCBiYWNrIHRvIEVhcnRoIGJ5IHRoZSBDdXJpb3NpdHkgcm92ZXIuIFVzZWQgYnkgTkFTQSBKUEwgc2NpZW50aXN0cy5cIn0sXCJldXRvd1wiOntcImlkXCI6XCJldXRvd1wiLFwidXJsXCI6XCJodHRwczovL2RlbW8ubWFycGkucGwvYXJjaGFuL2V1dG93L1wiLFwidGl0bGVcIjpcIkV1dG93XCIsXCJhdXRob3JcIjpcIk1hcnBpXCIsXCJpbWFnZVwiOlwic2l0ZS9ldXRvdy5qcGdcIixcImxvZ29cIjpcInNpdGUvZXV0b3cucG5nXCIsXCJlbnRlcnZyXCI6W1tcImNsaWNrXCIsXCJpbWdbc3JjPSdlbnRlci5wbmcnXVwiLDEwMDBdXSxcImhpZ2hQZXJmb3JtYW5jZVwiOnRydWUsXCJkZXNjcmlwdGlvblwiOlwiQSBWaXJ0dWFsIFJlYWxpdHkgY29sbGFib3JhdGlvbiB3aXRoIEFyY2hhbiBOYWlyLCBhIHNlcmllcyBvZiAzRCB2aXJ0dWFsIHdvcmxkcyB3aXRoIG11c2ljIGJ5IEFuIG9uIEJhc3QuXCJ9LFwibWFzc21pZ3JhdGlvbnNcIjp7XCJpZFwiOlwibWFzc21pZ3JhdGlvbnNcIixcInVybFwiOlwiaHR0cHM6Ly9tYXNzbWlncmF0aW9ucy5jb20vaWRlXCIsXCJ0aXRsZVwiOlwiTWFzcyBNaWdyYXRpb25zXCIsXCJhdXRob3JcIjpcIk1hcnBpXCIsXCJpbWFnZVwiOlwic2l0ZS9tYXNzbWlncmF0aW9ucy5qcGdcIixcImxvZ29cIjpcInNpdGUvbWFzc21pZ3JhdGlvbnMucG5nXCIsXCJlbnRlcnZyXCI6W1tcImNsaWNrXCIsXCIjdnJcIiwxMDAwXV0sXCJoaWdoUGVyZm9ybWFuY2VcIjp0cnVlLFwiZGVzY3JpcHRpb25cIjpcIkFuIGV4cGVyaW1lbnQgaW4gbWVjaGEgd29ybGQgY3JlYXRpb24uIENyZWF0ZSwgYWRvcHQgYW5kIHNldCB0aGVtIGZyZWUuXCJ9LFwidmlydHVhbGFydHNlc3Npb25zXCI6e1wiaWRcIjpcInZpcnR1YWxhcnRzZXNzaW9uc1wiLFwidXJsXCI6XCJodHRwczovL3ZpcnR1YWxhcnQuY2hyb21lZXhwZXJpbWVudHMuY29tL3ZyL1wiLFwidGl0bGVcIjpcIlZpcnR1YWwgQXJ0IFNlc3Npb25zXCIsXCJhdXRob3JcIjpcIkdvb2dsZVwiLFwiaW1hZ2VcIjpcInNpdGUvdmlydHVhbGFydHNlc3Npb25zLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS92aXJ0dWFsYXJ0c2Vzc2lvbnMucG5nXCIsXCJlbnRlcnZyXCI6W1tcImNsaWNrXCIsXCIjd2VidnJfYnV0dG9uXCIsMjAwMF1dLFwiYXVkaW9cIjpbXCJkZWZhdWx0XCIsMC41XSxcImRlc2NyaXB0aW9uXCI6XCJTaXggd29ybGQtcmVub3duZWQgYXJ0aXN0cyBnaXZlbiBhIG5ldyB3YXkgdG8gcGFpbnQsIGRyYXcsIGFuZCBzY3VscHQuIE9ic2VydmUgdGhlbSBhcyB0aGV5IHBhaW50LlwifSxcIndlYnZybGFiXCI6e1wiaWRcIjpcIndlYnZybGFiXCIsXCJ1cmxcIjpcImh0dHBzOi8vcGxheWNhbnYuYXMvL2luZGV4L0dnVlpKdGhhXCIsXCJ0aXRsZVwiOlwiV2ViVlIgTGFiXCIsXCJhdXRob3JcIjpcIlBsYXlDYW52YXNcIixcImltYWdlXCI6XCJzaXRlL3BsYXljYW52YXN3ZWJ2cmxhYi5qcGdcIixcImxvZ29cIjpcInNpdGUvcGxheWNhbnZhc3dlYnZybGFiLnBuZ1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiI3ZyLWJ1dHRvblwiLDEwMF1dLFwiaGlnaFBlcmZvcm1hbmNlXCI6dHJ1ZSxcImRlc2NyaXB0aW9uXCI6XCJGaXJlIHNvbWUgY29uZmV0dGkgYW5kIHBsYXkgdGhlIHJlY29yZC4gQSBzbWFsbCBsYWIgZGVtb25zdHJhdGluZyB2YXJpb3VzIGludGVyYWN0aW9ucyBpbiBWUi4gVGVsZXBvcnQsIGdyYWIsIHRocm93LlwifSxcInBva2Vtb25cIjp7XCJpZFwiOlwicG9rZW1vblwiLFwidXJsXCI6XCJodHRwczovL25nb2tldmluLmdpdGh1Yi5pby9rZnJhbWUvc2NlbmVzL3Bva2Vtb24vXCIsXCJ0aXRsZVwiOlwiUG9rZW1vblwiLFwiYXV0aG9yXCI6XCJLZXZpbiBOZ29cIixcImltYWdlXCI6XCJzaXRlL3Bva2Vtb24uanBnXCIsXCJsb2dvXCI6XCJzaXRlL3Bva2Vtb24ucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiU3RhbmQgZnJvbSB0aGUgdHJhaW5lcidzIHN0YW5kIGF0IHRoZSBQb2tlbW9uIFN0YWRpdW0gd2l0aCBQaWthY2h1IGFnYWluc3QgQ2hhcml6YXJkLlwifSxcImRlc3Ryb3llZHN1YndheVwiOntcImlkXCI6XCJkZXN0cm95ZWRzdWJ3YXlcIixcInVybFwiOlwiaHR0cHM6Ly9za2V0Y2hmYWIuY29tL21vZGVscy9kN2ZiZWE2MjExYWE0MTE2YWU4YTNhODgyYWY1NWM2Y1wiLFwidGl0bGVcIjpcIkRlc3Ryb3llZCBTdWJ3YXlcIixcImF1dGhvclwiOlwiQXVyPEMzPjw4Mz48QzI+PEE5PmxpZW4gTWFybGxlXCIsXCJpbWFnZVwiOlwic2l0ZS9kZXN0cm95ZWRzdWJ3YXkuanBnXCIsXCJsb2dvXCI6XCJzaXRlL2Rlc3Ryb3llZHN1YndheS5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJBIHN1YndheSB0aGF0IHdvbid0IGJlIGluIHNlcnZpY2UgYW55IHRpbWUgc29vbi4gSW5zcGlyZWQgYnkgcG9zdC1hcG9jYWx5cHRpYyBob3Jyb3IgZ2FtZSBNZXRybyAyMDMzLlwiLFwiYXVkaW9cIjpbXCJcIiwwXX0sXCJzaGVyd29vZGZvcmVzdFwiOntcImlkXCI6XCJzaGVyd29vZGZvcmVzdFwiLFwidXJsXCI6XCJodHRwczovL3NrZXRjaGZhYi5jb20vbW9kZWxzLzYzZGQ1NjhmNWJjNjRlODY5NGQ1ZjQyNTI5MjRjOTllXCIsXCJ0aXRsZVwiOlwiU2hlcndvb2QgRm9yZXN0XCIsXCJhdXRob3JcIjpcIkxpc2EgU2hjaGVnbG92YVwiLFwiaW1hZ2VcIjpcInNpdGUvcm9iaW5ob29kaW5zaGVyd29vZGZvcmVzdC5qcGdcIixcImxvZ29cIjpcInNpdGUvcm9iaW5ob29kaW5zaGVyd29vZGZvcmVzdC5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJXZWxjb21lIHRvIFNoZXJ3b29kIEZvcmVzdCFcIixcImF1ZGlvXCI6W1wiaHR0cHM6Ly9zdXBlcm1lZGl1bS5jb20vc3VwZXJhc3NldHMvYXVkaW8vdW50aHVuay1mbHVtbW94Lm1wM1wiLDFdfSxcInNpa2FcIjp7XCJpZFwiOlwic2lrYVwiLFwidXJsXCI6XCJodHRwczovL3NrZXRjaGZhYi5jb20vbW9kZWxzLzdiYjY3ZDFkZWE3MjRhNmViNGViZTIxYmNmOTRiMDllXCIsXCJ0aXRsZVwiOlwiU0lLQVwiLFwiYXV0aG9yXCI6XCJNYXJpbmUgUXVpdmlnZXJcIixcImltYWdlXCI6XCJzaXRlL3Npa2EuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3Npa2EucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiRGVlciB1bmRlciBhIGNoZXJyeSBibG9zc29tIG9uIGFuIGlzbGFuZCBpbiB0aGUgbW9vbmxpdCBsYWtlLlwiLFwiYXVkaW9cIjpbXCJodHRwczovL3N1cGVybWVkaXVtLmNvbS9zdXBlcmFzc2V0cy9hdWRpby9jaGFud2FpdGZhdC1kcmVhbS5tcDNcIiwwLjc1XX0sXCJza2V0Y2hmYWJcIjp7XCJpZFwiOlwic2tldGNoZmFiXCIsXCJ1cmxcIjpcImh0dHBzOi8vc2tldGNoZmFiLmNvbS92ci1sYXVuY2hlcj9tb2RlbD1jMDAyMmFjYzRmMzI0MmUyYmNhZTgwNDNlMDhkZjhjYyZ2cl9saW5rX25hdmlnYXRpb249MSNob21lP2N1cnNvcj1maXJzdFBhZ2VcIixcInRpdGxlXCI6XCJTa2V0Y2hmYWIgVlJcIixcImF1dGhvclwiOlwiU2tldGNoZmFiXCIsXCJpbWFnZVwiOlwic2l0ZS9za2V0Y2hmYWJ2ci5qcGdcIixcImxvZ29cIjpcInNpdGUvc2tldGNoZmFidnIucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiQnJvd3NlIGZyb20gU2tldGNoZmFiJ3MgcmVwb3NpdG9yeSBvZiAzRCBtb2RlbHMgaW4gVlIuXCIsXCJhdWRpb1wiOltcImRlZmF1bHRcIiwwLjVdfSxcImdyaWRvZmN5bGluZGVyc1wiOntcImlkXCI6XCJncmlkb2ZjeWxpbmRlcnNcIixcInVybFwiOlwiaHR0cHM6Ly93d3cuc2hhZGVydG95LmNvbS92aWV3LzRkU0dXMVwiLFwidGl0bGVcIjpcIkdyaWQgb2YgQ3lsaW5kZXJzXCIsXCJhdXRob3JcIjpcIkluaWdvIFF1aWxleiAoaXEpXCIsXCJpbWFnZVwiOlwic2l0ZS9ncmlkb2ZjeWxpbmRlcnMuanBnXCIsXCJsb2dvXCI6XCJzaXRlL2dyaWRvZmN5bGluZGVycy5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJBbiBpbmZpbml0ZSBncmlkIG9mIGN5bGluZGVycywgbGlrZSB0aGUgc3dlbGxpbmcgd2F2ZXMgb2YgdGhlIG9jZWFuLiBBbiBleHBhbnNlIG9mIG1vdW50YWlucywgcmlzaW5nIGFuZCBmYWxsaW5nLCBmb3JldmVyLlwiLFwiYXVkaW9cIjpbXCJodHRwczovL3N1cGVyLnh5ei9zdXBlcmFzc2V0cy9hdWRpby9pYW5zdXRoZXJsYW5kLWdpYW50Lm1wM1wiLDAuNV19LFwiY3ViZXNjYXBlXCI6e1wiaWRcIjpcImN1YmVzY2FwZVwiLFwidXJsXCI6XCJodHRwczovL3d3dy5zaGFkZXJ0b3kuY29tL3ZpZXcvTXNsM1JyXCIsXCJ0aXRsZVwiOlwiQ3ViZXNjYXBlXCIsXCJhdXRob3JcIjpcIkluaWdvIFF1aWxleiAoaXEpXCIsXCJpbWFnZVwiOlwic2l0ZS9jdWJlc2NhcGUuanBnXCIsXCJsb2dvXCI6XCJzaXRlL2N1YmVzY2FwZS5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJNYXJ2ZWwgYXQgdGhlIGZpbmUgZGV0YWlsIG9mIHRoZSB3b29kLWdyYWluZWQgd2F2ZWZvcm1zLiBSb3VuZGVkIHB1bHNhdGluZyBjdWJlcyB0aGF0IGJvdW5jZSB0byB0aGUgYmVhdC5cIn0sXCJ3b3Jtc1wiOntcImlkXCI6XCJ3b3Jtc1wiLFwidXJsXCI6XCJodHRwczovL3d3dy5zaGFkZXJ0b3kuY29tL3ZpZXcvWHNqWFIxXCIsXCJ0aXRsZVwiOlwiV29ybXNcIixcImF1dGhvclwiOlwiSW5pZ28gUXVpbGV6IChpcSlcIixcImltYWdlXCI6XCJzaXRlL3dvcm1zLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS93b3Jtcy5wbmdcIixcImF1ZGlvXCI6W1wiaHR0cHM6Ly91Y2FyZWNkbi5jb20vYTc0YWRhYTYtYzg5Ni00NDE5LWE3ZjAtY2QyMTdhNjUxMDU5L1wiLDAuMV0sXCJkZXNjcmlwdGlvblwiOlwiQSBzdXJyZWFsIGV4cGVyaWVuY2UgaW4gYSBmb3Jlc3Qgb2Ygc3RyYW5kIHRoaW5ncy5cIn0sXCJ3aXRjaGVzYnJld1wiOntcImlkXCI6XCJ3aXRjaGVzYnJld1wiLFwidXJsXCI6XCJodHRwczovL3JhdmVud29ya3MuY2Evd2l0Y2gvXCIsXCJ0aXRsZVwiOlwiV2l0Y2gncyBCcmV3XCIsXCJhdXRob3JcIjpcIkFuZHJldyBGcmF0aWNlbGxpIChAcmF2ZW53b3JrcylcIixcImltYWdlXCI6XCJzaXRlL3dpdGNoc2JyZXcuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3dpdGNoc2JyZXcucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiTWl4IHRvZ2V0aGVyIGEgcmVkIHBvdGlvbiwgc29tZSBibHVlIHBvdGlvbiwgYSBiaXQgb2YgeWVsbG93IHBvdGlvbiwgYW5kIGJhYnkgeW91J3ZlIGdvdCBhIHN0ZXcgZ29pbmcuXCJ9LFwicHVwcGV0cmlsbGFcIjp7XCJpZFwiOlwicHVwcGV0cmlsbGFcIixcInVybFwiOlwiaHR0cHM6Ly93d3cuam9yZ2VmdWVudGVzLm5ldC9wcm9qZWN0cy9wdXBwZXRyaWxsYS9cIixcInRpdGxlXCI6XCJZZSBPbGRlIFB1cHBldHJpbGxhXCIsXCJhdXRob3JcIjpcIkpvcmdlIEZ1ZW50ZXMgKEBqb3JnZWZ1ZW50ZXNuZXQpXCIsXCJpbWFnZVwiOlwic2l0ZS9wdXBwZXRyaWxsYS5qcGdcIixcImxvZ29cIjpcInNpdGUvcHVwcGV0cmlsbGEucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiWWUgT2xkZSBQdXBwZXRyaWxsYSBoYXMgYXJyaXZlZCBpbiB0b3duIGFuZCBldmVyeWJvZHkncyBoZXJlIHRvIGVuam95IHlvdXIgcHVwcGV0ZWVyaW5nIHNraWxscy4gSXQncyBzaG93dGltZSFcIn0sXCJlcGljbWVkaWV2YWxiYXR0bGVcIjp7XCJpZFwiOlwiZXBpY21lZGlldmFsYmF0dGxlXCIsXCJ1cmxcIjpcImh0dHBzOi8vd3d3LnRoZWRhcnQ3Ni5jb20vd2VidnIvZXBpYy1tZWRpZXZhbC1iYXR0bGUvZW1iLmh0bWxcIixcInRpdGxlXCI6XCJNZWRpZXZhbCBEYW5jZSBCYXR0bGVcIixcImF1dGhvclwiOlwiRGFuaWxvIFBhc3F1YXJpZWxsbyAoQHRoZWRhcnQ3NilcIixcImltYWdlXCI6XCJzaXRlL2VwaWNtZWRpZXZhbGJhdHRsZS5qcGdcIixcImxvZ29cIjpcInNpdGUvZXBpY21lZGlldmFsYmF0dGxlLnBuZ1wiLFwiZGVzY3JpcHRpb25cIjpcIkEgbWVkaWV2YWwgZGFuY2Utb2ZmLiBTaXQgYmFjayBhbmQgYmUgdGhlIGp1ZGdlLCB3aG8ncyBnb3QgdGhlIG1vdmVzP1wifSxcInBhbm9tb21lbnRzXCI6e1wiaWRcIjpcInBhbm9tb21lbnRzXCIsXCJ1cmxcIjpcImh0dHBzOi8vbXkucGFub21vbWVudHMuY29tXCIsXCJ0aXRsZVwiOlwiUGFub01vbWVudHNcIixcImF1dGhvclwiOlwiUGFub01vbWVudHNcIixcImltYWdlXCI6XCJzaXRlL3Bhbm9tb21lbnRzLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS9wYW5vbW9tZW50cy5wbmdcIixcImF1ZGlvXCI6W1wiZGVmYXVsdFwiLDAuNV0sXCJkZXNjcmlwdGlvblwiOlwiVGhlIEdJRnMgb2YgVlIsIGNvbnRyb2wgdGltZSB3aXRoIHlvdXIgZ2F6ZSEgUHJlc3MgYW55IGJ1dHRvbiBuYXZpZ2F0ZSB0aHJvdWdoIHZpc3VhbCBzdG9yaWVzIGFuZCBsaXZpbmcgcGhvdG9zLlwifSxcImNvbXBvc3VyZVwiOntcImlkXCI6XCJjb21wb3N1cmVcIixcInVybFwiOlwiaHR0cHM6Ly9jb21wb3N1cmUuc2l0ZS9wcmVsdWRlXCIsXCJ0aXRsZVwiOlwiQyBPIE0gUCBPIFMgVSBSIEVcIixcImF1dGhvclwiOlwiSmVmZiBNY1NwYWRkZW4gJiBJYW4gUGV0cmFyY2FcIixcImltYWdlXCI6XCJzaXRlL2NvbXBvc3VyZS5qcGdcIixcImxvZ29cIjpcInNpdGUvY29tcG9zdXJlLnBuZ1wiLFwiZGVzY3JpcHRpb25cIjpcIkltbWVyc2l2ZSBtdXNpYyBleHBlcmllbmNlIGZvciBzdHJlc3MgcmVsaWVmLlwifSxcInRyYWplY3RpbGVjb21tYW5kXCI6e1wiaWRcIjpcInRyYWplY3RpbGVjb21tYW5kXCIsXCJ1cmxcIjpcImh0dHA6Ly9taWNvc21vLmNvbS90cmFqZWN0aWxlY29tbWFuZC9cIixcInRpdGxlXCI6XCJUcmFqZWN0aWxlIENvbW1hbmRcIixcImF1dGhvclwiOlwiQEFkYW1BbGV4YW5kclwiLFwiaW1hZ2VcIjpcInNpdGUvdHJhamVjdGlsZWNvbW1hbmQuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3RyYWplY3RpbGVjb21tYW5kLnBuZ1wiLFwiZGVzY3JpcHRpb25cIjpcIkRlZmVuZCB5b3VyIGNpdGllcyBmcm9tIG1pc3NpbGVzIGFuZCBib21iZXJzISBJbnNwaXJlZCBieSBhbiBvbGQgYXJjYWRlIGNsYXNzaWMuXCJ9LFwic3VwZXJjcmFmdFwiOntcImlkXCI6XCJzdXBlcmNyYWZ0XCIsXCJ1cmxcIjpcImh0dHBzOi8vc3VwZXJtZWRpdW0uY29tL2NyYWZ0L1wiLFwidGl0bGVcIjpcIlN1cGVyY3JhZnRcIixcImF1dGhvclwiOlwiU3VwZXJtZWRpdW1cIixcImltYWdlXCI6XCJzaXRlL3N1cGVyY3JhZnQuanBnXCIsXCJsb2dvXCI6XCJzaXRlL3N1cGVyY3JhZnQucG5nXCIsXCJkZXNjcmlwdGlvblwiOlwiQnVpbGQgYSBWUiB3b3JsZCBpbiBtaW51dGVzISBQdWJsaXNoIHlvdXIgY3JlYXRpb24gaW5zdGFudGx5IHRvIHRoZSBXZWIgdG8gc2hhcmUgd2l0aCB5b3VyIGZyaWVuZHMuXCJ9LFwic3VwZXJjcmFmdGRyYWdvblwiOntcImlkXCI6XCJzdXBlcmNyYWZ0ZHJhZ29uXCIsXCJ1cmxcIjpcImh0dHBzOi8vc3VwZXJtZWRpdW0uY29tL2NyYWZ0L2Jhd2R5LXdlYWx0aFwiLFwidGl0bGVcIjpcIkRyYWdvblwiLFwiYXV0aG9yXCI6XCJEaWVnbyBGLiBHb2Jlcm5hXCIsXCJpbWFnZVwiOlwic2l0ZS9zdXBlcmNyYWZ0ZHJhZ29uLmpwZ1wiLFwiaXNTdXBlcmNyYWZ0XCI6dHJ1ZX0sXCJzdXBlcmNyYWZ0YmxpbXBzXCI6e1wiaWRcIjpcInN1cGVyY3JhZnRibGltcHNcIixcInVybFwiOlwiaHR0cHM6Ly9zdXBlcm1lZGl1bS5jb20vY3JhZnQvZmllcmNlLXRhbGtcIixcInRpdGxlXCI6XCJCbGltcHNcIixcImF1dGhvclwiOlwiRGllZ28gRi4gR29iZXJuYVwiLFwiaW1hZ2VcIjpcInNpdGUvc3VwZXJjcmFmdGJsaW1wcy5qcGdcIixcImlzU3VwZXJjcmFmdFwiOnRydWV9LFwic3VwZXJjcmFmdGNhc3RsZVwiOntcImlkXCI6XCJzdXBlcmNyYWZ0Y2FzdGxlXCIsXCJ1cmxcIjpcImh0dHBzOi8vc3VwZXJtZWRpdW0uY29tL2NyYWZ0L2lja3ktc25ha2VcIixcInRpdGxlXCI6XCJDYXN0bGUgb2YgTXlzdGVyeVwiLFwiYXV0aG9yXCI6XCJEaWVnbyBGLiBHb2Jlcm5hXCIsXCJpbWFnZVwiOlwic2l0ZS9zdXBlcmNyYWZ0Y2FzdGxlLmpwZ1wiLFwiaXNTdXBlcmNyYWZ0XCI6dHJ1ZX0sXCJzdXBlcmNyYWZ0bWVjaGFcIjp7XCJpZFwiOlwic3VwZXJjcmFmdG1lY2hhXCIsXCJ1cmxcIjpcImh0dHBzOi8vc3VwZXJtZWRpdW0uY29tL2NyYWZ0L2Nvb3BlcmF0aXZlLXBvdGF0b1wiLFwidGl0bGVcIjpcIk1lY2hhXCIsXCJhdXRob3JcIjpcIkRpZWdvIEYuIEdvYmVybmFcIixcImltYWdlXCI6XCJzaXRlL3N1cGVyY3JhZnRtZWNoYS5qcGdcIixcImlzU3VwZXJjcmFmdFwiOnRydWV9LFwic3VwZXJjcmFmdHRveW1vdW50YWluXCI6e1wiaWRcIjpcInN1cGVyY3JhZnR0b3ltb3VudGFpblwiLFwidXJsXCI6XCJodHRwczovL3N1cGVybWVkaXVtLmNvbS9jcmFmdC9zaG9ja2luZy1ob3NlXCIsXCJ0aXRsZVwiOlwiVG95IE1vdW50YWluXCIsXCJhdXRob3JcIjpcIkRpZWdvIEYuIEdvYmVybmFcIixcImltYWdlXCI6XCJzaXRlL3N1cGVyY3JhZnR0b3ltb3VudGFpbi5qcGdcIixcImlzU3VwZXJjcmFmdFwiOnRydWV9LFwic3VwZXJjcmFmdGRhbmdlclwiOntcImlkXCI6XCJzdXBlcmNyYWZ0ZGFuZ2VyXCIsXCJ1cmxcIjpcImh0dHBzOi8vc3VwZXJtZWRpdW0uY29tL2NyYWZ0L29uZXJvdXMtY2hhbGtcIixcInRpdGxlXCI6XCJEYW5nZXJcIixcImF1dGhvclwiOlwiRGllZ28gRi4gR29iZXJuYVwiLFwiaW1hZ2VcIjpcInNpdGUvc3VwZXJjcmFmdGRhbmdlci5qcGdcIixcImlzU3VwZXJjcmFmdFwiOnRydWV9LFwic3VwZXJjcmFmdGhvbWVyXCI6e1wiaWRcIjpcInN1cGVyY3JhZnRob21lclwiLFwidXJsXCI6XCJodHRwczovL3N1cGVybWVkaXVtLmNvbS9jcmFmdC9kYW5nZXJvdXMtY2Fyc1wiLFwidGl0bGVcIjpcIkhvbWVyXCIsXCJhdXRob3JcIjpcIkRpZWdvIEYuIEdvYmVybmFcIixcImltYWdlXCI6XCJzaXRlL3N1cGVyY3JhZnRob21lci5qcGdcIixcImlzU3VwZXJjcmFmdFwiOnRydWV9LFwic3VwZXJjcmFmdHBvd2VycHVmZlwiOntcImlkXCI6XCJzdXBlcmNyYWZ0cG93ZXJwdWZmXCIsXCJ1cmxcIjpcImh0dHBzOi8vc3VwZXJtZWRpdW0uY29tL2NyYWZ0L3ByZXZpb3VzLWFjb3VzdGljc1wiLFwidGl0bGVcIjpcIlBvd2VycHVmZlwiLFwiYXV0aG9yXCI6XCJEaWVnbyBGLiBHb2Jlcm5hXCIsXCJpbWFnZVwiOlwic2l0ZS9zdXBlcmNyYWZ0cG93ZXJwdWZmLmpwZ1wiLFwiaXNTdXBlcmNyYWZ0XCI6dHJ1ZX0sXCJzdXBlcmNyYWZ0Y2F2ZVwiOntcImlkXCI6XCJzdXBlcmNyYWZ0Y2F2ZVwiLFwidXJsXCI6XCJodHRwczovL3N1cGVybWVkaXVtLmNvbS9jcmFmdC93ZWFsdGh5LWRvY2tcIixcInRpdGxlXCI6XCJDYXZlXCIsXCJhdXRob3JcIjpcIktldmluIE5nb1wiLFwiaW1hZ2VcIjpcInNpdGUvc3VwZXJjcmFmdGNhdmUuanBnXCIsXCJpc1N1cGVyY3JhZnRcIjp0cnVlfSxcInN1cGVyY3JhZnRjYW55b25cIjp7XCJpZFwiOlwic3VwZXJjcmFmdGNhbnlvblwiLFwidXJsXCI6XCJodHRwczovL3N1cGVybWVkaXVtLmNvbS9jcmFmdC9vcHRpbWFsLW1hcmJsZVwiLFwidGl0bGVcIjpcIkNhbnlvblwiLFwiYXV0aG9yXCI6XCJEaWVnbyBGLiBHb2Jlcm5hXCIsXCJpbWFnZVwiOlwic2l0ZS9zdXBlcmNyYWZ0Y2FueW9uLmpwZ1wiLFwiaXNTdXBlcmNyYWZ0XCI6dHJ1ZX0sXCJ3YWxraW5nc2ltdWxhdG9yXCI6e1wiaWRcIjpcIndhbGtpbmdzaW11bGF0b3JcIixcInVybFwiOlwiaHR0cHM6Ly9wcm9qZWN0cy5nYXR1bmVzLmNvbS93c3ZyLyMvNjEzMzEvNDQ2LC00NDZcIixcInRpdGxlXCI6XCJXYWxraW5nIFNpbXVsYXRvciBWUlwiLFwiYXV0aG9yXCI6XCJEYW5pZWwgRXN0ZWJhbiAoQGRhbmlnYXR1bmVzKVwiLFwiaW1hZ2VcIjpcInNpdGUvd2Fsa2luZ3NpbXVsYXRvci5qcGdcIixcImxvZ29cIjpcInNpdGUvd2Fsa2luZ3NpbXVsYXRvci5wbmdcIixcImRlc2NyaXB0aW9uXCI6XCJOb3QgYWxsIHdobyB3YW5kZXIgYXJlIGxvc3QuIEFuIGluZmluaXRlIGdlbmVyYXRlZCBNaW5lY3JhZnQtbGlrZSB3b3JsZC5cIn0sXCJ2cmJlYXRzXCI6e1wiaWRcIjpcInZyYmVhdHNcIixcInVybFwiOlwiaHR0cHM6Ly92cmJlYXRzLmdhdHVuZXMuY29tL1wiLFwidGl0bGVcIjpcIlZSIEJlYXRzXCIsXCJhdXRob3JcIjpcIkRhbmllbCBFc3RlYmFuIChAZGFuaWdhdHVuZXMpXCIsXCJpbWFnZVwiOlwic2l0ZS92cmJlYXRzLmpwZ1wiLFwibG9nb1wiOlwic2l0ZS92cmJlYXRzLnBuZ1wiLFwiZGVzY3JpcHRpb25cIjpcIkNvbWUgb24sIERKLCB0dXJuIHRoZSBtdXNpYyB1cC4gTWl4IGFuZCBzZXF1ZW5jZSB5b3VyIG93biByaHl0aG1zIGFuZCB0dW5lcyFcIn19fVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zaXRlcy5qc29uIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjbG9uZShvYmopIHtcbiAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FsZ29saWFzZWFyY2gvc3JjL2Nsb25lLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuLy8gVGhpcyBmaWxlIGhvc3RzIG91ciBlcnJvciBkZWZpbml0aW9uc1xuLy8gV2UgdXNlIGN1c3RvbSBlcnJvciBcInR5cGVzXCIgc28gdGhhdCB3ZSBjYW4gYWN0IG9uIHRoZW0gd2hlbiB3ZSBuZWVkIGl0XG4vLyBlLmcuOiBpZiBlcnJvciBpbnN0YW5jZW9mIGVycm9ycy5VbnBhcnNhYmxlSlNPTiB0aGVuLi5cblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuZnVuY3Rpb24gQWxnb2xpYVNlYXJjaEVycm9yKG1lc3NhZ2UsIGV4dHJhUHJvcGVydGllcykge1xuICB2YXIgZm9yRWFjaCA9IHJlcXVpcmUoJ2ZvcmVhY2gnKTtcblxuICB2YXIgZXJyb3IgPSB0aGlzO1xuXG4gIC8vIHRyeSB0byBnZXQgYSBzdGFja3RyYWNlXG4gIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfSBlbHNlIHtcbiAgICBlcnJvci5zdGFjayA9IChuZXcgRXJyb3IoKSkuc3RhY2sgfHwgJ0Nhbm5vdCBnZXQgYSBzdGFja3RyYWNlLCBicm93c2VyIGlzIHRvbyBvbGQnO1xuICB9XG5cbiAgdGhpcy5uYW1lID0gJ0FsZ29saWFTZWFyY2hFcnJvcic7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InO1xuXG4gIGlmIChleHRyYVByb3BlcnRpZXMpIHtcbiAgICBmb3JFYWNoKGV4dHJhUHJvcGVydGllcywgZnVuY3Rpb24gYWRkVG9FcnJvck9iamVjdCh2YWx1ZSwga2V5KSB7XG4gICAgICBlcnJvcltrZXldID0gdmFsdWU7XG4gICAgfSk7XG4gIH1cbn1cblxuaW5oZXJpdHMoQWxnb2xpYVNlYXJjaEVycm9yLCBFcnJvcik7XG5cbmZ1bmN0aW9uIGNyZWF0ZUN1c3RvbUVycm9yKG5hbWUsIG1lc3NhZ2UpIHtcbiAgZnVuY3Rpb24gQWxnb2xpYVNlYXJjaEN1c3RvbUVycm9yKCkge1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblxuICAgIC8vIGN1c3RvbSBtZXNzYWdlIG5vdCBzZXQsIHVzZSBkZWZhdWx0XG4gICAgaWYgKHR5cGVvZiBhcmdzWzBdICE9PSAnc3RyaW5nJykge1xuICAgICAgYXJncy51bnNoaWZ0KG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIEFsZ29saWFTZWFyY2hFcnJvci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB0aGlzLm5hbWUgPSAnQWxnb2xpYVNlYXJjaCcgKyBuYW1lICsgJ0Vycm9yJztcbiAgfVxuXG4gIGluaGVyaXRzKEFsZ29saWFTZWFyY2hDdXN0b21FcnJvciwgQWxnb2xpYVNlYXJjaEVycm9yKTtcblxuICByZXR1cm4gQWxnb2xpYVNlYXJjaEN1c3RvbUVycm9yO1xufVxuXG4vLyBsYXRlIGV4cG9ydHMgdG8gbGV0IHZhcmlvdXMgZm4gZGVmcyBhbmQgaW5oZXJpdHMgdGFrZSBwbGFjZVxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEFsZ29saWFTZWFyY2hFcnJvcjogQWxnb2xpYVNlYXJjaEVycm9yLFxuICBVbnBhcnNhYmxlSlNPTjogY3JlYXRlQ3VzdG9tRXJyb3IoXG4gICAgJ1VucGFyc2FibGVKU09OJyxcbiAgICAnQ291bGQgbm90IHBhcnNlIHRoZSBpbmNvbWluZyByZXNwb25zZSBhcyBKU09OLCBzZWUgZXJyLm1vcmUgZm9yIGRldGFpbHMnXG4gICksXG4gIFJlcXVlc3RUaW1lb3V0OiBjcmVhdGVDdXN0b21FcnJvcihcbiAgICAnUmVxdWVzdFRpbWVvdXQnLFxuICAgICdSZXF1ZXN0IHRpbWVkb3V0IGJlZm9yZSBnZXR0aW5nIGEgcmVzcG9uc2UnXG4gICksXG4gIE5ldHdvcms6IGNyZWF0ZUN1c3RvbUVycm9yKFxuICAgICdOZXR3b3JrJyxcbiAgICAnTmV0d29yayBpc3N1ZSwgc2VlIGVyci5tb3JlIGZvciBkZXRhaWxzJ1xuICApLFxuICBKU09OUFNjcmlwdEZhaWw6IGNyZWF0ZUN1c3RvbUVycm9yKFxuICAgICdKU09OUFNjcmlwdEZhaWwnLFxuICAgICc8c2NyaXB0PiB3YXMgbG9hZGVkIGJ1dCBkaWQgbm90IGNhbGwgb3VyIHByb3ZpZGVkIGNhbGxiYWNrJ1xuICApLFxuICBKU09OUFNjcmlwdEVycm9yOiBjcmVhdGVDdXN0b21FcnJvcihcbiAgICAnSlNPTlBTY3JpcHRFcnJvcicsXG4gICAgJzxzY3JpcHQ+IHVuYWJsZSB0byBsb2FkIGR1ZSB0byBhbiBgZXJyb3JgIGV2ZW50IG9uIGl0J1xuICApLFxuICBVbmtub3duOiBjcmVhdGVDdXN0b21FcnJvcihcbiAgICAnVW5rbm93bicsXG4gICAgJ1Vua25vd24gZXJyb3Igb2NjdXJlZCdcbiAgKVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9hbGdvbGlhc2VhcmNoL3NyYy9lcnJvcnMuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBUaGlzIGlzIHRoZSB3ZWIgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBgZGVidWcoKWAuXG4gKlxuICogRXhwb3NlIGBkZWJ1ZygpYCBhcyB0aGUgbW9kdWxlLlxuICovXG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZGVidWcnKTtcbmV4cG9ydHMubG9nID0gbG9nO1xuZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJncztcbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7XG5leHBvcnRzLnN0b3JhZ2UgPSAndW5kZWZpbmVkJyAhPSB0eXBlb2YgY2hyb21lXG4gICAgICAgICAgICAgICAmJiAndW5kZWZpbmVkJyAhPSB0eXBlb2YgY2hyb21lLnN0b3JhZ2VcbiAgICAgICAgICAgICAgICAgID8gY2hyb21lLnN0b3JhZ2UubG9jYWxcbiAgICAgICAgICAgICAgICAgIDogbG9jYWxzdG9yYWdlKCk7XG5cbi8qKlxuICogQ29sb3JzLlxuICovXG5cbmV4cG9ydHMuY29sb3JzID0gW1xuICAnbGlnaHRzZWFncmVlbicsXG4gICdmb3Jlc3RncmVlbicsXG4gICdnb2xkZW5yb2QnLFxuICAnZG9kZ2VyYmx1ZScsXG4gICdkYXJrb3JjaGlkJyxcbiAgJ2NyaW1zb24nXG5dO1xuXG4vKipcbiAqIEN1cnJlbnRseSBvbmx5IFdlYktpdC1iYXNlZCBXZWIgSW5zcGVjdG9ycywgRmlyZWZveCA+PSB2MzEsXG4gKiBhbmQgdGhlIEZpcmVidWcgZXh0ZW5zaW9uIChhbnkgRmlyZWZveCB2ZXJzaW9uKSBhcmUga25vd25cbiAqIHRvIHN1cHBvcnQgXCIlY1wiIENTUyBjdXN0b21pemF0aW9ucy5cbiAqXG4gKiBUT0RPOiBhZGQgYSBgbG9jYWxTdG9yYWdlYCB2YXJpYWJsZSB0byBleHBsaWNpdGx5IGVuYWJsZS9kaXNhYmxlIGNvbG9yc1xuICovXG5cbmZ1bmN0aW9uIHVzZUNvbG9ycygpIHtcbiAgLy8gTkI6IEluIGFuIEVsZWN0cm9uIHByZWxvYWQgc2NyaXB0LCBkb2N1bWVudCB3aWxsIGJlIGRlZmluZWQgYnV0IG5vdCBmdWxseVxuICAvLyBpbml0aWFsaXplZC4gU2luY2Ugd2Uga25vdyB3ZSdyZSBpbiBDaHJvbWUsIHdlJ2xsIGp1c3QgZGV0ZWN0IHRoaXMgY2FzZVxuICAvLyBleHBsaWNpdGx5XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucHJvY2VzcyAmJiB3aW5kb3cucHJvY2Vzcy50eXBlID09PSAncmVuZGVyZXInKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBpcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuICAvLyBkb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gcmVhY3QtbmF0aXZlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL3B1bGwvMTYzMlxuICByZXR1cm4gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZSkgfHxcbiAgICAvLyBpcyBmaXJlYnVnPyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTgxMjAvMzc2NzczXG4gICAgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS5maXJlYnVnIHx8ICh3aW5kb3cuY29uc29sZS5leGNlcHRpb24gJiYgd2luZG93LmNvbnNvbGUudGFibGUpKSkgfHxcbiAgICAvLyBpcyBmaXJlZm94ID49IHYzMT9cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcbiAgICAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSAmJiBwYXJzZUludChSZWdFeHAuJDEsIDEwKSA+PSAzMSkgfHxcbiAgICAvLyBkb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG4gICAgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pKTtcbn1cblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZXhwb3J0cy5mb3JtYXR0ZXJzLmogPSBmdW5jdGlvbih2KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gJ1tVbmV4cGVjdGVkSlNPTlBhcnNlRXJyb3JdOiAnICsgZXJyLm1lc3NhZ2U7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcbiAgdmFyIHVzZUNvbG9ycyA9IHRoaXMudXNlQ29sb3JzO1xuXG4gIGFyZ3NbMF0gPSAodXNlQ29sb3JzID8gJyVjJyA6ICcnKVxuICAgICsgdGhpcy5uYW1lc3BhY2VcbiAgICArICh1c2VDb2xvcnMgPyAnICVjJyA6ICcgJylcbiAgICArIGFyZ3NbMF1cbiAgICArICh1c2VDb2xvcnMgPyAnJWMgJyA6ICcgJylcbiAgICArICcrJyArIGV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuICBpZiAoIXVzZUNvbG9ycykgcmV0dXJuO1xuXG4gIHZhciBjID0gJ2NvbG9yOiAnICsgdGhpcy5jb2xvcjtcbiAgYXJncy5zcGxpY2UoMSwgMCwgYywgJ2NvbG9yOiBpbmhlcml0JylcblxuICAvLyB0aGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuICAvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG4gIC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuICB2YXIgaW5kZXggPSAwO1xuICB2YXIgbGFzdEMgPSAwO1xuICBhcmdzWzBdLnJlcGxhY2UoLyVbYS16QS1aJV0vZywgZnVuY3Rpb24obWF0Y2gpIHtcbiAgICBpZiAoJyUlJyA9PT0gbWF0Y2gpIHJldHVybjtcbiAgICBpbmRleCsrO1xuICAgIGlmICgnJWMnID09PSBtYXRjaCkge1xuICAgICAgLy8gd2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG4gICAgICAvLyAodGhlIHVzZXIgbWF5IGhhdmUgcHJvdmlkZWQgdGhlaXIgb3duKVxuICAgICAgbGFzdEMgPSBpbmRleDtcbiAgICB9XG4gIH0pO1xuXG4gIGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbn1cblxuLyoqXG4gKiBJbnZva2VzIGBjb25zb2xlLmxvZygpYCB3aGVuIGF2YWlsYWJsZS5cbiAqIE5vLW9wIHdoZW4gYGNvbnNvbGUubG9nYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBsb2coKSB7XG4gIC8vIHRoaXMgaGFja2VyeSBpcyByZXF1aXJlZCBmb3IgSUU4LzksIHdoZXJlXG4gIC8vIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uIGRvZXNuJ3QgaGF2ZSAnYXBwbHknXG4gIHJldHVybiAnb2JqZWN0JyA9PT0gdHlwZW9mIGNvbnNvbGVcbiAgICAmJiBjb25zb2xlLmxvZ1xuICAgICYmIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGNvbnNvbGUubG9nLCBjb25zb2xlLCBhcmd1bWVudHMpO1xufVxuXG4vKipcbiAqIFNhdmUgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpIHtcbiAgdHJ5IHtcbiAgICBpZiAobnVsbCA9PSBuYW1lc3BhY2VzKSB7XG4gICAgICBleHBvcnRzLnN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVidWcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwb3J0cy5zdG9yYWdlLmRlYnVnID0gbmFtZXNwYWNlcztcbiAgICB9XG4gIH0gY2F0Y2goZSkge31cbn1cblxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2FkKCkge1xuICB2YXIgcjtcbiAgdHJ5IHtcbiAgICByID0gZXhwb3J0cy5zdG9yYWdlLmRlYnVnO1xuICB9IGNhdGNoKGUpIHt9XG5cbiAgLy8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuICBpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcbiAgICByID0gcHJvY2Vzcy5lbnYuREVCVUc7XG4gIH1cblxuICByZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBFbmFibGUgbmFtZXNwYWNlcyBsaXN0ZWQgaW4gYGxvY2FsU3RvcmFnZS5kZWJ1Z2AgaW5pdGlhbGx5LlxuICovXG5cbmV4cG9ydHMuZW5hYmxlKGxvYWQoKSk7XG5cbi8qKlxuICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAqIGFuZCB5b3UgYXR0ZW1wdCB0byBhY2Nlc3MgaXQuXG4gKlxuICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCkge1xuICB0cnkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICB9IGNhdGNoIChlKSB7fVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2RlYnVnL3NyYy9icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgZm9yZWFjaCA9IHJlcXVpcmUoJ2ZvcmVhY2gnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtYXAoYXJyLCBmbikge1xuICB2YXIgbmV3QXJyID0gW107XG4gIGZvcmVhY2goYXJyLCBmdW5jdGlvbihpdGVtLCBpdGVtSW5kZXgpIHtcbiAgICBuZXdBcnIucHVzaChmbihpdGVtLCBpdGVtSW5kZXgsIGFycikpO1xuICB9KTtcbiAgcmV0dXJuIG5ld0Fycjtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYWxnb2xpYXNlYXJjaC9zcmMvbWFwLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzLnRydW5jYXRlID0gZnVuY3Rpb24gKHN0ciwgbGVuZ3RoLCBpc1VybCkge1xuICBpZiAoIXN0cikgeyByZXR1cm4gJyc7IH1cbiAgaWYgKGlzVXJsKSB7IHN0ciA9IHN0ci5yZXBsYWNlKCdodHRwczovLycsICcnKS5yZXBsYWNlKCdodHRwOi8vJywgJycpOyB9XG4gIGlmIChzdHIubGVuZ3RoID49IGxlbmd0aCkge1xuICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIGxlbmd0aCAtIDMpICsgJy4uLic7XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9saWIvdXRpbHMuanMiLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9pc2FycmF5L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcHJvY2Vzcy9icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gYnVpbGRTZWFyY2hNZXRob2Q7XG5cbnZhciBlcnJvcnMgPSByZXF1aXJlKCcuL2Vycm9ycy5qcycpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBzZWFyY2ggbWV0aG9kIHRvIGJlIHVzZWQgaW4gY2xpZW50c1xuICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5UGFyYW0gdGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB1c2VkIGZvciB0aGUgcXVlcnlcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgdGhlIHVybFxuICogQHJldHVybiB7ZnVuY3Rpb259IHRoZSBzZWFyY2ggbWV0aG9kXG4gKi9cbmZ1bmN0aW9uIGJ1aWxkU2VhcmNoTWV0aG9kKHF1ZXJ5UGFyYW0sIHVybCkge1xuICAvKipcbiAgICogVGhlIHNlYXJjaCBtZXRob2QuIFByZXBhcmVzIHRoZSBkYXRhIGFuZCBzZW5kIHRoZSBxdWVyeSB0byBBbGdvbGlhLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgdGhlIHN0cmluZyB1c2VkIGZvciBxdWVyeSBzZWFyY2hcbiAgICogQHBhcmFtIHtvYmplY3R9IGFyZ3MgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHNlbmQgd2l0aCB0aGUgc2VhcmNoXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtjYWxsYmFja10gdGhlIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIHRoZSBjbGllbnQgZ2V0cyB0aGUgYW5zd2VyXG4gICAqIEByZXR1cm4ge3VuZGVmaW5lZHxQcm9taXNlfSBJZiB0aGUgY2FsbGJhY2sgaXMgbm90IHByb3ZpZGVkIHRoZW4gdGhpcyBtZXRob2RzIHJldHVybnMgYSBQcm9taXNlXG4gICAqL1xuICByZXR1cm4gZnVuY3Rpb24gc2VhcmNoKHF1ZXJ5LCBhcmdzLCBjYWxsYmFjaykge1xuICAgIC8vIHdhcm4gVjIgdXNlcnMgb24gaG93IHRvIHNlYXJjaFxuICAgIGlmICh0eXBlb2YgcXVlcnkgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGFyZ3MgPT09ICdvYmplY3QnIHx8XG4gICAgICB0eXBlb2YgY2FsbGJhY2sgPT09ICdvYmplY3QnKSB7XG4gICAgICAvLyAuc2VhcmNoKHF1ZXJ5LCBwYXJhbXMsIGNiKVxuICAgICAgLy8gLnNlYXJjaChjYiwgcGFyYW1zKVxuICAgICAgdGhyb3cgbmV3IGVycm9ycy5BbGdvbGlhU2VhcmNoRXJyb3IoJ2luZGV4LnNlYXJjaCB1c2FnZSBpcyBpbmRleC5zZWFyY2gocXVlcnksIHBhcmFtcywgY2IpJyk7XG4gICAgfVxuXG4gICAgLy8gTm9ybWFsaXppbmcgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZVxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwIHx8IHR5cGVvZiBxdWVyeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gVXNhZ2UgOiAuc2VhcmNoKCksIC5zZWFyY2goY2IpXG4gICAgICBjYWxsYmFjayA9IHF1ZXJ5O1xuICAgICAgcXVlcnkgPSAnJztcbiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgfHwgdHlwZW9mIGFyZ3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIFVzYWdlIDogLnNlYXJjaChxdWVyeS9hcmdzKSwgLnNlYXJjaChxdWVyeSwgY2IpXG4gICAgICBjYWxsYmFjayA9IGFyZ3M7XG4gICAgICBhcmdzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBBdCB0aGlzIHBvaW50IHdlIGhhdmUgMyBhcmd1bWVudHMgd2l0aCB2YWx1ZXNcblxuICAgIC8vIFVzYWdlIDogLnNlYXJjaChhcmdzKSAvLyBjYXJlZnVsOiB0eXBlb2YgbnVsbCA9PT0gJ29iamVjdCdcbiAgICBpZiAodHlwZW9mIHF1ZXJ5ID09PSAnb2JqZWN0JyAmJiBxdWVyeSAhPT0gbnVsbCkge1xuICAgICAgYXJncyA9IHF1ZXJ5O1xuICAgICAgcXVlcnkgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChxdWVyeSA9PT0gdW5kZWZpbmVkIHx8IHF1ZXJ5ID09PSBudWxsKSB7IC8vIC5zZWFyY2godW5kZWZpbmVkL251bGwpXG4gICAgICBxdWVyeSA9ICcnO1xuICAgIH1cblxuICAgIHZhciBwYXJhbXMgPSAnJztcblxuICAgIGlmIChxdWVyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBwYXJhbXMgKz0gcXVlcnlQYXJhbSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSk7XG4gICAgfVxuXG4gICAgdmFyIGFkZGl0aW9uYWxVQTtcbiAgICBpZiAoYXJncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoYXJncy5hZGRpdGlvbmFsVUEpIHtcbiAgICAgICAgYWRkaXRpb25hbFVBID0gYXJncy5hZGRpdGlvbmFsVUE7XG4gICAgICAgIGRlbGV0ZSBhcmdzLmFkZGl0aW9uYWxVQTtcbiAgICAgIH1cbiAgICAgIC8vIGBfZ2V0U2VhcmNoUGFyYW1zYCB3aWxsIGF1Z21lbnQgcGFyYW1zLCBkbyBub3QgYmUgZm9vbGVkIGJ5IHRoZSA9IHZlcnN1cyArPSBmcm9tIHByZXZpb3VzIGlmXG4gICAgICBwYXJhbXMgPSB0aGlzLmFzLl9nZXRTZWFyY2hQYXJhbXMoYXJncywgcGFyYW1zKTtcbiAgICB9XG5cblxuICAgIHJldHVybiB0aGlzLl9zZWFyY2gocGFyYW1zLCB1cmwsIGNhbGxiYWNrLCBhZGRpdGlvbmFsVUEpO1xuICB9O1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FsZ29saWFzZWFyY2gvc3JjL2J1aWxkU2VhcmNoTWV0aG9kLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwidW5pZm9ybSBtYXQ0IGludmVyc2VNYXRyaXg7XFxudmFyeWluZyB2ZWMyIHZVdjtcXG52YXJ5aW5nIHZlYzMgdkxvY2FsQ2FtZXJhUG9zaXRpb247XFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gIHZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcXG4gIHZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XFxuXFxuICAvLyBUcmFuc2Zvcm0gZ2xvYmFsIGNhbWVyYSBwb3NpdGlvbiB0byBsb2NhbCBzcGFjZSBvZiBvYmplY3QuXFxuICB2TG9jYWxDYW1lcmFQb3NpdGlvbiA9IHZlYzQodmVjNChjYW1lcmFQb3NpdGlvbiwgMS4wKSAqIGludmVyc2VNYXRyaXgpLnh5ejtcXG4gIHZVdiA9IHV2O1xcbiAgdk5vcm1hbCA9IG5vcm1hbDtcXG4gIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7XFxufVxcblwiXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9zaGFkZXJzL2ZhZGVWZXJ0ZXguZ2xzbFxuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogZ2xvYmFsIEFGUkFNRSwgVEhSRUUgKi9cblxudmFyIGFuaW1lID0gcmVxdWlyZSgnYW5pbWVqcycpO1xuXG5BRlJBTUUuYW5pbWUgPSBhbmltZTtcblxuaWYgKHR5cGVvZiBBRlJBTUUgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IG5ldyBFcnJvcignQ29tcG9uZW50IGF0dGVtcHRlZCB0byByZWdpc3RlciBiZWZvcmUgQUZSQU1FIHdhcyBhdmFpbGFibGUuJyk7XG59XG5cbnZhciBjb2xvckhlbHBlckZyb20gPSBuZXcgVEhSRUUuQ29sb3IoKTtcbnZhciBjb2xvckhlbHBlclRvID0gbmV3IFRIUkVFLkNvbG9yKCk7XG5cbnZhciB1dGlscyA9IEFGUkFNRS51dGlscztcbnZhciBnZXRDb21wb25lbnRQcm9wZXJ0eSA9IHV0aWxzLmVudGl0eS5nZXRDb21wb25lbnRQcm9wZXJ0eTtcbnZhciBzZXRDb21wb25lbnRQcm9wZXJ0eSA9IHV0aWxzLmVudGl0eS5zZXRDb21wb25lbnRQcm9wZXJ0eTtcbnZhciBzcGxpdENhY2hlID0ge307XG5cbnZhciBUWVBFX0NPTE9SID0gJ2NvbG9yJztcbnZhciBQUk9QX1BPU0lUSU9OID0gJ3Bvc2l0aW9uJztcbnZhciBQUk9QX1JPVEFUSU9OID0gJ3JvdGF0aW9uJztcbnZhciBQUk9QX1NDQUxFID0gJ3NjYWxlJztcbnZhciBTVFJJTkdfQ09NUE9ORU5UUyA9ICdjb21wb25lbnRzJztcbnZhciBTVFJJTkdfT0JKRUNUM0QgPSAnb2JqZWN0M0QnO1xuXG4vKipcbiAqIEFuaW1hdGlvbiBjb21wb25lbnQgZm9yIEEtRnJhbWUgdXNpbmcgYW5pbWUuanMuXG4gKlxuICogVGhlIGNvbXBvbmVudCBtYW51YWxseSBjb250cm9scyB0aGUgdGljayBieSBzZXR0aW5nIGBhdXRvcGxheTogZmFsc2VgIG9uIGFuaW1lLmpzIGFuZFxuICogbWFudWFsbHkgKiBjYWxsaW5nIGBhbmltYXRpb24udGljaygpYCBpbiB0aGUgdGljayBoYW5kbGVyLiBUbyBwYXVzZSBvciByZXN1bWUsIHdlIHRvZ2dsZSBhXG4gKiBib29sZWFuICogZmxhZyAqIGBpc0FuaW1hdGlvblBsYXlpbmdgLlxuICpcbiAqIGFuaW1lLmpzIGFuaW1hdGlvbiBjb25maWcgZm9yIHR3ZWVuaW5pbmcgSmF2YXNjcmlwdCBvYmplY3RzIGFuZCB2YWx1ZXMgd29ya3MgYXM6XG4gKlxuICogIGNvbmZpZyA9IHtcbiAqICAgIHRhcmdldHM6IHtmb286IDAuMCwgYmFyOiAnIzAwMCd9LFxuICogICAgZm9vOiAxLjAsXG4gKiAgICBiYXI6ICcjRkZGJ1xuICogIH1cbiAqXG4gKiBUaGUgYWJvdmUgd2lsbCB0d2VlbiBlYWNoIHByb3BlcnR5IGluIGB0YXJnZXRzYC4gVGhlIGB0b2AgdmFsdWVzIGFyZSBzZXQgaW4gdGhlIHJvb3Qgb2ZcbiAqIHRoZSBjb25maWcuXG4gKlxuICogQG1lbWJlciB7b2JqZWN0fSBhbmltYXRpb24gLSBhbmltZS5qcyBpbnN0YW5jZS5cbiAqIEBtZW1iZXIge2Jvb2xlYW59IGFuaW1hdGlvbklzUGxheWluZyAtIENvbnRyb2wgaWYgYW5pbWF0aW9uIGlzIHBsYXlpbmcuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnYW5pbWF0aW9uJywge1xuICBzY2hlbWE6IHtcbiAgICBhdXRvcGxheToge2RlZmF1bHQ6IHRydWV9LFxuICAgIGRlbGF5OiB7ZGVmYXVsdDogMH0sXG4gICAgZGlyOiB7ZGVmYXVsdDogJyd9LFxuICAgIGR1cjoge2RlZmF1bHQ6IDEwMDB9LFxuICAgIGVhc2luZzoge2RlZmF1bHQ6ICdlYXNlSW5RdWFkJ30sXG4gICAgZWxhc3RpY2l0eToge2RlZmF1bHQ6IDQwMH0sXG4gICAgZnJvbToge2RlZmF1bHQ6ICcnfSxcbiAgICBsb29wOiB7XG4gICAgICBkZWZhdWx0OiAwLFxuICAgICAgcGFyc2U6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBCb29sZWFuIG9yIGludGVnZXIuXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gJ3RydWUnKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT09ICdmYWxzZScpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgICAgIHJldHVybiBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgfVxuICAgIH0sXG4gICAgcHJvcGVydHk6IHtkZWZhdWx0OiAnJ30sXG4gICAgc3RhcnRFdmVudHM6IHt0eXBlOiAnYXJyYXknfSxcbiAgICBwYXVzZUV2ZW50czoge3R5cGU6ICdhcnJheSd9LFxuICAgIHJlc3VtZUV2ZW50czoge3R5cGU6ICdhcnJheSd9LFxuICAgIHRvOiB7ZGVmYXVsdDogJyd9LFxuICAgIHR5cGU6IHtkZWZhdWx0OiAnJ30sXG4gICAgaXNSYXdQcm9wZXJ0eToge2RlZmF1bHQ6IGZhbHNlfVxuICB9LFxuXG4gIG11bHRpcGxlOiB0cnVlLFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB0aGlzLmV2ZW50RGV0YWlsID0ge25hbWU6IHRoaXMuYXR0ck5hbWV9O1xuICAgIHRoaXMudGltZSA9IDA7XG5cbiAgICB0aGlzLmFuaW1hdGlvbiA9IG51bGw7XG4gICAgdGhpcy5hbmltYXRpb25Jc1BsYXlpbmcgPSBmYWxzZTtcbiAgICB0aGlzLm9uU3RhcnRFdmVudCA9IHRoaXMub25TdGFydEV2ZW50LmJpbmQodGhpcyk7XG4gICAgdGhpcy5iZWdpbkFuaW1hdGlvbiA9IHRoaXMuYmVnaW5BbmltYXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLnBhdXNlQW5pbWF0aW9uID0gdGhpcy5wYXVzZUFuaW1hdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVzdW1lQW5pbWF0aW9uID0gdGhpcy5yZXN1bWVBbmltYXRpb24uYmluZCh0aGlzKTtcblxuICAgIHRoaXMuZnJvbUNvbG9yID0ge307XG4gICAgdGhpcy50b0NvbG9yID0ge307XG4gICAgdGhpcy50YXJnZXRzID0ge307XG4gICAgdGhpcy50YXJnZXRzQXJyYXkgPSBbXTtcblxuICAgIHRoaXMudXBkYXRlQ29uZmlnRm9yRGVmYXVsdCA9IHRoaXMudXBkYXRlQ29uZmlnRm9yRGVmYXVsdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlQ29uZmlnRm9yUmF3Q29sb3IgPSB0aGlzLnVwZGF0ZUNvbmZpZ0ZvclJhd0NvbG9yLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuYW5pbWF0aW9uSXNQbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHNlbGYuZWwuZW1pdCgnYW5pbWF0aW9uY29tcGxldGUnLCBzZWxmLmV2ZW50RGV0YWlsKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgIHRoaXMuYW5pbWF0aW9uSXNQbGF5aW5nID0gZmFsc2U7XG5cbiAgICBpZiAoIWRhdGEucHJvcGVydHkpIHsgcmV0dXJuOyB9XG5cbiAgICAvLyBCYXNlIGNvbmZpZy5cbiAgICBjb25maWcuYXV0b3BsYXkgPSBmYWxzZTtcbiAgICBjb25maWcuZGlyZWN0aW9uID0gZGF0YS5kaXI7XG4gICAgY29uZmlnLmR1cmF0aW9uID0gZGF0YS5kdXI7XG4gICAgY29uZmlnLmVhc2luZyA9IGRhdGEuZWFzaW5nO1xuICAgIGNvbmZpZy5lbGFzdGljaXR5ID0gZGF0YS5lbGFzdGljaXR5O1xuICAgIGNvbmZpZy5sb29wID0gZGF0YS5sb29wO1xuXG4gICAgLy8gU3RhcnQgbmV3IGFuaW1hdGlvbi5cbiAgICB0aGlzLmNyZWF0ZUFuZFN0YXJ0QW5pbWF0aW9uKCk7XG4gIH0sXG5cbiAgdGljazogZnVuY3Rpb24gKHQsIGR0KSB7XG4gICAgaWYgKCF0aGlzLmFuaW1hdGlvbklzUGxheWluZykgeyByZXR1cm47IH1cbiAgICB0aGlzLnRpbWUgKz0gZHQ7XG4gICAgdGhpcy5hbmltYXRpb24udGljayh0aGlzLnRpbWUpO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucGF1c2VBbmltYXRpb24oKTtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gIH0sXG5cbiAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnBhdXNlZCA9IHRydWU7XG4gICAgdGhpcy5wYXVzZWRXYXNQbGF5aW5nID0gdHJ1ZTtcbiAgICB0aGlzLnBhdXNlQW5pbWF0aW9uKCk7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBgcGxheWAgaGFuZGxlciBvbmx5IGZvciByZXN1bWluZyBzY2VuZS5cbiAgICovXG4gIHBsYXk6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMucGF1c2VkKSB7IHJldHVybjsgfVxuICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIGlmICh0aGlzLnBhdXNlZFdhc1BsYXlpbmcpIHtcbiAgICAgIHRoaXMucmVzdW1lQW5pbWF0aW9uKCk7XG4gICAgICB0aGlzLnBhdXNlZFdhc1BsYXlpbmcgPSBmYWxzZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFN0YXJ0IGFuaW1hdGlvbiBmcm9tIHNjcmF0Y2guXG4gICAqL1xuICBjcmVhdGVBbmRTdGFydEFuaW1hdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuXG4gICAgdGhpcy51cGRhdGVDb25maWcoKTtcbiAgICB0aGlzLmFuaW1hdGlvbklzUGxheWluZyA9IGZhbHNlO1xuICAgIHRoaXMuYW5pbWF0aW9uID0gYW5pbWUodGhpcy5jb25maWcpO1xuXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIC8vIFdhaXQgZm9yIHN0YXJ0IGV2ZW50cyBmb3IgYW5pbWF0aW9uLlxuICAgIGlmICghZGF0YS5hdXRvcGxheSB8fCBkYXRhLnN0YXJ0RXZlbnRzICYmIGRhdGEuc3RhcnRFdmVudHMubGVuZ3RoKSB7IHJldHVybjsgfVxuXG4gICAgLy8gRGVsYXkgYW5pbWF0aW9uLlxuICAgIGlmIChkYXRhLmRlbGF5KSB7XG4gICAgICBzZXRUaW1lb3V0KHRoaXMuYmVnaW5BbmltYXRpb24sIGRhdGEuZGVsYXkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFBsYXkgYW5pbWF0aW9uLlxuICAgIHRoaXMuYmVnaW5BbmltYXRpb24oKTtcbiAgfSxcblxuICAvKipcbiAgICogVGhpcyBpcyBiZWZvcmUgYW5pbWF0aW9uIHN0YXJ0IChpbmNsdWRpbmcgZnJvbSBzdGFydEV2ZW50cykuXG4gICAqIFNldCB0byBpbml0aWFsIHN0YXRlIChjb25maWcuZnJvbSwgdGltZSA9IDAsIHNlZWtUaW1lID0gMCkuXG4gICAqL1xuICBiZWdpbkFuaW1hdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudXBkYXRlQ29uZmlnKCk7XG4gICAgdGhpcy50aW1lID0gMDtcbiAgICB0aGlzLmFuaW1hdGlvbi5zZWVrKDApO1xuICAgIHRoaXMuYW5pbWF0aW9uSXNQbGF5aW5nID0gdHJ1ZTtcbiAgICB0aGlzLnN0b3BSZWxhdGVkQW5pbWF0aW9ucygpO1xuICAgIHRoaXMuZWwuZW1pdCgnYW5pbWF0aW9uYmVnaW4nLCB0aGlzLmV2ZW50RGV0YWlsKTtcbiAgfSxcblxuICBwYXVzZUFuaW1hdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYW5pbWF0aW9uSXNQbGF5aW5nID0gZmFsc2U7XG4gIH0sXG5cbiAgcmVzdW1lQW5pbWF0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hbmltYXRpb25Jc1BsYXlpbmcgPSB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBzdGFydEV2ZW50cyBjYWxsYmFjay5cbiAgICovXG4gIG9uU3RhcnRFdmVudDogZnVuY3Rpb24gKCkge1xuICAgIC8vIEluY2x1ZGUgdGhlIGRlbGF5IGJlZm9yZSBlYWNoIHN0YXJ0IGV2ZW50LlxuICAgIGlmICh0aGlzLmRhdGEuZGVsYXkpIHtcbiAgICAgIHNldFRpbWVvdXQodGhpcy5iZWdpbkFuaW1hdGlvbiwgdGhpcy5kYXRhLmRlbGF5KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5iZWdpbkFuaW1hdGlvbigpO1xuICB9LFxuXG4gIC8qKlxuICAgKiByYXdQcm9wZXJ0eTogdHJ1ZSBhbmQgdHlwZTogY29sb3I7XG4gICAqL1xuICB1cGRhdGVDb25maWdGb3JSYXdDb2xvcjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBmcm9tO1xuICAgIHZhciBrZXk7XG4gICAgdmFyIHRvO1xuXG4gICAgaWYgKHRoaXMud2FpdENvbXBvbmVudEluaXRSYXdQcm9wZXJ0eSh0aGlzLnVwZGF0ZUNvbmZpZ0ZvclJhd0NvbG9yKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZyb20gPSBkYXRhLmZyb20gfHwgZ2V0UmF3UHJvcGVydHkoZWwsIGRhdGEucHJvcGVydHkpO1xuICAgIHRvID0gZGF0YS50bztcblxuICAgIC8vIFVzZSByL2cvYiB2ZWN0b3IgZm9yIGNvbG9yIHR5cGUuXG4gICAgdGhpcy5zZXRDb2xvckNvbmZpZyhmcm9tLCB0byk7XG4gICAgZnJvbSA9IHRoaXMuZnJvbUNvbG9yO1xuICAgIHRvID0gdGhpcy50b0NvbG9yO1xuXG4gICAgdGhpcy50YXJnZXRzQXJyYXkubGVuZ3RoID0gMDtcbiAgICB0aGlzLnRhcmdldHNBcnJheS5wdXNoKGZyb20pO1xuICAgIGNvbmZpZy50YXJnZXRzID0gdGhpcy50YXJnZXRzQXJyYXk7XG4gICAgZm9yIChrZXkgaW4gdG8pIHsgY29uZmlnW2tleV0gPSB0b1trZXldOyB9XG5cbiAgICBjb25maWcudXBkYXRlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBsYXN0VmFsdWUgPSB7fTtcbiAgICAgIGxhc3RWYWx1ZS5yID0gZnJvbS5yO1xuICAgICAgbGFzdFZhbHVlLmcgPSBmcm9tLmc7XG4gICAgICBsYXN0VmFsdWUuYiA9IGZyb20uYjtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgdmFsdWUgPSBhbmltLmFuaW1hdGFibGVzWzBdLnRhcmdldDtcbiAgICAgICAgLy8gRm9yIGFuaW1hdGlvbiB0aW1lbGluZS5cbiAgICAgICAgICBpZiAodmFsdWUuciA9PT0gbGFzdFZhbHVlLnIgJiZcbiAgICAgICAgICAgICAgdmFsdWUuZyA9PT0gbGFzdFZhbHVlLmcgJiZcbiAgICAgICAgICAgICAgdmFsdWUuYiA9PT0gbGFzdFZhbHVlLmIpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgc2V0UmF3UHJvcGVydHkoZWwsIGRhdGEucHJvcGVydHksIHZhbHVlLCBkYXRhLnR5cGUpO1xuICAgICAgfTtcbiAgICB9KSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTdHVmZiBwcm9wZXJ0eSBpbnRvIGdlbmVyaWMgYHByb3BlcnR5YCBrZXkuXG4gICAqL1xuICB1cGRhdGVDb25maWdGb3JEZWZhdWx0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbmZpZyA9IHRoaXMuY29uZmlnO1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGZyb207XG4gICAgdmFyIGtleTtcbiAgICB2YXIgaXNCb29sZWFuO1xuICAgIHZhciBpc051bWJlcjtcbiAgICB2YXIgdG87XG5cbiAgICBpZiAodGhpcy53YWl0Q29tcG9uZW50SW5pdFJhd1Byb3BlcnR5KHRoaXMudXBkYXRlQ29uZmlnRm9yRGVmYXVsdCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmcm9tID0gZGF0YS5mcm9tIHx8IChcbiAgICAgIGlzUmF3UHJvcGVydHkoZGF0YSlcbiAgICAgICAgPyBnZXRSYXdQcm9wZXJ0eShlbCwgZGF0YS5wcm9wZXJ0eSlcbiAgICAgICAgOiBnZXRDb21wb25lbnRQcm9wZXJ0eShlbCwgZGF0YS5wcm9wZXJ0eSlcbiAgICApO1xuICAgIHRvID0gZGF0YS50bztcblxuICAgIGlzTnVtYmVyID0gIWlzTmFOKGZyb20gfHwgdG8pO1xuICAgIGlmIChpc051bWJlcikge1xuICAgICAgZnJvbSA9IHBhcnNlRmxvYXQoZnJvbSk7XG4gICAgICB0byA9IHBhcnNlRmxvYXQodG8pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcm9tID0gZnJvbSA/IGZyb20udG9TdHJpbmcoKSA6IGZyb207XG4gICAgICB0byA9IHRvID8gdG8udG9TdHJpbmcoKSA6IHRvO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnQgYm9vbGVhbnMgdG8gaW50ZWdlciB0byBhbGxvdyBib29sZWFuIGZsaXBwaW5nLlxuICAgIGlzQm9vbGVhbiA9IHRvID09PSAndHJ1ZScgfHwgdG8gPT09ICdmYWxzZSc7XG4gICAgaWYgKGlzQm9vbGVhbikge1xuICAgICAgZnJvbSA9IGRhdGEuZnJvbSA9PT0gJ3RydWUnID8gMSA6IDA7XG4gICAgICB0byA9IGRhdGEudG8gPT09ICd0cnVlJyA/IDEgOiAwO1xuICAgIH1cblxuICAgIHRoaXMudGFyZ2V0cy5hZnJhbWVQcm9wZXJ0eSA9IGZyb207XG4gICAgY29uZmlnLnRhcmdldHMgPSB0aGlzLnRhcmdldHM7XG4gICAgY29uZmlnLmFmcmFtZVByb3BlcnR5ID0gdG87XG4gICAgY29uZmlnLnVwZGF0ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbGFzdFZhbHVlID0gZnJvbTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoYW5pbSkge1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIHZhbHVlID0gYW5pbS5hbmltYXRhYmxlc1swXS50YXJnZXQuYWZyYW1lUHJvcGVydHk7XG5cbiAgICAgICAgLy8gTmVlZCB0byBkbyBhIGxhc3QgdmFsdWUgY2hlY2sgZm9yIGFuaW1hdGlvbiB0aW1lbGluZSBzaW5jZSBhbGwgdGhlIHR3ZWVuaW5nXG4gICAgICAgIC8vIGJlZ2lucyBzaW11bHRhZW5vdXNseSBldmVuIGlmIHRoZSB2YWx1ZSBoYXMgbm90IGNoYW5nZWQuIEFsc28gYmV0dGVyIGZvciBwZXJmXG4gICAgICAgIC8vIGFueXdheXMuXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbGFzdFZhbHVlKSB7IHJldHVybjsgfVxuICAgICAgICBsYXN0VmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICBpZiAoaXNCb29sZWFuKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZSA+PSAxID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUmF3UHJvcGVydHkoZGF0YSkpIHtcbiAgICAgICAgICBzZXRSYXdQcm9wZXJ0eShlbCwgZGF0YS5wcm9wZXJ0eSwgdmFsdWUsIGRhdGEudHlwZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0Q29tcG9uZW50UHJvcGVydHkoZWwsIGRhdGEucHJvcGVydHksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBFeHRlbmQgeC95L3ovdyBvbnRvIHRoZSBjb25maWcuXG4gICAqIFVwZGF0ZSB2ZWN0b3IgYnkgbW9kaWZ5aW5nIG9iamVjdDNELlxuICAgKi9cbiAgdXBkYXRlQ29uZmlnRm9yVmVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbmZpZyA9IHRoaXMuY29uZmlnO1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGtleTtcbiAgICB2YXIgZnJvbTtcbiAgICB2YXIgdG87XG5cbiAgICAvLyBQYXJzZSBjb29yZGluYXRlcy5cbiAgICBmcm9tID0gZGF0YS5mcm9tXG4gICAgICA/IEFGUkFNRS51dGlscy5jb29yZGluYXRlcy5wYXJzZShkYXRhLmZyb20pICAvLyBJZiBkYXRhLmZyb20gZGVmaW5lZCwgdXNlIHRoYXQuXG4gICAgICA6IGdldENvbXBvbmVudFByb3BlcnR5KGVsLCBkYXRhLnByb3BlcnR5KTsgIC8vIElmIGRhdGEuZnJvbSBub3QgZGVmaW5lZCwgZ2V0IG9uIHRoZSBmbHkuXG4gICAgdG8gPSBBRlJBTUUudXRpbHMuY29vcmRpbmF0ZXMucGFyc2UoZGF0YS50byk7XG5cbiAgICAvLyBBbmltYXRlIHJvdGF0aW9uIHRocm91Z2ggcmFkaWFucy5cbiAgICBpZiAoZGF0YS5wcm9wZXJ0eSA9PT0gUFJPUF9ST1RBVElPTikge1xuICAgICAgdG9SYWRpYW5zKGZyb20pO1xuICAgICAgdG9SYWRpYW5zKHRvKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdG8gYW5kIGZyb20uXG4gICAgdGhpcy50YXJnZXRzQXJyYXkubGVuZ3RoID0gMDtcbiAgICB0aGlzLnRhcmdldHNBcnJheS5wdXNoKGZyb20pO1xuICAgIGNvbmZpZy50YXJnZXRzID0gdGhpcy50YXJnZXRzQXJyYXk7XG4gICAgZm9yIChrZXkgaW4gdG8pIHsgY29uZmlnW2tleV0gPSB0b1trZXldOyB9XG5cbiAgICAvLyBJZiBhbmltYXRpbmcgb2JqZWN0M0QgdHJhbnNmb3JtYXRpb24sIHJ1biBtb3JlIG9wdGltaXplZCB1cGRhdGVyLlxuICAgIGlmIChkYXRhLnByb3BlcnR5ID09PSBQUk9QX1BPU0lUSU9OIHx8IGRhdGEucHJvcGVydHkgPT09IFBST1BfUk9UQVRJT04gfHxcbiAgICAgICAgZGF0YS5wcm9wZXJ0eSA9PT0gUFJPUF9TQ0FMRSkge1xuICAgICAgY29uZmlnLnVwZGF0ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXN0VmFsdWUgPSB7fTtcbiAgICAgICAgbGFzdFZhbHVlLnggPSBmcm9tLng7XG4gICAgICAgIGxhc3RWYWx1ZS55ID0gZnJvbS55O1xuICAgICAgICBsYXN0VmFsdWUueiA9IGZyb20uejtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFuaW0pIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBhbmltLmFuaW1hdGFibGVzWzBdLnRhcmdldDtcbiAgICAgICAgICAvLyBGb3IgYW5pbWF0aW9uIHRpbWVsaW5lLlxuICAgICAgICAgIGlmICh2YWx1ZS54ID09PSBsYXN0VmFsdWUueCAmJlxuICAgICAgICAgICAgICB2YWx1ZS55ID09PSBsYXN0VmFsdWUueSAmJlxuICAgICAgICAgICAgICB2YWx1ZS56ID09PSBsYXN0VmFsdWUueikgeyByZXR1cm47IH1cbiAgICAgICAgICBsYXN0VmFsdWUueCA9IHZhbHVlLng7XG4gICAgICAgICAgbGFzdFZhbHVlLnkgPSB2YWx1ZS55O1xuICAgICAgICAgIGxhc3RWYWx1ZS56ID0gdmFsdWUuejtcbiAgICAgICAgICBlbC5vYmplY3QzRFtkYXRhLnByb3BlcnR5XS5zZXQodmFsdWUueCwgdmFsdWUueSwgdmFsdWUueik7XG4gICAgICAgIH07XG4gICAgICB9KSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFuaW1hdGluZyBzb21lIHZlY3Rvci5cbiAgICBjb25maWcudXBkYXRlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBsYXN0VmFsdWUgPSB7fTtcbiAgICAgIGxhc3RWYWx1ZS54ID0gZnJvbS54O1xuICAgICAgbGFzdFZhbHVlLnkgPSBmcm9tLnk7XG4gICAgICBsYXN0VmFsdWUueiA9IGZyb20uejtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFuaW0uYW5pbWF0aW9uc1swXS50YXJnZXQ7XG4gICAgICAgIC8vIEZvciBhbmltYXRpb24gdGltZWxpbmUuXG4gICAgICAgIGlmICh2YWx1ZS54ID09PSBsYXN0VmFsdWUueCAmJlxuICAgICAgICAgICAgdmFsdWUueSA9PT0gbGFzdFZhbHVlLnkgJiZcbiAgICAgICAgICAgIHZhbHVlLnogPT09IGxhc3RWYWx1ZS56KSB7IHJldHVybjsgfVxuICAgICAgICBsYXN0VmFsdWUueCA9IHZhbHVlLng7XG4gICAgICAgIGxhc3RWYWx1ZS55ID0gdmFsdWUueTtcbiAgICAgICAgbGFzdFZhbHVlLnogPSB2YWx1ZS56O1xuICAgICAgICBzZXRDb21wb25lbnRQcm9wZXJ0eShlbCwgZGF0YS5wcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0pKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgY29uZmlnIGJlZm9yZSBlYWNoIHJ1bi5cbiAgICovXG4gIHVwZGF0ZUNvbmZpZzogZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9wVHlwZTtcblxuICAgIC8vIFJvdXRlIGNvbmZpZyB0eXBlLlxuICAgIHByb3BUeXBlID0gZ2V0UHJvcGVydHlUeXBlKHRoaXMuZWwsIHRoaXMuZGF0YS5wcm9wZXJ0eSk7XG4gICAgaWYgKGlzUmF3UHJvcGVydHkodGhpcy5kYXRhKSAmJiB0aGlzLmRhdGEudHlwZSA9PT0gVFlQRV9DT0xPUikge1xuICAgICAgdGhpcy51cGRhdGVDb25maWdGb3JSYXdDb2xvcigpO1xuICAgIH0gZWxzZSBpZiAocHJvcFR5cGUgPT09ICd2ZWMyJyB8fCBwcm9wVHlwZSA9PT0gJ3ZlYzMnIHx8IHByb3BUeXBlID09PSAndmVjNCcpIHtcbiAgICAgIHRoaXMudXBkYXRlQ29uZmlnRm9yVmVjdG9yKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXBkYXRlQ29uZmlnRm9yRGVmYXVsdCgpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogV2FpdCBmb3IgY29tcG9uZW50IHRvIGluaXRpYWxpemUuXG4gICAqL1xuICB3YWl0Q29tcG9uZW50SW5pdFJhd1Byb3BlcnR5OiBmdW5jdGlvbiAoY2IpIHtcbiAgICB2YXIgY29tcG9uZW50TmFtZTtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgaWYgKGRhdGEuZnJvbSkgeyByZXR1cm4gZmFsc2U7IH1cblxuICAgIGlmICghZGF0YS5wcm9wZXJ0eS5zdGFydHNXaXRoKFNUUklOR19DT01QT05FTlRTKSkgeyByZXR1cm4gZmFsc2U7IH1cblxuICAgIGNvbXBvbmVudE5hbWUgPSBzcGxpdERvdChkYXRhLnByb3BlcnR5KVsxXTtcbiAgICBpZiAoZWwuY29tcG9uZW50c1tjb21wb25lbnROYW1lXSkgeyByZXR1cm4gZmFsc2U7IH1cblxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvbmVudGluaXRpYWxpemVkJywgZnVuY3Rpb24gd2FpdCAoZXZ0KSB7XG4gICAgICBpZiAoZXZ0LmRldGFpbC5uYW1lICE9PSBjb21wb25lbnROYW1lKSB7IHJldHVybjsgfVxuICAgICAgY2IoKTtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbXBvbmVudGluaXRpYWxpemVkJywgd2FpdCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1ha2Ugc3VyZSB0d28gYW5pbWF0aW9ucyBvbiB0aGUgc2FtZSBwcm9wZXJ0eSBkb24ndCBmaWdodCBlYWNoIG90aGVyLlxuICAgKiBlLmcuLCBhbmltYXRpb25fX21vdXNlZW50ZXI9XCJwcm9wZXJ0eTogbWF0ZXJpYWwub3BhY2l0eVwiXG4gICAqICAgICAgIGFuaW1hdGlvbl9fbW91c2VsZWF2ZT1cInByb3BlcnR5OiBtYXRlcmlhbC5vcGFjaXR5XCJcbiAgICovXG4gIHN0b3BSZWxhdGVkQW5pbWF0aW9uczogZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb21wb25lbnQ7XG4gICAgdmFyIGNvbXBvbmVudE5hbWU7XG4gICAgZm9yIChjb21wb25lbnROYW1lIGluIHRoaXMuZWwuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50ID0gdGhpcy5lbC5jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdO1xuICAgICAgaWYgKGNvbXBvbmVudE5hbWUgPT09IHRoaXMuYXR0ck5hbWUpIHsgY29udGludWU7IH1cbiAgICAgIGlmIChjb21wb25lbnQubmFtZSAhPT0gJ2FuaW1hdGlvbicpIHsgY29udGludWU7IH1cbiAgICAgIGlmIChjb21wb25lbnQuZGF0YS5wcm9wZXJ0eSAhPT0gdGhpcy5kYXRhLnByb3BlcnR5KSB7IGNvbnRpbnVlOyB9XG4gICAgICBjb21wb25lbnQuYW5pbWF0aW9uSXNQbGF5aW5nID0gZmFsc2U7XG4gICAgfVxuICB9LFxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBhZGRFdmVudExpc3RlbmVycyhlbCwgZGF0YS5zdGFydEV2ZW50cywgdGhpcy5vblN0YXJ0RXZlbnQpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXJzKGVsLCBkYXRhLnBhdXNlRXZlbnRzLCB0aGlzLnBhdXNlQW5pbWF0aW9uKTtcbiAgICBhZGRFdmVudExpc3RlbmVycyhlbCwgZGF0YS5yZXN1bWVFdmVudHMsIHRoaXMucmVzdW1lQW5pbWF0aW9uKTtcbiAgfSxcblxuICByZW1vdmVFdmVudExpc3RlbmVyczogZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoZWwsIGRhdGEuc3RhcnRFdmVudHMsIHRoaXMub25TdGFydEV2ZW50KTtcbiAgICByZW1vdmVFdmVudExpc3RlbmVycyhlbCwgZGF0YS5wYXVzZUV2ZW50cywgdGhpcy5wYXVzZUFuaW1hdGlvbik7XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoZWwsIGRhdGEucmVzdW1lRXZlbnRzLCB0aGlzLnJlc3VtZUFuaW1hdGlvbik7XG4gIH0sXG5cbiAgc2V0Q29sb3JDb25maWc6IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuICAgIGNvbG9ySGVscGVyRnJvbS5zZXQoZnJvbSk7XG4gICAgY29sb3JIZWxwZXJUby5zZXQodG8pO1xuICAgIGZyb20gPSB0aGlzLmZyb21Db2xvcjtcbiAgICB0byA9IHRoaXMudG9Db2xvcjtcbiAgICBmcm9tLnIgPSBjb2xvckhlbHBlckZyb20ucjtcbiAgICBmcm9tLmcgPSBjb2xvckhlbHBlckZyb20uZztcbiAgICBmcm9tLmIgPSBjb2xvckhlbHBlckZyb20uYjtcbiAgICB0by5yID0gY29sb3JIZWxwZXJUby5yO1xuICAgIHRvLmcgPSBjb2xvckhlbHBlclRvLmc7XG4gICAgdG8uYiA9IGNvbG9ySGVscGVyVG8uYjtcbiAgfVxufSk7XG5cbi8qKlxuICogR2l2ZW4gcHJvcGVydHkgbmFtZSwgY2hlY2sgc2NoZW1hIHRvIHNlZSB3aGF0IHR5cGUgd2UgYXJlIGFuaW1hdGluZy5cbiAqIFdlIGp1c3QgY2FyZSB3aGV0aGVyIHRoZSBwcm9wZXJ0eSBpcyBhIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gZ2V0UHJvcGVydHlUeXBlIChlbCwgcHJvcGVydHkpIHtcbiAgdmFyIGNvbXBvbmVudDtcbiAgdmFyIGNvbXBvbmVudE5hbWU7XG4gIHZhciBzcGxpdDtcbiAgdmFyIHByb3BlcnR5TmFtZTtcblxuICBzcGxpdCA9IHByb3BlcnR5LnNwbGl0KCcuJyk7XG4gIGNvbXBvbmVudE5hbWUgPSBzcGxpdFswXTtcbiAgcHJvcGVydHlOYW1lID0gc3BsaXRbMV07XG4gIGNvbXBvbmVudCA9IGVsLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV0gfHwgQUZSQU1FLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV07XG5cbiAgLy8gUHJpbWl0aXZlcy5cbiAgaWYgKCFjb21wb25lbnQpIHsgcmV0dXJuIG51bGw7IH1cblxuICAvLyBEeW5hbWljIHNjaGVtYS4gV2Ugb25seSBjYXJlIGFib3V0IHZlY3RvcnMgYW55d2F5cy5cbiAgaWYgKHByb3BlcnR5TmFtZSAmJiAhY29tcG9uZW50LnNjaGVtYVtwcm9wZXJ0eU5hbWVdKSB7IHJldHVybiBudWxsOyB9XG5cbiAgLy8gTXVsdGktcHJvcC5cbiAgaWYgKHByb3BlcnR5TmFtZSkgeyByZXR1cm4gY29tcG9uZW50LnNjaGVtYVtwcm9wZXJ0eU5hbWVdLnR5cGU7IH1cblxuICAvLyBTaW5nbGUtcHJvcC5cbiAgcmV0dXJuIGNvbXBvbmVudC5zY2hlbWEudHlwZTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IG9iamVjdCB0byByYWRpYW5zLlxuICovXG5mdW5jdGlvbiB0b1JhZGlhbnMgKG9iaikge1xuICBvYmoueCA9IFRIUkVFLk1hdGguZGVnVG9SYWQob2JqLngpO1xuICBvYmoueSA9IFRIUkVFLk1hdGguZGVnVG9SYWQob2JqLnkpO1xuICBvYmoueiA9IFRIUkVFLk1hdGguZGVnVG9SYWQob2JqLnopO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyAoZWwsIGV2ZW50TmFtZXMsIGhhbmRsZXIpIHtcbiAgdmFyIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBldmVudE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWVzW2ldLCBoYW5kbGVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycyAoZWwsIGV2ZW50TmFtZXMsIGhhbmRsZXIpIHtcbiAgdmFyIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBldmVudE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWVzW2ldLCBoYW5kbGVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRSYXdQcm9wZXJ0eSAoZWwsIHBhdGgpIHtcbiAgdmFyIGk7XG4gIHZhciBzcGxpdDtcbiAgdmFyIHZhbHVlO1xuICBzcGxpdCA9IHNwbGl0RG90KHBhdGgpO1xuICB2YWx1ZSA9IGVsO1xuICBmb3IgKGkgPSAwOyBpIDwgc3BsaXQubGVuZ3RoOyBpKyspIHtcbiAgICB2YWx1ZSA9IHZhbHVlW3NwbGl0W2ldXTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHNldFJhd1Byb3BlcnR5IChlbCwgcGF0aCwgdmFsdWUsIHR5cGUpIHtcbiAgdmFyIGk7XG4gIHZhciBzcGxpdDtcbiAgdmFyIHByb3BlcnR5TmFtZTtcbiAgdmFyIHRhcmdldFZhbHVlO1xuXG4gIC8vIFdhbGsuXG4gIHNwbGl0ID0gc3BsaXREb3QocGF0aCk7XG4gIHRhcmdldFZhbHVlID0gZWw7XG4gIGZvciAoaSA9IDA7IGkgPCBzcGxpdC5sZW5ndGggLSAxOyBpKyspIHsgdGFyZ2V0VmFsdWUgPSB0YXJnZXRWYWx1ZVtzcGxpdFtpXV07IH1cbiAgcHJvcGVydHlOYW1lID0gc3BsaXRbc3BsaXQubGVuZ3RoIC0gMV07XG5cbiAgLy8gUmF3IGNvbG9yLlxuICBpZiAodHlwZSA9PT0gVFlQRV9DT0xPUikge1xuICAgIGlmICgncicgaW4gdGFyZ2V0VmFsdWVbcHJvcGVydHlOYW1lXSkge1xuICAgICAgdGFyZ2V0VmFsdWVbcHJvcGVydHlOYW1lXS5yID0gdmFsdWUucjtcbiAgICAgIHRhcmdldFZhbHVlW3Byb3BlcnR5TmFtZV0uZyA9IHZhbHVlLmc7XG4gICAgICB0YXJnZXRWYWx1ZVtwcm9wZXJ0eU5hbWVdLmIgPSB2YWx1ZS5iO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRWYWx1ZVtwcm9wZXJ0eU5hbWVdLnggPSB2YWx1ZS5yO1xuICAgICAgdGFyZ2V0VmFsdWVbcHJvcGVydHlOYW1lXS55ID0gdmFsdWUuZztcbiAgICAgIHRhcmdldFZhbHVlW3Byb3BlcnR5TmFtZV0ueiA9IHZhbHVlLmI7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIHRhcmdldFZhbHVlW3Byb3BlcnR5TmFtZV0gPSB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gc3BsaXREb3QgKHBhdGgpIHtcbiAgaWYgKHBhdGggaW4gc3BsaXRDYWNoZSkgeyByZXR1cm4gc3BsaXRDYWNoZVtwYXRoXTsgfVxuICBzcGxpdENhY2hlW3BhdGhdID0gcGF0aC5zcGxpdCgnLicpO1xuICByZXR1cm4gc3BsaXRDYWNoZVtwYXRoXTtcbn1cblxuZnVuY3Rpb24gaXNSYXdQcm9wZXJ0eSAoZGF0YSkge1xuICByZXR1cm4gZGF0YS5pc1Jhd1Byb3BlcnR5IHx8IGRhdGEucHJvcGVydHkuc3RhcnRzV2l0aChTVFJJTkdfQ09NUE9ORU5UUykgfHxcbiAgICAgICAgIGRhdGEucHJvcGVydHkuc3RhcnRzV2l0aChTVFJJTkdfT0JKRUNUM0QpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FmcmFtZS1hbmltYXRpb24tY29tcG9uZW50L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQoJ2EtdGltZWxpbmUnKTtcbmRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCgnYS10aW1lbGluZS1ncm91cCcpO1xuZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KCdhLXRpbWVsaW5lLWFuaW1hdGlvbicpO1xuXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2FuaW1hdGlvbi10aW1lbGluZScsIHtcbiAgc2NoZW1hOiB7XG4gICAgZGlyZWN0aW9uOiB7dHlwZTogJ3N0cmluZycsIGRlZmF1bHQ6ICdub3JtYWwnfSxcbiAgICBsb29wOiB7XG4gICAgICBkZWZhdWx0OiAwLFxuICAgICAgcGFyc2U6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBCb29sZWFuIG9yIGludGVnZXIuXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBwYXVzZUV2ZW50czoge3R5cGU6ICdhcnJheSd9LFxuICAgIHN0YXJ0RXZlbnRzOiB7dHlwZTogJ2FycmF5J30sXG4gICAgdGltZWxpbmU6IHt0eXBlOiAnc3RyaW5nJ31cbiAgfSxcblxuICBtdWx0aXBsZTogdHJ1ZSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgdmFyIGk7XG5cbiAgICB0aGlzLmFuaW1hdGlvbklzUGxheWluZyA9IGZhbHNlO1xuICAgIHRoaXMuYmVnaW5BbmltYXRpb24gPSB0aGlzLmJlZ2luQW5pbWF0aW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5ldmVudERldGFpbCA9IHtuYW1lOiB0aGlzLmlkfVxuICAgIHRoaXMudGltZSA9IDA7XG4gICAgdGhpcy50aW1lbGluZSA9IG51bGw7XG5cbiAgICAvLyBXYWl0IGZvciBzdGFydCBldmVudHMuXG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEuc3RhcnRFdmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihkYXRhLnN0YXJ0RXZlbnRzW2ldLCB0aGlzLmJlZ2luQW5pbWF0aW9uKTtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5wYXVzZUV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKGRhdGEucGF1c2VFdmVudHNbaV0sIHRoaXMucGF1c2VBbmltYXRpb24pO1xuICAgIH1cbiAgfSxcblxuICBwbGF5OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5zdGFydEV2ZW50cy5sZW5ndGgpIHsgcmV0dXJuOyB9XG4gICAgLy8gQXV0b3BsYXkgaWYgc3RhcnRFdmVudHMgbm90IHNldC5cbiAgICB0aGlzLmJlZ2luQW5pbWF0aW9uKCk7XG4gIH0sXG5cbiAgdGljazogZnVuY3Rpb24gKHQsIGR0KSB7XG4gICAgaWYgKCF0aGlzLmFuaW1hdGlvbklzUGxheWluZyB8fCAhdGhpcy50aW1lbGluZSkgeyByZXR1cm47IH1cbiAgICB0aGlzLnRpbWUgKz0gZHQ7XG4gICAgdGhpcy50aW1lbGluZS50aWNrKHRoaXMudGltZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEJ1aWxkIHRoZSBhbmltZS5qcyB0aW1lbGluZS5cbiAgICogQmVnaW4gdGhlIGFuaW1hdGlvbi5cbiAgICovXG4gIGJlZ2luQW5pbWF0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFkZGl0aW9uYWxPZmZzZXQ7XG4gICAgdmFyIGk7XG4gICAgdmFyIGo7XG4gICAgdmFyIGR1cmF0aW9uO1xuICAgIHZhciBsb25nZXN0RHVyYXRpb247XG4gICAgdmFyIG9mZnNldDtcbiAgICB2YXIgdGltZWxpbmVFbDtcbiAgICB2YXIgdGltZWxpbmVHcm91cEVsO1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHRpbWVsaW5lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuZGF0YS50aW1lbGluZSk7XG4gICAgaWYgKHRpbWVsaW5lRWwudGFnTmFtZSAhPT0gJ0EtVElNRUxJTkUnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1thbmltYXRpb24tdGltZWxpbmVdIHRpbWVsaW5lIG11c3QgYmUgYSBzZWxlY3RvciB0byA8YS10aW1lbGluZT4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgJ2VsZW1lbnQuJyk7XG4gICAgfVxuXG4gICAgdGhpcy5hbmltYXRpb25Jc1BsYXlpbmcgPSB0cnVlO1xuICAgIHRoaXMudGltZSA9IDA7XG4gICAgdGhpcy50aW1lbGluZSA9IEFGUkFNRS5hbmltZS50aW1lbGluZSh7XG4gICAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmFuaW1hdGlvbklzUGxheWluZyA9IGZhbHNlO1xuICAgICAgICBzZWxmLmVsLmVtaXQoJ2FuaW1hdGlvbnRpbWVsaW5lY29tcGxldGUnLCBzZWxmLmV2ZW50RGV0YWlsKTtcbiAgICAgIH0sXG4gICAgICBkaXJlY3Rpb246IHRoaXMuZGF0YS5kaXJlY3Rpb24sXG4gICAgICBsb29wOiB0aGlzLmRhdGEubG9vcFxuICAgIH0pO1xuXG4gICAgb2Zmc2V0ID0gMDsgIC8vIEFic29sdXRlIHRpbWUgb2Zmc2V0LlxuICAgIGZvciAoaSA9IDA7IGkgPCB0aW1lbGluZUVsLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBBZGQgZ3JvdXAuXG4gICAgICBpZiAodGltZWxpbmVFbC5jaGlsZHJlbltpXS50YWdOYW1lID09PSAnQS1USU1FTElORS1HUk9VUCcpIHtcbiAgICAgICAgdGltZWxpbmVHcm91cEVsID0gdGltZWxpbmVFbC5jaGlsZHJlbltpXTtcbiAgICAgICAgbG9uZ2VzdER1cmF0aW9uID0gMDtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IHRpbWVsaW5lR3JvdXBFbC5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGR1cmF0aW9uID0gdGhpcy5hZGRBbmltYXRpb25Ub1RpbWVsaW5lKHRpbWVsaW5lR3JvdXBFbC5jaGlsZHJlbltqXSwgb2Zmc2V0KTtcbiAgICAgICAgICAvLyBBIHRpbWVsaW5lIGdyb3VwIGlzIGZpbmlzaGVkIG9uY2UgdGhlIGxvbmdlc3QgcnVubmluZyBhbmltYXRpb24gZmluaXNoZXMuXG4gICAgICAgICAgaWYgKGR1cmF0aW9uID4gbG9uZ2VzdER1cmF0aW9uKSB7IGxvbmdlc3REdXJhdGlvbiA9IGR1cmF0aW9uOyB9XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ICs9IGxvbmdlc3REdXJhdGlvbjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBzaW5nbGUgYW5pbWF0aW9uLlxuICAgICAgaWYgKHRpbWVsaW5lRWwuY2hpbGRyZW5baV0udGFnTmFtZSA9PT0gJ0EtVElNRUxJTkUtQU5JTUFUSU9OJykge1xuICAgICAgICBvZmZzZXQgKz0gdGhpcy5hZGRBbmltYXRpb25Ub1RpbWVsaW5lKHRpbWVsaW5lRWwuY2hpbGRyZW5baV0sIG9mZnNldCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgc2luZ2xlIGFuaW1hdGlvbiB0byB0aW1lbGluZS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIEFic29sdXRlIHRpbWUgb2Zmc2V0IGZvciBhbmltYXRpb24gdG8gc3RhcnQuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IER1cmF0aW9uLlxuICAgKi9cbiAgYWRkQW5pbWF0aW9uVG9UaW1lbGluZTogZnVuY3Rpb24gKGFuaW1hdGlvbkVsLCBvZmZzZXQpIHtcbiAgICB2YXIgYWRkaXRpb25hbE9mZnNldDtcbiAgICB2YXIgYW5pbWF0aW9uTmFtZTtcbiAgICB2YXIgY29tcG9uZW50O1xuICAgIHZhciBjb25maWc7XG4gICAgdmFyIGVscztcbiAgICB2YXIgaTtcbiAgICB2YXIgc2VsZWN0O1xuXG4gICAgYW5pbWF0aW9uTmFtZSA9ICdhbmltYXRpb25fXycgKyBhbmltYXRpb25FbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICBzZWxlY3QgPSBhbmltYXRpb25FbC5nZXRBdHRyaWJ1dGUoJ3NlbGVjdCcpO1xuICAgIGVscyA9IHRoaXMuZWwuc2NlbmVFbC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdCk7XG5cbiAgICBpZiAoIWVscy5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUud2FybignW2FuaW1hdGlvbi10aW1lbGluZV0gTm8gZW50aXRpZXMgZm91bmQgZm9yIHNlbGVjdD1cIicgK1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3QgKyAnXCInKTtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGFkZGl0aW9uYWxPZmZzZXQgPSBwYXJzZUZsb2F0KGFuaW1hdGlvbkVsLmdldEF0dHJpYnV0ZSgnb2Zmc2V0JykgfHwgMCwgMTApXG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb21wb25lbnQgPSBlbHNbaV0uY29tcG9uZW50c1thbmltYXRpb25OYW1lXTtcbiAgICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgYW5pbWF0aW9uIGAnICsgYW5pbWF0aW9uTmFtZSArICdgIGZvciBgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25FbC5nZXRBdHRyaWJ1dGUoJ3NlbGVjdCcpICsgJ2AuJyk7XG4gICAgICB9XG4gICAgICBjb21wb25lbnQudXBkYXRlQ29uZmlnKCk7XG4gICAgICBjb21wb25lbnQuc3RvcFJlbGF0ZWRBbmltYXRpb25zKCk7XG4gICAgICBjb25maWcgPSBjbG9uZUNvbmZpZyhjb21wb25lbnQuY29uZmlnKTtcbiAgICAgIGNvbmZpZy5vZmZzZXQgPSBvZmZzZXQgKyBhZGRpdGlvbmFsT2Zmc2V0O1xuICAgICAgdGhpcy50aW1lbGluZS5hZGQoY29uZmlnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKGNvbmZpZy5kdXJhdGlvbiB8fCAwKSArIChjb25maWcuZGVsYXkgfHwgMCkgKyBhZGRpdGlvbmFsT2Zmc2V0O1xuICB9LFxuXG4gIHBhdXNlQW5pbWF0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hbmltYXRpb25Jc1BsYXlpbmcgPSBmYWxzZTtcbiAgfVxufSk7XG5cbi8qKlxuICogQ2xvbmUgY29uZmlnLiBEZWVwIGNsb25lIG9iamVjdHMgYW5kIGFycmF5cy4gQ29weSBvdmVyIGZ1bmN0aW9ucy5cbiAqL1xuZnVuY3Rpb24gY2xvbmVDb25maWcgKGNvbmZpZykge1xuICB2YXIga2V5O1xuICB2YXIgbmV3Q29uZmlnID0ge307XG4gIGZvciAoa2V5IGluIGNvbmZpZykge1xuICAgIGlmICh0eXBlb2YgY29uZmlnW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG5ld0NvbmZpZ1trZXldID0gY29uZmlnW2tleV07XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnW2tleV0gPT09ICdvYmplY3QnKSB7XG4gICAgICBuZXdDb25maWdba2V5XSA9IEFGUkFNRS51dGlscy5jbG9uZShjb25maWdba2V5XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0NvbmZpZ1trZXldID0gY29uZmlnW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXdDb25maWc7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYWZyYW1lLWFuaW1hdGlvbi10aW1lbGluZS1jb21wb25lbnQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGdsb2JhbCBBRlJBTUUgKi9cbnZhciBzdHlsZVBhcnNlciA9IEFGUkFNRS51dGlscy5zdHlsZVBhcnNlcjtcblxuaWYgKHR5cGVvZiBBRlJBTUUgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IG5ldyBFcnJvcignQ29tcG9uZW50IGF0dGVtcHRlZCB0byByZWdpc3RlciBiZWZvcmUgQUZSQU1FIHdhcyBhdmFpbGFibGUuJyk7XG59XG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZXZlbnQtc2V0Jywge1xuICBzY2hlbWE6IHtcbiAgICBkZWZhdWx0OiAnJyxcbiAgICBwYXJzZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gc3R5bGVQYXJzZXIucGFyc2UodmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICBtdWx0aXBsZTogdHJ1ZSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5ldmVudEhhbmRsZXIgPSBudWxsO1xuICAgIHRoaXMuZXZlbnROYW1lID0gbnVsbDtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIChvbGREYXRhKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgdGhpcy51cGRhdGVFdmVudExpc3RlbmVyKCk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gIH0sXG5cbiAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgfSxcblxuICBwbGF5OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzb3VyY2Utb2YtdHJ1dGggZXZlbnQgbGlzdGVuZXIgcmVnaXN0cnkuXG4gICAqIERvZXMgbm90IGFjdHVhbGx5IGF0dGFjaCBldmVudCBsaXN0ZW5lcnMgeWV0LlxuICAgKi9cbiAgdXBkYXRlRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGV2ZW50O1xuICAgIHZhciB0YXJnZXQ7XG4gICAgdmFyIHRhcmdldEVsO1xuXG4gICAgLy8gU2V0IGV2ZW50IGxpc3RlbmVyIHVzaW5nIGBfZXZlbnRgLlxuICAgIGV2ZW50ID0gZGF0YS5fZXZlbnQgfHwgdGhpcy5pZDtcbiAgICB0YXJnZXQgPSBkYXRhLl90YXJnZXQ7XG5cbiAgICAvLyBEZWNpZGUgdGhlIHRhcmdldCB0byBgc2V0QXR0cmlidXRlYCBvbi5cbiAgICB0YXJnZXRFbCA9IHRhcmdldCA/IGVsLnNjZW5lRWwucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogZWw7XG5cbiAgICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50O1xuICAgIHRoaXMuZXZlbnRIYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG4gICAgICB2YXIgcHJvcE5hbWU7XG4gICAgICAvLyBTZXQgYXR0cmlidXRlcy5cbiAgICAgIGZvciAocHJvcE5hbWUgaW4gZGF0YSkge1xuICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdfZXZlbnQnIHx8IHByb3BOYW1lID09PSAnX3RhcmdldCcpIHsgY29udGludWU7IH1cbiAgICAgICAgQUZSQU1FLnV0aWxzLmVudGl0eS5zZXRDb21wb25lbnRQcm9wZXJ0eS5jYWxsKHRoaXMsIHRhcmdldEVsLCBwcm9wTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbcHJvcE5hbWVdKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuXG4gIGFkZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5ldmVudE5hbWUsIHRoaXMuZXZlbnRIYW5kbGVyKTtcbiAgfSxcblxuICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuZXZlbnROYW1lLCB0aGlzLmV2ZW50SGFuZGxlcik7XG4gIH1cbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FmcmFtZS1ldmVudC1zZXQtY29tcG9uZW50L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgTE9BRElOR19NT0RFTFMgPSB7fTtcbnZhciBNT0RFTFMgPSB7fTtcblxuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdnbHRmLXBhcnQnLCB7XG4gIHNjaGVtYToge1xuICAgIGJ1ZmZlcjoge2RlZmF1bHQ6IHRydWV9LFxuICAgIHBhcnQ6IHt0eXBlOiAnc3RyaW5nJ30sXG4gICAgc3JjOiB7dHlwZTogJ2Fzc2V0J31cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB0aGlzLmdldE1vZGVsKGZ1bmN0aW9uIChtb2RlbFBhcnQpIHtcbiAgICAgIGlmICghbW9kZWxQYXJ0KSB7IHJldHVybjsgfVxuICAgICAgZWwuc2V0T2JqZWN0M0QoJ21lc2gnLCBtb2RlbFBhcnQpXG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZldGNoLCBjYWNoZSwgYW5kIHNlbGVjdCBmcm9tIEdMVEYuXG4gICAqXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IFNlbGVjdGVkIHN1YnNldCBvZiBtb2RlbC5cbiAgICovXG4gIGdldE1vZGVsOiBmdW5jdGlvbiAoY2IpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBBbHJlYWR5IHBhcnNlZCwgZ3JhYiBpdC5cbiAgICBpZiAoTU9ERUxTW3RoaXMuZGF0YS5zcmNdKSB7XG4gICAgICBjYih0aGlzLnNlbGVjdEZyb21Nb2RlbChNT0RFTFNbdGhpcy5kYXRhLnNyY10pKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50bHkgbG9hZGluZywgd2FpdCBmb3IgaXQuXG4gICAgaWYgKExPQURJTkdfTU9ERUxTW3RoaXMuZGF0YS5zcmNdKSB7XG4gICAgICByZXR1cm4gTE9BRElOR19NT0RFTFNbdGhpcy5kYXRhLnNyY10udGhlbihmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgICAgY2Ioc2VsZi5zZWxlY3RGcm9tTW9kZWwobW9kZWwpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE5vdCB5ZXQgZmV0Y2hpbmcsIGZldGNoIGl0LlxuICAgIExPQURJTkdfTU9ERUxTW3RoaXMuZGF0YS5zcmNdID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIG5ldyBUSFJFRS5HTFRGTG9hZGVyKCkubG9hZChzZWxmLmRhdGEuc3JjLCBmdW5jdGlvbiAoZ2x0Zk1vZGVsKSB7XG4gICAgICAgIHZhciBtb2RlbCA9IGdsdGZNb2RlbC5zY2VuZSB8fCBnbHRmTW9kZWwuc2NlbmVzWzBdO1xuICAgICAgICBNT0RFTFNbc2VsZi5kYXRhLnNyY10gPSBtb2RlbDtcbiAgICAgICAgZGVsZXRlIExPQURJTkdfTU9ERUxTW3NlbGYuZGF0YS5zcmNdO1xuICAgICAgICBjYihzZWxmLnNlbGVjdEZyb21Nb2RlbChtb2RlbCkpO1xuICAgICAgICByZXNvbHZlKG1vZGVsKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHsgfSwgY29uc29sZS5lcnJvcik7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNlYXJjaCBmb3IgdGhlIHBhcnQgbmFtZSBhbmQgbG9vayBmb3IgYSBtZXNoLlxuICAgKi9cbiAgc2VsZWN0RnJvbU1vZGVsOiBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICB2YXIgbWVzaDtcbiAgICB2YXIgcGFydDtcblxuICAgIHBhcnQgPSBtb2RlbC5nZXRPYmplY3RCeU5hbWUodGhpcy5kYXRhLnBhcnQpO1xuICAgIGlmICghcGFydCkge1xuICAgICAgY29uc29sZS5lcnJvcignW2dsdGYtcGFydF0gYCcgKyB0aGlzLmRhdGEucGFydCArICdgIG5vdCBmb3VuZCBpbiBtb2RlbC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBtZXNoID0gcGFydC5nZXRPYmplY3RCeVByb3BlcnR5KCd0eXBlJywgJ01lc2gnKS5jbG9uZSh0cnVlKTtcblxuICAgIGlmICh0aGlzLmRhdGEuYnVmZmVyKSB7XG4gICAgICBtZXNoLmdlb21ldHJ5ID0gbWVzaC5nZW9tZXRyeS50b05vbkluZGV4ZWQoKTtcbiAgICAgIHJldHVybiBtZXNoO1xuICAgIH1cbiAgICBtZXNoLmdlb21ldHJ5ID0gbmV3IFRIUkVFLkdlb21ldHJ5KCkuZnJvbUJ1ZmZlckdlb21ldHJ5KG1lc2guZ2VvbWV0cnkpO1xuICAgIHJldHVybiBtZXNoO1xuICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9hZnJhbWUtZ2x0Zi1wYXJ0LWNvbXBvbmVudC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBMYXlvdXQgY29tcG9uZW50IGZvciBBLUZyYW1lLlxuICogU29tZSBsYXlvdXRzIGFkYXB0ZWQgZnJvbSBodHRwOi8vd3d3LnZiLWhlbHBlci5jb20vdHV0b3JpYWxfcGxhdG9uaWNfc29saWRzLmh0bWxcbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdsYXlvdXQnLCB7XG4gIHNjaGVtYToge1xuICAgIGFuZ2xlOiB7dHlwZTogJ251bWJlcicsIGRlZmF1bHQ6IGZhbHNlLCBtaW46IDAsIG1heDogMzYwLCBpZjoge3R5cGU6IFsnY2lyY2xlJ119fSxcbiAgICBjb2x1bW5zOiB7ZGVmYXVsdDogMSwgbWluOiAwLCBpZjoge3R5cGU6IFsnYm94J119fSxcbiAgICBtYXJnaW46IHtkZWZhdWx0OiAxLCBtaW46IDAsIGlmOiB7dHlwZTogWydib3gnLCAnbGluZSddfX0sXG4gICAgbWFyZ2luQ29sdW1uOiB7ZGVmYXVsdDogMSwgbWluOiAwLCBpZjoge3R5cGU6IFsnYm94J119fSxcbiAgICBtYXJnaW5Sb3c6IHtkZWZhdWx0OiAxLCBtaW46IDAsIGlmOiB7dHlwZTogWydib3gnXX19LFxuICAgIHBsYW5lOiB7ZGVmYXVsdDogJ3h5J30sXG4gICAgcmFkaXVzOiB7ZGVmYXVsdDogMSwgbWluOiAwLCBpZjoge3R5cGU6IFsnY2lyY2xlJywgJ2N1YmUnLCAnZG9kZWNhaGVkcm9uJywgJ3B5cmFtaWQnXX19LFxuICAgIHJldmVyc2U6IHtkZWZhdWx0OiBmYWxzZX0sXG4gICAgdHlwZToge2RlZmF1bHQ6ICdsaW5lJywgb25lT2Y6IFsnYm94JywgJ2NpcmNsZScsICdjdWJlJywgJ2RvZGVjYWhlZHJvbicsICdsaW5lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdweXJhbWlkJ119LFxuICAgIGZpbGw6IHtkZWZhdWx0OiB0cnVlLCBpZjoge3R5cGU6IFsnY2lyY2xlJ119fVxuICB9LFxuXG4gIC8qKlxuICAgKiBTdG9yZSBpbml0aWFsIHBvc2l0aW9ucyBpbiBjYXNlIG5lZWQgdG8gcmVzZXQgb24gY29tcG9uZW50IHJlbW92YWwuXG4gICAqL1xuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmNoaWxkcmVuID0gZWwuZ2V0Q2hpbGRFbnRpdGllcygpO1xuICAgIHRoaXMuaW5pdGlhbFBvc2l0aW9ucyA9IFtdO1xuXG4gICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIGdldEluaXRpYWxQb3NpdGlvbnMgKGNoaWxkRWwpIHtcbiAgICAgIGlmIChjaGlsZEVsLmhhc0xvYWRlZCkgeyByZXR1cm4gX2dldFBvc2l0aW9ucygpOyB9XG4gICAgICBjaGlsZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZCcsIF9nZXRQb3NpdGlvbnMpO1xuICAgICAgZnVuY3Rpb24gX2dldFBvc2l0aW9ucyAoKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IGNoaWxkRWwuZ2V0QXR0cmlidXRlKCdwb3NpdGlvbicpO1xuICAgICAgICBzZWxmLmluaXRpYWxQb3NpdGlvbnMucHVzaChbcG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24uel0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hpbGQtYXR0YWNoZWQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAvLyBPbmx5IHVwZGF0ZSBpZiBkaXJlY3QgY2hpbGQgYXR0YWNoZWQuXG4gICAgICBpZiAoZXZ0LmRldGFpbC5lbC5wYXJlbnROb2RlICE9PSBlbCkgeyByZXR1cm47IH1cbiAgICAgIHNlbGYuY2hpbGRyZW4ucHVzaChldnQuZGV0YWlsLmVsKTtcbiAgICAgIHNlbGYudXBkYXRlKCk7XG4gICAgfSk7XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGlsZC1kZXRhY2hlZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIGRpcmVjdCBjaGlsZCBkZXRhY2hlZC5cbiAgICAgIGlmIChzZWxmLmNoaWxkcmVuLmluZGV4T2YoZXZ0LmRldGFpbC5lbCkgPT09IC0xKSB7IHJldHVybjsgfVxuICAgICAgc2VsZi5jaGlsZHJlbi5zcGxpY2Uoc2VsZi5jaGlsZHJlbi5pbmRleE9mKGV2dC5kZXRhaWwuZWwpLCAxKTtcbiAgICAgIHNlbGYuaW5pdGlhbFBvc2l0aW9ucy5zcGxpY2Uoc2VsZi5jaGlsZHJlbi5pbmRleE9mKGV2dC5kZXRhaWwuZWwpLCAxKTtcbiAgICAgIHNlbGYudXBkYXRlKCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjaGlsZCBlbnRpdHkgcG9zaXRpb25zLlxuICAgKi9cbiAgdXBkYXRlOiBmdW5jdGlvbiAob2xkRGF0YSkge1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW47XG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgbnVtQ2hpbGRyZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgdmFyIHBvc2l0aW9uRm47XG4gICAgdmFyIHBvc2l0aW9ucztcblxuICAgIC8vIENhbGN1bGF0ZSBkaWZmZXJlbnQgcG9zaXRpb25zIGJhc2VkIG9uIGxheW91dCBzaGFwZS5cbiAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgY2FzZSAnYm94Jzoge1xuICAgICAgICBwb3NpdGlvbkZuID0gZ2V0Qm94UG9zaXRpb25zO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NpcmNsZSc6IHtcbiAgICAgICAgcG9zaXRpb25GbiA9IGdldENpcmNsZVBvc2l0aW9ucztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdjdWJlJzoge1xuICAgICAgICBwb3NpdGlvbkZuID0gZ2V0Q3ViZVBvc2l0aW9ucztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdkb2RlY2FoZWRyb24nOiB7XG4gICAgICAgIHBvc2l0aW9uRm4gPSBnZXREb2RlY2FoZWRyb25Qb3NpdGlvbnM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAncHlyYW1pZCc6IHtcbiAgICAgICAgcG9zaXRpb25GbiA9IGdldFB5cmFtaWRQb3NpdGlvbnM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICAvLyBMaW5lLlxuICAgICAgICBwb3NpdGlvbkZuID0gZ2V0TGluZVBvc2l0aW9ucztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwb3NpdGlvbnMgPSBwb3NpdGlvbkZuKGRhdGEsIG51bUNoaWxkcmVuLCAnbWFyZ2luJyBpbiBlbC5nZXRET01BdHRyaWJ1dGUoJ2xheW91dCcpKTtcbiAgICBpZiAoZGF0YS5yZXZlcnNlKSB7IHBvc2l0aW9ucy5yZXZlcnNlKCk7IH1cbiAgICBzZXRQb3NpdGlvbnMoY2hpbGRyZW4sIHBvc2l0aW9ucyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlc2V0IHBvc2l0aW9ucy5cbiAgICovXG4gIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hpbGQtYXR0YWNoZWQnLCB0aGlzLmNoaWxkQXR0YWNoZWRDYWxsYmFjayk7XG4gICAgc2V0UG9zaXRpb25zKHRoaXMuY2hpbGRyZW4sIHRoaXMuaW5pdGlhbFBvc2l0aW9ucyk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEdldCBwb3NpdGlvbnMgZm9yIGBib3hgIGxheW91dC5cbiAqL1xuZnVuY3Rpb24gZ2V0Qm94UG9zaXRpb25zIChkYXRhLCBudW1DaGlsZHJlbiwgbWFyZ2luRGVmaW5lZCkge1xuICB2YXIgbWFyZ2luQ29sdW1uO1xuICB2YXIgbWFyZ2luUm93O1xuICB2YXIgcG9zaXRpb247XG4gIHZhciBwb3NpdGlvbnMgPSBbXTtcbiAgdmFyIHJvd3MgPSBNYXRoLmNlaWwobnVtQ2hpbGRyZW4gLyBkYXRhLmNvbHVtbnMpO1xuXG4gIG1hcmdpbkNvbHVtbiA9IGRhdGEubWFyZ2luQ29sdW1uO1xuICBtYXJnaW5Sb3cgPSBkYXRhLm1hcmdpblJvdztcbiAgaWYgKG1hcmdpbkRlZmluZWQpIHtcbiAgICBtYXJnaW5Db2x1bW4gPSBkYXRhLm1hcmdpbjtcbiAgICBtYXJnaW5Sb3cgPSBkYXRhLm1hcmdpbjtcbiAgfVxuXG4gIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IHJvd3M7IHJvdysrKSB7XG4gICAgZm9yICh2YXIgY29sdW1uID0gMDsgY29sdW1uIDwgZGF0YS5jb2x1bW5zOyBjb2x1bW4rKykge1xuICAgICAgcG9zaXRpb24gPSBbMCwgMCwgMF07XG4gICAgICBpZiAoZGF0YS5wbGFuZS5pbmRleE9mKCd4JykgPT09IDApIHtcbiAgICAgICAgcG9zaXRpb25bMF0gPSBjb2x1bW4gKiBtYXJnaW5Db2x1bW47XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5wbGFuZS5pbmRleE9mKCd5JykgPT09IDApIHtcbiAgICAgICAgcG9zaXRpb25bMV0gPSBjb2x1bW4gKiBtYXJnaW5Db2x1bW47XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5wbGFuZS5pbmRleE9mKCd5JykgPT09IDEpIHtcbiAgICAgICAgcG9zaXRpb25bMV0gPSByb3cgKiBtYXJnaW5Sb3c7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5wbGFuZS5pbmRleE9mKCd6JykgPT09IDEpIHtcbiAgICAgICAgcG9zaXRpb25bMl0gPSByb3cgKiBtYXJnaW5Sb3c7XG4gICAgICB9XG4gICAgICBwb3NpdGlvbnMucHVzaChwb3NpdGlvbik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBvc2l0aW9ucztcbn1cbm1vZHVsZS5leHBvcnRzLmdldEJveFBvc2l0aW9ucyA9IGdldEJveFBvc2l0aW9ucztcblxuLyoqXG4gKiBHZXQgcG9zaXRpb25zIGZvciBgY2lyY2xlYCBsYXlvdXQuXG4gKi9cbmZ1bmN0aW9uIGdldENpcmNsZVBvc2l0aW9ucyAoZGF0YSwgbnVtQ2hpbGRyZW4pIHtcbiAgdmFyIHBvc2l0aW9ucyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQ2hpbGRyZW47IGkrKykge1xuICAgIHZhciByYWQ7XG5cbiAgICBpZiAoaXNOYU4oZGF0YS5hbmdsZSkpIHtcbiAgICAgIHJhZCA9IGkgKiAoMiAqIE1hdGguUEkpIC8gbnVtQ2hpbGRyZW47XG4gICAgfSBlbHNlIHtcbiAgICAgIHJhZCA9IGkgKiBkYXRhLmFuZ2xlICogMC4wMTc0NTMyOTI1MjsgIC8vIEFuZ2xlIHRvIHJhZGlhbi5cbiAgICB9XG5cbiAgICB2YXIgcG9zaXRpb24gPSBbXTtcbiAgICBpZiAoZGF0YS5wbGFuZS5pbmRleE9mKCd4JykgPT09IDApIHtcbiAgICAgIHBvc2l0aW9uWzBdID0gZGF0YS5yYWRpdXMgKiBNYXRoLmNvcyhyYWQpO1xuICAgIH1cbiAgICBpZiAoZGF0YS5wbGFuZS5pbmRleE9mKCd5JykgPT09IDApIHtcbiAgICAgIHBvc2l0aW9uWzFdID0gZGF0YS5yYWRpdXMgKiBNYXRoLmNvcyhyYWQpO1xuICAgIH1cbiAgICBpZiAoZGF0YS5wbGFuZS5pbmRleE9mKCd5JykgPT09IDEpIHtcbiAgICAgIHBvc2l0aW9uWzFdID0gZGF0YS5yYWRpdXMgKiBNYXRoLnNpbihyYWQpO1xuICAgIH1cbiAgICBpZiAoZGF0YS5wbGFuZS5pbmRleE9mKCd6JykgPT09IDEpIHtcbiAgICAgIHBvc2l0aW9uWzJdID0gZGF0YS5yYWRpdXMgKiBNYXRoLnNpbihyYWQpO1xuICAgIH1cbiAgICBwb3NpdGlvbnMucHVzaChwb3NpdGlvbik7XG4gIH1cbiAgcmV0dXJuIHBvc2l0aW9ucztcbn1cbm1vZHVsZS5leHBvcnRzLmdldENpcmNsZVBvc2l0aW9ucyA9IGdldENpcmNsZVBvc2l0aW9ucztcblxuLyoqXG4gKiBHZXQgcG9zaXRpb25zIGZvciBgbGluZWAgbGF5b3V0LlxuICogVE9ETzogM0QgbWFyZ2lucy5cbiAqL1xuZnVuY3Rpb24gZ2V0TGluZVBvc2l0aW9ucyAoZGF0YSwgbnVtQ2hpbGRyZW4pIHtcbiAgZGF0YS5jb2x1bW5zID0gbnVtQ2hpbGRyZW47XG4gIHJldHVybiBnZXRCb3hQb3NpdGlvbnMoZGF0YSwgbnVtQ2hpbGRyZW4sIHRydWUpO1xufVxubW9kdWxlLmV4cG9ydHMuZ2V0TGluZVBvc2l0aW9ucyA9IGdldExpbmVQb3NpdGlvbnM7XG5cbi8qKlxuICogR2V0IHBvc2l0aW9ucyBmb3IgYGN1YmVgIGxheW91dC5cbiAqL1xuZnVuY3Rpb24gZ2V0Q3ViZVBvc2l0aW9ucyAoZGF0YSwgbnVtQ2hpbGRyZW4pIHtcbiAgcmV0dXJuIHRyYW5zZm9ybShbXG4gICAgWzEsIDAsIDBdLFxuICAgIFswLCAxLCAwXSxcbiAgICBbMCwgMCwgMV0sXG4gICAgWy0xLCAwLCAwXSxcbiAgICBbMCwgLTEsIDBdLFxuICAgIFswLCAwLCAtMV0sXG4gIF0sIGRhdGEucmFkaXVzIC8gMik7XG59XG5tb2R1bGUuZXhwb3J0cy5nZXRDdWJlUG9zaXRpb25zID0gZ2V0Q3ViZVBvc2l0aW9ucztcblxuLyoqXG4gKiBHZXQgcG9zaXRpb25zIGZvciBgZG9kZWNhaGVkcm9uYCBsYXlvdXQuXG4gKi9cbmZ1bmN0aW9uIGdldERvZGVjYWhlZHJvblBvc2l0aW9ucyAoZGF0YSwgbnVtQ2hpbGRyZW4pIHtcbiAgdmFyIFBISSA9ICgxICsgTWF0aC5zcXJ0KDUpKSAvIDI7XG4gIHZhciBCID0gMSAvIFBISTtcbiAgdmFyIEMgPSAyIC0gUEhJO1xuICB2YXIgTkIgPSAtMSAqIEI7XG4gIHZhciBOQyA9IC0xICogQztcblxuICByZXR1cm4gdHJhbnNmb3JtKFtcbiAgICBbLTEsIEMsIDBdLFxuICAgIFstMSwgTkMsIDBdLFxuICAgIFswLCAtMSwgQ10sXG4gICAgWzAsIC0xLCBOQ10sXG4gICAgWzAsIDEsIENdLFxuICAgIFswLCAxLCBOQ10sXG4gICAgWzEsIEMsIDBdLFxuICAgIFsxLCBOQywgMF0sXG4gICAgW0IsIEIsIEJdLFxuICAgIFtCLCBCLCBOQl0sXG4gICAgW0IsIE5CLCBCXSxcbiAgICBbQiwgTkIsIE5CXSxcbiAgICBbQywgMCwgMV0sXG4gICAgW0MsIDAsIC0xXSxcbiAgICBbTkIsIEIsIEJdLFxuICAgIFtOQiwgQiwgTkJdLFxuICAgIFtOQiwgTkIsIEJdLFxuICAgIFtOQiwgTkIsIE5CXSxcbiAgICBbTkMsIDAsIDFdLFxuICAgIFtOQywgMCwgLTFdLFxuICBdLCBkYXRhLnJhZGl1cyAvIDIpO1xufVxubW9kdWxlLmV4cG9ydHMuZ2V0RG9kZWNhaGVkcm9uUG9zaXRpb25zID0gZ2V0RG9kZWNhaGVkcm9uUG9zaXRpb25zO1xuXG4vKipcbiAqIEdldCBwb3NpdGlvbnMgZm9yIGBweXJhbWlkYCBsYXlvdXQuXG4gKi9cbmZ1bmN0aW9uIGdldFB5cmFtaWRQb3NpdGlvbnMgKGRhdGEsIG51bUNoaWxkcmVuKSB7XG4gIHZhciBTUVJUXzMgPSBNYXRoLnNxcnQoMyk7XG4gIHZhciBORUdfU1FSVF8xXzMgPSAtMSAvIE1hdGguc3FydCgzKTtcbiAgdmFyIERCTF9TUVJUXzJfMyA9IDIgKiBNYXRoLnNxcnQoMiAvIDMpO1xuXG4gIHJldHVybiB0cmFuc2Zvcm0oW1xuICAgIFswLCAwLCBTUVJUXzMgKyBORUdfU1FSVF8xXzNdLFxuICAgIFstMSwgMCwgTkVHX1NRUlRfMV8zXSxcbiAgICBbMSwgMCwgTkVHX1NRUlRfMV8zXSxcbiAgICBbMCwgREJMX1NRUlRfMl8zLCAwXVxuICBdLCBkYXRhLnJhZGl1cyAvIDIpO1xufVxubW9kdWxlLmV4cG9ydHMuZ2V0UHlyYW1pZFBvc2l0aW9ucyA9IGdldFB5cmFtaWRQb3NpdGlvbnM7XG5cbi8qKlxuICogTXVsdGlwbHkgYWxsIGNvb3JkaW5hdGVzIGJ5IGEgc2NhbGUgZmFjdG9yIGFuZCBhZGQgdHJhbnNsYXRlLlxuICpcbiAqIEBwYXJhbXMge2FycmF5fSBwb3NpdGlvbnMgLSBBcnJheSBvZiBjb29yZGluYXRlcyBpbiBhcnJheSBmb3JtLlxuICogQHJldHVybnMge2FycmF5fSBwb3NpdGlvbnNcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtIChwb3NpdGlvbnMsIHNjYWxlKSB7XG4gIHJldHVybiBwb3NpdGlvbnMubWFwKGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgIHJldHVybiBwb3NpdGlvbi5tYXAoZnVuY3Rpb24gKHBvaW50LCBpKSB7XG4gICAgICByZXR1cm4gcG9pbnQgKiBzY2FsZTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFNldCBwb3NpdGlvbiBvbiBjaGlsZCBlbnRpdGllcy5cbiAqXG4gKiBAcGFyYW0ge2FycmF5fSBlbHMgLSBDaGlsZCBlbnRpdGllcyB0byBzZXQuXG4gKiBAcGFyYW0ge2FycmF5fSBwb3NpdGlvbnMgLSBBcnJheSBvZiBjb29yZGluYXRlcy5cbiAqL1xuZnVuY3Rpb24gc2V0UG9zaXRpb25zIChlbHMsIHBvc2l0aW9ucykge1xuICBlbHMuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcbiAgICB2YXIgcG9zaXRpb24gPSBwb3NpdGlvbnNbaV07XG4gICAgZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHtcbiAgICAgIHg6IHBvc2l0aW9uWzBdLFxuICAgICAgeTogcG9zaXRpb25bMV0sXG4gICAgICB6OiBwb3NpdGlvblsyXVxuICAgIH0pO1xuICB9KTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9hZnJhbWUtbGF5b3V0LWNvbXBvbmVudC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBMaXN0ZW4gdG8gZXZlbnQgYW5kIGZvcndhcmQgdG8gYW5vdGhlciBlbnRpdHkgb3IgZW50aXRpZXMuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgncHJveHktZXZlbnQnLCB7XG4gIHNjaGVtYToge1xuICAgIGNhcHR1cmVCdWJibGVzOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgIGV2ZW50OiB7dHlwZTogJ3N0cmluZyd9LFxuICAgIHRvOiB7dHlwZTogJ3N0cmluZyd9LFxuICAgIGFzOiB7dHlwZTogJ3N0cmluZyd9LFxuICAgIGJ1YmJsZXM6IHtkZWZhdWx0OiBmYWxzZX1cbiAgfSxcblxuICBtdWx0aXBsZTogdHJ1ZSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgdG87XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgaWYgKGRhdGEudG8gPT09ICdDSElMRFJFTicpIHtcbiAgICAgIHRvID0gZWwucXVlcnlTZWxlY3RvckFsbCgnKicpO1xuICAgIH0gZWxzZSBpZiAoZGF0YS50byA9PT0gJ1NFTEYnKSB7XG4gICAgICB0byA9IFtlbF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChkYXRhLnRvKTtcbiAgICB9XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGRhdGEuZXZlbnQsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIHZhciBkYXRhID0gc2VsZi5kYXRhO1xuICAgICAgdmFyIGk7XG4gICAgICBpZiAoIWRhdGEuY2FwdHVyZUJ1YmJsZXMgJiYgZXZ0LnRhcmdldCAhPT0gZWwpIHsgcmV0dXJuOyB9XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdG8ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdG9baV0uZW1pdChkYXRhLmFzIHx8IGRhdGEuZXZlbnQsIG51bGwsIGRhdGEuYnViYmxlcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FmcmFtZS1wcm94eS1ldmVudC1jb21wb25lbnQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGdsb2JhbCBBRlJBTUUgKi9cblxuaWYgKHR5cGVvZiBBRlJBTUUgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IG5ldyBFcnJvcignQ29tcG9uZW50IGF0dGVtcHRlZCB0byByZWdpc3RlciBiZWZvcmUgQUZSQU1FIHdhcyBhdmFpbGFibGUuJyk7XG59XG5cbi8qKlxuICogU2xpY2U5IGNvbXBvbmVudCBmb3IgQS1GcmFtZS5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdzbGljZTknLCB7XG4gIHNjaGVtYToge1xuICAgIGJvdHRvbToge2RlZmF1bHQ6IDAsIG1pbjogMH0sXG4gICAgY29sb3I6IHt0eXBlOiAnY29sb3InLCBkZWZhdWx0OiAnI2ZmZid9LFxuICAgIGRlYnVnOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgIGhlaWdodDoge2RlZmF1bHQ6IDEsIG1pbjogMH0sXG4gICAgbGVmdDoge2RlZmF1bHQ6IDAsIG1pbjogMH0sXG4gICAgb3BhY2l0eToge2RlZmF1bHQ6IDEuMCwgbWluOiAwLCBtYXg6IDF9LFxuICAgIHBhZGRpbmc6IHtkZWZhdWx0OiAwLjEsIG1pbjogMC4wMX0sXG4gICAgcmlnaHQ6IHtkZWZhdWx0OiAwLCBtaW46IDB9LFxuICAgIHNpZGU6IHtkZWZhdWx0OiAnZnJvbnQnLCBvbmVPZjogWydmcm9udCcsICdiYWNrJywgJ2RvdWJsZSddfSxcbiAgICBzcmM6IHt0eXBlOiAnbWFwJ30sXG4gICAgdG9wOiB7ZGVmYXVsdDogMCwgbWluOiAwfSxcbiAgICB0cmFuc3BhcmVudDoge2RlZmF1bHQ6IHRydWV9LFxuICAgIHdpZHRoOiB7ZGVmYXVsdDogMSwgbWluOiAwfSxcbiAgICB1c2luZ0N1c3RvbU1hdGVyaWFsOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgIHVzaW5nQXRsYXM6IHtkZWZhdWx0OiBmYWxzZX0sXG4gICAgdXZBdGxhc01pbjoge3R5cGU6ICd2ZWMyJ30sXG4gICAgdXZBdGxhc01heDoge3R5cGU6ICd2ZWMyJ31cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgdmFyIGdlb21ldHJ5O1xuICAgIHZhciBtYXRlcmlhbDtcblxuICAgIHRoaXMudGV4dHVyZVNyYyA9IG51bGw7XG5cbiAgICBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeShkYXRhLndpZHRoLCBkYXRhLmhlaWdodCwgMywgMyk7XG5cbiAgICAvLyBDcmVhdGUgbWVzaC5cbiAgICBpZiAoZGF0YS51c2luZ0N1c3RvbU1hdGVyaWFsKSB7XG4gICAgICB0aGlzLnBsYW5lID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgICBjb2xvcjogZGF0YS5jb2xvciwgb3BhY2l0eTogZGF0YS5vcGFjaXR5LCB0cmFuc3BhcmVudDogZGF0YS50cmFuc3BhcmVudCxcbiAgICAgICAgd2lyZWZyYW1lOiBkYXRhLmRlYnVnXG4gICAgICB9KTtcbiAgICAgIHRoaXMucGxhbmUgPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuICAgIH1cbiAgICB0aGlzLmVsLnNldE9iamVjdDNEKCdtZXNoJywgdGhpcy5wbGFuZSk7XG4gIH0sXG5cbiAgcmVnZW5lcmF0ZU1lc2g6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgaGVpZ2h0O1xuICAgIHZhciBwb3MgPSB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XG4gICAgdmFyIHV2O1xuICAgIHZhciB1dnMgPSB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMudXYuYXJyYXk7XG4gICAgdmFyIHdpZHRoO1xuXG4gICAgaWYgKHRoaXMubWF0ZXJpYWwgJiYgIXRoaXMubWF0ZXJpYWwubWFwKSB7IHJldHVybjsgfVxuXG4gICAgLypcbiAgICAgIDAtLTEtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0yLS0zXG4gICAgICB8ICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgfFxuICAgICAgNC0tNS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTYtLTdcbiAgICAgIHwgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICB8XG4gICAgICB8ICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgfFxuICAgICAgfCAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIHxcbiAgICAgIDgtLTktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTEwLS0xMVxuICAgICAgfCAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIHxcbiAgICAgIDEyLTEzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTE0LS0xNVxuICAgICovXG4gICAgZnVuY3Rpb24gc2V0UG9zKGlkLCB4LCB5KSB7XG4gICAgICBwb3NbMyAqIGlkXSA9IHg7XG4gICAgICBwb3NbMyAqIGlkICsgMV0gPSB5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFVWIChpZCwgdSwgdikge1xuICAgICAgaWYgKGRhdGEudXNpbmdBdGxhcykge1xuICAgICAgICB1ID0gZGF0YS51dkF0bGFzTWluLnggKyAodSAqIChkYXRhLnV2QXRsYXNNYXgueCAtIGRhdGEudXZBdGxhc01pbi54KSk7XG4gICAgICAgIHYgPSBkYXRhLnV2QXRsYXNNaW4ueSArICh2ICogKGRhdGEudXZBdGxhc01heC55IC0gZGF0YS51dkF0bGFzTWluLnkpKTtcbiAgICAgIH1cbiAgICAgIHV2c1syICogaWRdID0gdTtcbiAgICAgIHV2c1syICogaWQgKyAxXSA9IHY7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIFVWU1xuICAgIGlmIChkYXRhLnVzaW5nQ3VzdG9tTWF0ZXJpYWwpIHtcbiAgICAgIGhlaWdodCA9IDE7XG4gICAgICB3aWR0aCA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhlaWdodCA9IHRoaXMubWF0ZXJpYWwubWFwLmltYWdlLndpZHRoO1xuICAgICAgd2lkdGggPSB0aGlzLm1hdGVyaWFsLm1hcC5pbWFnZS53aWR0aDtcbiAgICB9XG4gICAgdXYgPSB7XG4gICAgICBsZWZ0OiBkYXRhLmxlZnQgLyB3aWR0aCxcbiAgICAgIHJpZ2h0OiBkYXRhLnJpZ2h0IC8gd2lkdGgsXG4gICAgICB0b3A6IGRhdGEudG9wIC8gaGVpZ2h0LFxuICAgICAgYm90dG9tOiBkYXRhLmJvdHRvbSAvIGhlaWdodFxuICAgIH07XG5cbiAgICBzZXRVVigxLCAgdXYubGVmdCwgIDEpO1xuICAgIHNldFVWKDIsICB1di5yaWdodCwgMSk7XG5cbiAgICBzZXRVVig0LCAgMCwgICAgICAgIHV2LmJvdHRvbSk7XG4gICAgc2V0VVYoNSwgIHV2LmxlZnQsICB1di5ib3R0b20pO1xuICAgIHNldFVWKDYsICB1di5yaWdodCwgdXYuYm90dG9tKTtcbiAgICBzZXRVVig3LCAgMSwgICAgICAgIHV2LmJvdHRvbSk7XG5cbiAgICBzZXRVVig4LCAgMCwgICAgICAgIHV2LnRvcCk7XG4gICAgc2V0VVYoOSwgIHV2LmxlZnQsICB1di50b3ApO1xuICAgIHNldFVWKDEwLCB1di5yaWdodCwgdXYudG9wKTtcbiAgICBzZXRVVigxMSwgMSwgICAgICAgIHV2LnRvcCk7XG5cbiAgICBzZXRVVigxMywgdXYubGVmdCwgIDApO1xuICAgIHNldFVWKDE0LCB1di5yaWdodCwgMCk7XG5cbiAgICBpZiAoZGF0YS51c2luZ0F0bGFzKSB7XG4gICAgICBzZXRVVigwLCAwLCAxKTtcbiAgICAgIHNldFVWKDMsIDEsIDEpO1xuICAgICAgc2V0VVYoMTIsIDAsIDApO1xuICAgICAgc2V0VVYoMTUsIDEsIDApO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB2ZXJ0ZXggcG9zaXRpb25zXG4gICAgdmFyIHcyID0gZGF0YS53aWR0aCAvIDI7XG4gICAgdmFyIGgyID0gZGF0YS5oZWlnaHQgLyAyO1xuICAgIHZhciBsZWZ0ID0gLXcyICsgZGF0YS5wYWRkaW5nO1xuICAgIHZhciByaWdodCA9IHcyIC0gZGF0YS5wYWRkaW5nO1xuICAgIHZhciB0b3AgPSBoMiAtIGRhdGEucGFkZGluZztcbiAgICB2YXIgYm90dG9tID0gLWgyICsgZGF0YS5wYWRkaW5nO1xuXG4gICAgc2V0UG9zKDAsIC13MiwgICAgaDIpO1xuICAgIHNldFBvcygxLCBsZWZ0LCAgIGgyKTtcbiAgICBzZXRQb3MoMiwgcmlnaHQsICBoMik7XG4gICAgc2V0UG9zKDMsIHcyLCAgICAgaDIpO1xuXG4gICAgc2V0UG9zKDQsIC13MiwgICAgdG9wKTtcbiAgICBzZXRQb3MoNSwgbGVmdCwgICB0b3ApO1xuICAgIHNldFBvcyg2LCByaWdodCwgIHRvcCk7XG4gICAgc2V0UG9zKDcsIHcyLCAgICAgdG9wKTtcblxuICAgIHNldFBvcyg4LCAtdzIsICAgIGJvdHRvbSk7XG4gICAgc2V0UG9zKDksIGxlZnQsICAgYm90dG9tKTtcbiAgICBzZXRQb3MoMTAsIHJpZ2h0LCBib3R0b20pO1xuICAgIHNldFBvcygxMSwgdzIsICAgIGJvdHRvbSk7XG5cbiAgICBzZXRQb3MoMTMsIGxlZnQsICAtaDIpO1xuICAgIHNldFBvcygxNCwgcmlnaHQsIC1oMik7XG4gICAgc2V0UG9zKDEyLCAtdzIsICAgLWgyKTtcbiAgICBzZXRQb3MoMTUsIHcyLCAgICAtaDIpO1xuXG4gICAgdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMudXYubmVlZHNVcGRhdGUgPSB0cnVlO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKG9sZERhdGEpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgZGlmZjtcblxuICAgIGRpZmYgPSBBRlJBTUUudXRpbHMuZGlmZihkYXRhLCBvbGREYXRhKTtcblxuICAgIC8vIFVwZGF0ZSBtYXRlcmlhbCBpZiB1c2luZyBidWlsdC1pbiBtYXRlcmlhbC5cbiAgICBpZiAoIWRhdGEudXNpbmdDdXN0b21NYXRlcmlhbCkge1xuICAgICAgdGhpcy5tYXRlcmlhbC5jb2xvci5zZXRTdHlsZShkYXRhLmNvbG9yKTtcbiAgICAgIHRoaXMubWF0ZXJpYWwub3BhY2l0eSA9IGRhdGEub3BhY2l0eTtcbiAgICAgIHRoaXMubWF0ZXJpYWwudHJhbnNwYXJlbnQgPSBkYXRhLnRyYW5zcGFyZW50O1xuICAgICAgdGhpcy5tYXRlcmlhbC53aXJlZnJhbWUgPSBkYXRhLmRlYnVnO1xuICAgICAgdGhpcy5tYXRlcmlhbC5zaWRlID0gcGFyc2VTaWRlKGRhdGEuc2lkZSk7XG4gICAgICBpZiAoJ3NyYycgaW4gZGlmZikgeyB0aGlzLnVwZGF0ZU1hcCgpOyB9XG4gICAgfVxuXG4gICAgaWYgKCd3aWR0aCcgaW4gZGlmZiB8fCAnaGVpZ2h0JyBpbiBkaWZmIHx8ICdwYWRkaW5nJyBpbiBkaWZmIHx8ICdsZWZ0JyBpbiBkaWZmIHx8XG4gICAgICAgICd0b3AnIGluIGRpZmYgfHwgJ2JvdHRvbScgaW4gZGlmZiB8fCAncmlnaHQnIGluIGRpZmYpIHtcbiAgICAgIHRoaXMucmVnZW5lcmF0ZU1lc2goKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBgc3JjYCBpZiB1c2luZyBidWlsdC1pbiBtYXRlcmlhbC5cbiAgICovXG4gIHVwZGF0ZU1hcDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBzcmMgPSB0aGlzLmRhdGEuc3JjO1xuXG4gICAgaWYgKHNyYykge1xuICAgICAgaWYgKHNyYyA9PT0gdGhpcy50ZXh0dXJlU3JjKSB7IHJldHVybjsgfVxuICAgICAgLy8gVGV4dHVyZSBhZGRlZCBvciBjaGFuZ2VkLlxuICAgICAgdGhpcy50ZXh0dXJlU3JjID0gc3JjO1xuICAgICAgdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXMubWF0ZXJpYWwubG9hZFRleHR1cmUoc3JjLCB7c3JjOiBzcmN9LCBzZXRNYXAuYmluZCh0aGlzKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVGV4dHVyZSByZW1vdmVkLlxuICAgIGlmICghdGhpcy5tYXRlcmlhbC5tYXApIHsgcmV0dXJuOyB9XG4gICAgc2V0TWFwKG51bGwpO1xuXG4gICAgZnVuY3Rpb24gc2V0TWFwICh0ZXh0dXJlKSB7XG4gICAgICB0aGlzLm1hdGVyaWFsLm1hcCA9IHRleHR1cmU7XG4gICAgICB0aGlzLm1hdGVyaWFsLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVnZW5lcmF0ZU1lc2goKTtcbiAgICB9XG4gIH0sXG5cbn0pO1xuXG5mdW5jdGlvbiBwYXJzZVNpZGUgKHNpZGUpIHtcbiAgc3dpdGNoIChzaWRlKSB7XG4gICAgY2FzZSAnYmFjayc6IHtcbiAgICAgIHJldHVybiBUSFJFRS5CYWNrU2lkZTtcbiAgICB9XG4gICAgY2FzZSAnZG91YmxlJzoge1xuICAgICAgcmV0dXJuIFRIUkVFLkRvdWJsZVNpZGU7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIC8vIEluY2x1ZGluZyBjYXNlIGBmcm9udGAuXG4gICAgICByZXR1cm4gVEhSRUUuRnJvbnRTaWRlO1xuICAgIH1cbiAgfVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FmcmFtZS1zbGljZTktY29tcG9uZW50L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgd3JhcEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS53cmFwQXJyYXk7XG5cbi8vIFNpbmdsZXRvbiBzdGF0ZSBkZWZpbml0aW9uLlxudmFyIFN0YXRlID0ge1xuICBpbml0aWFsU3RhdGU6IHt9LFxuICBoYW5kbGVyczoge30sXG4gIGNvbXB1dGVTdGF0ZTogZnVuY3Rpb24gY29tcHV0ZVN0YXRlKCkgey8qIG5vLW9wICovfVxufTtcblxuQUZSQU1FLnJlZ2lzdGVyU3RhdGUgPSBmdW5jdGlvbiAoZGVmaW5pdGlvbikge1xuICBBRlJBTUUudXRpbHMuZXh0ZW5kKFN0YXRlLCBkZWZpbml0aW9uKTtcbn07XG5cbkFGUkFNRS5yZWdpc3RlclN5c3RlbSgnc3RhdGUnLCB7XG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBrZXk7XG5cbiAgICB0aGlzLmRpZmYgPSB7fTtcbiAgICB0aGlzLnN0YXRlID0gQUZSQU1FLnV0aWxzLmNsb25lKFN0YXRlLmluaXRpYWxTdGF0ZSk7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgdGhpcy5pbml0RXZlbnRIYW5kbGVycygpO1xuXG4gICAgLy8gV3JhcCBhcnJheSB0byBkZXRlY3QgZGlydHkuXG4gICAgZm9yIChrZXkgaW4gdGhpcy5zdGF0ZSkge1xuICAgICAgaWYgKHRoaXMuc3RhdGVba2V5XS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgICAgdGhpcy5zdGF0ZVtrZXldLl9fZGlydHkgPSB0cnVlO1xuICAgICAgICB3cmFwQXJyYXkodGhpcy5zdGF0ZVtrZXldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmxhc3RTdGF0ZSA9IEFGUkFNRS51dGlscy5jbG9uZSh0aGlzLnN0YXRlKTtcblxuICAgIHRoaXMuZXZlbnREZXRhaWwgPSB7XG4gICAgICBsYXN0U3RhdGU6IHRoaXMubGFzdFN0YXRlLFxuICAgICAgc3RhdGU6IHRoaXMuc3RhdGVcbiAgICB9O1xuXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaTtcbiAgICAgIC8vIEluaXRpYWwgZGlzcGF0Y2guXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgX3RoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBfdGhpcy5zdWJzY3JpcHRpb25zW2ldLm9uU3RhdGVVcGRhdGUoX3RoaXMuc3RhdGUsICdAQElOSVQnLCB7fSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoIGFjdGlvbi5cbiAgICovXG4gIGRpc3BhdGNoOiBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb25OYW1lLCBwYXlsb2FkKSB7XG4gICAgdmFyIGk7XG4gICAgdmFyIGtleTtcbiAgICB2YXIgc3Vic2NyaXB0aW9uO1xuXG4gICAgLy8gTW9kaWZ5IHN0YXRlLlxuICAgIFN0YXRlLmhhbmRsZXJzW2FjdGlvbk5hbWVdKHRoaXMuc3RhdGUsIHBheWxvYWQpO1xuXG4gICAgLy8gUG9zdC1jb21wdXRlLlxuICAgIFN0YXRlLmNvbXB1dGVTdGF0ZSh0aGlzLnN0YXRlKTtcblxuICAgIC8vIEdldCBhIGRpZmYgdG8gb3B0aW1pemUgYmluZCB1cGRhdGVzLlxuICAgIGZvciAoa2V5IGluIHRoaXMuZGlmZikge1xuICAgICAgZGVsZXRlIHRoaXMuZGlmZltrZXldO1xuICAgIH1cbiAgICBBRlJBTUUudXRpbHMuZGlmZih0aGlzLmxhc3RTdGF0ZSwgdGhpcy5zdGF0ZSwgdGhpcy5kaWZmKTtcblxuICAgIC8vIE5vdGlmeSBzdWJzY3JpcHRpb25zIC8gYmluZGVycy5cbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zW2ldLm5hbWUgPT09ICdiaW5kLWZvcicpIHtcbiAgICAgICAgLy8gRm9yIGFycmF5cyBhbmQgYmluZC1mb3IsIGNoZWNrIF9fZGlydHkgZmxhZyBvbiBhcnJheSByYXRoZXIgdGhhbiB0aGUgZGlmZi5cbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlW3RoaXMuc3Vic2NyaXB0aW9uc1tpXS5rZXlzVG9XYXRjaFswXV0uX19kaXJ0eSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkVXBkYXRlKHRoaXMuc3Vic2NyaXB0aW9uc1tpXS5rZXlzVG9XYXRjaCwgdGhpcy5kaWZmKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc1tpXS5vblN0YXRlVXBkYXRlKCk7XG4gICAgfVxuXG4gICAgLy8gVW5zZXQgYXJyYXkgZGlydHkuXG4gICAgZm9yIChrZXkgaW4gdGhpcy5zdGF0ZSkge1xuICAgICAgaWYgKHRoaXMuc3RhdGVba2V5XS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgICAgdGhpcy5zdGF0ZVtrZXldLl9fZGlydHkgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdG9yZSBsYXN0IHN0YXRlLlxuICAgIC8vIFRPRE86IGNvcHlTdGF0ZSBtZXNzZXMgd2l0aCB0aGUgZGlmZi5cbiAgICB0aGlzLmNvcHlTdGF0ZSh0aGlzLmxhc3RTdGF0ZSwgdGhpcy5zdGF0ZSk7XG5cbiAgICAvLyBFbWl0LlxuICAgIHRoaXMuZXZlbnREZXRhaWwuYWN0aW9uID0gYWN0aW9uTmFtZTtcbiAgICB0aGlzLmV2ZW50RGV0YWlsLnBheWxvYWQgPSBwYXlsb2FkO1xuICAgIHRoaXMuZWwuZW1pdCgnc3RhdGV1cGRhdGUnLCB0aGlzLmV2ZW50RGV0YWlsKTtcbiAgfSxcblxuICAvKipcbiAgICogU3RvcmUgbGFzdCBzdGF0ZSB0aHJvdWdoIGEgZGVlcCBleHRlbmQsIGJ1dCBub3QgZm9yIGFycmF5cy5cbiAgICovXG4gIGNvcHlTdGF0ZTogZnVuY3Rpb24gY29weVN0YXRlKGxhc3RTdGF0ZSwgc3RhdGUpIHtcbiAgICB2YXIga2V5O1xuXG4gICAgZm9yIChrZXkgaW4gc3RhdGUpIHtcbiAgICAgIC8vIE5lc3RlZCBzdGF0ZS5cbiAgICAgIGlmIChzdGF0ZVtrZXldICYmIHN0YXRlW2tleV0uY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICBpZiAoIShrZXkgaW4gbGFzdFN0YXRlKSkge1xuICAgICAgICAgIC8vIENsb25lIG9iamVjdCBpZiBkZXN0aW5hdGlvbiBkb2VzIG5vdCBleGlzdC5cbiAgICAgICAgICBsYXN0U3RhdGVba2V5XSA9IEFGUkFNRS51dGlscy5jbG9uZShzdGF0ZVtrZXldKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZWN1cnNpdmVseSBjb3B5IHN0YXRlLlxuICAgICAgICB0aGlzLmNvcHlTdGF0ZShsYXN0U3RhdGVba2V5XSwgc3RhdGVba2V5XSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBDb3B5IGJ5IHZhbHVlLlxuICAgICAgbGFzdFN0YXRlW2tleV0gPSBzdGF0ZVtrZXldO1xuICAgIH1cbiAgfSxcblxuICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZShjb21wb25lbnQpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChjb21wb25lbnQpO1xuICB9LFxuXG4gIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiB1bnN1YnNjcmliZShjb21wb25lbnQpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuc3BsaWNlKHRoaXMuc3Vic2NyaXB0aW9ucy5pbmRleE9mKGNvbXBvbmVudCksIDEpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBzdGF0ZSBjaGFuZ2VzIHdlcmUgcmVsZXZhbnQgdG8gdGhpcyBiaW5kaW5nLiBJZiBub3QsIGRvbid0IGNhbGwuXG4gICAqL1xuICBzaG91bGRVcGRhdGU6IGZ1bmN0aW9uIHNob3VsZFVwZGF0ZShrZXlzVG9XYXRjaCwgZGlmZikge1xuICAgIHZhciBzdGF0ZUtleTtcbiAgICBmb3IgKHN0YXRlS2V5IGluIGRpZmYpIHtcbiAgICAgIGlmIChrZXlzVG9XYXRjaC5pbmRleE9mKHN0YXRlS2V5KSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICAvKipcbiAgICogUHJveHkgZXZlbnRzIHRvIGFjdGlvbiBkaXNwYXRjaGVzIHNvIGNvbXBvbmVudHMgY2FuIGp1c3QgYnViYmxlIGFjdGlvbnMgdXAgYXMgZXZlbnRzLlxuICAgKiBIYW5kbGVycyBkZWZpbmUgd2hpY2ggYWN0aW9ucyB0aGV5IGhhbmRsZS4gR28gdGhyb3VnaCBhbGwgYW5kIGFkZCBldmVudCBsaXN0ZW5lcnMuXG4gICAqL1xuICBpbml0RXZlbnRIYW5kbGVyczogZnVuY3Rpb24gaW5pdEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgdmFyIGFjdGlvbk5hbWU7XG4gICAgdmFyIHJlZ2lzdGVyZWRBY3Rpb25zID0gW107XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgcmVnaXN0ZXJMaXN0ZW5lciA9IHJlZ2lzdGVyTGlzdGVuZXIuYmluZCh0aGlzKTtcblxuICAgIC8vIFVzZSBkZWNsYXJlZCBoYW5kbGVycyB0byBrbm93IHdoYXQgZXZlbnRzIHRvIGxpc3RlbiB0by5cbiAgICBmb3IgKGFjdGlvbk5hbWUgaW4gU3RhdGUuaGFuZGxlcnMpIHtcbiAgICAgIC8vIE9ubHkgbmVlZCB0byByZWdpc3RlciBvbmUgaGFuZGxlciBmb3IgZWFjaCBldmVudC5cbiAgICAgIGlmIChyZWdpc3RlcmVkQWN0aW9ucy5pbmRleE9mKGFjdGlvbk5hbWUpICE9PSAtMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJlZ2lzdGVyZWRBY3Rpb25zLnB1c2goYWN0aW9uTmFtZSk7XG4gICAgICByZWdpc3Rlckxpc3RlbmVyKGFjdGlvbk5hbWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyTGlzdGVuZXIoYWN0aW9uTmFtZSkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihhY3Rpb25OYW1lLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIF90aGlzMi5kaXNwYXRjaChhY3Rpb25OYW1lLCBldnQuZGV0YWlsKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVuZGVyIHRlbXBsYXRlIHRvIHN0cmluZyB3aXRoIGl0ZW0gZGF0YS5cbiAgICovXG4gIHJlbmRlclRlbXBsYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gQnJhY2VzLCB3aGl0ZXNwYWNlLCBvcHRpb25hbCBpdGVtIG5hbWUsIGl0ZW0ga2V5LCB3aGl0ZXNwYWNlLCBicmFjZXMuXG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICB2YXIgaW50ZXJwUmVnZXggPSAve3tcXHMqKFxcdypcXC4pPyhbXFx3Ll0rKVxccyp9fS9nO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0ZW1wbGF0ZSwgZGF0YSwgYXNTdHJpbmcpIHtcbiAgICAgIHZhciBtYXRjaDtcbiAgICAgIHZhciBzdHI7XG5cbiAgICAgIHN0ciA9IHRlbXBsYXRlO1xuICAgICAgd2hpbGUgKG1hdGNoID0gaW50ZXJwUmVnZXguZXhlYyh0ZW1wbGF0ZSkpIHtcbiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHNlbGVjdChkYXRhLCBtYXRjaFsyXSkgfHwgJycpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gYXMgc3RyaW5nLlxuICAgICAgaWYgKGFzU3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiBhcyBET00uXG4gICAgICBmcmFnbWVudC5pbm5lckhUTUwgPSBzdHI7XG4gICAgICByZXR1cm4gZnJhZ21lbnQuY29udGVudDtcbiAgICB9O1xuICB9KCksXG5cbiAgc2VsZWN0OiBzZWxlY3Rcbn0pO1xuXG4vKipcbiAqIEJpbmQgY29tcG9uZW50IHByb3BlcnR5IHRvIGEgdmFsdWUgaW4gc3RhdGUuXG4gKlxuICogYmluZD1cImdlb21ldHJ5LndpZHRoOiBjYXIud2lkdGhcIlwiXG4gKiBiaW5kX19tYXRlcmlhbD1cImNvbG9yOiBlbmVteS5jb2xvcjsgb3BhY2l0eTogZW5lbXkub3BhY2l0eVwiXG4gKiBiaW5kX192aXNpYmxlPVwicGxheWVyLnZpc2libGVcIlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2JpbmQnLCB7XG4gIHNjaGVtYToge1xuICAgIGRlZmF1bHQ6IHt9LFxuICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZSh2YWx1ZSkge1xuICAgICAgLy8gUGFyc2Ugc3R5bGUtbGlrZSBvYmplY3QuXG4gICAgICB2YXIgZGF0YTtcbiAgICAgIHZhciBpO1xuICAgICAgdmFyIHByb3BlcnRpZXM7XG4gICAgICB2YXIgcGFpcjtcblxuICAgICAgLy8gVXNpbmcgc2V0QXR0cmlidXRlIHdpdGggb2JqZWN0LCBubyBuZWVkIHRvIHBhcnNlLlxuICAgICAgaWYgKHZhbHVlLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuXG4gICAgICAvLyBVc2luZyBpbnN0YW5jZWQgSUQgYXMgY29tcG9uZW50IG5hbWVzcGFjZSBmb3Igc2luZ2xlLXByb3BlcnR5IGNvbXBvbmVudCxcbiAgICAgIC8vIG5vdGhpbmcgdG8gc2VwYXJhdGUuXG4gICAgICBpZiAodmFsdWUuaW5kZXhPZignOicpID09PSAtMSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhcnNlIHN0eWxlLWxpa2Ugb2JqZWN0IGFzIGtleXMgdG8gdmFsdWVzLlxuICAgICAgZGF0YSA9IHt9O1xuICAgICAgcHJvcGVydGllcyA9IHNwbGl0KHZhbHVlLCAnOycpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcGFpciA9IHNwbGl0KHByb3BlcnRpZXNbaV0udHJpbSgpLCAnOicpO1xuICAgICAgICBkYXRhW3BhaXJbMF1dID0gcGFpclsxXS50cmltKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gIH0sXG5cbiAgbXVsdGlwbGU6IHRydWUsXG5cbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgYmluZEZvckVsO1xuICAgIHZhciBiaW5kRm9yTmFtZTtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIga2V5O1xuXG4gICAgdGhpcy5rZXlzVG9XYXRjaCA9IFtdO1xuICAgIHRoaXMub25TdGF0ZVVwZGF0ZSA9IHRoaXMub25TdGF0ZVVwZGF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc3lzdGVtID0gdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXMuc3RhdGU7XG5cbiAgICAvLyBXaGV0aGVyIHdlIGFyZSBiaW5kaW5nIGJ5IG5hbWVzcGFjZSAoZS5nLiwgYmluZF9fZm9vPVwicHJvcDE6IHRydWVcIikuXG4gICAgdGhpcy5pc05hbWVzcGFjZWRCaW5kID0gdGhpcy5pZCAmJiB0aGlzLmlkIGluIEFGUkFNRS5jb21wb25lbnRzICYmICFBRlJBTUUuY29tcG9uZW50c1t0aGlzLmlkXS5pc1NpbmdsZVByb3AgfHwgdGhpcy5pZCBpbiBBRlJBTUUuc3lzdGVtcztcblxuICAgIHRoaXMubGFzdERhdGEgPSB7fTtcbiAgICB0aGlzLnVwZGF0ZU9iaiA9IHt9O1xuXG4gICAgLy8gU3Vic2NyaWJlIHRvIHN0b3JlIGFuZCByZWdpc3RlciBoYW5kbGVyIHRvIGRvIGRhdGEtYmluZGluZyB0byBjb21wb25lbnRzLlxuICAgIHRoaXMuc3lzdGVtLnN1YnNjcmliZSh0aGlzKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICB2YXIgYmluZEZvckVsO1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIHZhciBrZXk7XG4gICAgdmFyIHByb3BlcnR5O1xuXG4gICAgLy8gSW5kZXggYGtleXNUb1dhdGNoYCB0byBvbmx5IHVwZGF0ZSBzdGF0ZSBvbiByZWxldmFudCBjaGFuZ2VzLlxuICAgIHRoaXMua2V5c1RvV2F0Y2gubGVuZ3RoID0gMDtcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYXJzZUtleXNUb1dhdGNoKHRoaXMua2V5c1RvV2F0Y2gsIGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGtleSBpbiBkYXRhKSB7XG4gICAgICAgIHBhcnNlS2V5c1RvV2F0Y2godGhpcy5rZXlzVG9XYXRjaCwgZGF0YVtrZXldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhbnkgcHJvcGVydGllcyBhcmUgcGFydCBvZiBhbiBpdGVyYXRpb24gaW4gYmluZC1mb3IuXG4gICAgYmluZEZvckVsID0gdGhpcy5lbC5jbG9zZXN0KCdbYmluZC1mb3JdJyk7XG4gICAgaWYgKGJpbmRGb3JFbCkge1xuICAgICAgdGhpcy5iaW5kRm9yID0gYmluZEZvckVsLmdldEF0dHJpYnV0ZSgnYmluZC1mb3InKTtcbiAgICAgIHRoaXMuYmluZEZvcktleSA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWJpbmQtZm9yLWtleScpO1xuICAgICAgdGhpcy5rZXlzVG9XYXRjaC5wdXNoKHRoaXMuYmluZEZvci5pbik7XG4gICAgICBiaW5kRm9yRWwuYWRkRXZlbnRMaXN0ZW5lcignYmluZGZvcnJlbmRlcicsIHRoaXMub25TdGF0ZVVwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5iaW5kRm9yID0gJyc7XG4gICAgICB0aGlzLmJpbmRGb3JLZXkgPSAnJztcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUuXG4gICAgdGhpcy5vblN0YXRlVXBkYXRlKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEhhbmRsZSBzdGF0ZSB1cGRhdGUuXG4gICAqL1xuICBvblN0YXRlVXBkYXRlOiBmdW5jdGlvbiBvblN0YXRlVXBkYXRlKCkge1xuICAgIC8vIFVwZGF0ZSBjb21wb25lbnQgd2l0aCB0aGUgc3RhdGUuXG4gICAgdmFyIGhhc0tleXMgPSBmYWxzZTtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBwcm9wZXJ0eU5hbWU7XG4gICAgdmFyIHN0YXRlU2VsZWN0b3I7XG4gICAgdmFyIHN0YXRlO1xuICAgIHZhciB2YWx1ZTtcblxuICAgIGlmICh0aGlzLmlzTmFtZXNwYWNlZEJpbmQpIHtcbiAgICAgIGNsZWFyT2JqZWN0KHRoaXMudXBkYXRlT2JqKTtcbiAgICB9XG5cbiAgICBzdGF0ZSA9IHRoaXMuc3lzdGVtLnN0YXRlO1xuXG4gICAgLy8gU2luZ2xlLXByb3BlcnR5IGJpbmQuXG4gICAgaWYgKF90eXBlb2YodGhpcy5kYXRhKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhbHVlID0gc2VsZWN0KHN0YXRlLCB0aGlzLmRhdGEsIHRoaXMuYmluZEZvciwgdGhpcy5iaW5kRm9yS2V5KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdbYWZyYW1lLXN0YXRlLWNvbXBvbmVudF0gS2V5IFxcJycgKyB0aGlzLmRhdGEgKyAnXFwnIG5vdCBmb3VuZCBpbiBzdGF0ZS4nICsgKCcgIycgKyB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnaWQnKSArICdbJyArIHRoaXMuYXR0ck5hbWUgKyAnXScpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCAnICYmIF90eXBlb2YodGhpcy5sYXN0RGF0YSkgIT09ICdvYmplY3QnICYmIHRoaXMubGFzdERhdGEgPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgQUZSQU1FLnV0aWxzLmVudGl0eS5zZXRDb21wb25lbnRQcm9wZXJ0eShlbCwgdGhpcy5pZCwgdmFsdWUpO1xuICAgICAgdGhpcy5sYXN0RGF0YSA9IHZhbHVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAocHJvcGVydHlOYW1lIGluIHRoaXMuZGF0YSkge1xuICAgICAgLy8gUG9pbnRlciB0byBhIHZhbHVlIGluIHRoZSBzdGF0ZSAoZS5nLiwgYHBsYXllci5oZWFsdGhgKS5cbiAgICAgIHN0YXRlU2VsZWN0b3IgPSB0aGlzLmRhdGFbcHJvcGVydHlOYW1lXS50cmltKCk7XG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IHNlbGVjdChzdGF0ZSwgc3RhdGVTZWxlY3RvciwgdGhpcy5iaW5kRm9yLCB0aGlzLmJpbmRGb3JLZXkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1thZnJhbWUtc3RhdGUtY29tcG9uZW50XSBLZXkgXFwnJyArIHN0YXRlU2VsZWN0b3IgKyAnXFwnIG5vdCBmb3VuZCBpbiBzdGF0ZS4nICsgKCcgIycgKyB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnaWQnKSArICdbJyArIHRoaXMuYXR0ck5hbWUgKyAnXScpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKSkgIT09ICdvYmplY3QnICYmIF90eXBlb2YodGhpcy5sYXN0RGF0YVtwcm9wZXJ0eU5hbWVdKSAhPT0gJ29iamVjdCcgJiYgdGhpcy5sYXN0RGF0YVtwcm9wZXJ0eU5hbWVdID09PSB2YWx1ZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGNvbXBvbmVudCBpZiB2YWx1ZSBpcyBgdW5kZWZpbmVkYC5cbiAgICAgIGlmIChwcm9wZXJ0eU5hbWUgaW4gQUZSQU1FLmNvbXBvbmVudHMgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUocHJvcGVydHlOYW1lKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdXNpbmcgZG90LWRlbGltaXRlZCBwcm9wZXJ0eSBuYW1lLlxuICAgICAgaWYgKHRoaXMuaXNOYW1lc3BhY2VkQmluZCkge1xuICAgICAgICAvLyBCYXRjaCBpZiBkb2luZyBuYW1lc3BhY2VkIGJpbmQuXG4gICAgICAgIHRoaXMudXBkYXRlT2JqW3Byb3BlcnR5TmFtZV0gPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEFGUkFNRS51dGlscy5lbnRpdHkuc2V0Q29tcG9uZW50UHJvcGVydHkoZWwsIHByb3BlcnR5TmFtZSwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmxhc3REYXRhW3Byb3BlcnR5TmFtZV0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBCYXRjaCBpZiBkb2luZyBuYW1lc3BhY2VkIGJpbmQuXG4gICAgZm9yIChoYXNLZXlzIGluIHRoaXMudXBkYXRlT2JqKSB7XG4gICAgICAvLyBTZWUgaWYgb2JqZWN0IGlzIGVtcHR5LlxuICAgIH1cbiAgICBpZiAodGhpcy5pc05hbWVzcGFjZWRCaW5kICYmIGhhc0tleXMpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSh0aGlzLmlkLCB0aGlzLnVwZGF0ZU9iaik7XG4gICAgfVxuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIHRoaXMuc3lzdGVtLnVuc3Vic2NyaWJlKHRoaXMpO1xuICB9XG59KTtcblxuLyoqXG4gKiBUb2dnbGUgY29tcG9uZW50IGF0dGFjaCBhbmQgZGV0YWNoIGJhc2VkIG9uIGJvb2xlYW4gdmFsdWUuXG4gKlxuICogYmluZF9fcmF5Y2FzdGFibGU9XCJpc1JheWNhc3RhYmxlXCJcIlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2JpbmQtdG9nZ2xlJywge1xuICBzY2hlbWE6IHsgdHlwZTogJ3N0cmluZycgfSxcblxuICBtdWx0aXBsZTogdHJ1ZSxcblxuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMuc3lzdGVtID0gdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXMuc3RhdGU7XG4gICAgdGhpcy5rZXlzVG9XYXRjaCA9IFtdO1xuICAgIHRoaXMub25TdGF0ZVVwZGF0ZSA9IHRoaXMub25TdGF0ZVVwZGF0ZS5iaW5kKHRoaXMpO1xuXG4gICAgLy8gU3Vic2NyaWJlIHRvIHN0b3JlIGFuZCByZWdpc3RlciBoYW5kbGVyIHRvIGRvIGRhdGEtYmluZGluZyB0byBjb21wb25lbnRzLlxuICAgIHRoaXMuc3lzdGVtLnN1YnNjcmliZSh0aGlzKTtcblxuICAgIHRoaXMub25TdGF0ZVVwZGF0ZSgpO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIHRoaXMua2V5c1RvV2F0Y2gubGVuZ3RoID0gMDtcbiAgICBwYXJzZUtleXNUb1dhdGNoKHRoaXMua2V5c1RvV2F0Y2gsIHRoaXMuZGF0YSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEhhbmRsZSBzdGF0ZSB1cGRhdGUuXG4gICAqL1xuICBvblN0YXRlVXBkYXRlOiBmdW5jdGlvbiBvblN0YXRlVXBkYXRlKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIHN0YXRlO1xuICAgIHZhciB2YWx1ZTtcblxuICAgIHN0YXRlID0gdGhpcy5zeXN0ZW0uc3RhdGU7XG5cbiAgICB0cnkge1xuICAgICAgdmFsdWUgPSBzZWxlY3Qoc3RhdGUsIHRoaXMuZGF0YSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdbYWZyYW1lLXN0YXRlLWNvbXBvbmVudF0gS2V5IFxcJycgKyB0aGlzLmRhdGEgKyAnXFwnIG5vdCBmb3VuZCBpbiBzdGF0ZS4nICsgKCcgIycgKyB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnaWQnKSArICdbJyArIHRoaXMuYXR0ck5hbWUgKyAnXScpKTtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSh0aGlzLmlkLCAnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmlkKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgdGhpcy5zeXN0ZW0udW5zdWJzY3JpYmUodGhpcyk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFJlbmRlciBhcnJheSBmcm9tIHN0YXRlLlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2JpbmQtZm9yJywge1xuICBzY2hlbWE6IHtcbiAgICBmb3I6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICBpbjogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgIGtleTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgIHRlbXBsYXRlOiB7IHR5cGU6ICdzdHJpbmcnIH1cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIC8vIFN1YnNjcmliZSB0byBzdG9yZSBhbmQgcmVnaXN0ZXIgaGFuZGxlciB0byBkbyBkYXRhLWJpbmRpbmcgdG8gY29tcG9uZW50cy5cbiAgICB0aGlzLnN5c3RlbSA9IHRoaXMuZWwuc2NlbmVFbC5zeXN0ZW1zLnN0YXRlO1xuICAgIHRoaXMub25TdGF0ZVVwZGF0ZSA9IHRoaXMub25TdGF0ZVVwZGF0ZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5rZXlzVG9XYXRjaCA9IFtdO1xuICAgIHRoaXMucmVuZGVyZWRLZXlzID0gW107IC8vIEtleXMgdGhhdCBhcmUgY3VycmVudGx5IHJlbmRlcmVkLlxuICAgIHRoaXMuc3lzdGVtLnN1YnNjcmliZSh0aGlzKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICB0aGlzLmtleXNUb1dhdGNoWzBdID0gdGhpcy5kYXRhLmluO1xuICAgIGlmICh0aGlzLmVsLmNoaWxkcmVuWzBdICYmIHRoaXMuZWwuY2hpbGRyZW5bMF0udGFnTmFtZSA9PT0gJ1RFTVBMQVRFJykge1xuICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMuZWwuY2hpbGRyZW5bMF0uaW5uZXJIVE1MLnRyaW0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5kYXRhLnRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpO1xuICAgIH1cbiAgICB0aGlzLm9uU3RhdGVVcGRhdGUoKTtcbiAgfSxcblxuICAvKipcbiAgICogSGFuZGxlIHN0YXRlIHVwZGF0ZS5cbiAgICovXG4gIG9uU3RhdGVVcGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIHZhciB0b1JlbW92ZSA9IFtdO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgIHZhciBpO1xuICAgICAgdmFyIGxpc3Q7XG4gICAgICB2YXIga2V5O1xuICAgICAgdmFyIGl0ZW07XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGxpc3QgPSBzZWxlY3QodGhpcy5zeXN0ZW0uc3RhdGUsIGRhdGEuaW4pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1thZnJhbWUtc3RhdGUtY29tcG9uZW50XSBLZXkgXFwnJyArIGRhdGEuaW4gKyAnXFwnIG5vdCBmb3VuZCBpbiBzdGF0ZS4nICsgKCcgIycgKyBlbC5nZXRBdHRyaWJ1dGUoJ2lkJykgKyAnWycgKyB0aGlzLmF0dHJOYW1lICsgJ10nKSk7XG4gICAgICB9XG5cbiAgICAgIGtleXMubGVuZ3RoID0gMDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZW0gPSBsaXN0W2ldO1xuICAgICAgICBrZXlzLnB1c2goaXRlbVtkYXRhLmtleV0pO1xuXG4gICAgICAgIC8vIEFkZCBpdGVtLlxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEtleXMuaW5kZXhPZihpdGVtW2RhdGEua2V5XSkgPT09IC0xKSB7XG4gICAgICAgICAgZWwuYXBwZW5kQ2hpbGQodGhpcy5zeXN0ZW0ucmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgaXRlbSkpO1xuICAgICAgICAgIGVsLmNoaWxkcmVuW2VsLmNoaWxkcmVuLmxlbmd0aCAtIDFdLnNldEF0dHJpYnV0ZSgnZGF0YS1iaW5kLWZvci1rZXknLCBpdGVtW2RhdGEua2V5XSk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlZEtleXMucHVzaChpdGVtW2RhdGEua2V5XSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGl0ZW1zLlxuICAgICAgdG9SZW1vdmUubGVuZ3RoID0gMDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBlbC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZWwuY2hpbGRyZW5baV0udGFnTmFtZSA9PT0gJ1RFTVBMQVRFJykge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGtleSA9IGVsLmNoaWxkcmVuW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1iaW5kLWZvci1rZXknKTtcbiAgICAgICAgaWYgKGtleXMuaW5kZXhPZihrZXkpID09PSAtMSkge1xuICAgICAgICAgIHRvUmVtb3ZlLnB1c2goZWwuY2hpbGRyZW5baV0pO1xuICAgICAgICAgIHRoaXMucmVuZGVyZWRLZXlzLnNwbGljZSh0aGlzLnJlbmRlcmVkS2V5cy5pbmRleE9mKGtleSksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdG9SZW1vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdG9SZW1vdmVbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0b1JlbW92ZVtpXSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSgpXG59KTtcblxudmFyIEFORCA9ICcmJic7XG52YXIgUVVPVEVfUkUgPSAvJy9nO1xudmFyIE9SID0gJ3x8JztcbnZhciBDT01QQVJJU09OUyA9IFsnPT0nLCAnPT09JywgJyE9JywgJyE9PSddO1xudmFyIHRlbXBUb2tlbkFycmF5ID0gW107XG52YXIgdG9rZW5BcnJheSA9IFtdO1xuXG4vKipcbiAqIFNlbGVjdCB2YWx1ZSBmcm9tIHN0b3JlLiBIYW5kbGVzIGJvb2xlYW4gb3BlcmF0aW9ucywgY2FsbHMgYHNlbGVjdFByb3BlcnR5YC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gc3RhdGUgLSBTdGF0ZSBvYmplY3QuXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgLSBEb3QtZGVsaW1pdGVkIHN0b3JlIGtleXMgKGUuZy4sIGdhbWUucGxheWVyLmhlYWx0aCkuXG4gKi9cbmZ1bmN0aW9uIHNlbGVjdChzdGF0ZSwgc2VsZWN0b3IsIGJpbmRGb3IsIGJpbmRGb3JLZXkpIHtcbiAgdmFyIGNvbXBhcmlzb25SZXN1bHQ7XG4gIHZhciBmaXJzdFZhbHVlO1xuICB2YXIgaTtcbiAgdmFyIHJ1bm5pbmdCb29sO1xuICB2YXIgc2Vjb25kVmFsdWU7XG4gIHZhciB0b2tlbnM7XG4gIHZhciB2YWx1ZTtcblxuICAvLyBJZiBqdXN0IHNpbmdsZSBzZWxlY3RvciwgdGhlbiBncmFiIHZhbHVlLlxuICB0b2tlbnMgPSBzcGxpdChzZWxlY3RvciwgL1xccysvKTtcbiAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gc2VsZWN0UHJvcGVydHkoc3RhdGUsIHNlbGVjdG9yLCBiaW5kRm9yLCBiaW5kRm9yS2V5KTtcbiAgfVxuXG4gIC8vIEV2YWx1YXRlIGNvbXBhcmlzb25zLlxuICB0b2tlbkFycmF5Lmxlbmd0aCA9IDA7XG4gIGNvcHlBcnJheSh0ZW1wVG9rZW5BcnJheSwgdG9rZW5zKTtcbiAgZm9yIChpID0gMDsgaSA8IHRlbXBUb2tlbkFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKENPTVBBUklTT05TLmluZGV4T2YodGVtcFRva2VuQXJyYXlbaV0pID09PSAtMSkge1xuICAgICAgdG9rZW5BcnJheS5wdXNoKHRlbXBUb2tlbkFycmF5W2ldKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIENvbXBhcmlzb24gKGNvbG9yID09PSAncmVkJykuXG4gICAgLy8gUG9wIHByZXZpb3VzIHZhbHVlIHNpbmNlIHRoYXQgaXMgb25lIG9mIGNvbXBhcnNpb24gdmFsdWUuXG4gICAgZmlyc3RWYWx1ZSA9IHNlbGVjdFByb3BlcnR5KHN0YXRlLCB0b2tlbkFycmF5LnBvcCgpKTtcbiAgICAvLyBMb29rdXAgc2Vjb25kIHZhbHVlLlxuICAgIHNlY29uZFZhbHVlID0gdGVtcFRva2VuQXJyYXlbaSArIDFdLnJlcGxhY2UoUVVPVEVfUkUsICcnKTtcbiAgICAvLyBFdmFsdWF0ZSAoZXF1YWxzIG9yIG5vdCBlcXVhbHMpLlxuICAgIGNvbXBhcmlzb25SZXN1bHQgPSB0ZW1wVG9rZW5BcnJheVtpXS5pbmRleE9mKCchJykgPT09IC0xID8gZmlyc3RWYWx1ZSA9PT0gc2Vjb25kVmFsdWUgOiBmaXJzdFZhbHVlICE9PSBzZWNvbmRWYWx1ZTtcbiAgICB0b2tlbkFycmF5LnB1c2goY29tcGFyaXNvblJlc3VsdCk7XG4gICAgaSsrO1xuICB9XG5cbiAgLy8gV2FzIHNpbmdsZSBjb21wYXJpc29uLlxuICBpZiAodG9rZW5BcnJheS5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gdG9rZW5BcnJheVswXTtcbiAgfVxuXG4gIC8vIElmIGhhcyBib29sZWFuIGV4cHJlc3Npb24sIGV2YWx1YXRlLlxuICBydW5uaW5nQm9vbCA9IHRva2VuQXJyYXlbMF0uY29uc3RydWN0b3IgPT09IEJvb2xlYW4gPyB0b2tlbkFycmF5WzBdIDogc2VsZWN0UHJvcGVydHkoc3RhdGUsIHRva2VuQXJyYXlbMF0sIGJpbmRGb3IsIGJpbmRGb3JLZXkpO1xuICBmb3IgKGkgPSAxOyBpIDwgdG9rZW5BcnJheS5sZW5ndGg7IGkgKz0gMikge1xuICAgIGlmICh0b2tlbkFycmF5W2ldICE9PSBPUiAmJiB0b2tlbkFycmF5W2ldICE9PSBBTkQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBDaGVjayBpZiB3YXMgZXZhbHVhdGVkIGNvbXBhcmlzb24gKGJvb2wpIG9yIGEgc2VsZWN0b3IgKHN0cmluZykuXG4gICAgdG9rZW5BcnJheVtpICsgMV0gPSB0b2tlbkFycmF5W2kgKyAxXS5jb25zdHJ1Y3RvciA9PT0gQm9vbGVhbiA/IHRva2VuQXJyYXlbaSArIDFdIDogc2VsZWN0UHJvcGVydHkoc3RhdGUsIHRva2VuQXJyYXlbaSArIDFdKTtcblxuICAgIC8vIEV2YWx1YXRlIGJvb2xlYW4uXG4gICAgaWYgKHRva2VuQXJyYXlbaV0gPT09IE9SKSB7XG4gICAgICBydW5uaW5nQm9vbCA9IHJ1bm5pbmdCb29sIHx8IHRva2VuQXJyYXlbaSArIDFdO1xuICAgIH0gZWxzZSBpZiAodG9rZW5BcnJheVtpXSA9PT0gQU5EKSB7XG4gICAgICBydW5uaW5nQm9vbCA9IHJ1bm5pbmdCb29sICYmIHRva2VuQXJyYXlbaSArIDFdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcnVubmluZ0Jvb2w7XG59XG5cbi8qKlxuICogRG9lcyBhY3R1YWwgc2VsZWN0aW5nIGFuZCB3YWxraW5nIG9mIHN0YXRlLlxuICovXG5mdW5jdGlvbiBzZWxlY3RQcm9wZXJ0eShzdGF0ZSwgc2VsZWN0b3IsIGJpbmRGb3IsIGJpbmRGb3JLZXkpIHtcbiAgdmFyIGk7XG4gIHZhciBvcmlnaW5hbFNlbGVjdG9yO1xuICB2YXIgc3BsaXR0ZWQ7XG4gIHZhciB2YWx1ZTtcblxuICAvLyBJZiBiaW5kRm9yLCBzZWxlY3QgdGhlIGFycmF5LiBUaGVuIGxhdGVyLCB3ZSBmaWx0ZXIgdGhlIGFycmF5LlxuICBpZiAoYmluZEZvciAmJiBzZWxlY3Rvci5zdGFydHNXaXRoKGJpbmRGb3IuZm9yKSkge1xuICAgIG9yaWdpbmFsU2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICBzZWxlY3RvciA9IGJpbmRGb3IuaW47XG4gIH1cblxuICAvLyBXYWxrLlxuICB2YWx1ZSA9IHN0YXRlO1xuICBzcGxpdHRlZCA9IHNwbGl0KHN0cmlwTm90KHNlbGVjdG9yKSwgJy4nKTtcbiAgZm9yIChpID0gMDsgaSA8IHNwbGl0dGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFsdWUgPSB2YWx1ZVtzcGxpdHRlZFtpXV07XG4gIH1cblxuICBpZiAoYmluZEZvcikge1xuICAgIGZvciAoaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlW2ldW2JpbmRGb3Iua2V5XSAhPT0gYmluZEZvcktleSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gc2VsZWN0UHJvcGVydHkodmFsdWVbaV0sIG9yaWdpbmFsU2VsZWN0b3IucmVwbGFjZShiaW5kRm9yLmZvciArICcuJywgJycpKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIEJvb2xlYW4uXG4gIGlmIChzZWxlY3RvclswXSA9PT0gJyEnICYmIHNlbGVjdG9yWzFdID09PSAnIScpIHtcbiAgICByZXR1cm4gISF2YWx1ZTtcbiAgfVxuICBpZiAoc2VsZWN0b3JbMF0gPT09ICchJykge1xuICAgIHJldHVybiAhdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBjbGVhck9iamVjdChvYmopIHtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGRlbGV0ZSBvYmpba2V5XTtcbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBjb21wb3NlIG9iamVjdCBvZiBoYW5kbGVycywgbWVyZ2luZyBmdW5jdGlvbnMgaGFuZGxpbmcgc2FtZSBhY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNvbXBvc2VIYW5kbGVycygpIHtcbiAgdmFyIGFjdGlvbk5hbWU7XG4gIHZhciBpO1xuICB2YXIgaW5wdXRIYW5kbGVycyA9IGFyZ3VtZW50cztcbiAgdmFyIG91dHB1dEhhbmRsZXJzO1xuXG4gIG91dHB1dEhhbmRsZXJzID0ge307XG4gIGZvciAoaSA9IDA7IGkgPCBpbnB1dEhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChhY3Rpb25OYW1lIGluIGlucHV0SGFuZGxlcnNbaV0pIHtcbiAgICAgIGlmIChhY3Rpb25OYW1lIGluIG91dHB1dEhhbmRsZXJzKSB7XG4gICAgICAgIC8vIEluaXRpYWwgY29tcG9zZS9tZXJnZSBmdW5jdGlvbnMgaW50byBhcnJheXMuXG4gICAgICAgIGlmIChvdXRwdXRIYW5kbGVyc1thY3Rpb25OYW1lXS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgICAgICBvdXRwdXRIYW5kbGVyc1thY3Rpb25OYW1lXS5wdXNoKGlucHV0SGFuZGxlcnNbaV1bYWN0aW9uTmFtZV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dHB1dEhhbmRsZXJzW2FjdGlvbk5hbWVdID0gW291dHB1dEhhbmRsZXJzW2FjdGlvbk5hbWVdLCBpbnB1dEhhbmRsZXJzW2ldW2FjdGlvbk5hbWVdXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0SGFuZGxlcnNbYWN0aW9uTmFtZV0gPSBpbnB1dEhhbmRsZXJzW2ldW2FjdGlvbk5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIENvbXBvc2UgZnVuY3Rpb25zIHNwZWNpZmllZCB2aWEgYXJyYXkuXG4gIGZvciAoYWN0aW9uTmFtZSBpbiBvdXRwdXRIYW5kbGVycykge1xuICAgIGlmIChvdXRwdXRIYW5kbGVyc1thY3Rpb25OYW1lXS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIG91dHB1dEhhbmRsZXJzW2FjdGlvbk5hbWVdID0gY29tcG9zZUZ1bmN0aW9ucy5hcHBseSh0aGlzLCBvdXRwdXRIYW5kbGVyc1thY3Rpb25OYW1lXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dHB1dEhhbmRsZXJzO1xufVxubW9kdWxlLmV4cG9ydHMuY29tcG9zZUhhbmRsZXJzID0gY29tcG9zZUhhbmRsZXJzO1xuXG5mdW5jdGlvbiBjb21wb3NlRnVuY3Rpb25zKCkge1xuICB2YXIgZnVuY3Rpb25zID0gYXJndW1lbnRzO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBmdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZ1bmN0aW9uc1tpXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfTtcbn1cbm1vZHVsZS5leHBvcnRzLmNvbXBvc2VGdW5jdGlvbnMgPSBjb21wb3NlRnVuY3Rpb25zO1xuXG52YXIgTk9fV0FUQ0hfVE9LRU5TID0gWyd8fCcsICcmJicsICchPScsICchPT0nLCAnPT0nLCAnPT09J107XG5mdW5jdGlvbiBwYXJzZUtleXNUb1dhdGNoKGtleXMsIHN0cikge1xuICB2YXIgaTtcbiAgdmFyIHRva2VucztcbiAgdG9rZW5zID0gc3RyLnNwbGl0KC9cXHMrLyk7XG4gIGZvciAoaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoTk9fV0FUQ0hfVE9LRU5TLmluZGV4T2YodG9rZW5zW2ldKSA9PT0gLTEgJiYgIXRva2Vuc1tpXS5zdGFydHNXaXRoKFwiJ1wiKSAmJiBrZXlzLmluZGV4T2YodG9rZW5zW2ldKSA9PT0gLTEpIHtcbiAgICAgIGtleXMucHVzaChwYXJzZUtleVRvV2F0Y2godG9rZW5zW2ldKSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlS2V5VG9XYXRjaChzdHIpIHtcbiAgdmFyIGRvdEluZGV4O1xuICBzdHIgPSBzdHJpcE5vdChzdHIudHJpbSgpKTtcbiAgZG90SW5kZXggPSBzdHIuaW5kZXhPZignLicpO1xuICBpZiAoZG90SW5kZXggPT09IC0xKSB7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCBzdHIuaW5kZXhPZignLicpKTtcbn1cblxuZnVuY3Rpb24gc3RyaXBOb3Qoc3RyKSB7XG4gIGlmIChzdHIuaW5kZXhPZignISEnKSA9PT0gMCkge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgnISEnLCAnJyk7XG4gIH0gZWxzZSBpZiAoc3RyLmluZGV4T2YoJyEnKSA9PT0gMCkge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgnIScsICcnKTtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuXG4vKipcbiAqIENhY2hlZCBzcGxpdC5cbiAqL1xudmFyIFNQTElUX0NBQ0hFID0ge307XG5mdW5jdGlvbiBzcGxpdChzdHIsIGRlbGltaXRlcikge1xuICBpZiAoIVNQTElUX0NBQ0hFW2RlbGltaXRlcl0pIHtcbiAgICBTUExJVF9DQUNIRVtkZWxpbWl0ZXJdID0ge307XG4gIH1cbiAgaWYgKFNQTElUX0NBQ0hFW2RlbGltaXRlcl1bc3RyXSkge1xuICAgIHJldHVybiBTUExJVF9DQUNIRVtkZWxpbWl0ZXJdW3N0cl07XG4gIH1cbiAgU1BMSVRfQ0FDSEVbZGVsaW1pdGVyXVtzdHJdID0gc3RyLnNwbGl0KGRlbGltaXRlcik7XG4gIHJldHVybiBTUExJVF9DQUNIRVtkZWxpbWl0ZXJdW3N0cl07XG59XG5cbmZ1bmN0aW9uIGNvcHlBcnJheShkZXN0LCBzcmMpIHtcbiAgdmFyIGk7XG4gIGRlc3QubGVuZ3RoID0gMDtcbiAgZm9yIChpID0gMDsgaSA8IHNyYy5sZW5ndGg7IGkrKykge1xuICAgIGRlc3RbaV0gPSBzcmNbaV07XG4gIH1cbn1cblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBmbnMgPSBbJ3B1c2gnLCAncG9wJywgJ3NoaWZ0JywgJ3Vuc2hpZnQnLCAnc3BsaWNlJ107XG5cbmZ1bmN0aW9uIHdyYXBBcnJheShhcnIpIHtcbiAgdmFyIGk7XG4gIGlmIChhcnIuX193cmFwcGVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZvciAoaSA9IDA7IGkgPCBmbnMubGVuZ3RoOyBpKyspIHtcbiAgICBtYWtlQ2FsbERpcnR5KGFyciwgZm5zW2ldKTtcbiAgfVxuICBhcnIuX193cmFwcGVkID0gdHJ1ZTtcbn1cbm1vZHVsZS5leHBvcnRzLndyYXBBcnJheSA9IHdyYXBBcnJheTtcblxuZnVuY3Rpb24gbWFrZUNhbGxEaXJ0eShhcnIsIGZuKSB7XG4gIHZhciBvcmlnaW5hbEZuID0gYXJyW2ZuXTtcbiAgYXJyW2ZuXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBvcmlnaW5hbEZuLmFwcGx5KGFyciwgYXJndW1lbnRzKTtcbiAgICBhcnIuX19kaXJ0eSA9IHRydWU7XG4gIH07XG59XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9hZnJhbWUtc3RhdGUtY29tcG9uZW50L2Rpc3QvYWZyYW1lLXN0YXRlLWNvbXBvbmVudC5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBbe1wiZG9tYWluXCI6XCJ3d3cuc2hhZGVydG95LmNvbVwiLFwiaW5qZWN0U2NyaXB0XCI6XCJpbmplY3RTY3JpcHRzL3NoYWRlcnRveS5qc1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiI215VlJcIiwxMDAwXV19LHtcImRvbWFpblwiOlwic2tldGNoZmFiLmNvbVwiLFwiaW5qZWN0U2NyaXB0XCI6XCJpbmplY3RTY3JpcHRzL3NrZXRjaGZhYi5qc1wiLFwiZW50ZXJ2clwiOltbXCJjbGlja1wiLFwiLnZpZXdlclwiLDUwMF0sW1wiY2xpY2tcIixcIi5jb250cm9sLnZyXCIsNTAwXV0sXCJ3YWl0Rm9yV2ViVlJSZWFkeVwiOnRydWUsXCJhdWRpb1wiOltcImRlZmF1bHRcIiwwLjVdfSx7XCJkb21haW5cIjpcInZycG9ybi5jb21cIixcImluamVjdFNjcmlwdFwiOlwiaW5qZWN0U2NyaXB0cy9kZWxpZ2h0dmlkZW8uanNcIixcIndhaXRGb3JXZWJWUlJlYWR5XCI6dHJ1ZX0se1wiZG9tYWluXCI6XCJteS5tYXR0ZXJwb3J0LmNvbVwiLFwiaW5qZWN0U2NyaXB0XCI6XCJpbmplY3RTY3JpcHRzL21hdHRlcnBvcnQuanNcIixcIndhaXRGb3JXZWJWUlJlYWR5XCI6dHJ1ZSxcImVudGVydnJcIjpbW1wiY2xpY2tcIixcImJvZHlcIiw1MDBdLFtcImNsaWNrXCIsXCJ3aW5kb3dcIiw1MDBdLFtcImNsaWNrXCIsXCJjYW52YXNcIiw1MDBdLFtcImNsaWNrXCIsXCIjcGxheWVyXCIsNTAwXV0sXCJhdWRpb1wiOltcImRlZmF1bHRcIiwwLjVdfSx7XCJkb21haW5cIjpcInBhdGNoZXMudml6b3IuaW9cIixcImVudGVydnJcIjpbW1wiY2xpY2tcIixcIiNlbnRlcnZyXCIsMjAwXV0sXCJpbmplY3RTY3JpcHRcIjpcImluamVjdFNjcmlwdHMvdml6b3IuanNcIixcIndhaXRGb3JXZWJWUlJlYWR5XCI6dHJ1ZX1dXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3dpbGRTaXRlRGF0YS5qc29uIiwiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3QvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHQoZnVuY3Rpb24gKCkge1xuXHQgIGlmICghQUZSQU1FKSB7XG5cdCAgICByZXR1cm4gY29uc29sZS5lcnJvcignQUZSQU1FIGlzIHJlcXVpcmVkIScpO1xuXHQgIH1cblx0ICBpZiAoIUFGUkFNRS5BU1NFVFNfUEFUSCkge1xuXHQgICAgQUZSQU1FLkFTU0VUU19QQVRIID0gXCIuL2Fzc2V0c1wiO1xuXHQgIH1cblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdCAgLy9yZXF1aXJlKFwiLi9hbGVydFwiKTsgQFRPRE8gOylcblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR9KSgpO1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQhZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShpKXtpZihhW2ldKXJldHVybiBhW2ldLmV4cG9ydHM7dmFyIGQ9YVtpXT17ZXhwb3J0czp7fSxpZDppLGxvYWRlZDohMX07cmV0dXJuIHRbaV0uY2FsbChkLmV4cG9ydHMsZCxkLmV4cG9ydHMsZSksZC5sb2FkZWQ9ITAsZC5leHBvcnRzfXZhciBhPXt9O3JldHVybiBlLm09dCxlLmM9YSxlLnA9XCJcIixlKDApfShbZnVuY3Rpb24odCxlKXtBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJyb3VuZGVkXCIse3NjaGVtYTp7ZW5hYmxlZDp7ZGVmYXVsdDohMH0sd2lkdGg6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjF9LGhlaWdodDp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6MX0scmFkaXVzOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDouM30sdG9wTGVmdFJhZGl1czp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6LTF9LHRvcFJpZ2h0UmFkaXVzOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDotMX0sYm90dG9tTGVmdFJhZGl1czp7dHlwZTpcIm51bWJlclwiLGRlZmF1bHQ6LTF9LGJvdHRvbVJpZ2h0UmFkaXVzOnt0eXBlOlwibnVtYmVyXCIsZGVmYXVsdDotMX0sY29sb3I6e3R5cGU6XCJjb2xvclwiLGRlZmF1bHQ6XCIjRjBGMEYwXCJ9LG9wYWNpdHk6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0OjF9fSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5yb3VuZGVkPW5ldyBUSFJFRS5NZXNoKHRoaXMuZHJhdygpLG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7Y29sb3I6bmV3IFRIUkVFLkNvbG9yKHRoaXMuZGF0YS5jb2xvciksc2lkZTpUSFJFRS5Eb3VibGVTaWRlfSkpLHRoaXMudXBkYXRlT3BhY2l0eSgpLHRoaXMuZWwuc2V0T2JqZWN0M0QoXCJtZXNoXCIsdGhpcy5yb3VuZGVkKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5kYXRhLmVuYWJsZWQ/dGhpcy5yb3VuZGVkJiYodGhpcy5yb3VuZGVkLnZpc2libGU9ITAsdGhpcy5yb3VuZGVkLmdlb21ldHJ5PXRoaXMuZHJhdygpLHRoaXMucm91bmRlZC5tYXRlcmlhbC5jb2xvcj1uZXcgVEhSRUUuQ29sb3IodGhpcy5kYXRhLmNvbG9yKSx0aGlzLnVwZGF0ZU9wYWNpdHkoKSk6dGhpcy5yb3VuZGVkLnZpc2libGU9ITF9LHVwZGF0ZU9wYWNpdHk6ZnVuY3Rpb24oKXt0aGlzLmRhdGEub3BhY2l0eTwwJiYodGhpcy5kYXRhLm9wYWNpdHk9MCksdGhpcy5kYXRhLm9wYWNpdHk+MSYmKHRoaXMuZGF0YS5vcGFjaXR5PTEpLHRoaXMuZGF0YS5vcGFjaXR5PDE/dGhpcy5yb3VuZGVkLm1hdGVyaWFsLnRyYW5zcGFyZW50PSEwOnRoaXMucm91bmRlZC5tYXRlcmlhbC50cmFuc3BhcmVudD0hMSx0aGlzLnJvdW5kZWQubWF0ZXJpYWwub3BhY2l0eT10aGlzLmRhdGEub3BhY2l0eX0sdGljazpmdW5jdGlvbigpe30scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5yb3VuZGVkJiYodGhpcy5lbC5vYmplY3QzRC5yZW1vdmUodGhpcy5yb3VuZGVkKSx0aGlzLnJvdW5kZWQ9bnVsbCl9LGRyYXc6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxhLGksZCxvLHUscixzKXtvfHwobz0xZS01KSx1fHwodT0xZS01KSxyfHwocj0xZS01KSxzfHwocz0xZS01KSx0Lm1vdmVUbyhlLGErbyksdC5saW5lVG8oZSxhK2QtbyksdC5xdWFkcmF0aWNDdXJ2ZVRvKGUsYStkLGUrbyxhK2QpLHQubGluZVRvKGUraS11LGErZCksdC5xdWFkcmF0aWNDdXJ2ZVRvKGUraSxhK2QsZStpLGErZC11KSx0LmxpbmVUbyhlK2ksYStzKSx0LnF1YWRyYXRpY0N1cnZlVG8oZStpLGEsZStpLXMsYSksdC5saW5lVG8oZStyLGEpLHQucXVhZHJhdGljQ3VydmVUbyhlLGEsZSxhK3IpfXZhciBlPW5ldyBUSFJFRS5TaGFwZSxhPVt0aGlzLmRhdGEucmFkaXVzLHRoaXMuZGF0YS5yYWRpdXMsdGhpcy5kYXRhLnJhZGl1cyx0aGlzLmRhdGEucmFkaXVzXTtyZXR1cm4gdGhpcy5kYXRhLnRvcExlZnRSYWRpdXMhPS0xJiYoYVswXT10aGlzLmRhdGEudG9wTGVmdFJhZGl1cyksdGhpcy5kYXRhLnRvcFJpZ2h0UmFkaXVzIT0tMSYmKGFbMV09dGhpcy5kYXRhLnRvcFJpZ2h0UmFkaXVzKSx0aGlzLmRhdGEuYm90dG9tTGVmdFJhZGl1cyE9LTEmJihhWzJdPXRoaXMuZGF0YS5ib3R0b21MZWZ0UmFkaXVzKSx0aGlzLmRhdGEuYm90dG9tUmlnaHRSYWRpdXMhPS0xJiYoYVszXT10aGlzLmRhdGEuYm90dG9tUmlnaHRSYWRpdXMpLHQoZSwwLDAsdGhpcy5kYXRhLndpZHRoLHRoaXMuZGF0YS5oZWlnaHQsYVswXSxhWzFdLGFbMl0sYVszXSksbmV3IFRIUkVFLlNoYXBlQnVmZmVyR2VvbWV0cnkoZSl9LHBhdXNlOmZ1bmN0aW9uKCl7fSxwbGF5OmZ1bmN0aW9uKCl7fX0pLEFGUkFNRS5yZWdpc3RlclByaW1pdGl2ZShcImEtcm91bmRlZFwiLHtkZWZhdWx0Q29tcG9uZW50czp7cm91bmRlZDp7fX0sbWFwcGluZ3M6e2VuYWJsZWQ6XCJyb3VuZGVkLmVuYWJsZWRcIix3aWR0aDpcInJvdW5kZWQud2lkdGhcIixoZWlnaHQ6XCJyb3VuZGVkLmhlaWdodFwiLHJhZGl1czpcInJvdW5kZWQucmFkaXVzXCIsXCJ0b3AtbGVmdC1yYWRpdXNcIjpcInJvdW5kZWQudG9wTGVmdFJhZGl1c1wiLFwidG9wLXJpZ2h0LXJhZGl1c1wiOlwicm91bmRlZC50b3BSaWdodFJhZGl1c1wiLFwiYm90dG9tLWxlZnQtcmFkaXVzXCI6XCJyb3VuZGVkLmJvdHRvbUxlZnRSYWRpdXNcIixcImJvdHRvbS1yaWdodC1yYWRpdXNcIjpcInJvdW5kZWQuYm90dG9tUmlnaHRSYWRpdXNcIixjb2xvcjpcInJvdW5kZWQuY29sb3JcIixvcGFjaXR5Olwicm91bmRlZC5vcGFjaXR5XCJ9fSl9XSk7XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG5cdHZhciBvcGFjaXR5VXBkYXRlID0gZnVuY3Rpb24gb3BhY2l0eVVwZGF0ZShvcGFjaXR5KSB7XG5cdCAgdGhpcy5lbC5vYmplY3QzRC50cmF2ZXJzZShmdW5jdGlvbiAobykge1xuXHQgICAgaWYgKG8ubWF0ZXJpYWwpIHtcblx0ICAgICAgby5tYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7XG5cdCAgICAgIG8ubWF0ZXJpYWwub3BhY2l0eSA9IG9wYWNpdHk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuXHQgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuXHQgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuXHQgIHRyeSB7XG5cdCAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLnRleHRFbnRpdGllc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcblx0ICAgICAgdmFyIHRleHQgPSBfc3RlcC52YWx1ZTtcblxuXHQgICAgICBpZiAoIXRleHQuY29tcG9uZW50cy50ZXh0KSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgdGV4dC5jb21wb25lbnRzLnRleHQubWF0ZXJpYWwudW5pZm9ybXMub3BhY2l0eS52YWx1ZSA9IG9wYWNpdHk7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG5cdCAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcblx0ICB9IGZpbmFsbHkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcblx0ICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZmluYWxseSB7XG5cdCAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuXHQgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIEZBREVJTlxuXG5cdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZmFkZWluJywge1xuXHQgIHNjaGVtYToge1xuXHQgICAgZHVyYXRpb246IHsgdHlwZTogJ2ludCcsIGRlZmF1bHQ6IDIwMCB9XG5cdCAgfSxcblx0ICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgdGhpcy50ZXh0RW50aXRpZXMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EtdGV4dCcpO1xuXHQgICAgdGhpcy5vcGFjaXR5VXBkYXRlKDApO1xuXHQgICAgdGhpcy5zdGFydCA9IG51bGw7XG5cdCAgfSxcblx0ICB0aWNrOiBmdW5jdGlvbiB0aWNrKHQpIHtcblx0ICAgIGlmICghdGhpcy5zdGFydCkge1xuXHQgICAgICB0aGlzLnN0YXJ0ID0gdDtcblx0ICAgIH1cblx0ICAgIHZhciBvcGFjaXR5ID0gTWF0aC5taW4oKHQgLSB0aGlzLnN0YXJ0KSAvIHRoaXMuZGF0YS5kdXJhdGlvbiwgMSk7XG5cdCAgICB0aGlzLm9wYWNpdHlVcGRhdGUob3BhY2l0eSk7XG5cdCAgICBpZiAob3BhY2l0eSA9PT0gMSkge1xuXHQgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnZmFkZWluJyk7XG5cdCAgICAgIEV2ZW50LmVtaXQodGhpcy5lbCwgJ2FuaW1hdGlvbmVuZCcpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgb3BhY2l0eVVwZGF0ZTogb3BhY2l0eVVwZGF0ZVxuXHR9KTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBGQURFT1VUXG5cblx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdmYWRlb3V0Jywge1xuXHQgIHNjaGVtYToge1xuXHQgICAgZHVyYXRpb246IHsgdHlwZTogJ2ludCcsIGRlZmF1bHQ6IDIwMCB9XG5cdCAgfSxcblx0ICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgdGhpcy50ZXh0RW50aXRpZXMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EtdGV4dCcpO1xuXHQgICAgdGhpcy5vcGFjaXR5VXBkYXRlKDEpO1xuXHQgICAgdGhpcy5zdGFydCA9IG51bGw7XG5cdCAgfSxcblx0ICB0aWNrOiBmdW5jdGlvbiB0aWNrKHQpIHtcblx0ICAgIGlmICghdGhpcy5zdGFydCkge1xuXHQgICAgICB0aGlzLnN0YXJ0ID0gdDtcblx0ICAgIH1cblx0ICAgIHZhciBvcGFjaXR5ID0gMSAtIE1hdGgubWluKCh0IC0gdGhpcy5zdGFydCkgLyB0aGlzLmRhdGEuZHVyYXRpb24sIDEpO1xuXHQgICAgdGhpcy5vcGFjaXR5VXBkYXRlKG9wYWNpdHkpO1xuXHQgICAgaWYgKG9wYWNpdHkgPT09IDApIHtcblx0ICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2ZhZGVvdXQnKTtcblx0ICAgICAgRXZlbnQuZW1pdCh0aGlzLmVsLCAnYW5pbWF0aW9uZW5kJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBvcGFjaXR5VXBkYXRlOiBvcGFjaXR5VXBkYXRlXG5cdH0pO1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIFNIT1dcblxuXHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3Nob3cnLCB7XG5cdCAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIHRoaXMudGV4dEVudGl0aWVzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdhLXRleHQnKTtcblx0ICAgIHRoaXMub3BhY2l0eVVwZGF0ZSgxKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuXHQgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnc2hvdycpO1xuICAgICAgfSwgMTAwKTtcblx0ICB9LFxuXHQgIG9wYWNpdHlVcGRhdGU6IG9wYWNpdHlVcGRhdGVcblx0fSk7XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gSElERVxuXG5cdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnaGlkZScsIHtcblx0ICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgdGhpcy50ZXh0RW50aXRpZXMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EtdGV4dCcpO1xuXHQgICAgdGhpcy5vcGFjaXR5VXBkYXRlKDApO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG5cdCAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdoaWRlJyk7XG4gICAgICB9LCAxMDApO1xuXHQgIH0sXG5cdCAgb3BhY2l0eVVwZGF0ZTogb3BhY2l0eVVwZGF0ZVxuXHR9KTtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgZW1pdDogZnVuY3Rpb24gZW1pdChlbCwgbmFtZSwgZGF0YSkge1xuXHQgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQobmFtZSwgeyBkZXRhaWw6IGRhdGEgfSkpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdHZhciBEcmF3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIEJlaGF2aW9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgU0ZYID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cblx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdrZXlib2FyZCcsIHtcblx0ICBzY2hlbWE6IHtcblx0ICAgIGlzT3BlbjogeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogZmFsc2UgfSxcblx0ICAgIHBoeXNpY2FsS2V5Ym9hcmQ6IHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlIH1cblx0ICB9LFxuXHQgIGN1cnJlbnRJbnB1dDogbnVsbCxcblx0ICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG5cdCAgICAvLyBTRlhcblx0ICAgIFNGWC5pbml0KHRoaXMuZWwpO1xuXG5cdCAgICAvLyBEcmF3XG5cdCAgICBEcmF3LmluaXQodGhpcy5lbCk7XG5cblx0ICAgIC8vIEluaXQga2V5Ym9hcmQgVUlcblx0ICAgIHZhciBudW1lcmljYWxVSSA9IERyYXcubnVtZXJpY2FsVUkoKSxcblx0ICAgICAgICBtYWluVUkgPSBEcmF3Lm1haW5VSSgpLFxuXHQgICAgICAgIGFjdGlvbnNVSSA9IERyYXcuYWN0aW9uc1VJKCk7XG5cblx0ICAgIC8vIENyZWF0ZSBsYXlvdXRcblx0ICAgIHRoaXMuZWwuYWxwaGFiZXRpY2FsTGF5b3V0ID0gRHJhdy5hbHBoYWJldGljYWxMYXlvdXQoKTtcblx0ICAgIC8vIHRoaXMuZWwuc3ltYm9sc0xheW91dCA9IERyYXcuc3ltYm9sc0xheW91dCgpO1xuXG5cdCAgICAvLyBBcHBlbmQgbGF5b3V0cyB0byBVSVxuXHQgICAgbnVtZXJpY2FsVUkuYXBwZW5kQ2hpbGQoRHJhdy5udW1lcmljYWxMYXlvdXQoKSk7XG5cdCAgICBtYWluVUkuYXBwZW5kQ2hpbGQodGhpcy5lbC5hbHBoYWJldGljYWxMYXlvdXQpO1xuXHQgICAgYWN0aW9uc1VJLmFwcGVuZENoaWxkKERyYXcuYWN0aW9uc0xheW91dCgpKTtcblxuXHQgICAgdGhpcy5lbC5hcHBlbmRDaGlsZChudW1lcmljYWxVSSk7XG5cdCAgICB0aGlzLmVsLmFwcGVuZENoaWxkKG1haW5VSSk7XG5cdCAgICB0aGlzLmVsLmFwcGVuZENoaWxkKGFjdGlvbnNVSSk7XG5cblx0ICAgIC8vIEluamVjdCBtZXRob2RzIGluIGVsZW1lbnRzLi5cblx0ICAgIHRoaXMuZWwuc2hvdyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgQmVoYXZpb3JzLnNob3dLZXlib2FyZCh0aGF0LmVsKTtcblx0ICAgIH07XG5cdCAgICB0aGlzLmVsLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIEJlaGF2aW9ycy5oaWRlS2V5Ym9hcmQodGhhdC5lbCk7XG5cdCAgICB9O1xuXHQgICAgdGhpcy5lbC5vcGVuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBCZWhhdmlvcnMub3BlbktleWJvYXJkKHRoYXQuZWwpO1xuXHQgICAgfTtcblx0ICAgIHRoaXMuZWwuZGlzbWlzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgQmVoYXZpb3JzLmRpc21pc3NLZXlib2FyZCh0aGF0LmVsKTtcblx0ICAgIH07XG5cdCAgICB0aGlzLmVsLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIEJlaGF2aW9ycy5kZXN0cm95S2V5Ym9hcmQodGhhdC5lbCk7XG5cdCAgICB9O1xuXG5cdCAgICAvLyBTZXQgZGVmYXVsdCB2YWx1ZVxuXHQgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJzY2FsZVwiLCBcIjIgMiAyXCIpO1xuXHQgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJyb3RhdGlvblwiLCBcIi0yMCAwIDBcIik7XG5cdCAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsIFwiLTEuNSAtMC4zIC0yXCIpO1xuXG5cdCAgICAvLyBSZWdpc3RlciBrZXlib2FyZCBldmVudHNcblx0ICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLmlucHV0RXZlbnQuYmluZCh0aGlzKSk7XG5cdCAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JhY2tzcGFjZScsIHRoaXMuYmFja3NwYWNlRXZlbnQuYmluZCh0aGlzKSk7XG5cdCAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc21pc3MnLCB0aGlzLmRpc21pc3NFdmVudC5iaW5kKHRoaXMpKTtcblxuXHQgICAgLy8gUmVnaXN0ZXIgZ2xvYmFsIGV2ZW50c1xuXHQgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkV2ZW50LmJpbmQodGhpcykpO1xuXHQgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdkaWRmb2N1c2lucHV0JywgdGhpcy5kaWRGb2N1c0lucHV0RXZlbnQuYmluZCh0aGlzKSk7XG5cdCAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2RpZGJsdXJpbnB1dCcsIHRoaXMuZGlkQmx1cklucHV0RXZlbnQuYmluZCh0aGlzKSk7XG5cdCAgfSxcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblx0ICAgIGlmICh0aGlzLmRhdGEuaXNPcGVuKSB7XG5cdCAgICAgIEJlaGF2aW9ycy5zaG93S2V5Ym9hcmQodGhpcy5lbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBCZWhhdmlvcnMuaGlkZUtleWJvYXJkKHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgdGljazogZnVuY3Rpb24gdGljaygpIHt9LFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuXHQgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuaW5wdXRFdmVudC5iaW5kKHRoaXMpKTtcblx0ICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmFja3NwYWNlJywgdGhpcy5iYWNrc3BhY2VFdmVudC5iaW5kKHRoaXMpKTtcblx0ICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGlzbWlzcycsIHRoaXMuZGlzbWlzc0V2ZW50LmJpbmQodGhpcykpO1xuXG5cdCAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlkb3duRXZlbnQuYmluZCh0aGlzKSk7XG5cdCAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RpZGZvY3VzaW5wdXQnLCB0aGlzLmRpZEZvY3VzSW5wdXRFdmVudC5iaW5kKHRoaXMpKTtcblx0ICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGlkYmx1cmlucHV0JywgdGhpcy5kaWRCbHVySW5wdXRFdmVudC5iaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIHBhdXNlOiBmdW5jdGlvbiBwYXVzZSgpIHt9LFxuXHQgIHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7fSxcblxuXHQgIC8vIEZpcmVkIG9uIGtleWJvYXJkIGtleSBwcmVzc1xuXHQgIGlucHV0RXZlbnQ6IGZ1bmN0aW9uIGlucHV0RXZlbnQoZSkge1xuXHQgICAgaWYgKHRoaXMuY3VycmVudElucHV0KSB7XG5cdCAgICAgIHRoaXMuY3VycmVudElucHV0LmFwcGVuZFN0cmluZyhlLmRldGFpbCk7XG5cdCAgICB9XG5cdCAgfSxcblxuXHQgIC8vIEZpcmVkIG9uIGJhY2tzcGFjZSBrZXkgcHJlc3Ncblx0ICBiYWNrc3BhY2VFdmVudDogZnVuY3Rpb24gYmFja3NwYWNlRXZlbnQoZSkge1xuXHQgICAgaWYgKHRoaXMuY3VycmVudElucHV0KSB7XG5cdCAgICAgIHRoaXMuY3VycmVudElucHV0LmRlbGV0ZUxhc3QoKTtcblx0ICAgIH1cblx0ICB9LFxuXG5cdCAgZGlzbWlzc0V2ZW50OiBmdW5jdGlvbiBkaXNtaXNzRXZlbnQoZSkge1xuXHQgICAgaWYgKHRoaXMuY3VycmVudElucHV0KSB7XG5cdCAgICAgIHRoaXMuY3VycmVudElucHV0LmJsdXIoKTtcblx0ICAgIH1cblx0ICB9LFxuXG5cdCAgLy8gcGh5c2ljYWwga2V5Ym9hcmQgZXZlbnRcblx0ICBrZXlkb3duRXZlbnQ6IGZ1bmN0aW9uIGtleWRvd25FdmVudChlKSB7XG5cdCAgICBpZiAodGhpcy5jdXJyZW50SW5wdXQgJiYgdGhpcy5kYXRhLnBoeXNpY2FsS2V5Ym9hcmQpIHtcblx0ICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdCAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHQgICAgICAgIEV2ZW50LmVtaXQoQmVoYXZpb3JzLmVsLCAnaW5wdXQnLCAnXFxuJyk7XG5cdCAgICAgICAgRXZlbnQuZW1pdChCZWhhdmlvcnMuZWwsICdlbnRlcicsICdcXG4nKTtcblx0ICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0JhY2tzcGFjZScpIHtcblx0ICAgICAgICBFdmVudC5lbWl0KEJlaGF2aW9ycy5lbCwgJ2JhY2tzcGFjZScpO1xuXHQgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuXHQgICAgICAgIEV2ZW50LmVtaXQoQmVoYXZpb3JzLmVsLCAnZGlzbWlzcycpO1xuXHQgICAgICB9IGVsc2UgaWYgKGUua2V5Lmxlbmd0aCA8IDIpIHtcblx0ICAgICAgICBFdmVudC5lbWl0KEJlaGF2aW9ycy5lbCwgJ2lucHV0JywgZS5rZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblxuXHQgIC8vIEZpcmVkIHdoZW4gYW4gaW5wdXQgaGFzIGJlZW4gc2VsZWN0ZWRcblx0ICBkaWRGb2N1c0lucHV0RXZlbnQ6IGZ1bmN0aW9uIGRpZEZvY3VzSW5wdXRFdmVudChlKSB7XG5cdCAgICBpZiAodGhpcy5jdXJyZW50SW5wdXQpIHtcblx0ICAgICAgdGhpcy5jdXJyZW50SW5wdXQuYmx1cih0cnVlKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuY3VycmVudElucHV0ID0gZS5kZXRhaWw7XG5cdCAgICBpZiAoIXRoaXMuZWwuaXNPcGVuKSB7XG5cdCAgICAgIEJlaGF2aW9ycy5vcGVuS2V5Ym9hcmQodGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblxuXHQgIC8vIEZpcmVkIHdoZW4gYW4gaW5wdXQgaGFzIGJlZW4gZGVzZWxlY3RlZFxuXHQgIGRpZEJsdXJJbnB1dEV2ZW50OiBmdW5jdGlvbiBkaWRCbHVySW5wdXRFdmVudChlKSB7XG5cdCAgICB0aGlzLmN1cnJlbnRJbnB1dCA9IG51bGw7XG5cdCAgICBCZWhhdmlvcnMuZGlzbWlzc0tleWJvYXJkKHRoaXMuZWwpO1xuXHQgIH1cblx0fSk7XG5cblx0QUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLWtleWJvYXJkJywge1xuXHQgIGRlZmF1bHRDb21wb25lbnRzOiB7XG5cdCAgICBrZXlib2FyZDoge31cblx0ICB9LFxuXHQgIG1hcHBpbmdzOiB7XG5cdCAgICAnaXMtb3Blbic6ICdrZXlib2FyZC5pc09wZW4nLFxuXHQgICAgJ3BoeXNpY2FsLWtleWJvYXJkJzogJ2tleWJvYXJkLnBoeXNpY2FsS2V5Ym9hcmQnXG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBVdGlscyA9IHt9O1xuXG5cdC8qKlxuXHQgIFV0aWxzLnByZWxvYWRBc3NldHMoW10pXG5cdCAgQWRkIGFzc2V0cyB0byBBc3NldHMgbWFuYWdtZW50IHN5c3RlbS5cblx0Ki9cblx0VXRpbHMucHJlbG9hZEFzc2V0cyA9IGZ1bmN0aW9uIChhc3NldHNfYXJyKSB7XG5cdCAgdmFyIGFzc2V0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2EtYXNzZXRzJyksXG5cdCAgICAgIGFscmVhZHlfZXhpc3RzID0gdm9pZCAwO1xuXG5cdCAgaWYgKCFhc3NldHMpIHtcblx0ICAgIHZhciBzY2VuZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Etc2NlbmUnKTtcblx0ICAgIGFzc2V0cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtYXNzZXRzJyk7XG5cdCAgICBzY2VuZS5hcHBlbmRDaGlsZChhc3NldHMpO1xuXHQgIH1cblxuXHQgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcblx0ICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcblx0ICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cblx0ICB0cnkge1xuXHQgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gYXNzZXRzX2FycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcblx0ICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTtcblxuXHQgICAgICBhbHJlYWR5X2V4aXN0cyA9IGZhbHNlO1xuXG5cdCAgICAgIC8qKioqKiBXaXRoIEVkZ2UsIGFzc2V0cy5jaGlsZHJlbiBpcyBhIEhUTUxDb2xsZWN0aW9uLCBub3QgYW4gQXJyYXkhICoqKioqL1xuXHQgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuXHQgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG5cdCAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7XG5cblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gQXJyYXkuZnJvbShhc3NldHMuY2hpbGRyZW4pW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG5cdCAgICAgICAgICB2YXIgc3R1ZmYgPSBfc3RlcDIudmFsdWU7XG5cblx0ICAgICAgICAgIGlmIChpdGVtLmlkID09PSBzdHVmZi5pZCkge1xuXHQgICAgICAgICAgICBhbHJlYWR5X2V4aXN0cyA9IHRydWU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuXHQgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcblx0ICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuXHQgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7XG5cdCAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAoIWFscmVhZHlfZXhpc3RzKSB7XG5cdCAgICAgICAgdmFyIGFzc2V0X2l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0ZW0udHlwZSk7XG5cdCAgICAgICAgYXNzZXRfaXRlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgaXRlbS5pZCk7XG5cdCAgICAgICAgYXNzZXRfaXRlbS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGl0ZW0uc3JjKTtcblx0ICAgICAgICBhc3NldHMuYXBwZW5kQ2hpbGQoYXNzZXRfaXRlbSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoIChlcnIpIHtcblx0ICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcblx0ICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuXHQgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcblx0ICAgICAgfVxuXHQgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG5cdCAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cblx0LyoqXG5cdCAgVXRpbHMuZXh0ZW5kKGEsIGIpXG5cdCAgQXNzaWduIG9iamVjdCB0byBvdGhlciBvYmplY3QuXG5cdCovXG5cdFV0aWxzLmV4dGVuZCA9IGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgZm9yICh2YXIga2V5IGluIGIpIHtcblx0ICAgIGlmIChiLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgYVtrZXldID0gYltrZXldO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gYTtcblx0fTtcblxuXHRVdGlscy5jbG9uZSA9IGZ1bmN0aW9uIChvcmlnaW5hbCkge1xuXHQgIGlmIChBcnJheS5pc0FycmF5KG9yaWdpbmFsKSkge1xuXHQgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDApO1xuXHQgIH1cblxuXHQgIC8vIEZpcnN0IGNyZWF0ZSBhbiBlbXB0eSBvYmplY3Qgd2l0aFxuXHQgIC8vIHNhbWUgcHJvdG90eXBlIG9mIG91ciBvcmlnaW5hbCBzb3VyY2Vcblx0ICB2YXIgY2xvbmUgPSBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihvcmlnaW5hbCkpO1xuXHQgIHZhciBpID0gdW5kZWZpbmVkO1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob3JpZ2luYWwpO1xuXHQgIGkgPSAwO1xuXHQgIHdoaWxlIChpIDwga2V5cy5sZW5ndGgpIHtcblx0ICAgIC8vIGNvcHkgZWFjaCBwcm9wZXJ0eSBpbnRvIHRoZSBjbG9uZVxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsb25lLCBrZXlzW2ldLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9yaWdpbmFsLCBrZXlzW2ldKSk7XG5cdCAgICBpKys7XG5cdCAgfVxuXHQgIHJldHVybiBjbG9uZTtcblx0fTtcblxuXHRVdGlscy51cGRhdGVPcGFjaXR5ID0gZnVuY3Rpb24gKGVsLCBvcGFjaXR5KSB7XG5cdCAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndGV4dCcpKSB7XG5cdCAgICB2YXIgcHJvcHMgPSBlbC5nZXRBdHRyaWJ1dGUoJ3RleHQnKTtcblx0ICAgIGlmIChwcm9wcykge1xuXHQgICAgICBwcm9wcy5vcGFjaXR5ID0gb3BhY2l0eTtcblx0ICAgICAgZWwuc2V0QXR0cmlidXRlKCd0ZXh0JywgcHJvcHMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBlbC5vYmplY3QzRC50cmF2ZXJzZShmdW5jdGlvbiAobykge1xuXHQgICAgaWYgKG8ubWF0ZXJpYWwpIHtcblx0ICAgICAgby5tYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7XG5cdCAgICAgIG8ubWF0ZXJpYWwub3BhY2l0eSA9IG9wYWNpdHk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZTtcblx0ICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7XG5cdCAgdmFyIF9pdGVyYXRvckVycm9yMyA9IHVuZGVmaW5lZDtcblxuXHQgIHRyeSB7XG5cdCAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnYS10ZXh0JylbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHtcblx0ICAgICAgdmFyIHRleHQgPSBfc3RlcDMudmFsdWU7XG5cblx0ICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ29wYWNpdHknLCBvcGFjaXR5KTtcblx0ICAgIH1cblx0ICB9IGNhdGNoIChlcnIpIHtcblx0ICAgIF9kaWRJdGVyYXRvckVycm9yMyA9IHRydWU7XG5cdCAgICBfaXRlcmF0b3JFcnJvcjMgPSBlcnI7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgJiYgX2l0ZXJhdG9yMy5yZXR1cm4pIHtcblx0ICAgICAgICBfaXRlcmF0b3IzLnJldHVybigpO1xuXHQgICAgICB9XG5cdCAgICB9IGZpbmFsbHkge1xuXHQgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IzKSB7XG5cdCAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IzO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cdC8vIENhbGN1bGF0ZSB0aGUgd2lkdGggZmFjdG9yXG5cdFV0aWxzLmdldFdpZHRoRmFjdG9yID0gZnVuY3Rpb24gKGVsLCB3cmFwQ291bnQpIHtcblx0ICB2YXIgd2lkdGhGYWN0b3IgPSAwLjAwMDAxO1xuXHQgIGlmIChlbC5jb21wb25lbnRzLnRleHQgJiYgZWwuY29tcG9uZW50cy50ZXh0LmN1cnJlbnRGb250KSB7XG5cdCAgICB3aWR0aEZhY3RvciA9IGVsLmNvbXBvbmVudHMudGV4dC5jdXJyZW50Rm9udC53aWR0aEZhY3Rvcjtcblx0ICAgIHdpZHRoRmFjdG9yID0gKDAuNSArIHdyYXBDb3VudCkgKiB3aWR0aEZhY3Rvcjtcblx0ICB9XG5cdCAgcmV0dXJuIHdpZHRoRmFjdG9yO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzID0gVXRpbHM7XG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgQXNzZXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIExheW91dHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgQ29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBCZWhhdmlvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIERyYXcgPSB7fTtcblxuXHREcmF3LmVsID0gbnVsbDtcblxuXHREcmF3LmluaXQgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICBEcmF3LmVsID0gZWw7XG5cdCAgQmVoYXZpb3JzLmVsID0gZWw7XG5cdCAgQmVoYXZpb3JzLlNGWCA9IGVsLlNGWDtcblx0fTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBEUkFXIE5VTUVSSUNBTCBVSVxuXG5cdERyYXcubnVtZXJpY2FsVUkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWVudGl0eScpO1xuXHQgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwLjAyNSAwIDAuMTInKTtcblx0ICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgncm90YXRpb24nLCAnMCAyNSAwJyk7XG5cdCAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2RhdGEtdWknLCB0cnVlKTtcblxuXHQgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Etcm91bmRlZCcpO1xuXHQgIGVsLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAnMC4yODAnKTtcblx0ICBlbC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcwLjM2MCcpO1xuXHQgIGVsLnNldEF0dHJpYnV0ZSgncmFkaXVzJywgJzAuMDInKTtcblx0ICBlbC5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgQ29uZmlnLktFWUJPQVJEX0NPTE9SKTtcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnbWF0ZXJpYWwnLCB7IGNvbG9yOiBDb25maWcuS0VZQk9BUkRfQ09MT1IsIHNoYWRlcjogJ2ZsYXQnIH0pO1xuXHQgIH0pO1xuXHQgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZWwpO1xuXG5cdCAgcmV0dXJuIHdyYXBwZXI7XG5cdH07XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gRFJBVyBNQUlOIFVJXG5cblx0RHJhdy5tYWluVUkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWVudGl0eScpO1xuXHQgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwLjMxMiAwIDAnKTtcblx0ICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnZGF0YS11aScsIHRydWUpO1xuXG5cdCAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1yb3VuZGVkJyk7XG5cdCAgZWwuc2V0QXR0cmlidXRlKCd3aWR0aCcsICcwLjg0MCcpO1xuXHQgIGVsLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzAuMzYwJyk7XG5cdCAgZWwuc2V0QXR0cmlidXRlKCdyYWRpdXMnLCAnMC4wMicpO1xuXHQgIGVsLnNldEF0dHJpYnV0ZSgnY29sb3InLCBDb25maWcuS0VZQk9BUkRfQ09MT1IpO1xuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdtYXRlcmlhbCcsIHsgY29sb3I6IENvbmZpZy5LRVlCT0FSRF9DT0xPUiwgc2hhZGVyOiAnZmxhdCcgfSk7XG5cdCAgfSk7XG5cdCAgd3JhcHBlci5hcHBlbmRDaGlsZChlbCk7XG5cblx0ICByZXR1cm4gd3JhcHBlcjtcblx0fTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBEUkFXIEFDVElPTiBVSVxuXG5cdERyYXcuYWN0aW9uc1VJID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1lbnRpdHknKTtcblx0ICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMS4xODAgMCAwLjAxJyk7XG5cdCAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoJ3JvdGF0aW9uJywgJzAgLTI1IDAnKTtcblx0ICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnZGF0YS11aScsIHRydWUpO1xuXG5cdCAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1yb3VuZGVkJyk7XG5cdCAgZWwuc2V0QXR0cmlidXRlKCd3aWR0aCcsICcwLjE4MCcpO1xuXHQgIGVsLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzAuMzYwJyk7XG5cdCAgZWwuc2V0QXR0cmlidXRlKCdyYWRpdXMnLCAnMC4wMicpO1xuXHQgIGVsLnNldEF0dHJpYnV0ZSgnY29sb3InLCBDb25maWcuS0VZQk9BUkRfQ09MT1IpO1xuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdtYXRlcmlhbCcsIHsgY29sb3I6IENvbmZpZy5LRVlCT0FSRF9DT0xPUiwgc2hhZGVyOiAnZmxhdCcgfSk7XG5cdCAgfSk7XG5cdCAgd3JhcHBlci5hcHBlbmRDaGlsZChlbCk7XG5cblx0ICByZXR1cm4gd3JhcHBlcjtcblx0fTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBEUkFXIE5VTUVSSUNBTCBMQVlPVVRcblxuXHREcmF3Lm51bWVyaWNhbExheW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgZGF0YSA9IExheW91dHMubnVtZXJpY2FsO1xuXHQgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1lbnRpdHknKTtcblx0ICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMC4wMiAwLjI2IDAuMDAxJyk7XG5cblx0ICB2YXIgaW5kZXhfeSA9IDA7XG5cdCAgZm9yICh2YXIgaSBpbiBkYXRhKSB7XG5cdCAgICB2YXIga2V5X2lkID0gJ251bS0nICsgaTtcblx0ICAgIHZhciBrZXkgPSBEcmF3LmtleShrZXlfaWQsIGRhdGFbaV0udHlwZSwgZGF0YVtpXS52YWx1ZSk7XG5cdCAgICB2YXIgaW5kZXhfeCA9IGkgJSAzO1xuXHQgICAgdmFyIHggPSBDb25maWcuS0VZX1dJRFRIICogaW5kZXhfeDtcblx0ICAgIHZhciB5ID0gQ29uZmlnLktFWV9XSURUSCAqIGluZGV4X3k7XG5cdCAgICBrZXkuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHggKyAnIC0nICsgeSArICcgMCcpO1xuXHQgICAgaWYgKGluZGV4X3ggPT09IDIpIHtcblx0ICAgICAgaW5kZXhfeSsrO1xuXHQgICAgfVxuXHQgICAgd3JhcHBlci5hcHBlbmRDaGlsZChrZXkpO1xuXHQgIH1cblxuXHQgIHJldHVybiB3cmFwcGVyO1xuXHR9O1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIERSQVcgQUxQSEFCRVRJQ0FMIExBWU9VVFxuXG5cdERyYXcuYWxwaGFiZXRpY2FsTGF5b3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBkYXRhID0gTGF5b3V0cy5hbHBoYWJldGljYWw7XG5cdCAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWVudGl0eScpO1xuXHQgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwLjAyIDAuMjYgMC4wMDEnKTtcblxuXHQgIHZhciBpbmRleF95ID0gMCxcblx0ICAgICAgaW5kZXhfeCA9IDAsXG5cdCAgICAgIHByZXZfd2FzX3NwYWNlID0gZmFsc2U7XG5cblx0ICBmb3IgKHZhciBpIGluIGRhdGEpIHtcblx0ICAgIHZhciBrZXlfaWQgPSAnbWFpbi0nICsgaTtcblx0ICAgIHZhciBrZXkgPSBEcmF3LmtleShrZXlfaWQsIGRhdGFbaV0udHlwZSwgZGF0YVtpXS52YWx1ZSk7XG5cblx0ICAgIHZhciB4ID0gQ29uZmlnLktFWV9XSURUSCAqIGluZGV4X3g7XG5cdCAgICB2YXIgeSA9IENvbmZpZy5LRVlfV0lEVEggKiBpbmRleF95O1xuXG5cdCAgICAvLyBBZGQgbGVmdCBwYWRkaW5nIG9uIHRoZSBzZWNvbmQgbGluZVxuXHQgICAgaWYgKGluZGV4X3kgPT09IDEpIHtcblx0ICAgICAgeCA9IHggKyBDb25maWcuS0VZX1dJRFRIIC8gMjtcblx0ICAgIH1cblxuXHQgICAgLy8gQWRkIG1hcmdpbiBvbiB0aGUga2V5IG5leHQgdG8gdGhlIHNwYWNlYmFyIGtleVxuXHQgICAgaWYgKHByZXZfd2FzX3NwYWNlKSB7XG5cdCAgICAgIHggPSB4ICsgQ29uZmlnLlNQQUNFX0tFWV9XSURUSCAtIENvbmZpZy5LRVlfV0lEVEggKyAwLjA1NSAqIDI7XG5cdCAgICB9XG5cblx0ICAgIC8vIEFkZCBtYXJnaW4gdG8gdGhlIHNwYWNlYmFyIGtleVxuXHQgICAgaWYgKGRhdGFbaV0udHlwZSA9PT0gJ3NwYWNlYmFyJykge1xuXHQgICAgICBwcmV2X3dhc19zcGFjZSA9IHRydWU7XG5cdCAgICAgIHggPSB4ICsgMC4yMDU7XG5cdCAgICAgIHkgPSBDb25maWcuS0VZX1dJRFRIICogaW5kZXhfeSAtIDAuMDE7XG5cdCAgICB9XG5cblx0ICAgIGtleS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgeCArICcgLScgKyB5ICsgJyAwJyk7XG5cblx0ICAgIGlmIChpbmRleF95ID09PSAxICYmIGluZGV4X3ggPT09IDgpIHtcblx0ICAgICAgaW5kZXhfeCA9IC0xO1xuXHQgICAgICBpbmRleF95Kys7XG5cdCAgICB9IGVsc2UgaWYgKGluZGV4X3ggPT09IDkpIHtcblx0ICAgICAgaW5kZXhfeCA9IC0xO1xuXHQgICAgICBpbmRleF95Kys7XG5cdCAgICB9XG5cdCAgICBpbmRleF94Kys7XG5cblx0ICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoa2V5KTtcblx0ICB9XG5cblx0ICByZXR1cm4gd3JhcHBlcjtcblx0fTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBEUkFXIFNZTUJPTFMgTEFZT1VUXG5cblx0RHJhdy5zeW1ib2xzTGF5b3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBkYXRhID0gTGF5b3V0cy5zeW1ib2xzO1xuXHQgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1lbnRpdHknKTtcblx0ICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMC4wMiAwLjI2IDAuMDAxJyk7XG5cblx0ICB2YXIgaW5kZXhfeSA9IDAsXG5cdCAgICAgIGluZGV4X3ggPSAwLFxuXHQgICAgICBwcmV2X3dhc19zcGFjZSA9IGZhbHNlO1xuXG5cdCAgZm9yICh2YXIgaSBpbiBkYXRhKSB7XG5cblx0ICAgIHZhciBrZXlfaWQgPSAnc3ltYm9scy0nICsgaTtcblx0ICAgIHZhciBrZXkgPSBEcmF3LmtleShrZXlfaWQsIGRhdGFbaV0udHlwZSwgZGF0YVtpXS52YWx1ZSk7XG5cdCAgICB2YXIgeCA9IENvbmZpZy5LRVlfV0lEVEggKiBpbmRleF94O1xuXHQgICAgdmFyIHkgPSBDb25maWcuS0VZX1dJRFRIICogaW5kZXhfeTtcblxuXHQgICAgLy8gQWRkIG1hcmdpbiBvbiB0aGUga2V5IG5leHQgdG8gdGhlIHNwYWNlYmFyIGtleVxuXHQgICAgaWYgKHByZXZfd2FzX3NwYWNlKSB7XG5cdCAgICAgIHggPSB4ICsgQ29uZmlnLlNQQUNFX0tFWV9XSURUSCAtIENvbmZpZy5LRVlfV0lEVEggKyAwLjA1NSAqIDI7XG5cdCAgICB9XG5cblx0ICAgIC8vIEFkZCBtYXJnaW4gdG8gdGhlIHNwYWNlYmFyIGtleVxuXHQgICAgaWYgKGRhdGFbaV0udHlwZSA9PT0gJ3NwYWNlYmFyJykge1xuXHQgICAgICBwcmV2X3dhc19zcGFjZSA9IHRydWU7XG5cdCAgICAgIHggPSB4ICsgMC4wODU7XG5cdCAgICAgIHkgPSBDb25maWcuS0VZX1dJRFRIICogaW5kZXhfeSAtIDAuMDE7XG5cdCAgICB9XG5cblx0ICAgIGtleS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgeCArICcgLScgKyB5ICsgJyAwJyk7XG5cblx0ICAgIGlmIChpbmRleF94ID09PSA5KSB7XG5cdCAgICAgIGluZGV4X3ggPSAtMTtcblx0ICAgICAgaW5kZXhfeSsrO1xuXHQgICAgfVxuXHQgICAgaW5kZXhfeCsrO1xuXHQgICAgd3JhcHBlci5hcHBlbmRDaGlsZChrZXkpO1xuXHQgIH1cblxuXHQgIHJldHVybiB3cmFwcGVyO1xuXHR9O1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIERSQVcgQUNUSU9OUyBMQVlPVVRcblxuXHREcmF3LmFjdGlvbnNMYXlvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGRhdGEgPSBMYXlvdXRzLmFjdGlvbnM7XG5cdCAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWVudGl0eScpO1xuXHQgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwLjAyIDAuMjYgMC4wMDEnKTtcblxuXHQgIHZhciB2YWxfeSA9IDA7XG5cdCAgZm9yICh2YXIgaSBpbiBkYXRhKSB7XG5cdCAgICB2YXIga2V5X2lkID0gJ2FjdGlvbi0nICsgaTtcblx0ICAgIHZhciBrZXkgPSBEcmF3LmtleShrZXlfaWQsIGRhdGFbaV0udHlwZSwgZGF0YVtpXS52YWx1ZSk7XG5cblx0ICAgIGtleS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAgLScgKyB2YWxfeSArICcgMCcpO1xuXHQgICAgaWYgKGkgPT0gMCkge1xuXHQgICAgICB2YWxfeSArPSBDb25maWcuQUNUSU9OX1dJRFRIICsgMC4wMTtcblx0ICAgIH0gZWxzZSBpZiAoaSA9PSAxKSB7XG5cdCAgICAgIHZhbF95ICs9IENvbmZpZy5LRVlfV0lEVEggKyAwLjAxO1xuXHQgICAgfVxuXHQgICAgd3JhcHBlci5hcHBlbmRDaGlsZChrZXkpO1xuXHQgIH1cblxuXHQgIHJldHVybiB3cmFwcGVyO1xuXHR9O1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIERSQVcgS0VZXG5cblx0RHJhdy5rZXkgPSBmdW5jdGlvbiAoaWQsIHR5cGUsIHZhbHVlKSB7XG5cdCAgdmFyIHRoYXQgPSB1bmRlZmluZWQ7XG5cblx0ICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLXJvdW5kZWQnKTtcblx0ICBlbC5zZXRBdHRyaWJ1dGUoJ2tleS1pZCcsIGlkKTtcblx0ICBlbC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgQ29uZmlnLktFWV9XSURUSCk7XG5cdCAgZWwuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBDb25maWcuS0VZX1dJRFRIKTtcblx0ICBlbC5zZXRBdHRyaWJ1dGUoJ3JhZGl1cycsICcwLjAwOCcpO1xuXHQgIGVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMCAwIDAnKTtcblx0ICBlbC5zZXRBdHRyaWJ1dGUoJ2tleS10eXBlJywgdHlwZSk7XG5cdCAgZWwuc2V0QXR0cmlidXRlKCdrZXktdmFsdWUnLCB2YWx1ZSk7XG5cdCAgZWwuc2V0QXR0cmlidXRlKCdjb2xvcicsIENvbmZpZy5LRVlCT0FSRF9DT0xPUik7XG5cdCAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ21hdGVyaWFsJywgeyBjb2xvcjogQ29uZmlnLktFWUJPQVJEX0NPTE9SLCBzaGFkZXI6ICdmbGF0JyB9KTtcblx0ICB9KTtcblxuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgIC8vIEVWRU5UU1xuXG5cdCAgQmVoYXZpb3JzLmFkZEtleUV2ZW50cyhlbCk7XG5cblx0ICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAvLyBTSEFET1dcblxuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgIC8vIFRFWFQgS0VZXG5cblx0ICBpZiAodHlwZSA9PT0gJ3RleHQnIHx8IHR5cGUgPT09ICdzcGFjZWJhcicgfHwgdHlwZSA9PT0gJ3N5bWJvbCcpIHtcblx0ICAgIHZhciBsZXR0ZXJfZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLXRleHQnKTtcblx0ICAgIGxldHRlcl9lbC5zZXRBdHRyaWJ1dGUoJ21peGluJywgJ2ZvbnQnKTtcblx0ICAgIGxldHRlcl9lbC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdmFsdWUpO1xuXHQgICAgbGV0dGVyX2VsLnNldEF0dHJpYnV0ZSgnY29sb3InLCAnI2RiZGRkZScpO1xuXHQgICAgbGV0dGVyX2VsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBDb25maWcuS0VZX1dJRFRIIC8gMiArICcgJyArIChDb25maWcuS0VZX1dJRFRIIC8gMiAtIDAuMDIpICsgJyAwLjAxNScpO1xuXHQgICAgbGV0dGVyX2VsLnNldEF0dHJpYnV0ZSgnc2NhbGUnLCAnMC4xNiAwLjE2IDAuMTYnKTtcblx0ICAgIGxldHRlcl9lbC5zZXRBdHRyaWJ1dGUoJ2FsaWduJywgJ2NlbnRlcicpO1xuXHQgICAgbGV0dGVyX2VsLnNldEF0dHJpYnV0ZSgnYmFzZWxpbmUnLCAnY2VudGVyJyk7XG5cdCAgICBlbC5hcHBlbmRDaGlsZChsZXR0ZXJfZWwpO1xuXHQgIH1cblxuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgIC8vIFNQQUNFQkFSIEtFWVxuXG5cdCAgaWYgKHR5cGUgPT09ICdzcGFjZWJhcicpIHtcblx0ICAgIHZhciBzZXRDb2xvciA9IGZ1bmN0aW9uIHNldENvbG9yKGtleUVsLCBsZXR0ZXJFbCkge1xuXHQgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBrZXlFbC5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgQ29uZmlnLktFWV9DT0xPUl9BQ1RJVkUpO1xuXHQgICAgICAgIGxldHRlckVsLnNldEF0dHJpYnV0ZSgnY29sb3InLCBDb25maWcuS0VZX0NPTE9SX0FDVElWRSk7XG5cdCAgICAgIH0sIDUwMCk7XG5cdCAgICB9O1xuXG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgQ29uZmlnLlNQQUNFX0tFWV9XSURUSCk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIENvbmZpZy5TUEFDRV9LRVlfSEVJR0hUKTtcblx0ICAgIHNldENvbG9yKGVsLCBsZXR0ZXJfZWwpO1xuXHQgICAgbGV0dGVyX2VsLnNldEF0dHJpYnV0ZSgnc2NhbGUnLCAnMC4xMiAwLjEyIDAuMTInKTtcblx0ICAgIGxldHRlcl9lbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgQ29uZmlnLlNQQUNFX0tFWV9XSURUSCAvIDIgKyAuMDMgKyAnICcgKyBDb25maWcuU1BBQ0VfS0VZX0hFSUdIVCAvIDIgKyAnIDAnKTtcblx0ICB9XG5cblx0ICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAvLyBTWU1CT0wgS0VZXG5cblx0ICBlbHNlIGlmICh0eXBlID09PSAnc3ltYm9sJykge1xuXHQgICAgICBsZXR0ZXJfZWwuc2V0QXR0cmlidXRlKCdzY2FsZScsICcwLjEyIDAuMTIgMC4xMicpO1xuXHQgICAgfVxuXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgLy8gQUNUSU9OIEtFWVxuXG5cdCAgaWYgKHR5cGUgPT09ICdiYWNrc3BhY2UnIHx8IHR5cGUgPT09ICdlbnRlcicgfHwgdHlwZSA9PT0gJ2Rpc21pc3MnKSB7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgQ29uZmlnLkFDVElPTl9XSURUSCk7XG5cdCAgfVxuXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgLy8gU0hJRlQgS0VZXG5cblx0ICBpZiAodHlwZSA9PT0gJ3NoaWZ0Jykge1xuXHQgICAgdmFyIGljb25fZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWltYWdlJyk7XG5cdCAgICBpY29uX2VsLnNldEF0dHJpYnV0ZSgnZGF0YS10eXBlJywgJ2ljb24nKTtcblx0ICAgIGljb25fZWwuc2V0QXR0cmlidXRlKCd3aWR0aCcsICcwLjAzMicpO1xuXHQgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcwLjAzMicpO1xuXHQgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAuMDQgMC4wNCAwLjAxJyk7XG5cdCAgICBpY29uX2VsLnNldEF0dHJpYnV0ZSgnc3JjJywgQXNzZXRzLmFmcmFtZUtleWJvYXJkU2hpZnQpO1xuXHQgICAgZWwuYXBwZW5kQ2hpbGQoaWNvbl9lbCk7XG5cdCAgICBEcmF3LmVsLnNoaWZ0S2V5ID0gZWw7XG5cdCAgfVxuXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgLy8gR0xPQkFMXG5cblx0ICBlbHNlIGlmICh0eXBlID09PSAnZ2xvYmFsJykge1xuXHQgICAgICB2YXIgaWNvbl9lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtaW1hZ2UnKTtcblx0ICAgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzAuMDMyJyk7XG5cdCAgICAgIGljb25fZWwuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMC4wMzInKTtcblx0ICAgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAuMDQgMC4wNCAwLjAxJyk7XG5cdCAgICAgIGljb25fZWwuc2V0QXR0cmlidXRlKCdzcmMnLCBBc3NldHMuYWZyYW1lS2V5Ym9hcmRHbG9iYWwpO1xuXHQgICAgICBlbC5hcHBlbmRDaGlsZChpY29uX2VsKTtcblx0ICAgIH1cblxuXHQgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCAgICAvLyBCQUNLU1BBQ0VcblxuXHQgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2JhY2tzcGFjZScpIHtcblx0ICAgICAgICB2YXIgaWNvbl9lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtaW1hZ2UnKTtcblx0ICAgICAgICBpY29uX2VsLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAnMC4wNDYnKTtcblx0ICAgICAgICBpY29uX2VsLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzAuMDQ2Jyk7XG5cdCAgICAgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAuMDcgMC4wNCAwLjAxJyk7XG5cdCAgICAgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIEFzc2V0cy5hZnJhbWVLZXlib2FyZEJhY2tzcGFjZSk7XG5cdCAgICAgICAgZWwuYXBwZW5kQ2hpbGQoaWNvbl9lbCk7XG5cdCAgICAgIH1cblxuXHQgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ICAgICAgLy8gRU5URVJcblxuXHQgICAgICBlbHNlIGlmICh0eXBlID09PSAnZW50ZXInKSB7XG5cdCAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIENvbmZpZy5BQ1RJT05fV0lEVEgpO1xuXG5cdCAgICAgICAgICB2YXIgY2lyY2xlX2VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1jaXJjbGUnKTtcblx0ICAgICAgICAgIGNpcmNsZV9lbC5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgJyM0Mjg1ZjQnKTtcblx0ICAgICAgICAgIGNpcmNsZV9lbC5zZXRBdHRyaWJ1dGUoJ3JhZGl1cycsIDAuMDQ0KTtcblx0ICAgICAgICAgIGNpcmNsZV9lbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAuMDcgMC4wNyAwLjAxJyk7XG5cdCAgICAgICAgICBlbC5hcHBlbmRDaGlsZChjaXJjbGVfZWwpO1xuXG5cdCAgICAgICAgICB2YXIgaWNvbl9lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtaW1hZ2UnKTtcblx0ICAgICAgICAgIGljb25fZWwuc2V0QXR0cmlidXRlKCd3aWR0aCcsICcwLjAzNCcpO1xuXHQgICAgICAgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcwLjAzNCcpO1xuXHQgICAgICAgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAuMDcgMC4wNyAwLjAxMScpO1xuXHQgICAgICAgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIEFzc2V0cy5hZnJhbWVLZXlib2FyZEVudGVyKTtcblx0ICAgICAgICAgIGVsLmFwcGVuZENoaWxkKGljb25fZWwpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgICAgICAgIC8vIERJU01JU1NcblxuXHQgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdkaXNtaXNzJykge1xuXHQgICAgICAgICAgICB2YXIgaWNvbl9lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtaW1hZ2UnKTtcblx0ICAgICAgICAgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzAuMDQ2Jyk7XG5cdCAgICAgICAgICAgIGljb25fZWwuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMC4wNDYnKTtcblx0ICAgICAgICAgICAgaWNvbl9lbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAuMDcgMC4wNCAwLjAxJyk7XG5cdCAgICAgICAgICAgIGljb25fZWwuc2V0QXR0cmlidXRlKCdzcmMnLCBBc3NldHMuYWZyYW1lS2V5Ym9hcmREaXNtaXNzKTtcblx0ICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoaWNvbl9lbCk7XG5cdCAgICAgICAgICB9XG5cblx0ICByZXR1cm4gZWw7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBEcmF3O1xuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBhZnJhbWVLZXlib2FyZFNoaWZ0OiBBRlJBTUUuQVNTRVRTX1BBVEggKyBcIi9pbWFnZXMvU2hpZnRJY29uLnBuZ1wiLFxuXHQgIGFmcmFtZUtleWJvYXJkU2hpZnRBY3RpdmU6IEFGUkFNRS5BU1NFVFNfUEFUSCArIFwiL2ltYWdlcy9TaGlmdEFjdGl2ZUljb24ucG5nXCIsXG5cdCAgYWZyYW1lS2V5Ym9hcmRHbG9iYWw6IEFGUkFNRS5BU1NFVFNfUEFUSCArIFwiL2ltYWdlcy9HbG9iYWxJY29uLnBuZ1wiLFxuXHQgIGFmcmFtZUtleWJvYXJkQmFja3NwYWNlOiBBRlJBTUUuQVNTRVRTX1BBVEggKyBcIi9pbWFnZXMvQmFja3NwYWNlSWNvbi5wbmdcIixcblx0ICBhZnJhbWVLZXlib2FyZEVudGVyOiBBRlJBTUUuQVNTRVRTX1BBVEggKyBcIi9pbWFnZXMvRW50ZXJJY29uLnBuZ1wiLFxuXHQgIGFmcmFtZUtleWJvYXJkRGlzbWlzczogQUZSQU1FLkFTU0VUU19QQVRIICsgXCIvaW1hZ2VzL0Rpc21pc3NJY29uLnBuZ1wiLFxuXHQgIGFmcmFtZUtleWJvYXJkU2hhZG93OiBBRlJBTUUuQVNTRVRTX1BBVEggKyBcIi9pbWFnZXMvS2V5U2hhZG93LnBuZ1wiLFxuXHQgIGFmcmFtZUtleWJvYXJkS2V5SW46IEFGUkFNRS5BU1NFVFNfUEFUSCArIFwiL3NvdW5kcy9LZXlJbi5tcDNcIixcblx0ICBhZnJhbWVLZXlib2FyZEtleURvd246IEFGUkFNRS5BU1NFVFNfUEFUSCArIFwiL3NvdW5kcy9LZXlEb3duLm1wM1wiXG5cdH07XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgTGF5b3V0cyA9IHtcblx0ICBudW1lcmljYWw6IFt7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcxJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcyJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICczJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc0JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc1JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc2JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc3JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc4JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc5JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcuJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcwJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICctJyB9XSxcblxuXHQgIGFscGhhYmV0aWNhbDogW3sgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ3EnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ3cnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ2UnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ3InIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ3QnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ3knIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ3UnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ2knIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ28nIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ3AnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ2EnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ3MnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ2QnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ2YnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ2cnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ2gnIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ2onIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ2snIH0sIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJ2wnIH0sIHsgdHlwZTogJ3NoaWZ0JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICd6JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICd4JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICdjJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICd2JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICdiJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICduJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICdtJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICchJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc/JyB9LCB7IHR5cGU6ICdzcGFjZWJhcicsIHZhbHVlOiAnJyB9XSxcblxuXHQgIHN5bWJvbHM6IFt7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICdAJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcjJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICckJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICclJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcmJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcqJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICctJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcrJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcoJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcpJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICd+JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICdgJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICdcIicgfSwgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnXFwnJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc6JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc7JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICdfJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc9JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICdcXFxcJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcvJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICd7JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICd9JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICdbJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICddJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc8JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc+JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICdeJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICd8JyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICchJyB9LCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICc/JyB9LCB7IHR5cGU6ICdzeW1ib2wnLCB2YWx1ZTogJ0FCQycgfSwgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnQCcgfSwgeyB0eXBlOiAnc3BhY2ViYXInLCB2YWx1ZTogJycgfSwgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnLCcgfSwgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnLicgfV0sXG5cblx0ICBhY3Rpb25zOiBbeyB0eXBlOiAnYmFja3NwYWNlJywgdmFsdWU6ICdEZWwnIH0sIHsgdHlwZTogJ2VudGVyJywgdmFsdWU6ICdPSycgfSwgeyB0eXBlOiAnZGlzbWlzcycsIHZhbHVlOiAnVycgfV1cblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IExheW91dHM7XG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgQ29uZmlnID0ge1xuXHQgIEtFWUJPQVJEX0NPTE9SOiBcIiMyNjMyMzhcIixcblx0ICBLRVlfQ09MT1JfSElHSExJR0hUOiBcIiMzOTQ2NGNcIixcblx0ICBLRVlfQ09MT1JfQUNUSVZFOiBcIiM0MDRiNTBcIixcblx0ICBTUEFDRUJBUl9DT0xPUl9BQ1RJVkU6IFwiIzNjNDY0YlwiLFxuXHQgIFNQQUNFQkFSX0NPTE9SX0hJR0hMSUdIVDogXCIjNDQ1MDU1XCIsXG5cdCAgS0VZX1dJRFRIOiAwLjA4LFxuXHQgIFNQQUNFX0tFWV9XSURUSDogMC4zNjgsXG5cdCAgU1BBQ0VfS0VZX0hFSUdIVDogMC4wNSxcblx0ICBBQ1RJT05fV0lEVEg6IDAuMTQwXG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBDb25maWc7XG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIEFzc2V0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBDb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIFNGWCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgQmVoYXZpb3JzID0ge307XG5cblx0QmVoYXZpb3JzLmVsID0gbnVsbDtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBLRVlCT0FSRCBNRVRIT0RTXG5cblx0QmVoYXZpb3JzLnNob3dLZXlib2FyZCA9IGZ1bmN0aW9uIChlbCkge1xuXHQgIGlmIChlbC5vX3Bvc2l0aW9uKSB7XG5cdCAgICBlbC5vYmplY3QzRC5wb3NpdGlvbi5jb3B5KGVsLm9fcG9zaXRpb24pO1xuXHQgIH1cblx0ICBlbC5pc09wZW4gPSB0cnVlO1xuXHQgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcblx0ICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcblx0ICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cblx0ICB0cnkge1xuXHQgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gZWwucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdWldJylbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG5cdCAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7XG5cdCAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG5cdCAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcblx0ICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBpdGVtLmNoaWxkcmVuW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG5cdCAgICAgICAgICB2YXIgY2hpbGQgPSBfc3RlcDIudmFsdWU7XG5cblx0ICAgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZSgnc2hvdycsIHRydWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTtcblx0ICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG5cdCAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcblx0ICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuXHQgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG5cdCAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcblx0ICB9IGZpbmFsbHkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcblx0ICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZmluYWxseSB7XG5cdCAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuXHQgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgdmFyIHBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG5cdCAgaWYgKHBhcmVudCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBlbC5zY2VuZUVsLmFwcGVuZENoaWxkKGVsKTtcblx0fTtcblxuXHRCZWhhdmlvcnMuaGlkZUtleWJvYXJkID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgdmFyIHBvc2l0aW9uID0gZWwuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7XG5cdCAgaWYgKHBvc2l0aW9uLnggIT09IC0xMDAwMCkge1xuXHQgICAgaWYgKCFlbC5vX3Bvc2l0aW9uKSB7XG5cdCAgICAgIGVsLm9fcG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHQgICAgfVxuXHQgICAgZWwub19wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcblx0ICB9XG5cdCAgZWwuaXNPcGVuID0gZmFsc2U7XG5cdCAgZWwuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiwgXCItMTAwMDAgLTEwMDAwIC0xMDAwMFwiKTtcblx0ICBlbC5zZXRBdHRyaWJ1dGUoJ2ZhZGVvdXQnLCB7IGR1cmF0aW9uOiAxIH0pO1xuXHR9O1xuXG5cdEJlaGF2aW9ycy5kZXN0cm95S2V5Ym9hcmQgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTtcblx0ICBpZiAoIXBhcmVudCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBwYXJlbnQucmVtb3ZlQ2hpbGQoZWwpO1xuXHR9O1xuXG5cdEJlaGF2aW9ycy5vcGVuS2V5Ym9hcmQgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICBpZiAoZWwub19wb3NpdGlvbikge1xuXHQgICAgZWwub2JqZWN0M0QucG9zaXRpb24uY29weShlbC5vX3Bvc2l0aW9uKTtcblx0ICB9XG5cdCAgZWwuaXNPcGVuID0gdHJ1ZTtcblx0ICBlbC5fdHJhbnNpdGlvbmluZyA9IHRydWU7XG5cdCAgdmFyIHBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG5cdCAgaWYgKCFwYXJlbnQpIHtcblx0ICAgIGVsLnNjZW5lRWwuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0ICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlO1xuXHQgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjMgPSBmYWxzZTtcblx0ICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO1xuXG5cdCAgdHJ5IHtcblx0ICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKCkge1xuXHQgICAgICB2YXIgaXRlbSA9IF9zdGVwMy52YWx1ZTtcblx0ICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZTtcblx0ICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yNCA9IGZhbHNlO1xuXHQgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3I0ID0gdW5kZWZpbmVkO1xuXG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IGl0ZW0uY2hpbGRyZW5bU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDQ7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSAoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWUpIHtcblx0ICAgICAgICAgIHZhciBjaGlsZCA9IF9zdGVwNC52YWx1ZTtcblxuXHQgICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdoaWRlJywgdHJ1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjQgPSB0cnVlO1xuXHQgICAgICAgIF9pdGVyYXRvckVycm9yNCA9IGVycjtcblx0ICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCAmJiBfaXRlcmF0b3I0LnJldHVybikge1xuXHQgICAgICAgICAgICBfaXRlcmF0b3I0LnJldHVybigpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I0KSB7XG5cdCAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblxuXHQgICAgICBmdW5jdGlvbiBhbmltYXRpb25lbmQoKSB7XG5cdCAgICAgICAgaXRlbS5jaGlsZHJlblswXS5yZW1vdmVFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBhbmltYXRpb25lbmQpO1xuXHQgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgaXRlbS5jaGlsZHJlblsxXS5zZXRBdHRyaWJ1dGUoJ2ZhZGVpbicsIHsgZHVyYXRpb246IDE2MCB9KTtcblx0ICAgICAgICAgIEV2ZW50LmVtaXQoQmVoYXZpb3JzLmVsLCAnZGlkb3BlbicpO1xuXHQgICAgICAgICAgZWwuX3RyYW5zaXRpb25pbmcgPSBmYWxzZTtcblx0ICAgICAgICB9LCAxMCk7XG5cdCAgICAgIH1cblx0ICAgICAgaXRlbS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2ZhZGVpbicsIHsgZHVyYXRpb246IDE2MCB9KTtcblx0ICAgICAgaXRlbS5jaGlsZHJlblswXS5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBhbmltYXRpb25lbmQpO1xuXHQgICAgfTtcblxuXHQgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXVpXScpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7XG5cdCAgICAgIF9sb29wKCk7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuXHQgICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuKSB7XG5cdCAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTtcblx0ICAgICAgfVxuXHQgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMykge1xuXHQgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuXHRCZWhhdmlvcnMuZGlzbWlzc0tleWJvYXJkID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgZWwuX3RyYW5zaXRpb25pbmcgPSB0cnVlO1xuXHQgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IHRydWU7XG5cdCAgdmFyIF9kaWRJdGVyYXRvckVycm9yNSA9IGZhbHNlO1xuXHQgIHZhciBfaXRlcmF0b3JFcnJvcjUgPSB1bmRlZmluZWQ7XG5cblx0ICB0cnkge1xuXHQgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMigpIHtcblx0ICAgICAgdmFyIGl0ZW0gPSBfc3RlcDUudmFsdWU7XG5cdCAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IHRydWU7XG5cdCAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjYgPSBmYWxzZTtcblx0ICAgICAgdmFyIF9pdGVyYXRvckVycm9yNiA9IHVuZGVmaW5lZDtcblxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjYgPSBpdGVtLmNoaWxkcmVuW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA2OyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242ID0gKF9zdGVwNiA9IF9pdGVyYXRvcjYubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYgPSB0cnVlKSB7XG5cdCAgICAgICAgICB2YXIgY2hpbGQgPSBfc3RlcDYudmFsdWU7XG5cblx0ICAgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZSgnc2hvdycsIHRydWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3I2ID0gdHJ1ZTtcblx0ICAgICAgICBfaXRlcmF0b3JFcnJvcjYgPSBlcnI7XG5cdCAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYgJiYgX2l0ZXJhdG9yNi5yZXR1cm4pIHtcblx0ICAgICAgICAgICAgX2l0ZXJhdG9yNi5yZXR1cm4oKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNikge1xuXHQgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjY7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cblx0ICAgICAgZWwuaXNPcGVuID0gZmFsc2U7XG5cdCAgICAgIGZ1bmN0aW9uIGFuaW1hdGlvbmVuZCgpIHtcblx0ICAgICAgICBpdGVtLmNoaWxkcmVuWzFdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGFuaW1hdGlvbmVuZCk7XG5cdCAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBmdW5jdGlvbiBhbmltYXRpb25lbmQoKSB7XG5cdCAgICAgICAgICAgIGl0ZW0uY2hpbGRyZW5bMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgYW5pbWF0aW9uZW5kKTtcblx0ICAgICAgICAgICAgQmVoYXZpb3JzLmhpZGVLZXlib2FyZChlbCk7XG5cdCAgICAgICAgICAgIEV2ZW50LmVtaXQoQmVoYXZpb3JzLmVsLCAnZGlkZGlzbWlzcycpO1xuXHQgICAgICAgICAgICBlbC5fdHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaXRlbS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2ZhZGVvdXQnLCB7IGR1cmF0aW9uOiAxNjAgfSk7XG5cdCAgICAgICAgICBpdGVtLmNoaWxkcmVuWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGFuaW1hdGlvbmVuZCk7XG5cdCAgICAgICAgfSwgMTApO1xuXHQgICAgICB9XG5cdCAgICAgIGl0ZW0uY2hpbGRyZW5bMV0uc2V0QXR0cmlidXRlKCdmYWRlb3V0JywgeyBkdXJhdGlvbjogMTYwIH0pO1xuXHQgICAgICBpdGVtLmNoaWxkcmVuWzFdLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGFuaW1hdGlvbmVuZCk7XG5cdCAgICB9O1xuXG5cdCAgICBmb3IgKHZhciBfaXRlcmF0b3I1ID0gZWwucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdWldJylbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDU7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgPSAoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IHRydWUpIHtcblx0ICAgICAgX2xvb3AyKCk7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICBfZGlkSXRlcmF0b3JFcnJvcjUgPSB0cnVlO1xuXHQgICAgX2l0ZXJhdG9yRXJyb3I1ID0gZXJyO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ICYmIF9pdGVyYXRvcjUucmV0dXJuKSB7XG5cdCAgICAgICAgX2l0ZXJhdG9yNS5yZXR1cm4oKTtcblx0ICAgICAgfVxuXHQgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNSkge1xuXHQgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBLRVkgRVZFTlRTXG5cblx0QmVoYXZpb3JzLmFkZEtleUV2ZW50cyA9IGZ1bmN0aW9uIChlbCkge1xuXHQgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQmVoYXZpb3JzLmtleUNsaWNrKTtcblx0ICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBCZWhhdmlvcnMua2V5RG93bik7XG5cdCAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIEJlaGF2aW9ycy5rZXlPdXQpO1xuXHQgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBCZWhhdmlvcnMua2V5SW4pO1xuXHQgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBCZWhhdmlvcnMua2V5T3V0KTtcblx0ICAvL3RyaWdnZXJkb3duXG5cdCAgLy8gaHR0cHM6Ly9hZnJhbWUuaW8vZG9jcy8wLjYuMC9jb21wb25lbnRzL2hhbmQtY29udHJvbHMuaHRtbFxuXHR9O1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIEtFWUNMSUNLXG5cblx0QmVoYXZpb3JzLmtleUNsaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgIFNGWC5rZXlEb3duKEJlaGF2aW9ycy5lbCk7XG5cblx0ICB2YXIgdHlwZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdrZXktdHlwZScpO1xuXHQgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdrZXktdmFsdWUnKTtcblxuXHQgIGlmICh0eXBlID09PSAndGV4dCcgfHwgdHlwZSA9PT0gJ3NwYWNlYmFyJykge1xuXHQgICAgaWYgKHR5cGUgPT09ICdzcGFjZWJhcicpIHtcblx0ICAgICAgdmFsdWUgPSAnICc7XG5cdCAgICB9XG5cdCAgICBpZiAoQmVoYXZpb3JzLmlzU2hpZnRFbmFibGVkKSB7XG5cdCAgICAgIHZhbHVlID0gdmFsdWUudG9VcHBlckNhc2UoKTtcblx0ICAgICAgQmVoYXZpb3JzLnNoaWZ0VG9nZ2xlKCk7XG5cdCAgICB9IGVsc2UgaWYgKEJlaGF2aW9ycy5pc1N5bWJvbHMpIHtcblx0ICAgICAgQmVoYXZpb3JzLnN5bWJvbHNUb2dnbGUoKTtcblx0ICAgIH1cblx0ICAgIEV2ZW50LmVtaXQoQmVoYXZpb3JzLmVsLCAnaW5wdXQnLCB2YWx1ZSk7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSAnc2hpZnQnKSB7XG5cdCAgICBCZWhhdmlvcnMuc2hpZnRUb2dnbGUoKTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzeW1ib2wnKSB7XG5cdCAgICBCZWhhdmlvcnMuc3ltYm9sc1RvZ2dsZSgpO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2JhY2tzcGFjZScpIHtcblx0ICAgIEV2ZW50LmVtaXQoQmVoYXZpb3JzLmVsLCAnYmFja3NwYWNlJyk7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSAnZW50ZXInKSB7XG5cdCAgICBFdmVudC5lbWl0KEJlaGF2aW9ycy5lbCwgJ2lucHV0JywgJ1xcbicpO1xuXHQgICAgRXZlbnQuZW1pdChCZWhhdmlvcnMuZWwsICdlbnRlcicsICdcXG4nKTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkaXNtaXNzJykge1xuXHQgICAgRXZlbnQuZW1pdChCZWhhdmlvcnMuZWwsICdkaXNtaXNzJyk7XG5cdCAgfVxuXHR9O1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIEtFWURPV05cblxuXHRCZWhhdmlvcnMua2V5RG93biA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAoQmVoYXZpb3JzLmVsLl90cmFuc2l0aW9uaW5nKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHRoaXMub2JqZWN0M0QucG9zaXRpb24ueiA9IDAuMDAzO1xuXHQgIGlmICh0aGlzLmdldEF0dHJpYnV0ZSgna2V5LXR5cGUnKSA9PT0gJ3NwYWNlYmFyJykge1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgQ29uZmlnLlNQQUNFQkFSX0NPTE9SX0FDVElWRSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMuc2V0QXR0cmlidXRlKCdjb2xvcicsIENvbmZpZy5LRVlfQ09MT1JfQUNUSVZFKTtcblx0ICB9XG5cdH07XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gS0VZSU5cblxuXHRCZWhhdmlvcnMua2V5SW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKEJlaGF2aW9ycy5lbC5fdHJhbnNpdGlvbmluZykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBpZiAodGhpcy5vYmplY3QzRC5jaGlsZHJlblsyXSAmJiB0aGlzLm9iamVjdDNELmNoaWxkcmVuWzJdLm1hdGVyaWFsICYmICF0aGlzLm9iamVjdDNELmNoaWxkcmVuWzJdLm1hdGVyaWFsLm9wYWNpdHkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgU0ZYLmtleUluKEJlaGF2aW9ycy5lbCk7XG5cdCAgaWYgKHRoaXMuZ2V0QXR0cmlidXRlKCdrZXktdHlwZScpID09PSAnc3BhY2ViYXInKSB7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZSgnY29sb3InLCBDb25maWcuU1BBQ0VCQVJfQ09MT1JfSElHSExJR0hUKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgQ29uZmlnLktFWV9DT0xPUl9ISUdITElHSFQpO1xuXHQgIH1cblx0fTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBLRVlPVVRcblxuXHRCZWhhdmlvcnMua2V5T3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMub2JqZWN0M0QucG9zaXRpb24ueiA9IDA7XG5cdCAgaWYgKHRoaXMuZ2V0QXR0cmlidXRlKCdrZXktdHlwZScpID09PSAnc3BhY2ViYXInKSB7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZSgnY29sb3InLCBDb25maWcuS0VZX0NPTE9SX0FDVElWRSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMuc2V0QXR0cmlidXRlKCdjb2xvcicsIENvbmZpZy5LRVlCT0FSRF9DT0xPUik7XG5cdCAgfVxuXHR9O1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIFNISUZUXG5cblx0QmVoYXZpb3JzLmlzU2hpZnRFbmFibGVkID0gZmFsc2U7XG5cdEJlaGF2aW9ycy5zaGlmdFRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcblx0ICBCZWhhdmlvcnMuaXNTaGlmdEVuYWJsZWQgPSAhQmVoYXZpb3JzLmlzU2hpZnRFbmFibGVkO1xuXG5cdCAgdmFyIGljb25fZWwgPSBCZWhhdmlvcnMuZWwuc2hpZnRLZXkucXVlcnlTZWxlY3RvcignW2RhdGEtdHlwZV0nKTtcblx0ICBpZiAoQmVoYXZpb3JzLmlzU2hpZnRFbmFibGVkKSB7XG5cdCAgICBpY29uX2VsLnNldEF0dHJpYnV0ZSgnc3JjJywgQXNzZXRzLmFmcmFtZUtleWJvYXJkU2hpZnRBY3RpdmUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpY29uX2VsLnNldEF0dHJpYnV0ZSgnc3JjJywgQXNzZXRzLmFmcmFtZUtleWJvYXJkU2hpZnQpO1xuXHQgIH1cblxuXHQgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNyA9IHRydWU7XG5cdCAgdmFyIF9kaWRJdGVyYXRvckVycm9yNyA9IGZhbHNlO1xuXHQgIHZhciBfaXRlcmF0b3JFcnJvcjcgPSB1bmRlZmluZWQ7XG5cblx0ICB0cnkge1xuXHQgICAgZm9yICh2YXIgX2l0ZXJhdG9yNyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJba2V5LWlkXVwiKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNyA9IChfc3RlcDcgPSBfaXRlcmF0b3I3Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb243ID0gdHJ1ZSkge1xuXHQgICAgICB2YXIga2V5RWwgPSBfc3RlcDcudmFsdWU7XG5cblx0ICAgICAgdmFyIGtleV9pZCA9IGtleUVsLmdldEF0dHJpYnV0ZSgna2V5LWlkJyksXG5cdCAgICAgICAgICBrZXlfdHlwZSA9IGtleUVsLmdldEF0dHJpYnV0ZSgna2V5LXR5cGUnKTtcblx0ICAgICAgaWYgKGtleV9pZC5zdGFydHNXaXRoKCdtYWluLScpICYmIGtleV90eXBlID09PSBcInRleHRcIikge1xuXHQgICAgICAgIHZhciB0ZXh0RWwgPSBrZXlFbC5xdWVyeVNlbGVjdG9yKCdhLXRleHQnKTtcblx0ICAgICAgICBpZiAodGV4dEVsKSB7XG5cdCAgICAgICAgICB2YXIgdmFsdWUgPSB0ZXh0RWwuZ2V0QXR0cmlidXRlKCd2YWx1ZScpLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgICAgICBpZiAodGhpcy5pc1NoaWZ0RW5hYmxlZCkge1xuXHQgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvVXBwZXJDYXNlKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICB0ZXh0RWwuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoIChlcnIpIHtcblx0ICAgIF9kaWRJdGVyYXRvckVycm9yNyA9IHRydWU7XG5cdCAgICBfaXRlcmF0b3JFcnJvcjcgPSBlcnI7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjcgJiYgX2l0ZXJhdG9yNy5yZXR1cm4pIHtcblx0ICAgICAgICBfaXRlcmF0b3I3LnJldHVybigpO1xuXHQgICAgICB9XG5cdCAgICB9IGZpbmFsbHkge1xuXHQgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I3KSB7XG5cdCAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I3O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIFNZTUJPTFNcblxuXHRCZWhhdmlvcnMuaXNTeW1ib2xzID0gZmFsc2U7XG5cdEJlaGF2aW9ycy5zeW1ib2xzVG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuXHQgIEJlaGF2aW9ycy5pc1N5bWJvbHMgPSAhQmVoYXZpb3JzLmlzU3ltYm9scztcblx0ICBpZiAoIUJlaGF2aW9ycy5pc1N5bWJvbHMpIHtcblx0ICAgIHZhciBwYXJlbnQgPSBCZWhhdmlvcnMuZWwuc3ltYm9sc0xheW91dC5wYXJlbnROb2RlO1xuXHQgICAgcGFyZW50LnJlbW92ZUNoaWxkKEJlaGF2aW9ycy5lbC5zeW1ib2xzTGF5b3V0KTtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChCZWhhdmlvcnMuZWwuYWxwaGFiZXRpY2FsTGF5b3V0KTtcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICBVdGlscy51cGRhdGVPcGFjaXR5KEJlaGF2aW9ycy5lbC5hbHBoYWJldGljYWxMYXlvdXQsIDEpO1xuXHQgICAgfSwgMCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBfcGFyZW50ID0gQmVoYXZpb3JzLmVsLmFscGhhYmV0aWNhbExheW91dC5wYXJlbnROb2RlO1xuXHQgICAgX3BhcmVudC5yZW1vdmVDaGlsZChCZWhhdmlvcnMuZWwuYWxwaGFiZXRpY2FsTGF5b3V0KTtcblx0ICAgIF9wYXJlbnQuYXBwZW5kQ2hpbGQoQmVoYXZpb3JzLmVsLnN5bWJvbHNMYXlvdXQpO1xuXHQgIH1cblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IEJlaGF2aW9ycztcblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgQXNzZXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cblx0dmFyIFNGWCA9IHtcblxuXHQgIGluaXQ6IGZ1bmN0aW9uIGluaXQocGFyZW50KSB7XG5cdCAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLXNvdW5kJyk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ2tleScsICdhZnJhbWVLZXlib2FyZEtleUluU291bmQnKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnc2Z4JywgdHJ1ZSk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIEFzc2V0cy5hZnJhbWVLZXlib2FyZEtleUluKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMCAyIDUnKTtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG5cblx0ICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1zb3VuZCcpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdrZXknLCAnYWZyYW1lS2V5Ym9hcmRLZXlEb3duU291bmQnKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnc2Z4JywgdHJ1ZSk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIEFzc2V0cy5hZnJhbWVLZXlib2FyZEtleURvd24pO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwIDIgNScpO1xuXHQgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9LFxuXG5cdCAga2V5SW46IGZ1bmN0aW9uIGtleUluKHBhcmVudCkge1xuXHQgICAgdmFyIGVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJ1trZXk9YWZyYW1lS2V5Ym9hcmRLZXlJblNvdW5kXScpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbC5jb21wb25lbnRzLnNvdW5kLnN0b3BTb3VuZCgpO1xuXHQgICAgZWwuY29tcG9uZW50cy5zb3VuZC5wbGF5U291bmQoKTtcblx0ICB9LFxuXG5cdCAga2V5RG93bjogZnVuY3Rpb24ga2V5RG93bihwYXJlbnQpIHtcblx0ICAgIHZhciBlbCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCdba2V5PWFmcmFtZUtleWJvYXJkS2V5RG93blNvdW5kXScpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbC5jb21wb25lbnRzLnNvdW5kLnN0b3BTb3VuZCgpO1xuXHQgICAgZWwuY29tcG9uZW50cy5zb3VuZC5wbGF5U291bmQoKTtcblx0ICB9XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBTRlg7XG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBhZnJhbWVLZXlib2FyZFNoaWZ0OiBBRlJBTUUuQVNTRVRTX1BBVEggKyBcIi9pbWFnZXMvU2hpZnRJY29uLnBuZ1wiLFxuXHQgIGFmcmFtZUtleWJvYXJkU2hpZnRBY3RpdmU6IEFGUkFNRS5BU1NFVFNfUEFUSCArIFwiL2ltYWdlcy9TaGlmdEFjdGl2ZUljb24ucG5nXCIsXG5cdCAgYWZyYW1lS2V5Ym9hcmRHbG9iYWw6IEFGUkFNRS5BU1NFVFNfUEFUSCArIFwiL2ltYWdlcy9HbG9iYWxJY29uLnBuZ1wiLFxuXHQgIGFmcmFtZUtleWJvYXJkQmFja3NwYWNlOiBBRlJBTUUuQVNTRVRTX1BBVEggKyBcIi9pbWFnZXMvQmFja3NwYWNlSWNvbi5wbmdcIixcblx0ICBhZnJhbWVLZXlib2FyZEVudGVyOiBBRlJBTUUuQVNTRVRTX1BBVEggKyBcIi9pbWFnZXMvRW50ZXJJY29uLnBuZ1wiLFxuXHQgIGFmcmFtZUtleWJvYXJkRGlzbWlzczogQUZSQU1FLkFTU0VUU19QQVRIICsgXCIvaW1hZ2VzL0Rpc21pc3NJY29uLnBuZ1wiLFxuXHQgIGFmcmFtZUtleWJvYXJkU2hhZG93OiBBRlJBTUUuQVNTRVRTX1BBVEggKyBcIi9pbWFnZXMvS2V5U2hhZG93LnBuZ1wiLFxuXHQgIGFmcmFtZUtleWJvYXJkS2V5SW46IEFGUkFNRS5BU1NFVFNfUEFUSCArIFwiL3NvdW5kcy9LZXlJbi5tcDNcIixcblx0ICBhZnJhbWVLZXlib2FyZEtleURvd246IEFGUkFNRS5BU1NFVFNfUEFUSCArIFwiL3NvdW5kcy9LZXlEb3duLm1wM1wiXG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuXHQvKlxuXHRAQlVHOiBTcGFjZSBoYXMgbm90IGVmZmVjdCB3aGVuIG5vIGxldHRlciBjb21lcyBhZnRlci5cblx0QFRPRE86IDxwcm9ncmVzcyB2YWx1ZT1cIjcwXCIgbWF4PVwiMTAwXCI+NzAgJTwvcHJvZ3Jlc3M+XG5cdCovXG5cblx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdpbnB1dCcsIHtcblx0ICBzY2hlbWE6IHtcblx0ICAgIHZhbHVlOiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwiXCIgfSxcblx0ICAgIG5hbWU6IHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJcIiB9LFxuXHQgICAgZGlzYWJsZWQ6IHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlIH0sXG5cdCAgICBjb2xvcjogeyB0eXBlOiBcImNvbG9yXCIsIGRlZmF1bHQ6IFwiIzAwMFwiIH0sXG5cdCAgICBhbGlnbjogeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiBcImxlZnRcIiB9LFxuXHQgICAgZm9udDogeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiBcIlwiIH0sXG5cdCAgICBsZXR0ZXJTcGFjaW5nOiB7IHR5cGU6IFwiaW50XCIsIGRlZmF1bHQ6IDAgfSxcblx0ICAgIGxpbmVIZWlnaHQ6IHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJcIiB9LFxuXHQgICAgb3BhY2l0eTogeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAxIH0sXG5cdCAgICBzaWRlOiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6ICdmcm9udCcgfSxcblx0ICAgIHRhYlNpemU6IHsgdHlwZTogXCJpbnRcIiwgZGVmYXVsdDogNCB9LFxuXHQgICAgcGxhY2Vob2xkZXI6IHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJcIiB9LFxuXHQgICAgcGxhY2Vob2xkZXJDb2xvcjogeyB0eXBlOiBcImNvbG9yXCIsIGRlZmF1bHQ6IFwiI0FBQVwiIH0sXG5cdCAgICBtYXhMZW5ndGg6IHsgdHlwZTogXCJpbnRcIiwgZGVmYXVsdDogMCB9LFxuXHQgICAgdHlwZTogeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiBcInRleHRcIiB9LFxuXHQgICAgd2lkdGg6IHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMSB9LFxuXHQgICAgY3Vyc29yV2lkdGg6IHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMC4wMSB9LFxuXHQgICAgY3Vyc29ySGVpZ2h0OiB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDAuMDggfSxcblx0ICAgIGN1cnNvckNvbG9yOiB7IHR5cGU6IFwiY29sb3JcIiwgZGVmYXVsdDogXCIjMDA3QUZGXCIgfSxcblx0ICAgIGJhY2tncm91bmRDb2xvcjogeyB0eXBlOiBcImNvbG9yXCIsIGRlZmF1bHQ6IFwiI0ZGRlwiIH0sXG5cdCAgICBiYWNrZ3JvdW5kT3BhY2l0eTogeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAxIH1cblx0ICB9LFxuXG5cdCAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpcztcblxuXHQgICAgdGhpcy5iYWNrZ3JvdW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1yb3VuZGVkJyk7XG5cdCAgICB0aGlzLmJhY2tncm91bmQuc2V0QXR0cmlidXRlKCdyYWRpdXMnLCAwLjAxKTtcblx0ICAgIHRoaXMuYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIDAuMTgpO1xuXHQgICAgdGhpcy5iYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSgnc2lkZScsICdkb3VibGUnKTtcblx0ICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5iYWNrZ3JvdW5kKTtcblxuXHQgICAgdGhpcy5jdXJzb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLXBsYW5lJyk7XG5cdCAgICB0aGlzLmN1cnNvci5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAgMCAwLjAwMycpO1xuXHQgICAgdGhpcy5jdXJzb3Iuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgZmFsc2UpO1xuXHQgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmN1cnNvcik7XG5cblx0ICAgIHRoaXMudGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZW50aXR5Jyk7XG5cdCAgICB0aGlzLnRleHQuc2V0QXR0cmlidXRlKCdtaXhpbicsICdmb250Jyk7XG5cdCAgICB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMudGV4dCk7XG5cblx0ICAgIHRoaXMucGxhY2Vob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWVudGl0eScpO1xuXHQgICAgdGhpcy5wbGFjZWhvbGRlci5zZXRBdHRyaWJ1dGUoJ21peGluJywgJ2ZvbnQnKTtcblx0ICAgIHRoaXMucGxhY2Vob2xkZXIuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgZmFsc2UpO1xuXHQgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLnBsYWNlaG9sZGVyKTtcblxuXHQgICAgdGhpcy5lbC5mb2N1cyA9IHRoaXMuZm9jdXMuYmluZCh0aGlzKTtcblx0ICAgIHRoaXMuZWwuYmx1ciA9IHRoaXMuYmx1ci5iaW5kKHRoaXMpO1xuXHQgICAgdGhpcy5lbC5hcHBlbmRTdHJpbmcgPSB0aGlzLmFwcGVuZFN0cmluZy5iaW5kKHRoaXMpO1xuXHQgICAgdGhpcy5lbC5kZWxldGVMYXN0ID0gdGhpcy5kZWxldGVMYXN0LmJpbmQodGhpcyk7XG5cblx0ICAgIC8vc2V0VGltZW91dChmdW5jdGlvbigpIHsgdGhhdC51cGRhdGVUZXh0KCk7IH0sIDApO1xuXHQgICAgdGhpcy5ibGluaygpO1xuXG5cdCAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAodGhpcy5jb21wb25lbnRzLmlucHV0LmRhdGEuZGlzYWJsZWQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdGhhdC5mb2N1cygpO1xuXHQgICAgfSk7XG5cblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmVsLCAndmFsdWUnLCB7XG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcblx0ICAgICAgfSxcblx0ICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgndmFsdWUnLCB2YWx1ZSk7XG5cdCAgICAgIH0sXG5cdCAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBibGluazogZnVuY3Rpb24gYmxpbmsoKSB7XG5cdCAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7XG5cdCAgICAgIHRoYXQuY3Vyc29yLnNldEF0dHJpYnV0ZSgndmlzaWJsZScsIGZhbHNlKTtcblx0ICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmN1cnNvckludGVydmFsKTtcblx0ICAgICAgdGhpcy5jdXJzb3JJbnRlcnZhbCA9IG51bGw7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHRoaXMuY3Vyc29ySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoYXQuY3Vyc29yLnNldEF0dHJpYnV0ZSgndmlzaWJsZScsICF0aGF0LmN1cnNvci5nZXRBdHRyaWJ1dGUoJ3Zpc2libGUnKSk7XG5cdCAgICB9LCA1MDApO1xuXHQgIH0sXG5cdCAgaXNGb2N1c2VkOiBmYWxzZSxcblx0ICBmb2N1czogZnVuY3Rpb24gZm9jdXMobm9lbWl0KSB7XG5cdCAgICBpZiAodGhpcy5pc0ZvY3VzZWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5jdXJzb3Iuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgdHJ1ZSk7XG5cdCAgICB0aGlzLmJsaW5rKCk7XG5cdCAgICBFdmVudC5lbWl0KHRoaXMuZWwsICdmb2N1cycpO1xuXHQgICAgaWYgKCFub2VtaXQpIHtcblx0ICAgICAgRXZlbnQuZW1pdChkb2N1bWVudC5ib2R5LCAnZGlkZm9jdXNpbnB1dCcsIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgYmx1cjogZnVuY3Rpb24gYmx1cihub2VtaXQpIHtcblx0ICAgIGlmICghdGhpcy5pc0ZvY3VzZWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcblx0ICAgIGlmICh0aGlzLmN1cnNvckludGVydmFsKSB7XG5cdCAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jdXJzb3JJbnRlcnZhbCk7XG5cdCAgICAgIHRoaXMuY3Vyc29ySW50ZXJ2YWwgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgdGhpcy5jdXJzb3Iuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgZmFsc2UpO1xuXHQgICAgRXZlbnQuZW1pdCh0aGlzLmVsLCAnYmx1cicpO1xuXHQgICAgaWYgKCFub2VtaXQpIHtcblx0ICAgICAgRXZlbnQuZW1pdChkb2N1bWVudC5ib2R5LCAnZGlkYmx1cmlucHV0JywgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBhcHBlbmRTdHJpbmc6IGZ1bmN0aW9uIGFwcGVuZFN0cmluZyhkYXRhKSB7XG5cdCAgICBpZiAoZGF0YSA9PT0gJ1xcbicpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuYmx1cigpO1xuXHQgICAgfVxuXHQgICAgdmFyIHN0ciA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG5cdCAgICBpZiAoIXN0cikge1xuXHQgICAgICBzdHIgPSBcIlwiO1xuXHQgICAgfVxuXHQgICAgc3RyID0gc3RyICsgZGF0YTtcblx0ICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgc3RyKTtcblx0ICAgIEV2ZW50LmVtaXQodGhpcy5lbCwgJ2NoYW5nZScsIHN0cik7XG5cdCAgfSxcblx0ICBkZWxldGVMYXN0OiBmdW5jdGlvbiBkZWxldGVMYXN0KCkge1xuXHQgICAgdmFyIHN0ciA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG5cdCAgICBpZiAoIXN0cikge1xuXHQgICAgICBzdHIgPSBcIlwiO1xuXHQgICAgfVxuXHQgICAgc3RyID0gc3RyLnNsaWNlKDAsIC0xKTtcblx0ICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgc3RyKTtcblx0ICAgIEV2ZW50LmVtaXQodGhpcy5lbCwgJ2NoYW5nZScsIHN0cik7XG5cdCAgfSxcblx0ICB1cGRhdGVUZXh0OiBmdW5jdGlvbiB1cGRhdGVUZXh0KCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgdmFyIHRoYXQgPSB0aGlzO1xuXHQgICAgdmFyIHBhZGRpbmcgPSB7XG5cdCAgICAgIGxlZnQ6IDAuMDIxLFxuXHQgICAgICByaWdodDogMC4wMjFcblx0ICAgIH07XG5cblx0ICAgIHZhciBwcm9wcyA9IHtcblx0ICAgICAgY29sb3I6IHRoaXMuZGF0YS5jb2xvcixcblx0ICAgICAgYWxpZ246IHRoaXMuZGF0YS5hbGlnbixcblx0ICAgICAgc2lkZTogdGhpcy5kYXRhLnNpZGUsXG5cdCAgICAgIHRhYlNpemU6IHRoaXMuZGF0YS50YWJTaXplLFxuXHQgICAgICB3cmFwQ291bnQ6IDI0ICogdGhpcy5kYXRhLndpZHRoLFxuXHQgICAgICB3aWR0aDogdGhpcy5kYXRhLndpZHRoXG5cblx0ICAgICAgLy8gTWFrZSBjdXJzb3Igc3RvcCBibGlua2luZyB3aGVuIHR5cGluZy4uXG5cdCAgICAgIC8vIChhbmQgYmxpbmtpbmcgYWdhaW4gYWZ0ZXIgdHlwaW5nIHN0b3ApLlxuXHQgICAgfTt2YXIgYXR0ciA9IHRoaXMudGV4dC5nZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIpO1xuXHQgICAgaWYgKGF0dHIpIHtcblx0ICAgICAgaWYgKHRoaXMuZGF0YS52YWx1ZSAhPT0gYXR0ci52YWx1ZSkge1xuXHQgICAgICAgIGlmICh0aGlzLmN1cnNvckludGVydmFsKSB7XG5cdCAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuY3Vyc29ySW50ZXJ2YWwpO1xuXHQgICAgICAgICAgdGhpcy5jdXJzb3JJbnRlcnZhbCA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0aGlzLmN1cnNvclRpbWVyKSB7XG5cdCAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jdXJzb3JUaW1lcik7XG5cdCAgICAgICAgICB0aGlzLmN1cnNvclRpbWVyID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5jdXJzb3Iuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgdHJ1ZSk7XG5cdCAgICAgICAgdGhpcy5jdXJzb3JUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdGhhdC5ibGluaygpO1xuXHQgICAgICAgIH0sIDUwKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICAvLyBNYXggbGVuZ3RoXG5cdCAgICBpZiAodGhpcy5kYXRhLm1heExlbmd0aCkge1xuXHQgICAgICBwcm9wcy52YWx1ZSA9IHRoaXMuZGF0YS52YWx1ZS5zdWJzdHJpbmcoMCwgdGhpcy5kYXRhLm1heExlbmd0aCk7XG5cdCAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHByb3BzLnZhbHVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb3BzLnZhbHVlID0gdGhpcy5kYXRhLnZhbHVlO1xuXHQgICAgfVxuXG5cdCAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09IFwicGFzc3dvcmRcIikge1xuXHQgICAgICBwcm9wcy52YWx1ZSA9IFwiKlwiLnJlcGVhdCh0aGlzLmRhdGEudmFsdWUubGVuZ3RoKTtcblx0ICAgIH1cblxuXHQgICAgaWYgKHRoaXMuZGF0YS5mb250Lmxlbmd0aCkge1xuXHQgICAgICBwcm9wcy5mb250ID0gdGhpcy5kYXRhLmZvbnQ7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5kYXRhLmxldHRlclNwYWNpbmcpIHtcblx0ICAgICAgcHJvcHMubGV0dGVyU3BhY2luZyA9IHRoaXMuZGF0YS5sZXR0ZXJTcGFjaW5nO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZGF0YS5saW5lSGVpZ2h0Lmxlbmd0aCkge1xuXHQgICAgICBwcm9wcy5saW5lSGVpZ2h0ID0gdGhpcy5kYXRhLmxpbmVIZWlnaHQ7XG5cdCAgICB9XG5cdCAgICB0aGlzLnRleHQuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgZmFsc2UpO1xuXHQgICAgdGhpcy50ZXh0LnNldEF0dHJpYnV0ZShcInRleHRcIiwgcHJvcHMpO1xuXG5cdCAgICBmdW5jdGlvbiBnZXRUZXh0V2lkdGgoZWwsIGRhdGEsIHRyaW1GaXJzdCwgX3dpZHRoRmFjdG9yKSB7XG5cdCAgICAgIGlmICghZWwub2JqZWN0M0QgfHwgIWVsLm9iamVjdDNELmNoaWxkcmVuIHx8ICFlbC5vYmplY3QzRC5jaGlsZHJlblswXSkge1xuXHQgICAgICAgIHJldHVybiAwO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB2ID0gZWwub2JqZWN0M0QuY2hpbGRyZW5bMF0uZ2VvbWV0cnkudmlzaWJsZUdseXBocztcblx0ICAgICAgaWYgKCF2KSB7XG5cdCAgICAgICAgcmV0dXJuIDA7XG5cdCAgICAgIH1cblx0ICAgICAgdiA9IHZbdi5sZW5ndGggLSAxXTtcblx0ICAgICAgaWYgKCF2KSB7XG5cdCAgICAgICAgcmV0dXJuIDA7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHYubGluZSkge1xuXHQgICAgICAgIGlmICh0cmltRmlyc3QpIHtcblx0ICAgICAgICAgIGRhdGEudmFsdWUgPSBkYXRhLnZhbHVlLnN1YnN0cigxKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZGF0YS52YWx1ZSA9IGRhdGEudmFsdWUuc2xpY2UoMCwgLTEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIGRhdGEpO1xuXHQgICAgICAgIHJldHVybiBnZXRUZXh0V2lkdGgoZWwsIGRhdGEsIHRyaW1GaXJzdCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKCFfd2lkdGhGYWN0b3IpIHtcblx0ICAgICAgICAgIF93aWR0aEZhY3RvciA9IFV0aWxzLmdldFdpZHRoRmFjdG9yKGVsLCBkYXRhLndyYXBDb3VudCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHYgPSAodi5wb3NpdGlvblswXSArIHYuZGF0YS53aWR0aCkgLyAoX3dpZHRoRmFjdG9yIC8gdGhhdC5kYXRhLndpZHRoKTtcblx0ICAgICAgICB2YXIgdGV4dFJhdGlvID0gKHYgKyBwYWRkaW5nLmxlZnQgKyBwYWRkaW5nLnJpZ2h0KSAvIHRoYXQuZGF0YS53aWR0aDtcblxuXHQgICAgICAgIGlmICh0ZXh0UmF0aW8gPiAxKSB7XG5cdCAgICAgICAgICBpZiAodHJpbUZpcnN0KSB7XG5cdCAgICAgICAgICAgIGRhdGEudmFsdWUgPSBkYXRhLnZhbHVlLnN1YnN0cigxKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGRhdGEudmFsdWUgPSBkYXRhLnZhbHVlLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShcInRleHRcIiwgZGF0YSk7XG5cdCAgICAgICAgICByZXR1cm4gZ2V0VGV4dFdpZHRoKGVsLCBkYXRhLCB0cmltRmlyc3QsIF93aWR0aEZhY3Rvcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2O1xuXHQgICAgfVxuXG5cdCAgICBpZiAocHJvcHMudmFsdWUubGVuZ3RoKSB7XG5cdCAgICAgIHRoaXMucGxhY2Vob2xkZXIuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgZmFsc2UpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5wbGFjZWhvbGRlci5zZXRBdHRyaWJ1dGUoJ3Zpc2libGUnLCB0cnVlKTtcblx0ICAgIH1cblxuXHQgICAgdmFyIHBsYWNlaG9sZGVyX3Byb3BzID0gVXRpbHMuY2xvbmUocHJvcHMpO1xuXHQgICAgcGxhY2Vob2xkZXJfcHJvcHMudmFsdWUgPSB0aGlzLmRhdGEucGxhY2Vob2xkZXI7XG5cdCAgICBwbGFjZWhvbGRlcl9wcm9wcy5jb2xvciA9IHRoaXMuZGF0YS5wbGFjZWhvbGRlckNvbG9yO1xuXHQgICAgdGhpcy5wbGFjZWhvbGRlci5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyX3Byb3BzKTtcblxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGF0LnRleHQub2JqZWN0M0QpIHtcblx0ICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGF0LnRleHQub2JqZWN0M0QuY2hpbGRyZW47XG5cdCAgICAgICAgaWYgKGNoaWxkcmVuWzBdICYmIGNoaWxkcmVuWzBdLmdlb21ldHJ5ICYmIGNoaWxkcmVuWzBdLmdlb21ldHJ5LnZpc2libGVHbHlwaHMpIHtcblx0ICAgICAgICAgIHZhciB2ID0gMDtcblx0ICAgICAgICAgIGlmIChjaGlsZHJlblswXS5nZW9tZXRyeS52aXNpYmxlR2x5cGhzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICB2ID0gZ2V0VGV4dFdpZHRoKHRoYXQudGV4dCwgcHJvcHMsIHRydWUpO1xuXHQgICAgICAgICAgICB0aGF0LnRleHQuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgdHJ1ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICB0aGF0LmN1cnNvci5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgdiArIHBhZGRpbmcubGVmdCArICcgMCAwLjAwMycpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGF0LmN1cnNvci5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgcGFkZGluZy5sZWZ0ICsgJyAwIDAuMDAzJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoYXQuY3Vyc29yLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBwYWRkaW5nLmxlZnQgKyAnIDAgMC4wMDMnKTtcblx0ICAgICAgfVxuXHQgICAgICBnZXRUZXh0V2lkdGgodGhhdC5wbGFjZWhvbGRlciwgcGxhY2Vob2xkZXJfcHJvcHMpO1xuXHQgICAgfSwgMCk7XG5cblx0ICAgIHRoaXMuYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgdGhpcy5kYXRhLmJhY2tncm91bmRDb2xvcik7XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMuYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoJ21hdGVyaWFsJywgeyBzaGFkZXI6ICdmbGF0JywgY29sb3I6IF90aGlzLmRhdGEuYmFja2dyb3VuZENvbG9yIH0pO1xuXHQgICAgfSk7XG5cdCAgICAvKmlmICh0aGlzLmRhdGEuYmFja2dyb3VuZE9wYWNpdHkpIHtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgICAgICBVdGlscy51cGRhdGVPcGFjaXR5KHRoYXQuYmFja2dyb3VuZCwgdGhhdC5kYXRhLmJhY2tncm91bmRPcGFjaXR5KTtcblx0ICAgICAgfSwgMCk7XG5cdCAgICB9Ki9cblx0ICAgIHRoaXMuYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgdGhpcy5kYXRhLndpZHRoKTtcblx0ICAgIC8vdGhpcy5iYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCB0aGlzLmRhdGEud2lkdGgvMisnIDAgMCcpO1xuXHQgICAgdGhpcy5iYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMCAtMC4wOSAwLjAwMScpO1xuXHQgICAgdGhpcy50ZXh0LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBwYWRkaW5nLmxlZnQgLSAwLjAwMSArIHRoaXMuZGF0YS53aWR0aCAvIDIgKyAnIC0wLjA1NSAwLjAwMicpO1xuXHQgICAgdGhpcy5wbGFjZWhvbGRlci5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgcGFkZGluZy5sZWZ0IC0gMC4wMDEgKyB0aGlzLmRhdGEud2lkdGggLyAyICsgJyAtMC4wNTUgMC4wMDInKTtcblx0ICB9LFxuXHQgIHVwZGF0ZUN1cnNvcjogZnVuY3Rpb24gdXBkYXRlQ3Vyc29yKCkge1xuXHQgICAgdGhpcy5jdXJzb3Iuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHRoaXMuZGF0YS5jdXJzb3JXaWR0aCk7XG5cdCAgICB0aGlzLmN1cnNvci5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHRoaXMuZGF0YS5jdXJzb3JIZWlnaHQpO1xuXHQgICAgdGhpcy5jdXJzb3Iuc2V0QXR0cmlidXRlKCdjb2xvcicsIHRoaXMuZGF0YS5jdXJzb3JDb2xvcik7XG5cdCAgfSxcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpcztcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyAgVXRpbHMudXBkYXRlT3BhY2l0eSh0aGF0LmVsLCB0aGF0LmRhdGEub3BhY2l0eSk7XG5cdCAgICB9LCAwKTtcblxuXHQgICAgdGhpcy51cGRhdGVDdXJzb3IoKTtcblx0ICAgIHRoaXMudXBkYXRlVGV4dCgpO1xuXHQgIH0sXG5cdCAgdGljazogZnVuY3Rpb24gdGljaygpIHt9LFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge30sXG5cdCAgcGF1c2U6IGZ1bmN0aW9uIHBhdXNlKCkge30sXG5cdCAgcGxheTogZnVuY3Rpb24gcGxheSgpIHt9XG5cdH0pO1xuXG5cdEFGUkFNRS5yZWdpc3RlclByaW1pdGl2ZSgnYS1pbnB1dCcsIHtcblx0ICBkZWZhdWx0Q29tcG9uZW50czoge1xuXHQgICAgaW5wdXQ6IHt9XG5cdCAgfSxcblx0ICBtYXBwaW5nczoge1xuXHQgICAgdmFsdWU6ICdpbnB1dC52YWx1ZScsXG5cdCAgICBuYW1lOiAnaW5wdXQubmFtZScsXG5cdCAgICBkaXNhYmxlZDogJ2lucHV0LmRpc2FibGVkJyxcblx0ICAgIGNvbG9yOiAnaW5wdXQuY29sb3InLFxuXHQgICAgYWxpZ246ICdpbnB1dC5hbGlnbicsXG5cdCAgICBmb250OiAnaW5wdXQuZm9udCcsXG5cdCAgICAnbGV0dGVyLXNwYWNpbmcnOiAnaW5wdXQubGV0dGVyU3BhY2luZycsXG5cdCAgICAnbGluZS1oZWlnaHQnOiAnaW5wdXQubGluZUhlaWdodCcsXG5cdCAgICAnb3BhY2l0eSc6ICdpbnB1dC5vcGFjaXR5Jyxcblx0ICAgICdzaWRlJzogJ2lucHV0LnNpZGUnLFxuXHQgICAgJ3RhYi1zaXplJzogJ2lucHV0LnRhYlNpemUnLFxuXHQgICAgcGxhY2Vob2xkZXI6ICdpbnB1dC5wbGFjZWhvbGRlcicsXG5cdCAgICAncGxhY2Vob2xkZXItY29sb3InOiAnaW5wdXQucGxhY2Vob2xkZXJDb2xvcicsXG5cdCAgICAnbWF4LWxlbmd0aCc6ICdpbnB1dC5tYXhMZW5ndGgnLFxuXHQgICAgdHlwZTogJ2lucHV0LnR5cGUnLFxuXHQgICAgd2lkdGg6ICdpbnB1dC53aWR0aCcsXG5cdCAgICAnY3Vyc29yLXdpZHRoJzogXCJpbnB1dC5jdXJzb3JXaWR0aFwiLFxuXHQgICAgJ2N1cnNvci1oZWlnaHQnOiBcImlucHV0LmN1cnNvckhlaWdodFwiLFxuXHQgICAgJ2N1cnNvci1jb2xvcic6IFwiaW5wdXQuY3Vyc29yQ29sb3JcIixcblx0ICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ2lucHV0LmJhY2tncm91bmRDb2xvcicsXG5cdCAgICAnYmFja2dyb3VuZC1vcGFjaXR5JzogJ2lucHV0LmJhY2tncm91bmRPcGFjaXR5J1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0pLFxuLyogMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIEFzc2V0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHR2YXIgU0ZYID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cblx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdzd2l0Y2gnLCB7XG5cdCAgc2NoZW1hOiB7XG5cdCAgICBuYW1lOiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwiXCIgfSxcblx0ICAgIGVuYWJsZWQ6IHsgdHlwZTogJ2Jvb2xlYW4nLCBkZWZhdWx0OiBmYWxzZSB9LFxuXHQgICAgZGlzYWJsZWQ6IHsgdHlwZTogJ2Jvb2xlYW4nLCBkZWZhdWx0OiBmYWxzZSB9LFxuXHQgICAgZmlsbENvbG9yOiB7IHR5cGU6IFwiY29sb3JcIiwgZGVmYXVsdDogXCIjYmFiYWJhXCIgfSxcblx0ICAgIGtub2JDb2xvcjogeyB0eXBlOiBcImNvbG9yXCIsIGRlZmF1bHQ6IFwiI2Y1ZjVmNVwiIH0sXG5cdCAgICBmaWxsQ29sb3JFbmFibGVkOiB7IHR5cGU6IFwiY29sb3JcIiwgZGVmYXVsdDogXCIjODBhOGZmXCIgfSxcblx0ICAgIGtub2JDb2xvckVuYWJsZWQ6IHsgdHlwZTogXCJjb2xvclwiLCBkZWZhdWx0OiBcIiM0MDc2ZmRcIiB9LFxuXHQgICAgZmlsbENvbG9yRGlzYWJsZWQ6IHsgdHlwZTogXCJjb2xvclwiLCBkZWZhdWx0OiBcIiM5MzkzOTNcIiB9LFxuXHQgICAga25vYkNvbG9yRGlzYWJsZWQ6IHsgdHlwZTogXCJjb2xvclwiLCBkZWZhdWx0OiBcIiNhMmEyYTJcIiB9XG5cdCAgfSxcblx0ICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG5cdCAgICAvLyBBc3NldHNcblx0ICAgIFV0aWxzLnByZWxvYWRBc3NldHMoQXNzZXRzKTtcblxuXHQgICAgLy8gU0ZYXG5cdCAgICBTRlguaW5pdCh0aGlzLmVsKTtcblxuXHQgICAgLy8gRklMTFxuXHQgICAgdGhpcy5lbC5maWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1yb3VuZGVkJyk7XG5cdCAgICB0aGlzLmVsLmZpbGwuc2V0QXR0cmlidXRlKCd3aWR0aCcsIDAuMzYpO1xuXHQgICAgdGhpcy5lbC5maWxsLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgMC4xNik7XG5cdCAgICB0aGlzLmVsLmZpbGwuc2V0QXR0cmlidXRlKCdyYWRpdXMnLCAwLjA4KTtcblx0ICAgIHRoaXMuZWwuZmlsbC5zZXRBdHRyaWJ1dGUoJ3NpZGUnLCAnZG91YmxlJyk7XG5cdCAgICB0aGlzLmVsLmZpbGwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwIDAgMC4wMScpO1xuXHQgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmVsLmZpbGwpO1xuXG5cdCAgICAvLyBLTk9CXG5cdCAgICB0aGlzLmVsLmtub2IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWNpcmNsZScpO1xuXHQgICAgdGhpcy5lbC5rbm9iLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMC4wNiAwLjA4IDAuMDInKTtcblx0ICAgIHRoaXMuZWwua25vYi5zZXRBdHRyaWJ1dGUoJ3JhZGl1cycsIDAuMTIpO1xuXHQgICAgdGhpcy5lbC5rbm9iLnNldEF0dHJpYnV0ZSgnc2lkZScsICdkb3VibGUnKTtcblx0ICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5lbC5rbm9iKTtcblxuXHQgICAgLy8gU0hBRE9XXG5cdCAgICB0aGlzLmVsLnNoYWRvd19lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtaW1hZ2UnKTtcblx0ICAgIHRoaXMuZWwuc2hhZG93X2VsLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAwLjI0ICogMS4yNSk7XG5cdCAgICB0aGlzLmVsLnNoYWRvd19lbC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIDAuMjQgKiAxLjI1KTtcblx0ICAgIHRoaXMuZWwuc2hhZG93X2VsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMCAwIC0wLjAwMScpO1xuXHQgICAgdGhpcy5lbC5zaGFkb3dfZWwuc2V0QXR0cmlidXRlKCdzcmMnLCAnI2FmcmFtZVN3aXRjaFNoYWRvdycpO1xuXHQgICAgdGhpcy5lbC5rbm9iLmFwcGVuZENoaWxkKHRoaXMuZWwuc2hhZG93X2VsKTtcblxuXHQgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHRoaXMuY29tcG9uZW50cy5zd2l0Y2guZGF0YS5kaXNhYmxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnZW5hYmxlZCcsICF0aGlzLmNvbXBvbmVudHMuc3dpdGNoLmRhdGEuZW5hYmxlZCk7XG5cdCAgICAgIEV2ZW50LmVtaXQodGhpcywgJ2NoYW5nZScsIHRoaXMuY29tcG9uZW50cy5zd2l0Y2guZGF0YS5lbmFibGVkKTtcblx0ICAgIH0pO1xuXHQgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGlzLmNvbXBvbmVudHMuc3dpdGNoLmRhdGEuZGlzYWJsZWQpIHtcblx0ICAgICAgICByZXR1cm4gU0ZYLmNsaWNrRGlzYWJsZWQodGhpcyk7XG5cdCAgICAgIH1cblx0ICAgICAgU0ZYLmNsaWNrKHRoaXMpO1xuXHQgICAgfSk7XG5cblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmVsLCAnZW5hYmxlZCcsIHtcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdlbmFibGVkJyk7XG5cdCAgICAgIH0sXG5cdCAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2VuYWJsZWQnLCB2YWx1ZSk7XG5cdCAgICAgIH0sXG5cdCAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBvbjogZnVuY3Rpb24gb24oKSB7XG5cdCAgICB0aGlzLmVsLmZpbGwuc2V0QXR0cmlidXRlKCdjb2xvcicsIHRoaXMuZGF0YS5maWxsQ29sb3JFbmFibGVkKTtcblx0ICAgIHRoaXMuZWwua25vYi5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAuMzIgMC4wOCAwLjAyJyk7XG5cdCAgICB0aGlzLmVsLmtub2Iuc2V0QXR0cmlidXRlKCdjb2xvcicsIHRoaXMuZGF0YS5rbm9iQ29sb3JFbmFibGVkKTtcblx0ICB9LFxuXHQgIG9mZjogZnVuY3Rpb24gb2ZmKCkge1xuXHQgICAgdGhpcy5lbC5maWxsLnNldEF0dHJpYnV0ZSgnY29sb3InLCB0aGlzLmRhdGEuZmlsbENvbG9yKTtcblx0ICAgIHRoaXMuZWwua25vYi5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAuMDYgMC4wOCAwLjAyJyk7XG5cdCAgICB0aGlzLmVsLmtub2Iuc2V0QXR0cmlidXRlKCdjb2xvcicsIHRoaXMuZGF0YS5rbm9iQ29sb3IpO1xuXHQgIH0sXG5cdCAgZGlzYWJsZTogZnVuY3Rpb24gZGlzYWJsZSgpIHtcblx0ICAgIHRoaXMuZWwuZmlsbC5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgdGhpcy5kYXRhLmZpbGxDb2xvckRpc2FibGVkKTtcblx0ICAgIHRoaXMuZWwua25vYi5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgdGhpcy5kYXRhLmtub2JDb2xvckRpc2FibGVkKTtcblx0ICB9LFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuXHQgICAgaWYgKHRoaXMuZGF0YS5lbmFibGVkKSB7XG5cdCAgICAgIHRoaXMub24oKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMub2ZmKCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5kYXRhLmRpc2FibGVkKSB7XG5cdCAgICAgIHRoaXMuZGlzYWJsZSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgdGljazogZnVuY3Rpb24gdGljaygpIHt9LFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge30sXG5cdCAgcGF1c2U6IGZ1bmN0aW9uIHBhdXNlKCkge30sXG5cdCAgcGxheTogZnVuY3Rpb24gcGxheSgpIHt9XG5cdH0pO1xuXG5cdEFGUkFNRS5yZWdpc3RlclByaW1pdGl2ZSgnYS1zd2l0Y2gnLCB7XG5cdCAgZGVmYXVsdENvbXBvbmVudHM6IHtcblx0ICAgIHN3aXRjaDoge31cblx0ICB9LFxuXHQgIG1hcHBpbmdzOiB7XG5cdCAgICBuYW1lOiAnc3dpdGNoLm5hbWUnLFxuXHQgICAgZW5hYmxlZDogJ3N3aXRjaC5lbmFibGVkJyxcblx0ICAgIGRpc2FibGVkOiAnc3dpdGNoLmRpc2FibGVkJyxcblx0ICAgICdmaWxsLWNvbG9yJzogJ3N3aXRjaC5maWxsQ29sb3InLFxuXHQgICAgJ2tub2ItY29sb3InOiAnc3dpdGNoLmtub2JDb2xvcicsXG5cdCAgICAnZmlsbC1jb2xvci1lbmFibGVkJzogJ3N3aXRjaC5maWxsQ29sb3JFbmFibGVkJyxcblx0ICAgICdrbm9iLWNvbG9yLWVuYWJsZWQnOiAnc3dpdGNoLmtub2JDb2xvckVuYWJsZWQnLFxuXHQgICAgJ2ZpbGwtY29sb3ItZGlzYWJsZWQnOiAnc3dpdGNoLmZpbGxDb2xvckRpc2FibGVkJyxcblx0ICAgICdrbm9iLWNvbG9yLWRpc2FibGVkJzogJ3N3aXRjaC5rbm9iQ29sb3JEaXNhYmxlZCdcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gW3sgdHlwZTogJ2ltZycsIGlkOiAnYWZyYW1lU3dpdGNoU2hhZG93Jywgc3JjOiBBRlJBTUUuQVNTRVRTX1BBVEggKyAnL2ltYWdlcy9Td2l0Y2hTaGFkb3cucG5nJyB9LCB7IHR5cGU6ICdhdWRpbycsIGlkOiAnYWZyYW1lU3dpdGNoQ2xpY2snLCBzcmM6IEFGUkFNRS5BU1NFVFNfUEFUSCArICcvc291bmRzL0lucHV0Q2xpY2subXAzJyB9LCB7IHR5cGU6ICdhdWRpbycsIGlkOiAnYWZyYW1lU3dpdGNoQ2xpY2tEaXNhYmxlZCcsIHNyYzogQUZSQU1FLkFTU0VUU19QQVRIICsgJy9zb3VuZHMvQnV0dG9uQ2xpY2tEaXNhYmxlZC5tcDMnIH1dO1xuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBTRlggPSB7XG5cblx0ICBpbml0OiBmdW5jdGlvbiBpbml0KHBhcmVudCkge1xuXHQgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1zb3VuZCcpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdrZXknLCAnYWZyYW1lU3dpdGNoQ2xpY2tTb3VuZCcpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdzZngnLCB0cnVlKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnc3JjJywgJyNhZnJhbWVTd2l0Y2hDbGljaycpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwIDIgNScpO1xuXHQgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcblxuXHQgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLXNvdW5kJyk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ2tleScsICdhZnJhbWVTd2l0Y2hDbGlja0Rpc2FibGVkU291bmQnKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnc2Z4JywgdHJ1ZSk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsICcjYWZyYW1lU3dpdGNoQ2xpY2tEaXNhYmxlZCcpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwIDIgNScpO1xuXHQgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9LFxuXG5cdCAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKHBhcmVudCkge1xuXHQgICAgdmFyIGVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJ1trZXk9YWZyYW1lU3dpdGNoQ2xpY2tTb3VuZF0nKTtcblx0ICAgIGlmICghZWwpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZWwuY29tcG9uZW50cy5zb3VuZC5zdG9wU291bmQoKTtcblx0ICAgIGVsLmNvbXBvbmVudHMuc291bmQucGxheVNvdW5kKCk7XG5cdCAgfSxcblxuXHQgIGNsaWNrRGlzYWJsZWQ6IGZ1bmN0aW9uIGNsaWNrRGlzYWJsZWQocGFyZW50KSB7XG5cdCAgICB2YXIgZWwgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignW2tleT1hZnJhbWVTd2l0Y2hDbGlja0Rpc2FibGVkU291bmRdJyk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsLmNvbXBvbmVudHMuc291bmQuc3RvcFNvdW5kKCk7XG5cdCAgICBlbC5jb21wb25lbnRzLnNvdW5kLnBsYXlTb3VuZCgpO1xuXHQgIH1cblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFNGWDtcblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHR2YXIgRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG5cdEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZm9ybScsIHtcblx0ICBzY2hlbWE6IHt9LFxuXHQgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7fSxcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHt9LFxuXHQgIHRpY2s6IGZ1bmN0aW9uIHRpY2soKSB7fSxcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9LFxuXHQgIHBhdXNlOiBmdW5jdGlvbiBwYXVzZSgpIHt9LFxuXHQgIHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7fVxuXHR9KTtcblxuXHRBRlJBTUUucmVnaXN0ZXJQcmltaXRpdmUoJ2EtZm9ybScsIHtcblx0ICBkZWZhdWx0Q29tcG9uZW50czoge1xuXHQgICAgZm9ybToge31cblx0ICB9LFxuXHQgIG1hcHBpbmdzOiB7fVxuXHR9KTtcblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHR2YXIgRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgQXNzZXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciBTRlggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblxuXHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3JhZGlvJywge1xuXHQgIHNjaGVtYToge1xuXHQgICAgY2hlY2tlZDogeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6IGZhbHNlIH0sXG5cdCAgICBkaXNhYmxlZDogeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6IGZhbHNlIH0sXG5cdCAgICBuYW1lOiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwiXCIgfSxcblx0ICAgIHZhbHVlOiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwiXCIgfSxcblx0ICAgIGxhYmVsOiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwiXCIgfSxcblx0ICAgIHJhZGlvQ29sb3I6IHsgdHlwZTogXCJjb2xvclwiLCBkZWZhdWx0OiBcIiM3NTc1NzVcIiB9LFxuXHQgICAgcmFkaW9Db2xvckNoZWNrZWQ6IHsgdHlwZTogXCJjb2xvclwiLCBkZWZhdWx0OiBcIiM0MDc2ZmRcIiB9LFxuXHQgICAgY29sb3I6IHsgdHlwZTogXCJjb2xvclwiLCBkZWZhdWx0OiBcIiM3NTc1NzVcIiB9LFxuXHQgICAgZm9udDogeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiBcIlwiIH0sXG5cdCAgICBsZXR0ZXJTcGFjaW5nOiB7IHR5cGU6IFwiaW50XCIsIGRlZmF1bHQ6IDAgfSxcblx0ICAgIGxpbmVIZWlnaHQ6IHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJcIiB9LFxuXHQgICAgb3BhY2l0eTogeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAxIH0sXG5cdCAgICB3aWR0aDogeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAxIH1cblx0ICB9LFxuXHQgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICB2YXIgdGhhdCA9IHRoaXM7XG5cblx0ICAgIC8vIEFzc2V0c1xuXHQgICAgVXRpbHMucHJlbG9hZEFzc2V0cyhBc3NldHMpO1xuXG5cdCAgICAvLyBTRlhcblx0ICAgIFNGWC5pbml0KHRoaXMuZWwpO1xuXG5cdCAgICAvLyBISVRCT1hcblx0ICAgIHRoaXMuaGl0Ym94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1wbGFuZScpO1xuXHQgICAgdGhpcy5oaXRib3guc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAwLjIpO1xuXHQgICAgdGhpcy5oaXRib3guc2V0QXR0cmlidXRlKCdvcGFjaXR5JywgMCk7XG5cdCAgICB0aGlzLmhpdGJveC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAgMCAwLjAwMScpO1xuXHQgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmhpdGJveCk7XG5cblx0ICAgIC8vIE9VVExJTkVcblx0ICAgIHRoaXMub3V0bGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtcmluZycpO1xuXHQgICAgdGhpcy5vdXRsaW5lLnNldEF0dHJpYnV0ZSgncmFkaXVzLW91dGVyJywgMC4xKTtcblx0ICAgIHRoaXMub3V0bGluZS5zZXRBdHRyaWJ1dGUoJ3JhZGl1cy1pbm5lcicsIDAuMDc4KTtcblx0ICAgIHRoaXMub3V0bGluZS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAuMSAwIDAuMDAyJyk7XG5cdCAgICB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMub3V0bGluZSk7XG5cblx0ICAgIC8vIENJUkNMRVxuXHQgICAgdGhpcy5jaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWNpcmNsZScpO1xuXHQgICAgdGhpcy5jaXJjbGUuc2V0QXR0cmlidXRlKCdyYWRpdXMnLCAwLjA1KTtcblx0ICAgIHRoaXMuY2lyY2xlLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMC4xIDAgMC4wMDInKTtcblx0ICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5jaXJjbGUpO1xuXG5cdCAgICAvLyBMQUJFTFxuXHQgICAgdGhpcy5sYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZW50aXR5Jyk7XG5cdCAgICB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMubGFiZWwpO1xuXG5cdCAgICAvLyBFVkVOVFNcblx0ICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGlzLmNvbXBvbmVudHMucmFkaW8uZGF0YS5kaXNhYmxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnY2hlY2tlZCcsIHRydWUpO1xuXHQgICAgICB0aGF0Lm9uQ2xpY2soKTtcblx0ICAgIH0pO1xuXHQgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGlzLmNvbXBvbmVudHMucmFkaW8uZGF0YS5kaXNhYmxlZCkge1xuXHQgICAgICAgIHJldHVybiBTRlguY2xpY2tEaXNhYmxlZCh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgICBTRlguY2xpY2sodGhpcyk7XG5cdCAgICB9KTtcblxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuZWwsICd2YWx1ZScsIHtcblx0ICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCd2YWx1ZScpO1xuXHQgICAgICB9LFxuXHQgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHZhbHVlKTtcblx0ICAgICAgfSxcblx0ICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2sobm9lbWl0KSB7XG5cdCAgICBpZiAodGhpcy5kYXRhLm5hbWUpIHtcblx0ICAgICAgdmFyIG5lYXJlc3RGb3JtID0gdGhpcy5lbC5jbG9zZXN0KFwiYS1mb3JtXCIpO1xuXHQgICAgICBpZiAobmVhcmVzdEZvcm0pIHtcblx0ICAgICAgICB2YXIgZGlkQ2hlY2sgPSBmYWxzZTtcblx0ICAgICAgICB2YXIgY2hpbGRyZW4gPSBBcnJheS5mcm9tKG5lYXJlc3RGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tuYW1lPScgKyB0aGlzLmRhdGEubmFtZSArICddJykpO1xuXHQgICAgICAgIGNoaWxkcmVuLnJldmVyc2UoKTtcblx0ICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG5cdCAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG5cdCAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGNoaWxkcmVuW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuXHQgICAgICAgICAgICB2YXIgY2hpbGQgPSBfc3RlcC52YWx1ZTtcblxuXHQgICAgICAgICAgICAvLyBSYWRpbyArIG5vdCBkaXNhYmxlZFxuXHQgICAgICAgICAgICBpZiAoY2hpbGQuY29tcG9uZW50cy5yYWRpbykge1xuXHQgICAgICAgICAgICAgIC8vIEN1cnJlbnRseSBjaGVja2VkXG5cdCAgICAgICAgICAgICAgaWYgKGNoaWxkID09PSB0aGlzLmVsICYmIGNoaWxkLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG5cdCAgICAgICAgICAgICAgICBkaWRDaGVjayA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICBjaGlsZC5jb21wb25lbnRzLnJhZGlvLmNoZWNrKCk7XG5cdCAgICAgICAgICAgICAgICBpZiAoIW5vZW1pdCkge1xuXHQgICAgICAgICAgICAgICAgICBFdmVudC5lbWl0KGNoaWxkLCAnY2hhbmdlJywgdHJ1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGlmICghZGlkQ2hlY2sgJiYgIXRoaXMuZGF0YS5jaGVja2VkICYmIGNoaWxkLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG5cdCAgICAgICAgICAgICAgICAgIGRpZENoZWNrID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgY2hpbGQuY29tcG9uZW50cy5yYWRpby5jaGVjaygpO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgY2hpbGQuY29tcG9uZW50cy5yYWRpby51bmNoZWNrKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG5cdCAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcblx0ICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcblx0ICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuXHQgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKCFkaWRDaGVjayAmJiB0aGlzLmVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG5cdCAgICAgICAgICB0aGlzLmNoZWNrKCk7XG5cdCAgICAgICAgICBpZiAoIW5vZW1pdCkge1xuXHQgICAgICAgICAgICBFdmVudC5lbWl0KHRoaXMuZWwsICdjaGFuZ2UnLCB0cnVlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHQgIGNoZWNrOiBmdW5jdGlvbiBjaGVjaygpIHtcblx0ICAgIHRoaXMub3V0bGluZS5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgdGhpcy5kYXRhLnJhZGlvQ29sb3JDaGVja2VkKTtcblx0ICAgIHRoaXMuY2lyY2xlLnNldEF0dHJpYnV0ZSgnY29sb3InLCB0aGlzLmRhdGEucmFkaW9Db2xvckNoZWNrZWQpO1xuXHQgICAgdGhpcy5jaXJjbGUuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgdHJ1ZSk7XG5cdCAgICBpZiAodGhpcy5kYXRhLmRpc2FibGVkKSB7XG5cdCAgICAgIHRoaXMuZGlzYWJsZWQoKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHVuY2hlY2s6IGZ1bmN0aW9uIHVuY2hlY2soKSB7XG5cdCAgICB0aGlzLm91dGxpbmUuc2V0QXR0cmlidXRlKCdjb2xvcicsIHRoaXMuZGF0YS5yYWRpb0NvbG9yKTtcblx0ICAgIHRoaXMuY2lyY2xlLnNldEF0dHJpYnV0ZSgndmlzaWJsZScsIGZhbHNlKTtcblx0ICAgIGlmICh0aGlzLmRhdGEuZGlzYWJsZWQpIHtcblx0ICAgICAgdGhpcy5kaXNhYmxlZCgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZGlzYWJsZWQ6IGZ1bmN0aW9uIGRpc2FibGVkKCkge1xuXHQgICAgdGhpcy5vdXRsaW5lLnNldEF0dHJpYnV0ZSgnY29sb3InLCB0aGlzLmRhdGEucmFkaW9Db2xvcik7XG5cdCAgICB0aGlzLmNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgdGhpcy5kYXRhLnJhZGlvQ29sb3IpO1xuXHQgIH0sXG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7XG5cdCAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICB0aGlzLm9uQ2xpY2sodHJ1ZSk7XG5cblx0ICAgIC8vIEhJVEJPWFxuXHQgICAgdGhpcy5oaXRib3guc2V0QXR0cmlidXRlKCd3aWR0aCcsIHRoaXMuZGF0YS53aWR0aCk7XG5cdCAgICB0aGlzLmhpdGJveC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgdGhpcy5kYXRhLndpZHRoIC8gMiArICcgMCAwLjAwMScpO1xuXG5cdCAgICB2YXIgcHJvcHMgPSB7XG5cdCAgICAgIGNvbG9yOiB0aGlzLmRhdGEuY29sb3IsXG5cdCAgICAgIGFsaWduOiAnbGVmdCcsXG5cdCAgICAgIHdyYXBDb3VudDogMTAgKiAodGhpcy5kYXRhLndpZHRoICsgMC4yKSxcblx0ICAgICAgd2lkdGg6IHRoaXMuZGF0YS53aWR0aFxuXHQgICAgfTtcblx0ICAgIGlmICh0aGlzLmRhdGEuZm9udCkge1xuXHQgICAgICBwcm9wcy5mb250ID0gdGhpcy5kYXRhLmZvbnQ7XG5cdCAgICB9XG5cblx0ICAgIC8vIFRJVExFXG5cdCAgICBwcm9wcy52YWx1ZSA9IHRoaXMuZGF0YS5sYWJlbDtcblx0ICAgIHByb3BzLmNvbG9yID0gdGhpcy5kYXRhLmNvbG9yO1xuXHQgICAgdGhpcy5sYWJlbC5zZXRBdHRyaWJ1dGUoJ3RleHQnLCBwcm9wcyk7XG5cdCAgICB0aGlzLmxhYmVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCB0aGlzLmRhdGEud2lkdGggLyAyICsgMC4yNCArICcgMCAwLjAwMicpO1xuXG5cdCAgICAvLyBUUklNIFRFWFQgSUYgTkVFREVELi4gQFRPRE86IG9wdGltaXplIHRoaXMgbWVzcy4uXG5cdCAgICBmdW5jdGlvbiBnZXRUZXh0V2lkdGgoZWwsIF93aWR0aEZhY3Rvcikge1xuXHQgICAgICBpZiAoIWVsLm9iamVjdDNEIHx8ICFlbC5vYmplY3QzRC5jaGlsZHJlbiB8fCAhZWwub2JqZWN0M0QuY2hpbGRyZW5bMF0pIHtcblx0ICAgICAgICByZXR1cm4gMDtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgdiA9IGVsLm9iamVjdDNELmNoaWxkcmVuWzBdLmdlb21ldHJ5LnZpc2libGVHbHlwaHM7XG5cdCAgICAgIGlmICghdikge1xuXHQgICAgICAgIHJldHVybiAwO1xuXHQgICAgICB9XG5cdCAgICAgIHYgPSB2W3YubGVuZ3RoIC0gMV07XG5cdCAgICAgIGlmICghdikge1xuXHQgICAgICAgIHJldHVybiAwO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh2LmxpbmUpIHtcblx0ICAgICAgICBwcm9wcy52YWx1ZSA9IHByb3BzLnZhbHVlLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIHByb3BzKTtcblx0ICAgICAgICByZXR1cm4gZ2V0VGV4dFdpZHRoKGVsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoIV93aWR0aEZhY3Rvcikge1xuXHQgICAgICAgICAgX3dpZHRoRmFjdG9yID0gVXRpbHMuZ2V0V2lkdGhGYWN0b3IoZWwsIHByb3BzLndyYXBDb3VudCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHYgPSAodi5wb3NpdGlvblswXSArIHYuZGF0YS53aWR0aCkgLyAoX3dpZHRoRmFjdG9yIC8gdGhhdC5kYXRhLndpZHRoKTtcblx0ICAgICAgICB2YXIgdGV4dFJhdGlvID0gdiAvIHRoYXQuZGF0YS53aWR0aDtcblx0ICAgICAgICBpZiAodGV4dFJhdGlvID4gMSkge1xuXHQgICAgICAgICAgcHJvcHMudmFsdWUgPSBwcm9wcy52YWx1ZS5zbGljZSgwLCAtMSk7XG5cdCAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIHByb3BzKTtcblx0ICAgICAgICAgIHJldHVybiBnZXRUZXh0V2lkdGgoZWwsIF93aWR0aEZhY3Rvcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2O1xuXHQgICAgfVxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGF0LmRhdGEubGFiZWwubGVuZ3RoKSB7XG5cdCAgICAgICAgZ2V0VGV4dFdpZHRoKHRoYXQubGFiZWwpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh0aGF0LmRhdGEuZGlzYWJsZWQpIHtcblx0ICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBpZiAodGhhdC5vdXRsaW5lLm9iamVjdDNELmNoaWxkcmVuWzBdKSB7XG5cdCAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuXHQgICAgICAgICAgICBVdGlscy51cGRhdGVPcGFjaXR5KHRoYXQub3V0bGluZSwgMC40KTtcblx0ICAgICAgICAgICAgVXRpbHMudXBkYXRlT3BhY2l0eSh0aGF0LmNpcmNsZSwgMC40KTtcblx0ICAgICAgICAgICAgVXRpbHMudXBkYXRlT3BhY2l0eSh0aGF0LmxhYmVsLCAwLjQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIDEwKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgX3RpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgaWYgKHRoYXQub3V0bGluZS5vYmplY3QzRC5jaGlsZHJlblswXSkge1xuXHQgICAgICAgICAgICBjbGVhckludGVydmFsKF90aW1lcik7XG5cdCAgICAgICAgICAgIFV0aWxzLnVwZGF0ZU9wYWNpdHkodGhhdC5vdXRsaW5lLCAxKTtcblx0ICAgICAgICAgICAgVXRpbHMudXBkYXRlT3BhY2l0eSh0aGF0LmNpcmNsZSwgMSk7XG5cdCAgICAgICAgICAgIFV0aWxzLnVwZGF0ZU9wYWNpdHkodGhhdC5sYWJlbCwgMSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgMTApO1xuXHQgICAgICB9XG5cdCAgICB9LCAwKTtcblx0ICB9LFxuXHQgIHRpY2s6IGZ1bmN0aW9uIHRpY2soKSB7fSxcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9LFxuXHQgIHBhdXNlOiBmdW5jdGlvbiBwYXVzZSgpIHt9LFxuXHQgIHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7fVxuXHR9KTtcblxuXHRBRlJBTUUucmVnaXN0ZXJQcmltaXRpdmUoJ2EtcmFkaW8nLCB7XG5cdCAgZGVmYXVsdENvbXBvbmVudHM6IHtcblx0ICAgIHJhZGlvOiB7fVxuXHQgIH0sXG5cdCAgbWFwcGluZ3M6IHtcblx0ICAgIGNoZWNrZWQ6ICdyYWRpby5jaGVja2VkJyxcblx0ICAgIGRpc2FibGVkOiAncmFkaW8uZGlzYWJsZWQnLFxuXHQgICAgbmFtZTogJ3JhZGlvLm5hbWUnLFxuXHQgICAgdmFsdWU6ICdyYWRpby52YWx1ZScsXG5cdCAgICBsYWJlbDogJ3JhZGlvLmxhYmVsJyxcblx0ICAgICdyYWRpby1jb2xvcic6ICdyYWRpby5yYWRpb0NvbG9yJyxcblx0ICAgICdyYWRpby1jb2xvci1jaGVja2VkJzogJ3JhZGlvLnJhZGlvQ29sb3JDaGVja2VkJyxcblx0ICAgIGNvbG9yOiAncmFkaW8uY29sb3InLFxuXHQgICAgYWxpZ246ICdyYWRpby5hbGlnbicsXG5cdCAgICBmb250OiAncmFkaW8uZm9udCcsXG5cdCAgICAnbGV0dGVyLXNwYWNpbmcnOiAncmFkaW8ubGV0dGVyU3BhY2luZycsXG5cdCAgICAnbGluZS1oZWlnaHQnOiAncmFkaW8ubGluZUhlaWdodCcsXG5cdCAgICAnb3BhY2l0eSc6ICdyYWRpby5vcGFjaXR5Jyxcblx0ICAgIHdpZHRoOiAncmFkaW8ud2lkdGgnXG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFt7IHR5cGU6ICdhdWRpbycsIGlkOiAnYWZyYW1lUmFkaW9DbGljaycsIHNyYzogQUZSQU1FLkFTU0VUU19QQVRIICsgJy9zb3VuZHMvSW5wdXRDbGljay5tcDMnIH0sIHsgdHlwZTogJ2F1ZGlvJywgaWQ6ICdhZnJhbWVSYWRpb0NsaWNrRGlzYWJsZWQnLCBzcmM6IEFGUkFNRS5BU1NFVFNfUEFUSCArICcvc291bmRzL0J1dHRvbkNsaWNrRGlzYWJsZWQubXAzJyB9XTtcblxuLyoqKi8gfSksXG4vKiAyMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgU0ZYID0ge1xuXG5cdCAgaW5pdDogZnVuY3Rpb24gaW5pdChwYXJlbnQpIHtcblx0ICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Etc291bmQnKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgna2V5JywgJ2FmcmFtZVJhZGlvQ2xpY2tTb3VuZCcpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdzZngnLCB0cnVlKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnc3JjJywgJyNhZnJhbWVSYWRpb0NsaWNrJyk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAgMiA1Jyk7XG5cdCAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpO1xuXG5cdCAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Etc291bmQnKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgna2V5JywgJ2FmcmFtZVJhZGlvQ2xpY2tEaXNhYmxlZFNvdW5kJyk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NmeCcsIHRydWUpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdzcmMnLCAnI2FmcmFtZVJhZGlvQ2xpY2tEaXNhYmxlZCcpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwIDIgNScpO1xuXHQgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9LFxuXG5cdCAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKHBhcmVudCkge1xuXHQgICAgdmFyIGVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJ1trZXk9YWZyYW1lUmFkaW9DbGlja1NvdW5kXScpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbC5jb21wb25lbnRzLnNvdW5kLnN0b3BTb3VuZCgpO1xuXHQgICAgZWwuY29tcG9uZW50cy5zb3VuZC5wbGF5U291bmQoKTtcblx0ICB9LFxuXG5cdCAgY2xpY2tEaXNhYmxlZDogZnVuY3Rpb24gY2xpY2tEaXNhYmxlZChwYXJlbnQpIHtcblx0ICAgIHZhciBlbCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCdba2V5PWFmcmFtZVJhZGlvQ2xpY2tEaXNhYmxlZFNvdW5kXScpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbC5jb21wb25lbnRzLnNvdW5kLnN0b3BTb3VuZCgpO1xuXHQgICAgZWwuY29tcG9uZW50cy5zb3VuZC5wbGF5U291bmQoKTtcblx0ICB9XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBTRlg7XG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIEFzc2V0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHR2YXIgU0ZYID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cblx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdjaGVja2JveCcsIHtcblx0ICBzY2hlbWE6IHtcblx0ICAgIGNoZWNrZWQ6IHsgdHlwZTogJ2Jvb2xlYW4nLCBkZWZhdWx0OiBmYWxzZSB9LFxuXHQgICAgZGlzYWJsZWQ6IHsgdHlwZTogJ2Jvb2xlYW4nLCBkZWZhdWx0OiBmYWxzZSB9LFxuXHQgICAgbmFtZTogeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiBcIlwiIH0sXG5cdCAgICB2YWx1ZTogeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiBcIlwiIH0sXG5cdCAgICBsYWJlbDogeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiBcIlwiIH0sXG5cdCAgICBjaGVja2JveENvbG9yOiB7IHR5cGU6IFwiY29sb3JcIiwgZGVmYXVsdDogXCIjNzU3NTc1XCIgfSxcblx0ICAgIGNoZWNrYm94Q29sb3JDaGVja2VkOiB7IHR5cGU6IFwiY29sb3JcIiwgZGVmYXVsdDogXCIjNDA3NmZkXCIgfSxcblx0ICAgIGNvbG9yOiB7IHR5cGU6IFwiY29sb3JcIiwgZGVmYXVsdDogXCIjNzU3NTc1XCIgfSxcblx0ICAgIGZvbnQ6IHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJcIiB9LFxuXHQgICAgbGV0dGVyU3BhY2luZzogeyB0eXBlOiBcImludFwiLCBkZWZhdWx0OiAwIH0sXG5cdCAgICBsaW5lSGVpZ2h0OiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwiXCIgfSxcblx0ICAgIG9wYWNpdHk6IHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMSB9LFxuXHQgICAgd2lkdGg6IHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMSB9XG5cdCAgfSxcblx0ICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG5cdCAgICAvLyBBc3NldHNcblx0ICAgIFV0aWxzLnByZWxvYWRBc3NldHMoQXNzZXRzKTtcblxuXHQgICAgLy8gU0ZYXG5cdCAgICBTRlguaW5pdCh0aGlzLmVsKTtcblxuXHQgICAgLy8gSElUQk9YXG5cdCAgICB0aGlzLmhpdGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtcGxhbmUnKTtcblx0ICAgIHRoaXMuaGl0Ym94LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgMC4yKTtcblx0ICAgIHRoaXMuaGl0Ym94LnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsIDApO1xuXHQgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmhpdGJveCk7XG5cblx0ICAgIC8vIE9VVExJTkVcblx0ICAgIHRoaXMub3V0bGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Etcm91bmRlZCcpO1xuXHQgICAgdGhpcy5vdXRsaW5lLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAwLjIpO1xuXHQgICAgdGhpcy5vdXRsaW5lLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgMC4yKTtcblx0ICAgIHRoaXMub3V0bGluZS5zZXRBdHRyaWJ1dGUoJ3JhZGl1cycsIDAuMDIpO1xuXHQgICAgdGhpcy5vdXRsaW5lLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMCAtJyArIDAuMiAvIDIgKyAnIDAuMDEnKTtcblx0ICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5vdXRsaW5lKTtcblxuXHQgICAgLy8gSU5TSURFXG5cdCAgICB0aGlzLmluc2lkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Etcm91bmRlZCcpO1xuXHQgICAgdGhpcy5pbnNpZGUuc2V0QXR0cmlidXRlKCd3aWR0aCcsIDAuMTU2KTtcblx0ICAgIHRoaXMuaW5zaWRlLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgMC4xNTYpO1xuXHQgICAgdGhpcy5pbnNpZGUuc2V0QXR0cmlidXRlKCdyYWRpdXMnLCAwLjAxKTtcblx0ICAgIHRoaXMuaW5zaWRlLnNldEF0dHJpYnV0ZSgnY29sb3InLCBcIiNFRUVcIik7XG5cdCAgICB0aGlzLmluc2lkZS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgMC4xNTYgLyA4ICsgJyAtJyArIDAuMTU2IC8gMiArICcgMC4wMicpO1xuXHQgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmluc2lkZSk7XG5cblx0ICAgIC8vIENIRUNLTUFSS1xuXHQgICAgdGhpcy5jaGVja21hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWltYWdlJyk7XG5cdCAgICB0aGlzLmNoZWNrbWFyay5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgMC4xNik7XG5cdCAgICB0aGlzLmNoZWNrbWFyay5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIDAuMTYpO1xuXHQgICAgdGhpcy5jaGVja21hcmsuc2V0QXR0cmlidXRlKCdzcmMnLCBcIiNhZnJhbWVDaGVja2JveE1hcmtcIik7XG5cdCAgICB0aGlzLmNoZWNrbWFyay5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAuMSAwIDAuMDMnKTtcblx0ICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5jaGVja21hcmspO1xuXG5cdCAgICAvLyBMQUJFTFxuXHQgICAgdGhpcy5sYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZW50aXR5Jyk7XG5cdCAgICB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMubGFiZWwpO1xuXG5cdCAgICAvLyBFVkVOVFNcblx0ICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGlzLmNvbXBvbmVudHMuY2hlY2tib3guZGF0YS5kaXNhYmxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmNvbXBvbmVudHMuY2hlY2tib3guZGF0YS5jaGVja2VkID0gIXRoaXMuY29tcG9uZW50cy5jaGVja2JveC5kYXRhLmNoZWNrZWQ7XG5cdCAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdjaGVja2VkJywgdGhpcy5jb21wb25lbnRzLmNoZWNrYm94LmRhdGEuY2hlY2tlZCk7XG5cdCAgICAgIHRoYXQub25DbGljaygpO1xuXHQgICAgfSk7XG5cdCAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHRoaXMuY29tcG9uZW50cy5jaGVja2JveC5kYXRhLmRpc2FibGVkKSB7XG5cdCAgICAgICAgcmV0dXJuIFNGWC5jbGlja0Rpc2FibGVkKHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICAgIFNGWC5jbGljayh0aGlzKTtcblx0ICAgIH0pO1xuXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5lbCwgJ3ZhbHVlJywge1xuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG5cdCAgICAgIH0sXG5cdCAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdmFsdWUpO1xuXHQgICAgICB9LFxuXHQgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhub2VtaXQpIHtcblx0ICAgIGlmICh0aGlzLmRhdGEuY2hlY2tlZCkge1xuXHQgICAgICB0aGlzLmNoZWNrKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnVuY2hlY2soKTtcblx0ICAgIH1cblx0ICAgIGlmICghbm9lbWl0KSB7XG5cdCAgICAgIEV2ZW50LmVtaXQodGhpcy5lbCwgJ2NoYW5nZScsIHRoaXMuZGF0YS5jaGVja2VkKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGNoZWNrOiBmdW5jdGlvbiBjaGVjaygpIHtcblx0ICAgIHRoaXMub3V0bGluZS5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgdGhpcy5kYXRhLmNoZWNrYm94Q29sb3JDaGVja2VkKTtcblx0ICAgIHRoaXMuaW5zaWRlLnNldEF0dHJpYnV0ZSgnY29sb3InLCB0aGlzLmRhdGEuY2hlY2tib3hDb2xvckNoZWNrZWQpO1xuXHQgICAgdGhpcy5jaGVja21hcmsuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgdHJ1ZSk7XG5cdCAgICBpZiAodGhpcy5kYXRhLmRpc2FibGVkKSB7XG5cdCAgICAgIHRoaXMuZGlzYWJsZWQoKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHVuY2hlY2s6IGZ1bmN0aW9uIHVuY2hlY2soKSB7XG5cdCAgICB0aGlzLm91dGxpbmUuc2V0QXR0cmlidXRlKCdjb2xvcicsIHRoaXMuZGF0YS5jaGVja2JveENvbG9yKTtcblx0ICAgIHRoaXMuaW5zaWRlLnNldEF0dHJpYnV0ZSgnY29sb3InLCBcIiNFRUVcIik7XG5cdCAgICB0aGlzLmNoZWNrbWFyay5zZXRBdHRyaWJ1dGUoJ3Zpc2libGUnLCBmYWxzZSk7XG5cdCAgICBpZiAodGhpcy5kYXRhLmRpc2FibGVkKSB7XG5cdCAgICAgIHRoaXMuZGlzYWJsZWQoKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGRpc2FibGVkOiBmdW5jdGlvbiBkaXNhYmxlZCgpIHtcblx0ICAgIHRoaXMub3V0bGluZS5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgdGhpcy5kYXRhLmNoZWNrYm94Q29sb3IpO1xuXHQgICAgdGhpcy5pbnNpZGUuc2V0QXR0cmlidXRlKCdjb2xvcicsIHRoaXMuZGF0YS5jaGVja2JveENvbG9yKTtcblx0ICB9LFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuXHQgICAgdmFyIHRoYXQgPSB0aGlzO1xuXHQgICAgdGhpcy5vbkNsaWNrKHRydWUpO1xuXG5cdCAgICAvLyBISVRCT1hcblx0ICAgIHRoaXMuaGl0Ym94LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB0aGlzLmRhdGEud2lkdGgpO1xuXHQgICAgdGhpcy5oaXRib3guc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHRoaXMuZGF0YS53aWR0aCAvIDIgKyAnIDAgMC4wMScpO1xuXG5cdCAgICB2YXIgcHJvcHMgPSB7XG5cdCAgICAgIGNvbG9yOiB0aGlzLmRhdGEuY29sb3IsXG5cdCAgICAgIGFsaWduOiAnbGVmdCcsXG5cdCAgICAgIHdyYXBDb3VudDogMTAgKiAodGhpcy5kYXRhLndpZHRoICsgMC4yKSxcblx0ICAgICAgd2lkdGg6IHRoaXMuZGF0YS53aWR0aFxuXHQgICAgfTtcblx0ICAgIGlmICh0aGlzLmRhdGEuZm9udCkge1xuXHQgICAgICBwcm9wcy5mb250ID0gdGhpcy5kYXRhLmZvbnQ7XG5cdCAgICB9XG5cblx0ICAgIC8vIFRJVExFXG5cdCAgICBwcm9wcy52YWx1ZSA9IHRoaXMuZGF0YS5sYWJlbDtcblx0ICAgIHByb3BzLmNvbG9yID0gdGhpcy5kYXRhLmNvbG9yO1xuXHQgICAgdGhpcy5sYWJlbC5zZXRBdHRyaWJ1dGUoJ3RleHQnLCBwcm9wcyk7XG5cdCAgICB0aGlzLmxhYmVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCB0aGlzLmRhdGEud2lkdGggLyAyICsgMC4yNCArICcgMCAwLjAxJyk7XG5cblx0ICAgIC8vIFRSSU0gVEVYVCBJRiBORUVERUQuLiBAVE9ETzogb3B0aW1pemUgdGhpcyBtZXNzLi5cblx0ICAgIGZ1bmN0aW9uIGdldFRleHRXaWR0aChlbCwgX3dpZHRoRmFjdG9yKSB7XG5cdCAgICAgIGlmICghZWwub2JqZWN0M0QgfHwgIWVsLm9iamVjdDNELmNoaWxkcmVuIHx8ICFlbC5vYmplY3QzRC5jaGlsZHJlblswXSkge1xuXHQgICAgICAgIHJldHVybiAwO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB2ID0gZWwub2JqZWN0M0QuY2hpbGRyZW5bMF0uZ2VvbWV0cnkudmlzaWJsZUdseXBocztcblx0ICAgICAgaWYgKCF2KSB7XG5cdCAgICAgICAgcmV0dXJuIDA7XG5cdCAgICAgIH1cblx0ICAgICAgdiA9IHZbdi5sZW5ndGggLSAxXTtcblx0ICAgICAgaWYgKCF2KSB7XG5cdCAgICAgICAgcmV0dXJuIDA7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHYubGluZSkge1xuXHQgICAgICAgIHByb3BzLnZhbHVlID0gcHJvcHMudmFsdWUuc2xpY2UoMCwgLTEpO1xuXHQgICAgICAgIGVsLnNldEF0dHJpYnV0ZShcInRleHRcIiwgcHJvcHMpO1xuXHQgICAgICAgIHJldHVybiBnZXRUZXh0V2lkdGgoZWwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmICghX3dpZHRoRmFjdG9yKSB7XG5cdCAgICAgICAgICBfd2lkdGhGYWN0b3IgPSBVdGlscy5nZXRXaWR0aEZhY3RvcihlbCwgcHJvcHMud3JhcENvdW50KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdiA9ICh2LnBvc2l0aW9uWzBdICsgdi5kYXRhLndpZHRoKSAvIChfd2lkdGhGYWN0b3IgLyB0aGF0LmRhdGEud2lkdGgpO1xuXHQgICAgICAgIHZhciB0ZXh0UmF0aW8gPSB2IC8gdGhhdC5kYXRhLndpZHRoO1xuXHQgICAgICAgIGlmICh0ZXh0UmF0aW8gPiAxKSB7XG5cdCAgICAgICAgICBwcm9wcy52YWx1ZSA9IHByb3BzLnZhbHVlLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShcInRleHRcIiwgcHJvcHMpO1xuXHQgICAgICAgICAgcmV0dXJuIGdldFRleHRXaWR0aChlbCwgX3dpZHRoRmFjdG9yKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHY7XG5cdCAgICB9XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHRoYXQuZGF0YS5sYWJlbC5sZW5ndGgpIHtcblx0ICAgICAgICBnZXRUZXh0V2lkdGgodGhhdC5sYWJlbCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRoYXQuZGF0YS5kaXNhYmxlZCkge1xuXHQgICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIGlmICh0aGF0LmNoZWNrbWFyay5vYmplY3QzRC5jaGlsZHJlblswXSkge1xuXHQgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcblx0ICAgICAgICAgICAgVXRpbHMudXBkYXRlT3BhY2l0eSh0aGF0LmNoZWNrbWFyaywgMC40KTtcblx0ICAgICAgICAgICAgVXRpbHMudXBkYXRlT3BhY2l0eSh0aGF0LmxhYmVsLCAwLjQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIDEwKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgX3RpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgaWYgKHRoYXQuY2hlY2ttYXJrLm9iamVjdDNELmNoaWxkcmVuWzBdKSB7XG5cdCAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RpbWVyKTtcblx0ICAgICAgICAgICAgVXRpbHMudXBkYXRlT3BhY2l0eSh0aGF0LmNoZWNrbWFyaywgMSk7XG5cdCAgICAgICAgICAgIFV0aWxzLnVwZGF0ZU9wYWNpdHkodGhhdC5sYWJlbCwgMSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgMTApO1xuXHQgICAgICB9XG5cdCAgICB9LCAwKTtcblx0ICB9LFxuXHQgIHRpY2s6IGZ1bmN0aW9uIHRpY2soKSB7fSxcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9LFxuXHQgIHBhdXNlOiBmdW5jdGlvbiBwYXVzZSgpIHt9LFxuXHQgIHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7fVxuXHR9KTtcblxuXHRBRlJBTUUucmVnaXN0ZXJQcmltaXRpdmUoJ2EtY2hlY2tib3gnLCB7XG5cdCAgZGVmYXVsdENvbXBvbmVudHM6IHtcblx0ICAgIGNoZWNrYm94OiB7fVxuXHQgIH0sXG5cdCAgbWFwcGluZ3M6IHtcblx0ICAgIGNoZWNrZWQ6ICdjaGVja2JveC5jaGVja2VkJyxcblx0ICAgIGRpc2FibGVkOiAnY2hlY2tib3guZGlzYWJsZWQnLFxuXHQgICAgbmFtZTogJ2NoZWNrYm94Lm5hbWUnLFxuXHQgICAgdmFsdWU6ICdjaGVja2JveC52YWx1ZScsXG5cdCAgICBsYWJlbDogJ2NoZWNrYm94LmxhYmVsJyxcblx0ICAgICdjaGVja2JveC1jb2xvcic6ICdjaGVja2JveC5jaGVja2JveENvbG9yJyxcblx0ICAgICdjaGVja2JveC1jb2xvci1jaGVja2VkJzogJ2NoZWNrYm94LmNoZWNrYm94Q29sb3JDaGVja2VkJyxcblx0ICAgIGNvbG9yOiAnY2hlY2tib3guY29sb3InLFxuXHQgICAgYWxpZ246ICdjaGVja2JveC5hbGlnbicsXG5cdCAgICBmb250OiAnY2hlY2tib3guZm9udCcsXG5cdCAgICAnbGV0dGVyLXNwYWNpbmcnOiAnY2hlY2tib3gubGV0dGVyU3BhY2luZycsXG5cdCAgICAnbGluZS1oZWlnaHQnOiAnY2hlY2tib3gubGluZUhlaWdodCcsXG5cdCAgICAnb3BhY2l0eSc6ICdjaGVja2JveC5vcGFjaXR5Jyxcblx0ICAgIHdpZHRoOiAnY2hlY2tib3gud2lkdGgnXG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFt7IHR5cGU6ICdpbWcnLCBpZDogJ2FmcmFtZUNoZWNrYm94TWFyaycsIHNyYzogQUZSQU1FLkFTU0VUU19QQVRIICsgJy9pbWFnZXMvQ2hlY2ttYXJrSWNvbi5wbmcnIH0sIHsgdHlwZTogJ2F1ZGlvJywgaWQ6ICdhZnJhbWVDaGVja2JveENsaWNrJywgc3JjOiBBRlJBTUUuQVNTRVRTX1BBVEggKyAnL3NvdW5kcy9JbnB1dENsaWNrLm1wMycgfSwgeyB0eXBlOiAnYXVkaW8nLCBpZDogJ2FmcmFtZUNoZWNrYm94Q2xpY2tEaXNhYmxlZCcsIHNyYzogQUZSQU1FLkFTU0VUU19QQVRIICsgJy9zb3VuZHMvQnV0dG9uQ2xpY2tEaXNhYmxlZC5tcDMnIH1dO1xuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBTRlggPSB7XG5cblx0ICBpbml0OiBmdW5jdGlvbiBpbml0KHBhcmVudCkge1xuXHQgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1zb3VuZCcpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdrZXknLCAnYWZyYW1lQ2hlY2tib3hDbGlja1NvdW5kJyk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NmeCcsIHRydWUpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdzcmMnLCAnI2FmcmFtZUNoZWNrYm94Q2xpY2snKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMCAyIDUnKTtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG5cblx0ICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1zb3VuZCcpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdrZXknLCAnYWZyYW1lQnV0dG9uQ2xpY2tEaXNhYmxlZFNvdW5kJyk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NmeCcsIHRydWUpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdzcmMnLCAnI2FmcmFtZUJ1dHRvbkNsaWNrRGlzYWJsZWQnKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMCAyIDUnKTtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfSxcblxuXHQgIGNsaWNrOiBmdW5jdGlvbiBjbGljayhwYXJlbnQpIHtcblx0ICAgIHZhciBlbCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCdba2V5PWFmcmFtZUNoZWNrYm94Q2xpY2tTb3VuZF0nKTtcblx0ICAgIGlmICghZWwpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZWwuY29tcG9uZW50cy5zb3VuZC5zdG9wU291bmQoKTtcblx0ICAgIGVsLmNvbXBvbmVudHMuc291bmQucGxheVNvdW5kKCk7XG5cdCAgfSxcblxuXHQgIGNsaWNrRGlzYWJsZWQ6IGZ1bmN0aW9uIGNsaWNrRGlzYWJsZWQocGFyZW50KSB7XG5cdCAgICB2YXIgZWwgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignW2tleT1hZnJhbWVCdXR0b25DbGlja0Rpc2FibGVkU291bmRdJyk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsLmNvbXBvbmVudHMuc291bmQuc3RvcFNvdW5kKCk7XG5cdCAgICBlbC5jb21wb25lbnRzLnNvdW5kLnBsYXlTb3VuZCgpO1xuXHQgIH1cblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFNGWDtcblxuLyoqKi8gfSksXG4vKiAyNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHR2YXIgRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgQXNzZXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdHZhciBTRlggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblxuXHRBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2J1dHRvbicsIHtcblx0ICBzY2hlbWE6IHtcblx0ICAgIGRpc2FibGVkOiB7IHR5cGU6ICdib29sZWFuJywgZGVmYXVsdDogZmFsc2UgfSxcblx0ICAgIHR5cGU6IHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJyYWlzZWRcIiB9LFxuXHQgICAgbmFtZTogeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiBcIlwiIH0sXG5cdCAgICB2YWx1ZTogeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiBcIkJ1dHRvblwiIH0sXG5cdCAgICBidXR0b25Db2xvcjogeyB0eXBlOiBcImNvbG9yXCIsIGRlZmF1bHQ6IFwiIzQwNzZmZFwiIH0sXG5cdCAgICBjb2xvcjogeyB0eXBlOiBcImNvbG9yXCIsIGRlZmF1bHQ6IFwiI0ZGRlwiIH0sXG5cdCAgICBmb250OiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwiXCIgfSxcblx0ICAgIGxldHRlclNwYWNpbmc6IHsgdHlwZTogXCJpbnRcIiwgZGVmYXVsdDogMCB9LFxuXHQgICAgbGluZUhlaWdodDogeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiBcIlwiIH0sXG5cdCAgICBvcGFjaXR5OiB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDEgfSxcblx0ICAgIHdpZHRoOiB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDEgfVxuXHQgIH0sXG5cdCAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpcztcblxuXHQgICAgLy8gQXNzZXRzXG5cdCAgICBVdGlscy5wcmVsb2FkQXNzZXRzKEFzc2V0cyk7XG5cblx0ICAgIC8vIFNGWFxuXHQgICAgU0ZYLmluaXQodGhpcy5lbCk7XG5cblx0ICAgIHRoaXMud3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZW50aXR5Jyk7XG5cdCAgICB0aGlzLndyYXBwZXIuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwIDAgMC4wMScpO1xuXHQgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLndyYXBwZXIpO1xuXG5cdCAgICB0aGlzLnNoYWRvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtaW1hZ2UnKTtcblx0ICAgIHRoaXMuc2hhZG93LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgMC4zNiAqIDEuMjUpO1xuXHQgICAgdGhpcy5zaGFkb3cuc2V0QXR0cmlidXRlKCdzcmMnLCAnI2FmcmFtZUJ1dHRvblNoYWRvdycpO1xuXHQgICAgdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuc2hhZG93KTtcblxuXHQgICAgLy8gT1VUTElORVxuXHQgICAgdGhpcy5vdXRsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1yb3VuZGVkJyk7XG5cdCAgICB0aGlzLm91dGxpbmUuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAwLjM2KTtcblx0ICAgIHRoaXMub3V0bGluZS5zZXRBdHRyaWJ1dGUoJ3JhZGl1cycsIDAuMDMpO1xuXHQgICAgdGhpcy5vdXRsaW5lLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMCAtJyArIDAuMzYgLyAyICsgJyAwLjAxJyk7XG5cdCAgICB0aGlzLndyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5vdXRsaW5lKTtcblxuXHQgICAgLy8gTEFCRUxcblx0ICAgIHRoaXMubGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWVudGl0eScpO1xuXHQgICAgdGhpcy5vdXRsaW5lLmFwcGVuZENoaWxkKHRoaXMubGFiZWwpO1xuXG5cdCAgICAvLyBFVkVOVFNcblx0ICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGlzLmNvbXBvbmVudHMuYnV0dG9uICYmIHRoaXMuY29tcG9uZW50cy5idXR0b24uZGF0YS5kaXNhYmxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB0aGF0Lm9uQ2xpY2soKTtcblx0ICAgIH0pO1xuXHQgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGlzLmNvbXBvbmVudHMuYnV0dG9uICYmIHRoaXMuY29tcG9uZW50cy5idXR0b24uZGF0YS5kaXNhYmxlZCkge1xuXHQgICAgICAgIHJldHVybiBTRlguY2xpY2tEaXNhYmxlZCh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGF0LndyYXBwZXIuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwIDAgMC4wMzYnKTtcblx0ICAgICAgU0ZYLmNsaWNrKHRoaXMpO1xuXHQgICAgfSk7XG5cdCAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGlzLmNvbXBvbmVudHMuYnV0dG9uICYmIHRoaXMuY29tcG9uZW50cy5idXR0b24uZGF0YS5kaXNhYmxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB0aGF0LndyYXBwZXIuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwIDAgMCcpO1xuXHQgICAgfSk7XG5cblx0ICAgIHRoaXMuZWwuZ2V0V2lkdGggPSB0aGlzLmdldFdpZHRoLmJpbmQodGhpcyk7XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5lbCwgJ3ZhbHVlJywge1xuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG5cdCAgICAgIH0sXG5cdCAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdmFsdWUpO1xuXHQgICAgICB9LFxuXHQgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcblx0ICAgIC8vRXZlbnQuZW1pdCh0aGlzLmVsLCAnY2xpY2snKTtcblx0ICB9LFxuXHQgIGdldFdpZHRoOiBmdW5jdGlvbiBnZXRXaWR0aCgpIHtcblx0ICAgIHJldHVybiB0aGlzLl9fd2lkdGg7XG5cdCAgfSxcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpcztcblx0ICAgIHRoaXMub3V0bGluZS5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgdGhpcy5kYXRhLmJ1dHRvbkNvbG9yKTtcblxuXHQgICAgdmFyIHByb3BzID0ge1xuXHQgICAgICBjb2xvcjogdGhpcy5kYXRhLmNvbG9yLFxuXHQgICAgICBhbGlnbjogJ2NlbnRlcicsXG5cdCAgICAgIHdyYXBDb3VudDogMTAgKiB0aGlzLmRhdGEud2lkdGgsXG5cdCAgICAgIHdpZHRoOiB0aGlzLmRhdGEud2lkdGhcblx0ICAgIH07XG5cdCAgICBpZiAodGhpcy5kYXRhLmZvbnQpIHtcblx0ICAgICAgcHJvcHMuZm9udCA9IHRoaXMuZGF0YS5mb250O1xuXHQgICAgfVxuXG5cdCAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09IFwiZmxhdFwiKSB7XG5cdCAgICAgIHByb3BzLmNvbG9yID0gdGhpcy5kYXRhLmJ1dHRvbkNvbG9yO1xuXHQgICAgfVxuXG5cdCAgICAvLyBUSVRMRVxuXHQgICAgcHJvcHMudmFsdWUgPSB0aGlzLmRhdGEudmFsdWUudG9VcHBlckNhc2UoKTtcblx0ICAgIHRoaXMubGFiZWwuc2V0QXR0cmlidXRlKCd0ZXh0JywgcHJvcHMpO1xuXHQgICAgdGhpcy5sYWJlbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgdGhpcy5kYXRhLndpZHRoIC8gMiArIDAuMjQgKyAnIDAgMC4wMScpO1xuXG5cdCAgICAvLyBUUklNIFRFWFQgSUYgTkVFREVELi4gQFRPRE86IG9wdGltaXplIHRoaXMgbWVzcy4uXG5cdCAgICBmdW5jdGlvbiBnZXRUZXh0V2lkdGgoZWwsIGNhbGxiYWNrLCBfd2lkdGhGYWN0b3IpIHtcblx0ICAgICAgaWYgKCFlbC5vYmplY3QzRCB8fCAhZWwub2JqZWN0M0QuY2hpbGRyZW4gfHwgIWVsLm9iamVjdDNELmNoaWxkcmVuWzBdKSB7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgZ2V0VGV4dFdpZHRoKGVsLCBjYWxsYmFjayk7XG5cdCAgICAgICAgfSwgMTApO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB2ID0gZWwub2JqZWN0M0QuY2hpbGRyZW5bMF0uZ2VvbWV0cnkudmlzaWJsZUdseXBocztcblx0ICAgICAgaWYgKCF2KSB7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgZ2V0VGV4dFdpZHRoKGVsLCBjYWxsYmFjayk7XG5cdCAgICAgICAgfSwgMTApO1xuXHQgICAgICB9XG5cdCAgICAgIHYgPSB2W3YubGVuZ3RoIC0gMV07XG5cdCAgICAgIGlmICghdikge1xuXHQgICAgICAgIHJldHVybiBjYWxsYmFjaygwKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodi5saW5lKSB7XG5cdCAgICAgICAgcHJvcHMudmFsdWUgPSBwcm9wcy52YWx1ZS5zbGljZSgwLCAtMSk7XG5cdCAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwidGV4dFwiLCBwcm9wcyk7XG5cdCAgICAgICAgcmV0dXJuIGdldFRleHRXaWR0aChlbCwgY2FsbGJhY2spO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmICghX3dpZHRoRmFjdG9yKSB7XG5cdCAgICAgICAgICBfd2lkdGhGYWN0b3IgPSBVdGlscy5nZXRXaWR0aEZhY3RvcihlbCwgcHJvcHMud3JhcENvdW50KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdiA9ICh2LnBvc2l0aW9uWzBdICsgdi5kYXRhLndpZHRoKSAvIChfd2lkdGhGYWN0b3IgLyB0aGF0LmRhdGEud2lkdGgpO1xuXHQgICAgICAgIHZhciB0ZXh0UmF0aW8gPSB2IC8gdGhhdC5kYXRhLndpZHRoO1xuXHQgICAgICAgIGlmICh0ZXh0UmF0aW8gPiAxKSB7XG5cdCAgICAgICAgICBwcm9wcy52YWx1ZSA9IHByb3BzLnZhbHVlLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShcInRleHRcIiwgcHJvcHMpO1xuXHQgICAgICAgICAgcmV0dXJuIGdldFRleHRXaWR0aChlbCwgY2FsbGJhY2ssIF93aWR0aEZhY3Rvcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBjYWxsYmFjayh2KTtcblx0ICAgIH1cblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAodGhhdC5kYXRhLnZhbHVlLmxlbmd0aCkge1xuXHQgICAgICAgIGdldFRleHRXaWR0aCh0aGF0LmxhYmVsLCBmdW5jdGlvbiAod2lkdGgpIHtcblx0ICAgICAgICAgIHRoYXQubGFiZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHdpZHRoIC8gMiArIDAuMjggLyAyICsgJyAnICsgMC4zNiAvIDIgKyAnIDAuMDInKTsgLy9cblx0ICAgICAgICAgIHdpZHRoID0gd2lkdGggKyAwLjI4O1xuXHQgICAgICAgICAgdGhhdC5vdXRsaW5lLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3aWR0aCk7XG5cdCAgICAgICAgICB0aGF0Ll9fd2lkdGggPSB3aWR0aDtcblx0ICAgICAgICAgIHRoYXQuc2hhZG93LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3aWR0aCAqIDEuMTcpO1xuXHQgICAgICAgICAgdGhhdC5zaGFkb3cuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHdpZHRoIC8gMiArICcgMCAwJyk7XG5cdCAgICAgICAgICBFdmVudC5lbWl0KHRoYXQuZWwsICdjaGFuZ2U6d2lkdGgnLCB3aWR0aCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAodGhhdC5kYXRhLmRpc2FibGVkKSB7XG5cdCAgICAgICAgdGhhdC5zaGFkb3cuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgZmFsc2UpO1xuXHQgICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIGlmICh0aGF0LmxhYmVsLm9iamVjdDNELmNoaWxkcmVuWzBdICYmIHRoYXQubGFiZWwub2JqZWN0M0QuY2hpbGRyZW5bMF0uZ2VvbWV0cnkudmlzaWJsZUdseXBocykge1xuXHQgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcblx0ICAgICAgICAgICAgVXRpbHMudXBkYXRlT3BhY2l0eSh0aGF0LmVsLCAwLjQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIDEwKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgX3RpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgaWYgKHRoYXQubGFiZWwub2JqZWN0M0QuY2hpbGRyZW5bMF0gJiYgdGhhdC5sYWJlbC5vYmplY3QzRC5jaGlsZHJlblswXS5nZW9tZXRyeS52aXNpYmxlR2x5cGhzKSB7XG5cdCAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RpbWVyKTtcblx0ICAgICAgICAgICAgVXRpbHMudXBkYXRlT3BhY2l0eSh0aGF0LmVsLCAxKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCAxMCk7XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAodGhhdC5kYXRhLnR5cGUgPT09IFwiZmxhdFwiKSB7XG5cdCAgICAgICAgdGhhdC5zaGFkb3cuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgZmFsc2UpO1xuXHQgICAgICAgIHZhciBfdGltZXIyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgaWYgKHRoYXQubGFiZWwub2JqZWN0M0QuY2hpbGRyZW5bMF0gJiYgdGhhdC5sYWJlbC5vYmplY3QzRC5jaGlsZHJlblswXS5nZW9tZXRyeS52aXNpYmxlR2x5cGhzKSB7XG5cdCAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RpbWVyMik7XG5cdCAgICAgICAgICAgIFV0aWxzLnVwZGF0ZU9wYWNpdHkodGhhdC5vdXRsaW5lLCAwKTtcblx0ICAgICAgICAgICAgaWYgKHRoYXQuZGF0YS5kaXNhYmxlZCkge1xuXHQgICAgICAgICAgICAgIFV0aWxzLnVwZGF0ZU9wYWNpdHkodGhhdC5sYWJlbCwgMC40KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIDEwKTtcblx0ICAgICAgfVxuXHQgICAgfSwgMCk7XG5cdCAgfSxcblx0ICB0aWNrOiBmdW5jdGlvbiB0aWNrKCkge30sXG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fSxcblx0ICBwYXVzZTogZnVuY3Rpb24gcGF1c2UoKSB7fSxcblx0ICBwbGF5OiBmdW5jdGlvbiBwbGF5KCkge31cblx0fSk7XG5cblx0QUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLWJ1dHRvbicsIHtcblx0ICBkZWZhdWx0Q29tcG9uZW50czoge1xuXHQgICAgYnV0dG9uOiB7fVxuXHQgIH0sXG5cdCAgbWFwcGluZ3M6IHtcblx0ICAgIGRpc2FibGVkOiAnYnV0dG9uLmRpc2FibGVkJyxcblx0ICAgIHR5cGU6ICdidXR0b24udHlwZScsXG5cdCAgICBuYW1lOiAnYnV0dG9uLm5hbWUnLFxuXHQgICAgdmFsdWU6ICdidXR0b24udmFsdWUnLFxuXHQgICAgJ2J1dHRvbi1jb2xvcic6ICdidXR0b24uYnV0dG9uQ29sb3InLFxuXHQgICAgY29sb3I6ICdidXR0b24uY29sb3InLFxuXHQgICAgZm9udDogJ2J1dHRvbi5mb250Jyxcblx0ICAgICdsZXR0ZXItc3BhY2luZyc6ICdidXR0b24ubGV0dGVyU3BhY2luZycsXG5cdCAgICAnbGluZS1oZWlnaHQnOiAnYnV0dG9uLmxpbmVIZWlnaHQnLFxuXHQgICAgJ29wYWNpdHknOiAnYnV0dG9uLm9wYWNpdHknLFxuXHQgICAgJ3dpZHRoJzogJ2J1dHRvbi53aWR0aCdcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9KSxcbi8qIDI2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gW3sgdHlwZTogJ2ltZycsIGlkOiAnYWZyYW1lQnV0dG9uU2hhZG93Jywgc3JjOiBBRlJBTUUuQVNTRVRTX1BBVEggKyAnL2ltYWdlcy9CdXR0b25TaGFkb3cucG5nJyB9LCB7IHR5cGU6ICdhdWRpbycsIGlkOiAnYWZyYW1lQnV0dG9uQ2xpY2snLCBzcmM6IEFGUkFNRS5BU1NFVFNfUEFUSCArICcvc291bmRzL0J1dHRvbkNsaWNrLm1wMycgfSwgeyB0eXBlOiAnYXVkaW8nLCBpZDogJ2FmcmFtZUJ1dHRvbkNsaWNrRGlzYWJsZWQnLCBzcmM6IEFGUkFNRS5BU1NFVFNfUEFUSCArICcvc291bmRzL0J1dHRvbkNsaWNrRGlzYWJsZWQubXAzJyB9XTtcblxuLyoqKi8gfSksXG4vKiAyNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgU0ZYID0ge1xuXG5cdCAgaW5pdDogZnVuY3Rpb24gaW5pdChwYXJlbnQpIHtcblx0ICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Etc291bmQnKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgna2V5JywgJ2FmcmFtZUJ1dHRvbkNsaWNrU291bmQnKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnc2Z4JywgdHJ1ZSk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsICcjYWZyYW1lQnV0dG9uQ2xpY2snKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMCAyIDUnKTtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG5cblx0ICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1zb3VuZCcpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdrZXknLCAnYWZyYW1lQnV0dG9uQ2xpY2tEaXNhYmxlZFNvdW5kJyk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NmeCcsIHRydWUpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdzcmMnLCAnI2FmcmFtZUJ1dHRvbkNsaWNrRGlzYWJsZWQnKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAnMCAyIDUnKTtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfSxcblxuXHQgIGNsaWNrOiBmdW5jdGlvbiBjbGljayhwYXJlbnQpIHtcblx0ICAgIHZhciBlbCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCdba2V5PWFmcmFtZUJ1dHRvbkNsaWNrU291bmRdJyk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsLmNvbXBvbmVudHMuc291bmQuc3RvcFNvdW5kKCk7XG5cdCAgICBlbC5jb21wb25lbnRzLnNvdW5kLnBsYXlTb3VuZCgpO1xuXHQgIH0sXG5cblx0ICBjbGlja0Rpc2FibGVkOiBmdW5jdGlvbiBjbGlja0Rpc2FibGVkKHBhcmVudCkge1xuXHQgICAgdmFyIGVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJ1trZXk9YWZyYW1lQnV0dG9uQ2xpY2tEaXNhYmxlZFNvdW5kXScpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbC5jb21wb25lbnRzLnNvdW5kLnN0b3BTb3VuZCgpO1xuXHQgICAgZWwuY29tcG9uZW50cy5zb3VuZC5wbGF5U291bmQoKTtcblx0ICB9XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBTRlg7XG5cbi8qKiovIH0pLFxuLyogMjggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIEFzc2V0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR2YXIgU0ZYID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cblx0QUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCd0b2FzdCcsIHtcblx0ICBzY2hlbWE6IHtcblx0ICAgIG1lc3NhZ2U6IHsgdHlwZTogJ3N0cmluZycsIGRlZmF1bHQ6IFwiWW91IGFyZSBjb29sXCIgfSxcblx0ICAgIGFjdGlvbjogeyB0eXBlOiAnc3RyaW5nJywgZGVmYXVsdDogXCJcIiB9LFxuXHQgICAgYmFja2dyb3VuZENvbG9yOiB7IHR5cGU6IFwiY29sb3JcIiwgZGVmYXVsdDogXCIjMjIyXCIgfSwgLy8yNDJmMzVcblx0ICAgIGFjdGlvbkNvbG9yOiB7IHR5cGU6IFwiY29sb3JcIiwgZGVmYXVsdDogXCIjNDA3NmZkXCIgfSxcblx0ICAgIGNvbG9yOiB7IHR5cGU6IFwiY29sb3JcIiwgZGVmYXVsdDogXCIjRkZGXCIgfSxcblx0ICAgIGZvbnQ6IHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJcIiB9LFxuXHQgICAgbGV0dGVyU3BhY2luZzogeyB0eXBlOiBcImludFwiLCBkZWZhdWx0OiAwIH0sXG5cdCAgICBsaW5lSGVpZ2h0OiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwiXCIgfSxcblx0ICAgIHdpZHRoOiB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDMgfSxcblx0ICAgIGR1cmF0aW9uOiB7IHR5cGU6ICdudW1iZXInLCBkZWZhdWx0OiAyMDAwIH0sXG5cdCAgICBhdXRvc2hvdzogeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6IHRydWUgfVxuXHQgIH0sXG5cdCAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpcztcblxuXHQgICAgLy8gQXNzZXRzXG5cdCAgICBVdGlscy5wcmVsb2FkQXNzZXRzKEFzc2V0cyk7XG5cblx0ICAgIC8vIFNGWFxuXHQgICAgU0ZYLmluaXQodGhpcy5lbCk7XG5cblx0ICAgIC8vIENPTkZJR1xuXHQgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLCAnMTAwMDAgMTAwMDAgMTAwMDAnKTtcblx0ICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwicm90YXRpb25cIiwgXCItMjUgMCAwXCIpO1xuXHQgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJzY2FsZVwiLCBcIjAuMyAwLjMgMC4zXCIpO1xuXG5cdCAgICAvLyBPVVRMSU5FXG5cdCAgICB0aGlzLmJhY2tncm91bmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLXJvdW5kZWQnKTtcblx0ICAgIHRoaXMuYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIDAuNDQpO1xuXHQgICAgdGhpcy5iYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSgncmFkaXVzJywgMC4wMyk7XG5cdCAgICB0aGlzLmJhY2tncm91bmQuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICcwIC0nICsgMC4zNiAvIDIgKyAnIDAuMDAxJyk7XG5cdCAgICB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuYmFja2dyb3VuZCk7XG5cblx0ICAgIC8vIExBQkVMXG5cdCAgICB0aGlzLmxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1lbnRpdHknKTtcblx0ICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5sYWJlbCk7XG5cblx0ICAgIC8vIExBQkVMXG5cdCAgICB0aGlzLmFjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtYnV0dG9uJyk7XG5cdCAgICB0aGF0LmFjdGlvbi5zZXRBdHRyaWJ1dGUoJ2J1dHRvbi1jb2xvcicsICcjMjIyJyk7XG5cdCAgICB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuYWN0aW9uKTtcblxuXHQgICAgZnVuY3Rpb24gY2hhbmdlV2lkdGgoZSkge1xuXHQgICAgICB2YXIgYXR0ciA9IHRoYXQubGFiZWwuZ2V0QXR0cmlidXRlKCd0ZXh0Jyk7XG5cdCAgICAgIGF0dHIud2lkdGggPSB0aGF0LmRhdGEud2lkdGggLSBlLmRldGFpbDtcblx0ICAgICAgYXR0ci53cmFwQ291bnQgPSAxMCAqIGF0dHIud2lkdGg7XG5cdCAgICAgIHRoYXQubGFiZWwuc2V0QXR0cmlidXRlKCd0ZXh0JywgYXR0cik7XG5cdCAgICAgIHRoYXQubGFiZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIGF0dHIud2lkdGggLyAyICsgMC4xNCArICcgMC4wNCAwLjAwMScpO1xuXG5cdCAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHRoYXQuZGF0YS53aWR0aCAtIGUuZGV0YWlsICsgJyAnICsgKDAuNDQgLSAwLjM2KSAvIDIgKyAnIDAuMDAxJyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmFjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2U6d2lkdGgnLCBjaGFuZ2VXaWR0aCk7XG5cdCAgICB0aGlzLmFjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgRXZlbnQuZW1pdCh0aGF0LmVsLCAnYWN0aW9uY2xpY2snKTtcblx0ICAgIH0pO1xuXG5cdCAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICh0aGF0LmFjdGlvbi5vYmplY3QzRCAmJiB0aGF0LmFjdGlvbi5vYmplY3QzRC5jaGlsZHJlblswXSkge1xuXHQgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuXHQgICAgICAgIFV0aWxzLnVwZGF0ZU9wYWNpdHkodGhhdC5lbCwgMCk7XG5cdCAgICAgICAgVXRpbHMudXBkYXRlT3BhY2l0eSh0aGF0LmxhYmVsLCAwKTtcblx0ICAgICAgICBVdGlscy51cGRhdGVPcGFjaXR5KHRoYXQuYWN0aW9uLCAwKTtcblx0ICAgICAgICBpZiAodGhhdC5kYXRhLmF1dG9zaG93KSB7XG5cdCAgICAgICAgICB0aGF0LnNob3coKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIDEwKTtcblxuXHQgICAgLy8gTUVUSERPU1xuXHQgICAgdGhpcy5lbC5zaG93ID0gdGhpcy5zaG93LmJpbmQodGhpcyk7XG5cdCAgICB0aGlzLmVsLmhpZGUgPSB0aGlzLmhpZGUuYmluZCh0aGlzKTtcblx0ICB9LFxuXHQgIHNob3c6IGZ1bmN0aW9uIHNob3coKSB7XG5cdCAgICBpZiAodGhpcy5oaWRlVGltZXIpIHtcblx0ICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVyKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiwgLXRoaXMuZGF0YS53aWR0aCAvICgyIC8gdGhpcy5lbC5vYmplY3QzRC5zY2FsZS54KSArICcgMC4yNSAtMS42Jyk7XG5cdCAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICAvKmlmICghdGhpcy5lbC5wYXJlbnROb2RlICYmIHRoaXMuZWwuX3BhcmVudE5vZGUpIHtcblx0ICAgICAgdGhpcy5lbC5fcGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLmVsKTtcblx0ICAgIH0qL1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoYXQuZWwuc2V0QXR0cmlidXRlKCdmYWRlaW4nLCB7IGR1cmF0aW9uOiAxNjAgfSk7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIFV0aWxzLnVwZGF0ZU9wYWNpdHkodGhhdC5sYWJlbCwgMSk7XG5cdCAgICAgICAgdGhhdC5hY3Rpb24uY29tcG9uZW50cy5idXR0b24uc2hhZG93LnNldEF0dHJpYnV0ZSgndmlzaWJsZScsIGZhbHNlKTtcblx0ICAgICAgfSwgMTApO1xuXHQgICAgfSwgMCk7XG5cdCAgICB0aGlzLmhpZGVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGF0LmhpZGUoKTtcblx0ICAgIH0sIHRoaXMuZGF0YS5kdXJhdGlvbik7XG5cblx0ICAgIFNGWC5zaG93KHRoaXMuZWwpO1xuXHQgIH0sXG5cdCAgaGlkZTogZnVuY3Rpb24gaGlkZSgpIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpcztcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICBVdGlscy51cGRhdGVPcGFjaXR5KHRoYXQubGFiZWwsIDApO1xuXHQgICAgICB0aGF0LmFjdGlvbi5jb21wb25lbnRzLmJ1dHRvbi5zaGFkb3cuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgZmFsc2UpO1xuXHQgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGF0LmVsLnNldEF0dHJpYnV0ZSgnZmFkZW91dCcsIHsgZHVyYXRpb246IDE2MCB9KTtcblx0ICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIC8qaWYgKHRoYXQuZWwucGFyZW50Tm9kZSkge1xuXHQgICAgICAgICAgICB0aGF0LmVsLl9wYXJlbnROb2RlID0gdGhhdC5lbC5wYXJlbnROb2RlO1xuXHQgICAgICAgICAgICB0aGF0LmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhhdC5lbCk7XG5cdCAgICAgICAgICB9Ki9cblx0ICAgICAgICAgIHRoYXQuZWwuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiwgJzEwMDAwIDEwMDAwIDEwMDAwJyk7XG5cdCAgICAgICAgfSwgMjAwKTtcblx0ICAgICAgfSwgMTApO1xuXHQgICAgfSwgMCk7XG5cdCAgfSxcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblx0ICAgIHZhciB0aGF0ID0gdGhpcztcblxuXHQgICAgLy8gQkFDS0dST1VORFxuXHQgICAgdGhpcy5iYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSgnY29sb3InLCB0aGlzLmRhdGEuYmFja2dyb3VuZENvbG9yKTtcblx0ICAgIHRoaXMuYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgdGhpcy5kYXRhLndpZHRoKTtcblxuXHQgICAgdmFyIHByb3BzID0ge1xuXHQgICAgICBjb2xvcjogdGhpcy5kYXRhLmNvbG9yLFxuXHQgICAgICBhbGlnbjogJ2xlZnQnLFxuXHQgICAgICB3cmFwQ291bnQ6IDEwICogdGhpcy5kYXRhLndpZHRoLFxuXHQgICAgICB3aWR0aDogdGhpcy5kYXRhLndpZHRoLFxuXHQgICAgICBsaW5lSGVpZ2h0OiA2NFxuXHQgICAgfTtcblx0ICAgIGlmICh0aGlzLmRhdGEuZm9udCkge1xuXHQgICAgICBwcm9wcy5mb250ID0gdGhpcy5kYXRhLmZvbnQ7XG5cdCAgICB9XG5cblx0ICAgIGlmICh0aGlzLmRhdGEudHlwZSA9PT0gXCJmbGF0XCIpIHtcblx0ICAgICAgcHJvcHMuY29sb3IgPSB0aGlzLmRhdGEuYnV0dG9uQ29sb3I7XG5cdCAgICB9XG5cblx0ICAgIC8vIE1FU1NBR0Vcblx0ICAgIHByb3BzLnZhbHVlID0gdGhpcy5kYXRhLm1lc3NhZ2U7XG5cdCAgICB0aGlzLmxhYmVsLnNldEF0dHJpYnV0ZSgndGV4dCcsIHByb3BzKTtcblx0ICAgIHRoaXMubGFiZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHRoaXMuZGF0YS53aWR0aCAvIDIgKyAwLjE0ICsgJyAwIDAuMDAxJyk7XG5cblx0ICAgIC8vIEFDVElPTlxuXHQgICAgdGhpcy5hY3Rpb24uc2V0QXR0cmlidXRlKCd2YWx1ZScsIHRoaXMuZGF0YS5hY3Rpb24udG9VcHBlckNhc2UoKSk7XG5cdCAgICB0aGlzLmFjdGlvbi5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgdGhpcy5kYXRhLmFjdGlvbkNvbG9yKTtcblx0ICB9LFxuXHQgIHRpY2s6IGZ1bmN0aW9uIHRpY2soKSB7fSxcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9LFxuXHQgIHBhdXNlOiBmdW5jdGlvbiBwYXVzZSgpIHt9LFxuXHQgIHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7fVxuXHR9KTtcblxuXHRBRlJBTUUucmVnaXN0ZXJQcmltaXRpdmUoJ2EtdG9hc3QnLCB7XG5cdCAgZGVmYXVsdENvbXBvbmVudHM6IHtcblx0ICAgIHRvYXN0OiB7fVxuXHQgIH0sXG5cdCAgbWFwcGluZ3M6IHtcblx0ICAgIG1lc3NhZ2U6ICd0b2FzdC5tZXNzYWdlJyxcblx0ICAgIGFjdGlvbjogJ3RvYXN0LmFjdGlvbicsXG5cdCAgICAnYWN0aW9uLWNvbG9yJzogJ3RvYXN0LmFjdGlvbkNvbG9yJyxcblx0ICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3RvYXN0LmJhY2tncm91bmRDb2xvcicsXG5cdCAgICBjb2xvcjogJ3RvYXN0LmNvbG9yJyxcblx0ICAgIGZvbnQ6ICd0b2FzdC5mb250Jyxcblx0ICAgICdsZXR0ZXItc3BhY2luZyc6ICd0b2FzdC5sZXR0ZXJTcGFjaW5nJyxcblx0ICAgICdsaW5lLWhlaWdodCc6ICd0b2FzdC5saW5lSGVpZ2h0Jyxcblx0ICAgICd3aWR0aCc6ICd0b2FzdC53aWR0aCcsXG5cdCAgICAnZHVyYXRpb24nOiAndG9hc3QuZHVyYXRpb24nLFxuXHQgICAgJ2F1dG9zaG93JzogJ3RvYXN0LmF1dG9zaG93J1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0pLFxuLyogMjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBbeyB0eXBlOiAnYXVkaW8nLCBpZDogJ2FmcmFtZVRvYXN0U2hvdycsIHNyYzogQUZSQU1FLkFTU0VUU19QQVRIICsgJy9zb3VuZHMvVG9hc3RTaG93Lm1wMycgfV07XG5cbi8qKiovIH0pLFxuLyogMzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIFNGWCA9IHtcblx0ICBpbml0OiBmdW5jdGlvbiBpbml0KHBhcmVudCkge1xuXHQgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1zb3VuZCcpO1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdrZXknLCAnYWZyYW1lVG9hc3RTaG93U291bmQnKTtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnc2Z4JywgdHJ1ZSk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsICcjYWZyYW1lVG9hc3RTaG93Jyk7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAgMiA1Jyk7XG5cdCAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH0sXG5cblx0ICBzaG93OiBmdW5jdGlvbiBzaG93KHBhcmVudCkge1xuXHQgICAgdmFyIGVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJ1trZXk9YWZyYW1lVG9hc3RTaG93U291bmRdJyk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsLmNvbXBvbmVudHMuc291bmQuc3RvcFNvdW5kKCk7XG5cdCAgICBlbC5jb21wb25lbnRzLnNvdW5kLnBsYXlTb3VuZCgpO1xuXHQgIH1cblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFNGWDtcblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWZyYW1lLW1hdGVyaWFsLmpzLm1hcFxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2xpYi9hZnJhbWUtbWF0ZXJpYWwuanMiLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2xpYi9pbmRleC5qcz8/cG9zdGNzcyEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bHVzLWxvYWRlci9pbmRleC5qcyEuL2luZGV4LnN0eWxcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIFByZXBhcmUgY3NzVHJhbnNmb3JtYXRpb25cbnZhciB0cmFuc2Zvcm07XG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9saWIvaW5kZXguanM/P3Bvc3Rjc3MhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWx1cy1sb2FkZXIvaW5kZXguanMhLi9pbmRleC5zdHlsXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvbGliL2luZGV4LmpzPz9wb3N0Y3NzIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsdXMtbG9hZGVyL2luZGV4LmpzIS4vaW5kZXguc3R5bFwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY3NzL2luZGV4LnN0eWxcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBtYXAgPSB7XG5cdFwiLi9hdXRvLWVudGVyLXZyLmpzXCI6IDQzLFxuXHRcIi4vYmFja2dyb3VuZC1hbmltYXRpb24uanNcIjogNDQsXG5cdFwiLi9iYWNrZ3JvdW5kLWF1ZGlvLmpzXCI6IDQ1LFxuXHRcIi4vYmFja2dyb3VuZC1zaGFkZXIuanNcIjogNDYsXG5cdFwiLi9jYW5jZWwtYnV0dG9uLmpzXCI6IDQ3LFxuXHRcIi4vY2FzY2FkZS1yYXljYXN0YWJsZS5qc1wiOiA0OCxcblx0XCIuL2NsaWNrLW91dC5qc1wiOiA0OSxcblx0XCIuL2NvbGxlY3Rpb24tc2hhZGVyLmpzXCI6IDUwLFxuXHRcIi4vY29uc29sZS1zaG9ydGN1dHMuanNcIjogNTEsXG5cdFwiLi9jb250ZW50LXBhZ2UtbG9hZGVkLmpzXCI6IDUyLFxuXHRcIi4vY29udHJvbGxlci1idXR0b24tZmVlZGJhY2suanNcIjogNTMsXG5cdFwiLi9jb250cm9sbGVyLmpzXCI6IDU0LFxuXHRcIi4vY3Vyc29yLW1lc2guanNcIjogNTUsXG5cdFwiLi9jdXJzb3ItdG9nZ2xlci5qc1wiOiA1Nixcblx0XCIuL2RlYnVnLWNvbnRyb2xsZXIuanNcIjogNTcsXG5cdFwiLi9kZWJ1Zy1jdXJzb3IuanNcIjogNTgsXG5cdFwiLi9kZWJ1Zy1saW5rcy5qc1wiOiA1OSxcblx0XCIuL2VudGVyLXNpdGUtYnV0dG9uLmpzXCI6IDYwLFxuXHRcIi4vZmFkZS1zaGFkZXIuanNcIjogNjEsXG5cdFwiLi9mYWRlLXRleHQtc2hhZGVyLmpzXCI6IDYyLFxuXHRcIi4vZmVlZC1jb2xsZWN0aW9uLmpzXCI6IDYzLFxuXHRcIi4vZmVlZC1zaW5nbGUuanNcIjogNjQsXG5cdFwiLi9mZWVkLXRpbGVzLmpzXCI6IDY1LFxuXHRcIi4vZ3B1LXByZWxvYWRlci5qc1wiOiA2Nixcblx0XCIuL2hlbHAtYmFjay1sb2JieS5qc1wiOiA2Nyxcblx0XCIuL2hpZ2gtcGVyZm9ybWFuY2UuanNcIjogNjgsXG5cdFwiLi9rZXlib2FyZC1yYXljYXN0YWJsZS5qc1wiOiA2OSxcblx0XCIuL2xheW91dC1jb2xsZWN0aW9ucy5qc1wiOiA3MCxcblx0XCIuL2xheW91dC1mZWVkLmpzXCI6IDcxLFxuXHRcIi4vbGluay1zaGFkZXIuanNcIjogNzIsXG5cdFwiLi9sb2FkaW5nLXJpbmcuanNcIjogNzMsXG5cdFwiLi9sb2FkaW5nLXNjcmVlbi5qc1wiOiA3NCxcblx0XCIuL2xvZ28uanNcIjogNzUsXG5cdFwiLi9uYXZpZ2F0ZS5qc1wiOiA3Nixcblx0XCIuL25vdGlmaWNhdGlvbi5qc1wiOiA3Nyxcblx0XCIuL3BhZ2luYXRpb24tZG90cy5qc1wiOiA3OCxcblx0XCIuL3BhZ2luYXRvci5qc1wiOiA3OSxcblx0XCIuL3BsYXktYXVkaW8uanNcIjogODAsXG5cdFwiLi9wb3N0LW1lc3NhZ2UtcmVjZWl2ZXIuanNcIjogODEsXG5cdFwiLi9wcm9wZXJ0eVR5cGVzL29iamVjdC5qc1wiOiA4Mixcblx0XCIuL3JheWNhc3RhYmxlLmpzXCI6IDgzLFxuXHRcIi4vcmVjZW50ZXIuanNcIjogODQsXG5cdFwiLi9yZWZyZXNoLmpzXCI6IDg1LFxuXHRcIi4vc2NyZWVuLW1hbmFnZXIuanNcIjogODYsXG5cdFwiLi9zZWFyY2guanNcIjogODcsXG5cdFwiLi9zdWItb2JqZWN0LmpzXCI6IDg4LFxuXHRcIi4vc3VwZXJsaW5rLmpzXCI6IDg5LFxuXHRcIi4vdGFiLXN3aXRjaC1mYWRlLmpzXCI6IDkwLFxuXHRcIi4vdGh1bWItcGFnaW5hdG9yLmpzXCI6IDkxLFxuXHRcIi4vdHV0b3JpYWwtbW9kYWwtaW1hZ2UuanNcIjogOTIsXG5cdFwiLi90dXRvcmlhbC1tb2RhbC5qc1wiOiA5Myxcblx0XCIuL3Zpc2libGUtZGVsYXkuanNcIjogOTQsXG5cdFwiLi92aXNpYmxlLWZhZGUuanNcIjogOTVcbn07XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18od2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkpO1xufTtcbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0dmFyIGlkID0gbWFwW3JlcV07XG5cdGlmKCEoaWQgKyAxKSkgLy8gY2hlY2sgZm9yIG51bWJlciBvciBzdHJpbmdcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInLlwiKTtcblx0cmV0dXJuIGlkO1xufTtcbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSAyNDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzIFxcLmpzJFxuLy8gbW9kdWxlIGlkID0gMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gIHJlcXVpcmUoJy4vcGFuZWwnKTtcbiAgcmVxdWlyZSgnLi9zaXRlcycpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYW5lbC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIG1hcCA9IHtcblx0XCIuL2luZGV4LmpzXCI6IDk3XG59O1xuZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpKTtcbn07XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7XG5cdHZhciBpZCA9IG1hcFtyZXFdO1xuXHRpZighKGlkICsgMSkpIC8vIGNoZWNrIGZvciBudW1iZXIgb3Igc3RyaW5nXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJy5cIik7XG5cdHJldHVybiBpZDtcbn07XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gMjY7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc3RhdGUgXFwuanMkXG4vLyBtb2R1bGUgaWQgPSAyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IEFsZ29saWFTZWFyY2hDb3JlO1xuXG52YXIgZXJyb3JzID0gcmVxdWlyZSgnLi9lcnJvcnMnKTtcbnZhciBleGl0UHJvbWlzZSA9IHJlcXVpcmUoJy4vZXhpdFByb21pc2UuanMnKTtcbnZhciBJbmRleENvcmUgPSByZXF1aXJlKCcuL0luZGV4Q29yZS5qcycpO1xudmFyIHN0b3JlID0gcmVxdWlyZSgnLi9zdG9yZS5qcycpO1xuXG4vLyBXZSB3aWxsIGFsd2F5cyBwdXQgdGhlIEFQSSBLRVkgaW4gdGhlIEpTT04gYm9keSBpbiBjYXNlIG9mIHRvbyBsb25nIEFQSSBLRVksXG4vLyB0byBhdm9pZCBxdWVyeSBzdHJpbmcgYmVpbmcgdG9vIGxvbmcgYW5kIGZhaWxpbmcgaW4gdmFyaW91cyBjb25kaXRpb25zIChvdXIgc2VydmVyIGxpbWl0LCBicm93c2VyIGxpbWl0LFxuLy8gcHJveGllcyBsaW1pdClcbnZhciBNQVhfQVBJX0tFWV9MRU5HVEggPSA1MDA7XG52YXIgUkVTRVRfQVBQX0RBVEFfVElNRVIgPVxuICBwcm9jZXNzLmVudi5SRVNFVF9BUFBfREFUQV9USU1FUiAmJiBwYXJzZUludChwcm9jZXNzLmVudi5SRVNFVF9BUFBfREFUQV9USU1FUiwgMTApIHx8XG4gIDYwICogMiAqIDEwMDA7IC8vIGFmdGVyIDIgbWludXRlcyByZXNldCB0byBmaXJzdCBob3N0XG5cbi8qXG4gKiBBbGdvbGlhIFNlYXJjaCBsaWJyYXJ5IGluaXRpYWxpemF0aW9uXG4gKiBodHRwczovL3d3dy5hbGdvbGlhLmNvbS9cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwbGljYXRpb25JRCAtIFlvdXIgYXBwbGljYXRpb25JRCwgZm91bmQgaW4geW91ciBkYXNoYm9hcmRcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcGlLZXkgLSBZb3VyIEFQSSBrZXksIGZvdW5kIGluIHlvdXIgZGFzaGJvYXJkXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMudGltZW91dD0yMDAwXSAtIFRoZSByZXF1ZXN0IHRpbWVvdXQgc2V0IGluIG1pbGxpc2Vjb25kcyxcbiAqIGFub3RoZXIgcmVxdWVzdCB3aWxsIGJlIGlzc3VlZCBhZnRlciB0aGlzIHRpbWVvdXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5wcm90b2NvbD0naHR0cDonXSAtIFRoZSBwcm90b2NvbCB1c2VkIHRvIHF1ZXJ5IEFsZ29saWEgU2VhcmNoIEFQSS5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldCB0byAnaHR0cHM6JyB0byBmb3JjZSB1c2luZyBodHRwcy5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgdG8gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgaW4gYnJvd3NlcnNcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBbb3B0cy5ob3N0cz17XG4gKiAgICAgICAgICAgcmVhZDogW3RoaXMuYXBwbGljYXRpb25JRCArICctZHNuLmFsZ29saWEubmV0J10uY29uY2F0KFtcbiAqICAgICAgICAgICAgIHRoaXMuYXBwbGljYXRpb25JRCArICctMS5hbGdvbGlhbmV0LmNvbScsXG4gKiAgICAgICAgICAgICB0aGlzLmFwcGxpY2F0aW9uSUQgKyAnLTIuYWxnb2xpYW5ldC5jb20nLFxuICogICAgICAgICAgICAgdGhpcy5hcHBsaWNhdGlvbklEICsgJy0zLmFsZ29saWFuZXQuY29tJ11cbiAqICAgICAgICAgICBdKSxcbiAqICAgICAgICAgICB3cml0ZTogW3RoaXMuYXBwbGljYXRpb25JRCArICcuYWxnb2xpYS5uZXQnXS5jb25jYXQoW1xuICogICAgICAgICAgICAgdGhpcy5hcHBsaWNhdGlvbklEICsgJy0xLmFsZ29saWFuZXQuY29tJyxcbiAqICAgICAgICAgICAgIHRoaXMuYXBwbGljYXRpb25JRCArICctMi5hbGdvbGlhbmV0LmNvbScsXG4gKiAgICAgICAgICAgICB0aGlzLmFwcGxpY2F0aW9uSUQgKyAnLTMuYWxnb2xpYW5ldC5jb20nXVxuICogICAgICAgICAgIF0pIC0gVGhlIGhvc3RzIHRvIHVzZSBmb3IgQWxnb2xpYSBTZWFyY2ggQVBJLlxuICogICAgICAgICAgIElmIHlvdSBwcm92aWRlIHRoZW0sIHlvdSB3aWxsIGxlc3MgYmVuZWZpdCBmcm9tIG91ciBIQSBpbXBsZW1lbnRhdGlvblxuICovXG5mdW5jdGlvbiBBbGdvbGlhU2VhcmNoQ29yZShhcHBsaWNhdGlvbklELCBhcGlLZXksIG9wdHMpIHtcbiAgdmFyIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnYWxnb2xpYXNlYXJjaCcpO1xuXG4gIHZhciBjbG9uZSA9IHJlcXVpcmUoJy4vY2xvbmUuanMnKTtcbiAgdmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7XG4gIHZhciBtYXAgPSByZXF1aXJlKCcuL21hcC5qcycpO1xuXG4gIHZhciB1c2FnZSA9ICdVc2FnZTogYWxnb2xpYXNlYXJjaChhcHBsaWNhdGlvbklELCBhcGlLZXksIG9wdHMpJztcblxuICBpZiAob3B0cy5fYWxsb3dFbXB0eUNyZWRlbnRpYWxzICE9PSB0cnVlICYmICFhcHBsaWNhdGlvbklEKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5BbGdvbGlhU2VhcmNoRXJyb3IoJ1BsZWFzZSBwcm92aWRlIGFuIGFwcGxpY2F0aW9uIElELiAnICsgdXNhZ2UpO1xuICB9XG5cbiAgaWYgKG9wdHMuX2FsbG93RW1wdHlDcmVkZW50aWFscyAhPT0gdHJ1ZSAmJiAhYXBpS2V5KSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5BbGdvbGlhU2VhcmNoRXJyb3IoJ1BsZWFzZSBwcm92aWRlIGFuIEFQSSBrZXkuICcgKyB1c2FnZSk7XG4gIH1cblxuICB0aGlzLmFwcGxpY2F0aW9uSUQgPSBhcHBsaWNhdGlvbklEO1xuICB0aGlzLmFwaUtleSA9IGFwaUtleTtcblxuICB0aGlzLmhvc3RzID0ge1xuICAgIHJlYWQ6IFtdLFxuICAgIHdyaXRlOiBbXVxuICB9O1xuXG4gIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gIHZhciBwcm90b2NvbCA9IG9wdHMucHJvdG9jb2wgfHwgJ2h0dHBzOic7XG4gIHRoaXMuX3RpbWVvdXRzID0gb3B0cy50aW1lb3V0cyB8fCB7XG4gICAgY29ubmVjdDogMSAqIDEwMDAsIC8vIDUwMG1zIGNvbm5lY3QgaXMgR1BSUyBsYXRlbmN5XG4gICAgcmVhZDogMiAqIDEwMDAsXG4gICAgd3JpdGU6IDMwICogMTAwMFxuICB9O1xuXG4gIC8vIGJhY2t3YXJkIGNvbXBhdCwgaWYgb3B0cy50aW1lb3V0IGlzIHBhc3NlZCwgd2UgdXNlIGl0IHRvIGNvbmZpZ3VyZSBhbGwgdGltZW91dHMgbGlrZSBiZWZvcmVcbiAgaWYgKG9wdHMudGltZW91dCkge1xuICAgIHRoaXMuX3RpbWVvdXRzLmNvbm5lY3QgPSB0aGlzLl90aW1lb3V0cy5yZWFkID0gdGhpcy5fdGltZW91dHMud3JpdGUgPSBvcHRzLnRpbWVvdXQ7XG4gIH1cblxuICAvLyB3aGlsZSB3ZSBhZHZvY2F0ZSBmb3IgY29sb24tYXQtdGhlLWVuZCB2YWx1ZXM6ICdodHRwOicgZm9yIGBvcHRzLnByb3RvY29sYFxuICAvLyB3ZSBhbHNvIGFjY2VwdCBgaHR0cGAgYW5kIGBodHRwc2AuIEl0J3MgYSBjb21tb24gZXJyb3IuXG4gIGlmICghLzokLy50ZXN0KHByb3RvY29sKSkge1xuICAgIHByb3RvY29sID0gcHJvdG9jb2wgKyAnOic7XG4gIH1cblxuICBpZiAob3B0cy5wcm90b2NvbCAhPT0gJ2h0dHA6JyAmJiBvcHRzLnByb3RvY29sICE9PSAnaHR0cHM6Jykge1xuICAgIHRocm93IG5ldyBlcnJvcnMuQWxnb2xpYVNlYXJjaEVycm9yKCdwcm90b2NvbCBtdXN0IGJlIGBodHRwOmAgb3IgYGh0dHBzOmAgKHdhcyBgJyArIG9wdHMucHJvdG9jb2wgKyAnYCknKTtcbiAgfVxuXG4gIHRoaXMuX2NoZWNrQXBwSWREYXRhKCk7XG5cbiAgaWYgKCFvcHRzLmhvc3RzKSB7XG4gICAgdmFyIGRlZmF1bHRIb3N0cyA9IG1hcCh0aGlzLl9zaHVmZmxlUmVzdWx0LCBmdW5jdGlvbihob3N0TnVtYmVyKSB7XG4gICAgICByZXR1cm4gYXBwbGljYXRpb25JRCArICctJyArIGhvc3ROdW1iZXIgKyAnLmFsZ29saWFuZXQuY29tJztcbiAgICB9KTtcblxuICAgIC8vIG5vIGhvc3RzIGdpdmVuLCBjb21wdXRlIGRlZmF1bHRzXG4gICAgdGhpcy5ob3N0cy5yZWFkID0gW3RoaXMuYXBwbGljYXRpb25JRCArICctZHNuLmFsZ29saWEubmV0J10uY29uY2F0KGRlZmF1bHRIb3N0cyk7XG4gICAgdGhpcy5ob3N0cy53cml0ZSA9IFt0aGlzLmFwcGxpY2F0aW9uSUQgKyAnLmFsZ29saWEubmV0J10uY29uY2F0KGRlZmF1bHRIb3N0cyk7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShvcHRzLmhvc3RzKSkge1xuICAgIC8vIHdoZW4gcGFzc2luZyBjdXN0b20gaG9zdHMsIHdlIG5lZWQgdG8gaGF2ZSBhIGRpZmZlcmVudCBob3N0IGluZGV4IGlmIHRoZSBudW1iZXJcbiAgICAvLyBvZiB3cml0ZS9yZWFkIGhvc3RzIGFyZSBkaWZmZXJlbnQuXG4gICAgdGhpcy5ob3N0cy5yZWFkID0gY2xvbmUob3B0cy5ob3N0cyk7XG4gICAgdGhpcy5ob3N0cy53cml0ZSA9IGNsb25lKG9wdHMuaG9zdHMpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuaG9zdHMucmVhZCA9IGNsb25lKG9wdHMuaG9zdHMucmVhZCk7XG4gICAgdGhpcy5ob3N0cy53cml0ZSA9IGNsb25lKG9wdHMuaG9zdHMud3JpdGUpO1xuICB9XG5cbiAgLy8gYWRkIHByb3RvY29sIGFuZCBsb3dlcmNhc2UgaG9zdHNcbiAgdGhpcy5ob3N0cy5yZWFkID0gbWFwKHRoaXMuaG9zdHMucmVhZCwgcHJlcGFyZUhvc3QocHJvdG9jb2wpKTtcbiAgdGhpcy5ob3N0cy53cml0ZSA9IG1hcCh0aGlzLmhvc3RzLndyaXRlLCBwcmVwYXJlSG9zdChwcm90b2NvbCkpO1xuXG4gIHRoaXMuZXh0cmFIZWFkZXJzID0ge307XG5cbiAgLy8gSW4gc29tZSBzaXR1YXRpb25zIHlvdSBtaWdodCB3YW50IHRvIHdhcm0gdGhlIGNhY2hlXG4gIHRoaXMuY2FjaGUgPSBvcHRzLl9jYWNoZSB8fCB7fTtcblxuICB0aGlzLl91YSA9IG9wdHMuX3VhO1xuICB0aGlzLl91c2VDYWNoZSA9IG9wdHMuX3VzZUNhY2hlID09PSB1bmRlZmluZWQgfHwgb3B0cy5fY2FjaGUgPyB0cnVlIDogb3B0cy5fdXNlQ2FjaGU7XG4gIHRoaXMuX3VzZUZhbGxiYWNrID0gb3B0cy51c2VGYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdHMudXNlRmFsbGJhY2s7XG5cbiAgdGhpcy5fc2V0VGltZW91dCA9IG9wdHMuX3NldFRpbWVvdXQ7XG5cbiAgZGVidWcoJ2luaXQgZG9uZSwgJWonLCB0aGlzKTtcbn1cblxuLypcbiAqIEdldCB0aGUgaW5kZXggb2JqZWN0IGluaXRpYWxpemVkXG4gKlxuICogQHBhcmFtIGluZGV4TmFtZSB0aGUgbmFtZSBvZiBpbmRleFxuICogQHBhcmFtIGNhbGxiYWNrIHRoZSByZXN1bHQgY2FsbGJhY2sgd2l0aCBvbmUgYXJndW1lbnQgKHRoZSBJbmRleCBpbnN0YW5jZSlcbiAqL1xuQWxnb2xpYVNlYXJjaENvcmUucHJvdG90eXBlLmluaXRJbmRleCA9IGZ1bmN0aW9uKGluZGV4TmFtZSkge1xuICByZXR1cm4gbmV3IEluZGV4Q29yZSh0aGlzLCBpbmRleE5hbWUpO1xufTtcblxuLyoqXG4qIEFkZCBhbiBleHRyYSBmaWVsZCB0byB0aGUgSFRUUCByZXF1ZXN0XG4qXG4qIEBwYXJhbSBuYW1lIHRoZSBoZWFkZXIgZmllbGQgbmFtZVxuKiBAcGFyYW0gdmFsdWUgdGhlIGhlYWRlciBmaWVsZCB2YWx1ZVxuKi9cbkFsZ29saWFTZWFyY2hDb3JlLnByb3RvdHlwZS5zZXRFeHRyYUhlYWRlciA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHRoaXMuZXh0cmFIZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV0gPSB2YWx1ZTtcbn07XG5cbi8qKlxuKiBHZXQgdGhlIHZhbHVlIG9mIGFuIGV4dHJhIEhUVFAgaGVhZGVyXG4qXG4qIEBwYXJhbSBuYW1lIHRoZSBoZWFkZXIgZmllbGQgbmFtZVxuKi9cbkFsZ29saWFTZWFyY2hDb3JlLnByb3RvdHlwZS5nZXRFeHRyYUhlYWRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgcmV0dXJuIHRoaXMuZXh0cmFIZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV07XG59O1xuXG4vKipcbiogUmVtb3ZlIGFuIGV4dHJhIGZpZWxkIGZyb20gdGhlIEhUVFAgcmVxdWVzdFxuKlxuKiBAcGFyYW0gbmFtZSB0aGUgaGVhZGVyIGZpZWxkIG5hbWVcbiovXG5BbGdvbGlhU2VhcmNoQ29yZS5wcm90b3R5cGUudW5zZXRFeHRyYUhlYWRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgZGVsZXRlIHRoaXMuZXh0cmFIZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV07XG59O1xuXG4vKipcbiogQXVnbWVudCBzZW50IHgtYWxnb2xpYS1hZ2VudCB3aXRoIG1vcmUgZGF0YSwgZWFjaCBhZ2VudCBwYXJ0XG4qIGlzIGF1dG9tYXRpY2FsbHkgc2VwYXJhdGVkIGZyb20gdGhlIG90aGVycyBieSBhIHNlbWljb2xvbjtcbipcbiogQHBhcmFtIGFsZ29saWFBZ2VudCB0aGUgYWdlbnQgdG8gYWRkXG4qL1xuQWxnb2xpYVNlYXJjaENvcmUucHJvdG90eXBlLmFkZEFsZ29saWFBZ2VudCA9IGZ1bmN0aW9uKGFsZ29saWFBZ2VudCkge1xuICBpZiAodGhpcy5fdWEuaW5kZXhPZignOycgKyBhbGdvbGlhQWdlbnQpID09PSAtMSkge1xuICAgIHRoaXMuX3VhICs9ICc7JyArIGFsZ29saWFBZ2VudDtcbiAgfVxufTtcblxuLypcbiAqIFdyYXBwZXIgdGhhdCB0cnkgYWxsIGhvc3RzIHRvIG1heGltaXplIHRoZSBxdWFsaXR5IG9mIHNlcnZpY2VcbiAqL1xuQWxnb2xpYVNlYXJjaENvcmUucHJvdG90eXBlLl9qc29uUmVxdWVzdCA9IGZ1bmN0aW9uKGluaXRpYWxPcHRzKSB7XG4gIHRoaXMuX2NoZWNrQXBwSWREYXRhKCk7XG5cbiAgdmFyIHJlcXVlc3REZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ2FsZ29saWFzZWFyY2g6JyArIGluaXRpYWxPcHRzLnVybCk7XG5cbiAgdmFyIGJvZHk7XG4gIHZhciBhZGRpdGlvbmFsVUEgPSBpbml0aWFsT3B0cy5hZGRpdGlvbmFsVUEgfHwgJyc7XG4gIHZhciBjYWNoZSA9IGluaXRpYWxPcHRzLmNhY2hlO1xuICB2YXIgY2xpZW50ID0gdGhpcztcbiAgdmFyIHRyaWVzID0gMDtcbiAgdmFyIHVzaW5nRmFsbGJhY2sgPSBmYWxzZTtcbiAgdmFyIGhhc0ZhbGxiYWNrID0gY2xpZW50Ll91c2VGYWxsYmFjayAmJiBjbGllbnQuX3JlcXVlc3QuZmFsbGJhY2sgJiYgaW5pdGlhbE9wdHMuZmFsbGJhY2s7XG4gIHZhciBoZWFkZXJzO1xuXG4gIGlmIChcbiAgICB0aGlzLmFwaUtleS5sZW5ndGggPiBNQVhfQVBJX0tFWV9MRU5HVEggJiZcbiAgICBpbml0aWFsT3B0cy5ib2R5ICE9PSB1bmRlZmluZWQgJiZcbiAgICAoaW5pdGlhbE9wdHMuYm9keS5wYXJhbXMgIT09IHVuZGVmaW5lZCB8fCAvLyBpbmRleC5zZWFyY2goKVxuICAgIGluaXRpYWxPcHRzLmJvZHkucmVxdWVzdHMgIT09IHVuZGVmaW5lZCkgLy8gY2xpZW50LnNlYXJjaCgpXG4gICkge1xuICAgIGluaXRpYWxPcHRzLmJvZHkuYXBpS2V5ID0gdGhpcy5hcGlLZXk7XG4gICAgaGVhZGVycyA9IHRoaXMuX2NvbXB1dGVSZXF1ZXN0SGVhZGVycyh7XG4gICAgICBhZGRpdGlvbmFsVUE6IGFkZGl0aW9uYWxVQSxcbiAgICAgIHdpdGhBcGlLZXk6IGZhbHNlLFxuICAgICAgaGVhZGVyczogaW5pdGlhbE9wdHMuaGVhZGVyc1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnMgPSB0aGlzLl9jb21wdXRlUmVxdWVzdEhlYWRlcnMoe1xuICAgICAgYWRkaXRpb25hbFVBOiBhZGRpdGlvbmFsVUEsXG4gICAgICBoZWFkZXJzOiBpbml0aWFsT3B0cy5oZWFkZXJzXG4gICAgfSk7XG4gIH1cblxuICBpZiAoaW5pdGlhbE9wdHMuYm9keSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgYm9keSA9IHNhZmVKU09OU3RyaW5naWZ5KGluaXRpYWxPcHRzLmJvZHkpO1xuICB9XG5cbiAgcmVxdWVzdERlYnVnKCdyZXF1ZXN0IHN0YXJ0Jyk7XG4gIHZhciBkZWJ1Z0RhdGEgPSBbXTtcblxuICBmdW5jdGlvbiBkb1JlcXVlc3QocmVxdWVzdGVyLCByZXFPcHRzKSB7XG4gICAgY2xpZW50Ll9jaGVja0FwcElkRGF0YSgpO1xuXG4gICAgdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIGNhY2hlSUQ7XG5cbiAgICBpZiAoY2xpZW50Ll91c2VDYWNoZSkge1xuICAgICAgY2FjaGVJRCA9IGluaXRpYWxPcHRzLnVybDtcbiAgICB9XG5cbiAgICAvLyBhcyB3ZSBzb21ldGltZSB1c2UgUE9TVCByZXF1ZXN0cyB0byBwYXNzIHBhcmFtZXRlcnMgKGxpa2UgcXVlcnk9J2FhJyksXG4gICAgLy8gdGhlIGNhY2hlSUQgbXVzdCBhbHNvIGluY2x1ZGUgdGhlIGJvZHkgdG8gYmUgZGlmZmVyZW50IGJldHdlZW4gY2FsbHNcbiAgICBpZiAoY2xpZW50Ll91c2VDYWNoZSAmJiBib2R5KSB7XG4gICAgICBjYWNoZUlEICs9ICdfYm9keV8nICsgcmVxT3B0cy5ib2R5O1xuICAgIH1cblxuICAgIC8vIGhhbmRsZSBjYWNoZSBleGlzdGVuY2VcbiAgICBpZiAoY2xpZW50Ll91c2VDYWNoZSAmJiBjYWNoZSAmJiBjYWNoZVtjYWNoZUlEXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXF1ZXN0RGVidWcoJ3NlcnZpbmcgcmVzcG9uc2UgZnJvbSBjYWNoZScpO1xuICAgICAgcmV0dXJuIGNsaWVudC5fcHJvbWlzZS5yZXNvbHZlKEpTT04ucGFyc2UoY2FjaGVbY2FjaGVJRF0pKTtcbiAgICB9XG5cbiAgICAvLyBpZiB3ZSByZWFjaGVkIG1heCB0cmllc1xuICAgIGlmICh0cmllcyA+PSBjbGllbnQuaG9zdHNbaW5pdGlhbE9wdHMuaG9zdFR5cGVdLmxlbmd0aCkge1xuICAgICAgaWYgKCFoYXNGYWxsYmFjayB8fCB1c2luZ0ZhbGxiYWNrKSB7XG4gICAgICAgIHJlcXVlc3REZWJ1ZygnY291bGQgbm90IGdldCBhbnkgcmVzcG9uc2UnKTtcbiAgICAgICAgLy8gdGhlbiBzdG9wXG4gICAgICAgIHJldHVybiBjbGllbnQuX3Byb21pc2UucmVqZWN0KG5ldyBlcnJvcnMuQWxnb2xpYVNlYXJjaEVycm9yKFxuICAgICAgICAgICdDYW5ub3QgY29ubmVjdCB0byB0aGUgQWxnb2xpYVNlYXJjaCBBUEkuJyArXG4gICAgICAgICAgJyBTZW5kIGFuIGVtYWlsIHRvIHN1cHBvcnRAYWxnb2xpYS5jb20gdG8gcmVwb3J0IGFuZCByZXNvbHZlIHRoZSBpc3N1ZS4nICtcbiAgICAgICAgICAnIEFwcGxpY2F0aW9uIGlkIHdhczogJyArIGNsaWVudC5hcHBsaWNhdGlvbklELCB7ZGVidWdEYXRhOiBkZWJ1Z0RhdGF9XG4gICAgICAgICkpO1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0RGVidWcoJ3N3aXRjaGluZyB0byBmYWxsYmFjaycpO1xuXG4gICAgICAvLyBsZXQncyB0cnkgdGhlIGZhbGxiYWNrIHN0YXJ0aW5nIGZyb20gaGVyZVxuICAgICAgdHJpZXMgPSAwO1xuXG4gICAgICAvLyBtZXRob2QsIHVybCBhbmQgYm9keSBhcmUgZmFsbGJhY2sgZGVwZW5kZW50XG4gICAgICByZXFPcHRzLm1ldGhvZCA9IGluaXRpYWxPcHRzLmZhbGxiYWNrLm1ldGhvZDtcbiAgICAgIHJlcU9wdHMudXJsID0gaW5pdGlhbE9wdHMuZmFsbGJhY2sudXJsO1xuICAgICAgcmVxT3B0cy5qc29uQm9keSA9IGluaXRpYWxPcHRzLmZhbGxiYWNrLmJvZHk7XG4gICAgICBpZiAocmVxT3B0cy5qc29uQm9keSkge1xuICAgICAgICByZXFPcHRzLmJvZHkgPSBzYWZlSlNPTlN0cmluZ2lmeShyZXFPcHRzLmpzb25Cb2R5KTtcbiAgICAgIH1cbiAgICAgIC8vIHJlLWNvbXB1dGUgaGVhZGVycywgdGhleSBjb3VsZCBiZSBvbWl0dGluZyB0aGUgQVBJIEtFWVxuICAgICAgaGVhZGVycyA9IGNsaWVudC5fY29tcHV0ZVJlcXVlc3RIZWFkZXJzKHtcbiAgICAgICAgYWRkaXRpb25hbFVBOiBhZGRpdGlvbmFsVUEsXG4gICAgICAgIGhlYWRlcnM6IGluaXRpYWxPcHRzLmhlYWRlcnNcbiAgICAgIH0pO1xuXG4gICAgICByZXFPcHRzLnRpbWVvdXRzID0gY2xpZW50Ll9nZXRUaW1lb3V0c0ZvclJlcXVlc3QoaW5pdGlhbE9wdHMuaG9zdFR5cGUpO1xuICAgICAgY2xpZW50Ll9zZXRIb3N0SW5kZXhCeVR5cGUoMCwgaW5pdGlhbE9wdHMuaG9zdFR5cGUpO1xuICAgICAgdXNpbmdGYWxsYmFjayA9IHRydWU7IC8vIHRoZSBjdXJyZW50IHJlcXVlc3QgaXMgbm93IHVzaW5nIGZhbGxiYWNrXG4gICAgICByZXR1cm4gZG9SZXF1ZXN0KGNsaWVudC5fcmVxdWVzdC5mYWxsYmFjaywgcmVxT3B0cyk7XG4gICAgfVxuXG4gICAgdmFyIGN1cnJlbnRIb3N0ID0gY2xpZW50Ll9nZXRIb3N0QnlUeXBlKGluaXRpYWxPcHRzLmhvc3RUeXBlKTtcblxuICAgIHZhciB1cmwgPSBjdXJyZW50SG9zdCArIHJlcU9wdHMudXJsO1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgYm9keTogcmVxT3B0cy5ib2R5LFxuICAgICAganNvbkJvZHk6IHJlcU9wdHMuanNvbkJvZHksXG4gICAgICBtZXRob2Q6IHJlcU9wdHMubWV0aG9kLFxuICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgIHRpbWVvdXRzOiByZXFPcHRzLnRpbWVvdXRzLFxuICAgICAgZGVidWc6IHJlcXVlc3REZWJ1Z1xuICAgIH07XG5cbiAgICByZXF1ZXN0RGVidWcoJ21ldGhvZDogJXMsIHVybDogJXMsIGhlYWRlcnM6ICVqLCB0aW1lb3V0czogJWQnLFxuICAgICAgb3B0aW9ucy5tZXRob2QsIHVybCwgb3B0aW9ucy5oZWFkZXJzLCBvcHRpb25zLnRpbWVvdXRzKTtcblxuICAgIGlmIChyZXF1ZXN0ZXIgPT09IGNsaWVudC5fcmVxdWVzdC5mYWxsYmFjaykge1xuICAgICAgcmVxdWVzdERlYnVnKCd1c2luZyBmYWxsYmFjaycpO1xuICAgIH1cblxuICAgIC8vIGByZXF1ZXN0ZXJgIGlzIGFueSBvZiB0aGlzLl9yZXF1ZXN0IG9yIHRoaXMuX3JlcXVlc3QuZmFsbGJhY2tcbiAgICAvLyB0aHVzIGl0IG5lZWRzIHRvIGJlIGNhbGxlZCB1c2luZyB0aGUgY2xpZW50IGFzIGNvbnRleHRcbiAgICByZXR1cm4gcmVxdWVzdGVyLmNhbGwoY2xpZW50LCB1cmwsIG9wdGlvbnMpLnRoZW4oc3VjY2VzcywgdHJ5RmFsbGJhY2spO1xuXG4gICAgZnVuY3Rpb24gc3VjY2VzcyhodHRwUmVzcG9uc2UpIHtcbiAgICAgIC8vIGNvbXB1dGUgdGhlIHN0YXR1cyBvZiB0aGUgcmVzcG9uc2UsXG4gICAgICAvL1xuICAgICAgLy8gV2hlbiBpbiBicm93c2VyIG1vZGUsIHVzaW5nIFhEUiBvciBKU09OUCwgd2UgaGF2ZSBubyBzdGF0dXNDb2RlIGF2YWlsYWJsZVxuICAgICAgLy8gU28gd2UgcmVseSBvbiBvdXIgQVBJIHJlc3BvbnNlIGBzdGF0dXNgIHByb3BlcnR5LlxuICAgICAgLy8gQnV0IGB3YWl0VGFza2AgY2FuIHNldCBhIGBzdGF0dXNgIHByb3BlcnR5IHdoaWNoIGlzIG5vdCB0aGUgc3RhdHVzQ29kZSAoaXQncyB0aGUgdGFzayBzdGF0dXMpXG4gICAgICAvLyBTbyB3ZSBjaGVjayBpZiB0aGVyZSdzIGEgYG1lc3NhZ2VgIGFsb25nIGBzdGF0dXNgIGFuZCBpdCBtZWFucyBpdCdzIGFuIGVycm9yXG4gICAgICAvL1xuICAgICAgLy8gVGhhdCdzIHRoZSBvbmx5IGNhc2Ugd2hlcmUgd2UgaGF2ZSBhIHJlc3BvbnNlLnN0YXR1cyB0aGF0J3Mgbm90IHRoZSBodHRwIHN0YXR1c0NvZGVcbiAgICAgIHZhciBzdGF0dXMgPSBodHRwUmVzcG9uc2UgJiYgaHR0cFJlc3BvbnNlLmJvZHkgJiYgaHR0cFJlc3BvbnNlLmJvZHkubWVzc2FnZSAmJiBodHRwUmVzcG9uc2UuYm9keS5zdGF0dXMgfHxcblxuICAgICAgICAvLyB0aGlzIGlzIGltcG9ydGFudCB0byBjaGVjayB0aGUgcmVxdWVzdCBzdGF0dXNDb2RlIEFGVEVSIHRoZSBib2R5IGV2ZW50dWFsXG4gICAgICAgIC8vIHN0YXR1c0NvZGUgYmVjYXVzZSBzb21lIGltcGxlbWVudGF0aW9ucyAoalF1ZXJ5IFhEb21haW5SZXF1ZXN0IHRyYW5zcG9ydCkgbWF5XG4gICAgICAgIC8vIHNlbmQgc3RhdHVzQ29kZSAyMDAgd2hpbGUgd2UgaGFkIGFuIGVycm9yXG4gICAgICAgIGh0dHBSZXNwb25zZS5zdGF0dXNDb2RlIHx8XG5cbiAgICAgICAgLy8gV2hlbiBpbiBicm93c2VyIG1vZGUsIHVzaW5nIFhEUiBvciBKU09OUFxuICAgICAgICAvLyB3ZSBkZWZhdWx0IHRvIHN1Y2Nlc3Mgd2hlbiBubyBlcnJvciAobm8gcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLm1lc3NhZ2UpXG4gICAgICAgIC8vIElmIHRoZXJlIHdhcyBhIEpTT04ucGFyc2UoKSBlcnJvciB0aGVuIGJvZHkgaXMgbnVsbCBhbmQgaXQgZmFpbHNcbiAgICAgICAgaHR0cFJlc3BvbnNlICYmIGh0dHBSZXNwb25zZS5ib2R5ICYmIDIwMDtcblxuICAgICAgcmVxdWVzdERlYnVnKCdyZWNlaXZlZCByZXNwb25zZTogc3RhdHVzQ29kZTogJXMsIGNvbXB1dGVkIHN0YXR1c0NvZGU6ICVkLCBoZWFkZXJzOiAlaicsXG4gICAgICAgIGh0dHBSZXNwb25zZS5zdGF0dXNDb2RlLCBzdGF0dXMsIGh0dHBSZXNwb25zZS5oZWFkZXJzKTtcblxuICAgICAgdmFyIGh0dHBSZXNwb25zZU9rID0gTWF0aC5mbG9vcihzdGF0dXMgLyAxMDApID09PSAyO1xuXG4gICAgICB2YXIgZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICBkZWJ1Z0RhdGEucHVzaCh7XG4gICAgICAgIGN1cnJlbnRIb3N0OiBjdXJyZW50SG9zdCxcbiAgICAgICAgaGVhZGVyczogcmVtb3ZlQ3JlZGVudGlhbHMoaGVhZGVycyksXG4gICAgICAgIGNvbnRlbnQ6IGJvZHkgfHwgbnVsbCxcbiAgICAgICAgY29udGVudExlbmd0aDogYm9keSAhPT0gdW5kZWZpbmVkID8gYm9keS5sZW5ndGggOiBudWxsLFxuICAgICAgICBtZXRob2Q6IHJlcU9wdHMubWV0aG9kLFxuICAgICAgICB0aW1lb3V0czogcmVxT3B0cy50aW1lb3V0cyxcbiAgICAgICAgdXJsOiByZXFPcHRzLnVybCxcbiAgICAgICAgc3RhcnRUaW1lOiBzdGFydFRpbWUsXG4gICAgICAgIGVuZFRpbWU6IGVuZFRpbWUsXG4gICAgICAgIGR1cmF0aW9uOiBlbmRUaW1lIC0gc3RhcnRUaW1lLFxuICAgICAgICBzdGF0dXNDb2RlOiBzdGF0dXNcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaHR0cFJlc3BvbnNlT2spIHtcbiAgICAgICAgaWYgKGNsaWVudC5fdXNlQ2FjaGUgJiYgY2FjaGUpIHtcbiAgICAgICAgICBjYWNoZVtjYWNoZUlEXSA9IGh0dHBSZXNwb25zZS5yZXNwb25zZVRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaHR0cFJlc3BvbnNlLmJvZHk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzaG91bGRSZXRyeSA9IE1hdGguZmxvb3Ioc3RhdHVzIC8gMTAwKSAhPT0gNDtcblxuICAgICAgaWYgKHNob3VsZFJldHJ5KSB7XG4gICAgICAgIHRyaWVzICs9IDE7XG4gICAgICAgIHJldHVybiByZXRyeVJlcXVlc3QoKTtcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdERlYnVnKCd1bnJlY292ZXJhYmxlIGVycm9yJyk7XG5cbiAgICAgIC8vIG5vIHN1Y2Nlc3MgYW5kIG5vIHJldHJ5ID0+IGZhaWxcbiAgICAgIHZhciB1bnJlY292ZXJhYmxlRXJyb3IgPSBuZXcgZXJyb3JzLkFsZ29saWFTZWFyY2hFcnJvcihcbiAgICAgICAgaHR0cFJlc3BvbnNlLmJvZHkgJiYgaHR0cFJlc3BvbnNlLmJvZHkubWVzc2FnZSwge2RlYnVnRGF0YTogZGVidWdEYXRhLCBzdGF0dXNDb2RlOiBzdGF0dXN9XG4gICAgICApO1xuXG4gICAgICByZXR1cm4gY2xpZW50Ll9wcm9taXNlLnJlamVjdCh1bnJlY292ZXJhYmxlRXJyb3IpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRyeUZhbGxiYWNrKGVycikge1xuICAgICAgLy8gZXJyb3IgY2FzZXM6XG4gICAgICAvLyAgV2hpbGUgbm90IGluIGZhbGxiYWNrIG1vZGU6XG4gICAgICAvLyAgICAtIENPUlMgbm90IHN1cHBvcnRlZFxuICAgICAgLy8gICAgLSBuZXR3b3JrIGVycm9yXG4gICAgICAvLyAgV2hpbGUgaW4gZmFsbGJhY2sgbW9kZTpcbiAgICAgIC8vICAgIC0gdGltZW91dFxuICAgICAgLy8gICAgLSBuZXR3b3JrIGVycm9yXG4gICAgICAvLyAgICAtIGJhZGx5IGZvcm1hdHRlZCBKU09OUCAoc2NyaXB0IGxvYWRlZCwgZGlkIG5vdCBjYWxsIG91ciBjYWxsYmFjaylcbiAgICAgIC8vICBJbiBib3RoIGNhc2VzOlxuICAgICAgLy8gICAgLSB1bmNhdWdodCBleGNlcHRpb24gb2NjdXJzIChUeXBlRXJyb3IpXG4gICAgICByZXF1ZXN0RGVidWcoJ2Vycm9yOiAlcywgc3RhY2s6ICVzJywgZXJyLm1lc3NhZ2UsIGVyci5zdGFjayk7XG5cbiAgICAgIHZhciBlbmRUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgIGRlYnVnRGF0YS5wdXNoKHtcbiAgICAgICAgY3VycmVudEhvc3Q6IGN1cnJlbnRIb3N0LFxuICAgICAgICBoZWFkZXJzOiByZW1vdmVDcmVkZW50aWFscyhoZWFkZXJzKSxcbiAgICAgICAgY29udGVudDogYm9keSB8fCBudWxsLFxuICAgICAgICBjb250ZW50TGVuZ3RoOiBib2R5ICE9PSB1bmRlZmluZWQgPyBib2R5Lmxlbmd0aCA6IG51bGwsXG4gICAgICAgIG1ldGhvZDogcmVxT3B0cy5tZXRob2QsXG4gICAgICAgIHRpbWVvdXRzOiByZXFPcHRzLnRpbWVvdXRzLFxuICAgICAgICB1cmw6IHJlcU9wdHMudXJsLFxuICAgICAgICBzdGFydFRpbWU6IHN0YXJ0VGltZSxcbiAgICAgICAgZW5kVGltZTogZW5kVGltZSxcbiAgICAgICAgZHVyYXRpb246IGVuZFRpbWUgLSBzdGFydFRpbWVcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBlcnJvcnMuQWxnb2xpYVNlYXJjaEVycm9yKSkge1xuICAgICAgICBlcnIgPSBuZXcgZXJyb3JzLlVua25vd24oZXJyICYmIGVyci5tZXNzYWdlLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICB0cmllcyArPSAxO1xuXG4gICAgICAvLyBzdG9wIHRoZSByZXF1ZXN0IGltcGxlbWVudGF0aW9uIHdoZW46XG4gICAgICBpZiAoXG4gICAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgdGhpcyBlcnJvcixcbiAgICAgICAgLy8gaXQgY29tZXMgZnJvbSBhIHRocm93IGluIHNvbWUgb3RoZXIgcGllY2Ugb2YgY29kZVxuICAgICAgICBlcnIgaW5zdGFuY2VvZiBlcnJvcnMuVW5rbm93biB8fFxuXG4gICAgICAgIC8vIHNlcnZlciBzZW50IHVucGFyc2FibGUgSlNPTlxuICAgICAgICBlcnIgaW5zdGFuY2VvZiBlcnJvcnMuVW5wYXJzYWJsZUpTT04gfHxcblxuICAgICAgICAvLyBtYXggdHJpZXMgYW5kIGFscmVhZHkgdXNpbmcgZmFsbGJhY2sgb3Igbm8gZmFsbGJhY2tcbiAgICAgICAgdHJpZXMgPj0gY2xpZW50Lmhvc3RzW2luaXRpYWxPcHRzLmhvc3RUeXBlXS5sZW5ndGggJiZcbiAgICAgICAgKHVzaW5nRmFsbGJhY2sgfHwgIWhhc0ZhbGxiYWNrKSkge1xuICAgICAgICAvLyBzdG9wIHJlcXVlc3QgaW1wbGVtZW50YXRpb24gZm9yIHRoaXMgY29tbWFuZFxuICAgICAgICBlcnIuZGVidWdEYXRhID0gZGVidWdEYXRhO1xuICAgICAgICByZXR1cm4gY2xpZW50Ll9wcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfVxuXG4gICAgICAvLyBXaGVuIGEgdGltZW91dCBvY2N1cmVkLCByZXRyeSBieSByYWlzaW5nIHRpbWVvdXRcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBlcnJvcnMuUmVxdWVzdFRpbWVvdXQpIHtcbiAgICAgICAgcmV0dXJuIHJldHJ5UmVxdWVzdFdpdGhIaWdoZXJUaW1lb3V0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXRyeVJlcXVlc3QoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXRyeVJlcXVlc3QoKSB7XG4gICAgICByZXF1ZXN0RGVidWcoJ3JldHJ5aW5nIHJlcXVlc3QnKTtcbiAgICAgIGNsaWVudC5faW5jcmVtZW50SG9zdEluZGV4KGluaXRpYWxPcHRzLmhvc3RUeXBlKTtcbiAgICAgIHJldHVybiBkb1JlcXVlc3QocmVxdWVzdGVyLCByZXFPcHRzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXRyeVJlcXVlc3RXaXRoSGlnaGVyVGltZW91dCgpIHtcbiAgICAgIHJlcXVlc3REZWJ1ZygncmV0cnlpbmcgcmVxdWVzdCB3aXRoIGhpZ2hlciB0aW1lb3V0Jyk7XG4gICAgICBjbGllbnQuX2luY3JlbWVudEhvc3RJbmRleChpbml0aWFsT3B0cy5ob3N0VHlwZSk7XG4gICAgICBjbGllbnQuX2luY3JlbWVudFRpbWVvdXRNdWx0aXBsZXIoKTtcbiAgICAgIHJlcU9wdHMudGltZW91dHMgPSBjbGllbnQuX2dldFRpbWVvdXRzRm9yUmVxdWVzdChpbml0aWFsT3B0cy5ob3N0VHlwZSk7XG4gICAgICByZXR1cm4gZG9SZXF1ZXN0KHJlcXVlc3RlciwgcmVxT3B0cyk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHByb21pc2UgPSBkb1JlcXVlc3QoXG4gICAgY2xpZW50Ll9yZXF1ZXN0LCB7XG4gICAgICB1cmw6IGluaXRpYWxPcHRzLnVybCxcbiAgICAgIG1ldGhvZDogaW5pdGlhbE9wdHMubWV0aG9kLFxuICAgICAgYm9keTogYm9keSxcbiAgICAgIGpzb25Cb2R5OiBpbml0aWFsT3B0cy5ib2R5LFxuICAgICAgdGltZW91dHM6IGNsaWVudC5fZ2V0VGltZW91dHNGb3JSZXF1ZXN0KGluaXRpYWxPcHRzLmhvc3RUeXBlKVxuICAgIH1cbiAgKTtcblxuICAvLyBlaXRoZXIgd2UgaGF2ZSBhIGNhbGxiYWNrXG4gIC8vIGVpdGhlciB3ZSBhcmUgdXNpbmcgcHJvbWlzZXNcbiAgaWYgKHR5cGVvZiBpbml0aWFsT3B0cy5jYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHByb21pc2UudGhlbihmdW5jdGlvbiBva0NiKGNvbnRlbnQpIHtcbiAgICAgIGV4aXRQcm9taXNlKGZ1bmN0aW9uKCkge1xuICAgICAgICBpbml0aWFsT3B0cy5jYWxsYmFjayhudWxsLCBjb250ZW50KTtcbiAgICAgIH0sIGNsaWVudC5fc2V0VGltZW91dCB8fCBzZXRUaW1lb3V0KTtcbiAgICB9LCBmdW5jdGlvbiBub29rQ2IoZXJyKSB7XG4gICAgICBleGl0UHJvbWlzZShmdW5jdGlvbigpIHtcbiAgICAgICAgaW5pdGlhbE9wdHMuY2FsbGJhY2soZXJyKTtcbiAgICAgIH0sIGNsaWVudC5fc2V0VGltZW91dCB8fCBzZXRUaW1lb3V0KTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxufTtcblxuLypcbiogVHJhbnNmb3JtIHNlYXJjaCBwYXJhbSBvYmplY3QgaW4gcXVlcnkgc3RyaW5nXG4qIEBwYXJhbSB7b2JqZWN0fSBhcmdzIGFyZ3VtZW50cyB0byBhZGQgdG8gdGhlIGN1cnJlbnQgcXVlcnkgc3RyaW5nXG4qIEBwYXJhbSB7c3RyaW5nfSBwYXJhbXMgY3VycmVudCBxdWVyeSBzdHJpbmdcbiogQHJldHVybiB7c3RyaW5nfSB0aGUgZmluYWwgcXVlcnkgc3RyaW5nXG4qL1xuQWxnb2xpYVNlYXJjaENvcmUucHJvdG90eXBlLl9nZXRTZWFyY2hQYXJhbXMgPSBmdW5jdGlvbihhcmdzLCBwYXJhbXMpIHtcbiAgaWYgKGFyZ3MgPT09IHVuZGVmaW5lZCB8fCBhcmdzID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuICBmb3IgKHZhciBrZXkgaW4gYXJncykge1xuICAgIGlmIChrZXkgIT09IG51bGwgJiYgYXJnc1trZXldICE9PSB1bmRlZmluZWQgJiYgYXJncy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBwYXJhbXMgKz0gcGFyYW1zID09PSAnJyA/ICcnIDogJyYnO1xuICAgICAgcGFyYW1zICs9IGtleSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnc1trZXldKSA9PT0gJ1tvYmplY3QgQXJyYXldJyA/IHNhZmVKU09OU3RyaW5naWZ5KGFyZ3Nba2V5XSkgOiBhcmdzW2tleV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcGFyYW1zO1xufTtcblxuLyoqXG4gKiBDb21wdXRlIHRoZSBoZWFkZXJzIGZvciBhIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0gW3N0cmluZ10gb3B0aW9ucy5hZGRpdGlvbmFsVUEgc2VtaS1jb2xvbiBzZXBhcmF0ZWQgc3RyaW5nIHdpdGggb3RoZXIgdXNlciBhZ2VudHMgdG8gYWRkXG4gKiBAcGFyYW0gW2Jvb2xlYW49dHJ1ZV0gb3B0aW9ucy53aXRoQXBpS2V5IFNlbmQgdGhlIGFwaSBrZXkgYXMgYSBoZWFkZXJcbiAqIEBwYXJhbSBbT2JqZWN0XSBvcHRpb25zLmhlYWRlcnMgRXh0cmEgaGVhZGVycyB0byBzZW5kXG4gKi9cbkFsZ29saWFTZWFyY2hDb3JlLnByb3RvdHlwZS5fY29tcHV0ZVJlcXVlc3RIZWFkZXJzID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICB2YXIgZm9yRWFjaCA9IHJlcXVpcmUoJ2ZvcmVhY2gnKTtcblxuICB2YXIgdWEgPSBvcHRpb25zLmFkZGl0aW9uYWxVQSA/XG4gICAgdGhpcy5fdWEgKyAnOycgKyBvcHRpb25zLmFkZGl0aW9uYWxVQSA6XG4gICAgdGhpcy5fdWE7XG5cbiAgdmFyIHJlcXVlc3RIZWFkZXJzID0ge1xuICAgICd4LWFsZ29saWEtYWdlbnQnOiB1YSxcbiAgICAneC1hbGdvbGlhLWFwcGxpY2F0aW9uLWlkJzogdGhpcy5hcHBsaWNhdGlvbklEXG4gIH07XG5cbiAgLy8gYnJvd3NlciB3aWxsIGlubGluZSBoZWFkZXJzIGluIHRoZSB1cmwsIG5vZGUuanMgd2lsbCB1c2UgaHR0cCBoZWFkZXJzXG4gIC8vIGJ1dCBpbiBzb21lIHNpdHVhdGlvbnMsIHRoZSBBUEkgS0VZIHdpbGwgYmUgdG9vIGxvbmcgKGJpZyBzZWN1cmVkIEFQSSBrZXlzKVxuICAvLyBzbyBpZiB0aGUgcmVxdWVzdCBpcyBhIFBPU1QgYW5kIHRoZSBLRVkgaXMgdmVyeSBsb25nLCB3ZSB3aWxsIGJlIGFza2VkIHRvIG5vdCBwdXRcbiAgLy8gaXQgaW50byBoZWFkZXJzIGJ1dCBpbiB0aGUgSlNPTiBib2R5XG4gIGlmIChvcHRpb25zLndpdGhBcGlLZXkgIT09IGZhbHNlKSB7XG4gICAgcmVxdWVzdEhlYWRlcnNbJ3gtYWxnb2xpYS1hcGkta2V5J10gPSB0aGlzLmFwaUtleTtcbiAgfVxuXG4gIGlmICh0aGlzLnVzZXJUb2tlbikge1xuICAgIHJlcXVlc3RIZWFkZXJzWyd4LWFsZ29saWEtdXNlcnRva2VuJ10gPSB0aGlzLnVzZXJUb2tlbjtcbiAgfVxuXG4gIGlmICh0aGlzLnNlY3VyaXR5VGFncykge1xuICAgIHJlcXVlc3RIZWFkZXJzWyd4LWFsZ29saWEtdGFnZmlsdGVycyddID0gdGhpcy5zZWN1cml0eVRhZ3M7XG4gIH1cblxuICBmb3JFYWNoKHRoaXMuZXh0cmFIZWFkZXJzLCBmdW5jdGlvbiBhZGRUb1JlcXVlc3RIZWFkZXJzKHZhbHVlLCBrZXkpIHtcbiAgICByZXF1ZXN0SGVhZGVyc1trZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIGlmIChvcHRpb25zLmhlYWRlcnMpIHtcbiAgICBmb3JFYWNoKG9wdGlvbnMuaGVhZGVycywgZnVuY3Rpb24gYWRkVG9SZXF1ZXN0SGVhZGVycyh2YWx1ZSwga2V5KSB7XG4gICAgICByZXF1ZXN0SGVhZGVyc1trZXldID0gdmFsdWU7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVxdWVzdEhlYWRlcnM7XG59O1xuXG4vKipcbiAqIFNlYXJjaCB0aHJvdWdoIG11bHRpcGxlIGluZGljZXMgYXQgdGhlIHNhbWUgdGltZVxuICogQHBhcmFtICB7T2JqZWN0W119ICAgcXVlcmllcyAgQW4gYXJyYXkgb2YgcXVlcmllcyB5b3Ugd2FudCB0byBydW4uXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcmllc1tdLmluZGV4TmFtZSBUaGUgaW5kZXggbmFtZSB5b3Ugd2FudCB0byB0YXJnZXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcXVlcmllc1tdLnF1ZXJ5XSBUaGUgcXVlcnkgdG8gaXNzdWUgb24gdGhpcyBpbmRleC4gQ2FuIGFsc28gYmUgcGFzc2VkIGludG8gYHBhcmFtc2BcbiAqIEBwYXJhbSB7T2JqZWN0fSBxdWVyaWVzW10ucGFyYW1zIEFueSBzZWFyY2ggcGFyYW0gbGlrZSBoaXRzUGVyUGFnZSwgLi5cbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayB0byBiZSBjYWxsZWRcbiAqIEByZXR1cm4ge1Byb21pc2V8dW5kZWZpbmVkfSBSZXR1cm5zIGEgcHJvbWlzZSBpZiBubyBjYWxsYmFjayBnaXZlblxuICovXG5BbGdvbGlhU2VhcmNoQ29yZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcmllcywgb3B0cywgY2FsbGJhY2spIHtcbiAgdmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7XG4gIHZhciBtYXAgPSByZXF1aXJlKCcuL21hcC5qcycpO1xuXG4gIHZhciB1c2FnZSA9ICdVc2FnZTogY2xpZW50LnNlYXJjaChhcnJheU9mUXVlcmllc1ssIGNhbGxiYWNrXSknO1xuXG4gIGlmICghaXNBcnJheShxdWVyaWVzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcih1c2FnZSk7XG4gIH1cblxuICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdHM7XG4gICAgb3B0cyA9IHt9O1xuICB9IGVsc2UgaWYgKG9wdHMgPT09IHVuZGVmaW5lZCkge1xuICAgIG9wdHMgPSB7fTtcbiAgfVxuXG4gIHZhciBjbGllbnQgPSB0aGlzO1xuXG4gIHZhciBwb3N0T2JqID0ge1xuICAgIHJlcXVlc3RzOiBtYXAocXVlcmllcywgZnVuY3Rpb24gcHJlcGFyZVJlcXVlc3QocXVlcnkpIHtcbiAgICAgIHZhciBwYXJhbXMgPSAnJztcblxuICAgICAgLy8gYWxsb3cgcXVlcnkucXVlcnlcbiAgICAgIC8vIHNvIHdlIGFyZSBtaW1pY2luZyB0aGUgaW5kZXguc2VhcmNoKHF1ZXJ5LCBwYXJhbXMpIG1ldGhvZFxuICAgICAgLy8ge2luZGV4TmFtZTosIHF1ZXJ5OiwgcGFyYW1zOn1cbiAgICAgIGlmIChxdWVyeS5xdWVyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhcmFtcyArPSAncXVlcnk9JyArIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeS5xdWVyeSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluZGV4TmFtZTogcXVlcnkuaW5kZXhOYW1lLFxuICAgICAgICBwYXJhbXM6IGNsaWVudC5fZ2V0U2VhcmNoUGFyYW1zKHF1ZXJ5LnBhcmFtcywgcGFyYW1zKVxuICAgICAgfTtcbiAgICB9KVxuICB9O1xuXG4gIHZhciBKU09OUFBhcmFtcyA9IG1hcChwb3N0T2JqLnJlcXVlc3RzLCBmdW5jdGlvbiBwcmVwYXJlSlNPTlBQYXJhbXMocmVxdWVzdCwgcmVxdWVzdElkKSB7XG4gICAgcmV0dXJuIHJlcXVlc3RJZCArICc9JyArXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICcvMS9pbmRleGVzLycgKyBlbmNvZGVVUklDb21wb25lbnQocmVxdWVzdC5pbmRleE5hbWUpICsgJz8nICtcbiAgICAgICAgcmVxdWVzdC5wYXJhbXNcbiAgICAgICk7XG4gIH0pLmpvaW4oJyYnKTtcblxuICB2YXIgdXJsID0gJy8xL2luZGV4ZXMvKi9xdWVyaWVzJztcblxuICBpZiAob3B0cy5zdHJhdGVneSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdXJsICs9ICc/c3RyYXRlZ3k9JyArIG9wdHMuc3RyYXRlZ3k7XG4gIH1cblxuICByZXR1cm4gdGhpcy5fanNvblJlcXVlc3Qoe1xuICAgIGNhY2hlOiB0aGlzLmNhY2hlLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogdXJsLFxuICAgIGJvZHk6IHBvc3RPYmosXG4gICAgaG9zdFR5cGU6ICdyZWFkJyxcbiAgICBmYWxsYmFjazoge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybDogJy8xL2luZGV4ZXMvKicsXG4gICAgICBib2R5OiB7XG4gICAgICAgIHBhcmFtczogSlNPTlBQYXJhbXNcbiAgICAgIH1cbiAgICB9LFxuICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICB9KTtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBleHRyYSBzZWN1cml0eSB0YWdGaWx0ZXJzIGhlYWRlclxuICogQHBhcmFtIHtzdHJpbmd8YXJyYXl9IHRhZ3MgVGhlIGxpc3Qgb2YgdGFncyBkZWZpbmluZyB0aGUgY3VycmVudCBzZWN1cml0eSBmaWx0ZXJzXG4gKi9cbkFsZ29saWFTZWFyY2hDb3JlLnByb3RvdHlwZS5zZXRTZWN1cml0eVRhZ3MgPSBmdW5jdGlvbih0YWdzKSB7XG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGFncykgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICB2YXIgc3RyVGFncyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7ICsraSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0YWdzW2ldKSA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgICB2YXIgb3JlZFRhZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0YWdzW2ldLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgb3JlZFRhZ3MucHVzaCh0YWdzW2ldW2pdKTtcbiAgICAgICAgfVxuICAgICAgICBzdHJUYWdzLnB1c2goJygnICsgb3JlZFRhZ3Muam9pbignLCcpICsgJyknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0clRhZ3MucHVzaCh0YWdzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGFncyA9IHN0clRhZ3Muam9pbignLCcpO1xuICB9XG5cbiAgdGhpcy5zZWN1cml0eVRhZ3MgPSB0YWdzO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIGV4dHJhIHVzZXIgdG9rZW4gaGVhZGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXNlclRva2VuIFRoZSB0b2tlbiBpZGVudGlmeWluZyBhIHVuaXEgdXNlciAodXNlZCB0byBhcHBseSByYXRlIGxpbWl0cylcbiAqL1xuQWxnb2xpYVNlYXJjaENvcmUucHJvdG90eXBlLnNldFVzZXJUb2tlbiA9IGZ1bmN0aW9uKHVzZXJUb2tlbikge1xuICB0aGlzLnVzZXJUb2tlbiA9IHVzZXJUb2tlbjtcbn07XG5cbi8qKlxuICogQ2xlYXIgYWxsIHF1ZXJpZXMgaW4gY2xpZW50J3MgY2FjaGVcbiAqIEByZXR1cm4gdW5kZWZpbmVkXG4gKi9cbkFsZ29saWFTZWFyY2hDb3JlLnByb3RvdHlwZS5jbGVhckNhY2hlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY2FjaGUgPSB7fTtcbn07XG5cbi8qKlxuKiBTZXQgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYSByZXF1ZXN0IGNhbiB0YWtlIGJlZm9yZSBhdXRvbWF0aWNhbGx5IGJlaW5nIHRlcm1pbmF0ZWQuXG4qIEBkZXByZWNhdGVkXG4qIEBwYXJhbSB7TnVtYmVyfSBtaWxsaXNlY29uZHNcbiovXG5BbGdvbGlhU2VhcmNoQ29yZS5wcm90b3R5cGUuc2V0UmVxdWVzdFRpbWVvdXQgPSBmdW5jdGlvbihtaWxsaXNlY29uZHMpIHtcbiAgaWYgKG1pbGxpc2Vjb25kcykge1xuICAgIHRoaXMuX3RpbWVvdXRzLmNvbm5lY3QgPSB0aGlzLl90aW1lb3V0cy5yZWFkID0gdGhpcy5fdGltZW91dHMud3JpdGUgPSBtaWxsaXNlY29uZHM7XG4gIH1cbn07XG5cbi8qKlxuKiBTZXQgdGhlIHRocmVlIGRpZmZlcmVudCAoY29ubmVjdCwgcmVhZCwgd3JpdGUpIHRpbWVvdXRzIHRvIGJlIHVzZWQgd2hlbiByZXF1ZXN0aW5nXG4qIEBwYXJhbSB7T2JqZWN0fSB0aW1lb3V0c1xuKi9cbkFsZ29saWFTZWFyY2hDb3JlLnByb3RvdHlwZS5zZXRUaW1lb3V0cyA9IGZ1bmN0aW9uKHRpbWVvdXRzKSB7XG4gIHRoaXMuX3RpbWVvdXRzID0gdGltZW91dHM7XG59O1xuXG4vKipcbiogR2V0IHRoZSB0aHJlZSBkaWZmZXJlbnQgKGNvbm5lY3QsIHJlYWQsIHdyaXRlKSB0aW1lb3V0cyB0byBiZSB1c2VkIHdoZW4gcmVxdWVzdGluZ1xuKiBAcGFyYW0ge09iamVjdH0gdGltZW91dHNcbiovXG5BbGdvbGlhU2VhcmNoQ29yZS5wcm90b3R5cGUuZ2V0VGltZW91dHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX3RpbWVvdXRzO1xufTtcblxuQWxnb2xpYVNlYXJjaENvcmUucHJvdG90eXBlLl9nZXRBcHBJZERhdGEgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGRhdGEgPSBzdG9yZS5nZXQodGhpcy5hcHBsaWNhdGlvbklEKTtcbiAgaWYgKGRhdGEgIT09IG51bGwpIHRoaXMuX2NhY2hlQXBwSWREYXRhKGRhdGEpO1xuICByZXR1cm4gZGF0YTtcbn07XG5cbkFsZ29saWFTZWFyY2hDb3JlLnByb3RvdHlwZS5fc2V0QXBwSWREYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICBkYXRhLmxhc3RDaGFuZ2UgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICB0aGlzLl9jYWNoZUFwcElkRGF0YShkYXRhKTtcbiAgcmV0dXJuIHN0b3JlLnNldCh0aGlzLmFwcGxpY2F0aW9uSUQsIGRhdGEpO1xufTtcblxuQWxnb2xpYVNlYXJjaENvcmUucHJvdG90eXBlLl9jaGVja0FwcElkRGF0YSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZGF0YSA9IHRoaXMuX2dldEFwcElkRGF0YSgpO1xuICB2YXIgbm93ID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgaWYgKGRhdGEgPT09IG51bGwgfHwgbm93IC0gZGF0YS5sYXN0Q2hhbmdlID4gUkVTRVRfQVBQX0RBVEFfVElNRVIpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVzZXRJbml0aWFsQXBwSWREYXRhKGRhdGEpO1xuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5BbGdvbGlhU2VhcmNoQ29yZS5wcm90b3R5cGUuX3Jlc2V0SW5pdGlhbEFwcElkRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgdmFyIG5ld0RhdGEgPSBkYXRhIHx8IHt9O1xuICBuZXdEYXRhLmhvc3RJbmRleGVzID0ge3JlYWQ6IDAsIHdyaXRlOiAwfTtcbiAgbmV3RGF0YS50aW1lb3V0TXVsdGlwbGllciA9IDE7XG4gIG5ld0RhdGEuc2h1ZmZsZVJlc3VsdCA9IG5ld0RhdGEuc2h1ZmZsZVJlc3VsdCB8fCBzaHVmZmxlKFsxLCAyLCAzXSk7XG4gIHJldHVybiB0aGlzLl9zZXRBcHBJZERhdGEobmV3RGF0YSk7XG59O1xuXG5BbGdvbGlhU2VhcmNoQ29yZS5wcm90b3R5cGUuX2NhY2hlQXBwSWREYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICB0aGlzLl9ob3N0SW5kZXhlcyA9IGRhdGEuaG9zdEluZGV4ZXM7XG4gIHRoaXMuX3RpbWVvdXRNdWx0aXBsaWVyID0gZGF0YS50aW1lb3V0TXVsdGlwbGllcjtcbiAgdGhpcy5fc2h1ZmZsZVJlc3VsdCA9IGRhdGEuc2h1ZmZsZVJlc3VsdDtcbn07XG5cbkFsZ29saWFTZWFyY2hDb3JlLnByb3RvdHlwZS5fcGFydGlhbEFwcElkRGF0YVVwZGF0ZSA9IGZ1bmN0aW9uKG5ld0RhdGEpIHtcbiAgdmFyIGZvcmVhY2ggPSByZXF1aXJlKCdmb3JlYWNoJyk7XG4gIHZhciBjdXJyZW50RGF0YSA9IHRoaXMuX2dldEFwcElkRGF0YSgpO1xuICBmb3JlYWNoKG5ld0RhdGEsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICBjdXJyZW50RGF0YVtrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIHJldHVybiB0aGlzLl9zZXRBcHBJZERhdGEoY3VycmVudERhdGEpO1xufTtcblxuQWxnb2xpYVNlYXJjaENvcmUucHJvdG90eXBlLl9nZXRIb3N0QnlUeXBlID0gZnVuY3Rpb24oaG9zdFR5cGUpIHtcbiAgcmV0dXJuIHRoaXMuaG9zdHNbaG9zdFR5cGVdW3RoaXMuX2dldEhvc3RJbmRleEJ5VHlwZShob3N0VHlwZSldO1xufTtcblxuQWxnb2xpYVNlYXJjaENvcmUucHJvdG90eXBlLl9nZXRUaW1lb3V0TXVsdGlwbGllciA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5fdGltZW91dE11bHRpcGxpZXI7XG59O1xuXG5BbGdvbGlhU2VhcmNoQ29yZS5wcm90b3R5cGUuX2dldEhvc3RJbmRleEJ5VHlwZSA9IGZ1bmN0aW9uKGhvc3RUeXBlKSB7XG4gIHJldHVybiB0aGlzLl9ob3N0SW5kZXhlc1tob3N0VHlwZV07XG59O1xuXG5BbGdvbGlhU2VhcmNoQ29yZS5wcm90b3R5cGUuX3NldEhvc3RJbmRleEJ5VHlwZSA9IGZ1bmN0aW9uKGhvc3RJbmRleCwgaG9zdFR5cGUpIHtcbiAgdmFyIGNsb25lID0gcmVxdWlyZSgnLi9jbG9uZScpO1xuICB2YXIgbmV3SG9zdEluZGV4ZXMgPSBjbG9uZSh0aGlzLl9ob3N0SW5kZXhlcyk7XG4gIG5ld0hvc3RJbmRleGVzW2hvc3RUeXBlXSA9IGhvc3RJbmRleDtcbiAgdGhpcy5fcGFydGlhbEFwcElkRGF0YVVwZGF0ZSh7aG9zdEluZGV4ZXM6IG5ld0hvc3RJbmRleGVzfSk7XG4gIHJldHVybiBob3N0SW5kZXg7XG59O1xuXG5BbGdvbGlhU2VhcmNoQ29yZS5wcm90b3R5cGUuX2luY3JlbWVudEhvc3RJbmRleCA9IGZ1bmN0aW9uKGhvc3RUeXBlKSB7XG4gIHJldHVybiB0aGlzLl9zZXRIb3N0SW5kZXhCeVR5cGUoXG4gICAgKHRoaXMuX2dldEhvc3RJbmRleEJ5VHlwZShob3N0VHlwZSkgKyAxKSAlIHRoaXMuaG9zdHNbaG9zdFR5cGVdLmxlbmd0aCwgaG9zdFR5cGVcbiAgKTtcbn07XG5cbkFsZ29saWFTZWFyY2hDb3JlLnByb3RvdHlwZS5faW5jcmVtZW50VGltZW91dE11bHRpcGxlciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdGltZW91dE11bHRpcGxpZXIgPSBNYXRoLm1heCh0aGlzLl90aW1lb3V0TXVsdGlwbGllciArIDEsIDQpO1xuICByZXR1cm4gdGhpcy5fcGFydGlhbEFwcElkRGF0YVVwZGF0ZSh7dGltZW91dE11bHRpcGxpZXI6IHRpbWVvdXRNdWx0aXBsaWVyfSk7XG59O1xuXG5BbGdvbGlhU2VhcmNoQ29yZS5wcm90b3R5cGUuX2dldFRpbWVvdXRzRm9yUmVxdWVzdCA9IGZ1bmN0aW9uKGhvc3RUeXBlKSB7XG4gIHJldHVybiB7XG4gICAgY29ubmVjdDogdGhpcy5fdGltZW91dHMuY29ubmVjdCAqIHRoaXMuX3RpbWVvdXRNdWx0aXBsaWVyLFxuICAgIGNvbXBsZXRlOiB0aGlzLl90aW1lb3V0c1tob3N0VHlwZV0gKiB0aGlzLl90aW1lb3V0TXVsdGlwbGllclxuICB9O1xufTtcblxuZnVuY3Rpb24gcHJlcGFyZUhvc3QocHJvdG9jb2wpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHByZXBhcmUoaG9zdCkge1xuICAgIHJldHVybiBwcm90b2NvbCArICcvLycgKyBob3N0LnRvTG93ZXJDYXNlKCk7XG4gIH07XG59XG5cbi8vIFByb3RvdHlwZS5qcyA8IDEuNywgYSB3aWRlbHkgdXNlZCBsaWJyYXJ5LCBkZWZpbmVzIGEgd2VpcmRcbi8vIEFycmF5LnByb3RvdHlwZS50b0pTT04gZnVuY3Rpb24gdGhhdCB3aWxsIGZhaWwgdG8gc3RyaW5naWZ5IG91ciBjb250ZW50XG4vLyBhcHByb3ByaWF0ZWx5XG4vLyByZWZzOlxuLy8gICAtIGh0dHBzOi8vZ3JvdXBzLmdvb2dsZS5jb20vZm9ydW0vIyF0b3BpYy9wcm90b3R5cGUtY29yZS9FLVNBVnZWX1Y5UVxuLy8gICAtIGh0dHBzOi8vZ2l0aHViLmNvbS9zc3RlcGhlbnNvbi9wcm90b3R5cGUvY29tbWl0LzAzOGEyOTg1YTcwNTkzYzFhODZjMjMwZmFkYmRmZTJlNDg5OGE0OGNcbi8vICAgLSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQ4NDQxLzE0NzA3OVxuZnVuY3Rpb24gc2FmZUpTT05TdHJpbmdpZnkob2JqKSB7XG4gIC8qIGVzbGludCBuby1leHRlbmQtbmF0aXZlOjAgKi9cblxuICBpZiAoQXJyYXkucHJvdG90eXBlLnRvSlNPTiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7XG4gIH1cblxuICB2YXIgdG9KU09OID0gQXJyYXkucHJvdG90eXBlLnRvSlNPTjtcbiAgZGVsZXRlIEFycmF5LnByb3RvdHlwZS50b0pTT047XG4gIHZhciBvdXQgPSBKU09OLnN0cmluZ2lmeShvYmopO1xuICBBcnJheS5wcm90b3R5cGUudG9KU09OID0gdG9KU09OO1xuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcbiAgdmFyIGN1cnJlbnRJbmRleCA9IGFycmF5Lmxlbmd0aDtcbiAgdmFyIHRlbXBvcmFyeVZhbHVlO1xuICB2YXIgcmFuZG9tSW5kZXg7XG5cbiAgLy8gV2hpbGUgdGhlcmUgcmVtYWluIGVsZW1lbnRzIHRvIHNodWZmbGUuLi5cbiAgd2hpbGUgKGN1cnJlbnRJbmRleCAhPT0gMCkge1xuICAgIC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudC4uLlxuICAgIHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY3VycmVudEluZGV4KTtcbiAgICBjdXJyZW50SW5kZXggLT0gMTtcblxuICAgIC8vIEFuZCBzd2FwIGl0IHdpdGggdGhlIGN1cnJlbnQgZWxlbWVudC5cbiAgICB0ZW1wb3JhcnlWYWx1ZSA9IGFycmF5W2N1cnJlbnRJbmRleF07XG4gICAgYXJyYXlbY3VycmVudEluZGV4XSA9IGFycmF5W3JhbmRvbUluZGV4XTtcbiAgICBhcnJheVtyYW5kb21JbmRleF0gPSB0ZW1wb3JhcnlWYWx1ZTtcbiAgfVxuXG4gIHJldHVybiBhcnJheTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ3JlZGVudGlhbHMoaGVhZGVycykge1xuICB2YXIgbmV3SGVhZGVycyA9IHt9O1xuXG4gIGZvciAodmFyIGhlYWRlck5hbWUgaW4gaGVhZGVycykge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaGVhZGVycywgaGVhZGVyTmFtZSkpIHtcbiAgICAgIHZhciB2YWx1ZTtcblxuICAgICAgaWYgKGhlYWRlck5hbWUgPT09ICd4LWFsZ29saWEtYXBpLWtleScgfHwgaGVhZGVyTmFtZSA9PT0gJ3gtYWxnb2xpYS1hcHBsaWNhdGlvbi1pZCcpIHtcbiAgICAgICAgdmFsdWUgPSAnKipoaWRkZW4gZm9yIHNlY3VyaXR5IHB1cnBvc2VzKionO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBoZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgfVxuXG4gICAgICBuZXdIZWFkZXJzW2hlYWRlck5hbWVdID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld0hlYWRlcnM7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYWxnb2xpYXNlYXJjaC9zcmMvQWxnb2xpYVNlYXJjaENvcmUuanNcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBidWlsZFNlYXJjaE1ldGhvZCA9IHJlcXVpcmUoJy4vYnVpbGRTZWFyY2hNZXRob2QuanMnKTtcbnZhciBkZXByZWNhdGUgPSByZXF1aXJlKCcuL2RlcHJlY2F0ZS5qcycpO1xudmFyIGRlcHJlY2F0ZWRNZXNzYWdlID0gcmVxdWlyZSgnLi9kZXByZWNhdGVkTWVzc2FnZS5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEluZGV4Q29yZTtcblxuLypcbiogSW5kZXggY2xhc3MgY29uc3RydWN0b3IuXG4qIFlvdSBzaG91bGQgbm90IHVzZSB0aGlzIG1ldGhvZCBkaXJlY3RseSBidXQgdXNlIGluaXRJbmRleCgpIGZ1bmN0aW9uXG4qL1xuZnVuY3Rpb24gSW5kZXhDb3JlKGFsZ29saWFzZWFyY2gsIGluZGV4TmFtZSkge1xuICB0aGlzLmluZGV4TmFtZSA9IGluZGV4TmFtZTtcbiAgdGhpcy5hcyA9IGFsZ29saWFzZWFyY2g7XG4gIHRoaXMudHlwZUFoZWFkQXJncyA9IG51bGw7XG4gIHRoaXMudHlwZUFoZWFkVmFsdWVPcHRpb24gPSBudWxsO1xuXG4gIC8vIG1ha2Ugc3VyZSBldmVyeSBpbmRleCBpbnN0YW5jZSBoYXMgaXQncyBvd24gY2FjaGVcbiAgdGhpcy5jYWNoZSA9IHt9O1xufVxuXG4vKlxuKiBDbGVhciBhbGwgcXVlcmllcyBpbiBjYWNoZVxuKi9cbkluZGV4Q29yZS5wcm90b3R5cGUuY2xlYXJDYWNoZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNhY2hlID0ge307XG59O1xuXG4vKlxuKiBTZWFyY2ggaW5zaWRlIHRoZSBpbmRleCB1c2luZyBYTUxIdHRwUmVxdWVzdCByZXF1ZXN0IChVc2luZyBhIFBPU1QgcXVlcnkgdG9cbiogbWluaW1pemUgbnVtYmVyIG9mIE9QVElPTlMgcXVlcmllczogQ3Jvc3MtT3JpZ2luIFJlc291cmNlIFNoYXJpbmcpLlxuKlxuKiBAcGFyYW0ge3N0cmluZ30gW3F1ZXJ5XSB0aGUgZnVsbCB0ZXh0IHF1ZXJ5XG4qIEBwYXJhbSB7b2JqZWN0fSBbYXJnc10gKG9wdGlvbmFsKSBpZiBzZXQsIGNvbnRhaW5zIGFuIG9iamVjdCB3aXRoIHF1ZXJ5IHBhcmFtZXRlcnM6XG4qIC0gcGFnZTogKGludGVnZXIpIFBhZ2luYXRpb24gcGFyYW1ldGVyIHVzZWQgdG8gc2VsZWN0IHRoZSBwYWdlIHRvIHJldHJpZXZlLlxuKiAgICAgICAgICAgICAgICAgICBQYWdlIGlzIHplcm8tYmFzZWQgYW5kIGRlZmF1bHRzIHRvIDAuIFRodXMsXG4qICAgICAgICAgICAgICAgICAgIHRvIHJldHJpZXZlIHRoZSAxMHRoIHBhZ2UgeW91IG5lZWQgdG8gc2V0IHBhZ2U9OVxuKiAtIGhpdHNQZXJQYWdlOiAoaW50ZWdlcikgUGFnaW5hdGlvbiBwYXJhbWV0ZXIgdXNlZCB0byBzZWxlY3QgdGhlIG51bWJlciBvZiBoaXRzIHBlciBwYWdlLiBEZWZhdWx0cyB0byAyMC5cbiogLSBhdHRyaWJ1dGVzVG9SZXRyaWV2ZTogYSBzdHJpbmcgdGhhdCBjb250YWlucyB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlc1xuKiB5b3Ugd2FudCB0byByZXRyaWV2ZSAobGV0IHlvdSBtaW5pbWl6ZSB0aGUgYW5zd2VyIHNpemUpLlxuKiAgIEF0dHJpYnV0ZXMgYXJlIHNlcGFyYXRlZCB3aXRoIGEgY29tbWEgKGZvciBleGFtcGxlIFwibmFtZSxhZGRyZXNzXCIpLlxuKiAgIFlvdSBjYW4gYWxzbyB1c2UgYW4gYXJyYXkgKGZvciBleGFtcGxlIFtcIm5hbWVcIixcImFkZHJlc3NcIl0pLlxuKiAgIEJ5IGRlZmF1bHQsIGFsbCBhdHRyaWJ1dGVzIGFyZSByZXRyaWV2ZWQuIFlvdSBjYW4gYWxzbyB1c2UgJyonIHRvIHJldHJpZXZlIGFsbFxuKiAgIHZhbHVlcyB3aGVuIGFuIGF0dHJpYnV0ZXNUb1JldHJpZXZlIHNldHRpbmcgaXMgc3BlY2lmaWVkIGZvciB5b3VyIGluZGV4LlxuKiAtIGF0dHJpYnV0ZXNUb0hpZ2hsaWdodDogYSBzdHJpbmcgdGhhdCBjb250YWlucyB0aGUgbGlzdCBvZiBhdHRyaWJ1dGVzIHlvdVxuKiAgIHdhbnQgdG8gaGlnaGxpZ2h0IGFjY29yZGluZyB0byB0aGUgcXVlcnkuXG4qICAgQXR0cmlidXRlcyBhcmUgc2VwYXJhdGVkIGJ5IGEgY29tbWEuIFlvdSBjYW4gYWxzbyB1c2UgYW4gYXJyYXkgKGZvciBleGFtcGxlIFtcIm5hbWVcIixcImFkZHJlc3NcIl0pLlxuKiAgIElmIGFuIGF0dHJpYnV0ZSBoYXMgbm8gbWF0Y2ggZm9yIHRoZSBxdWVyeSwgdGhlIHJhdyB2YWx1ZSBpcyByZXR1cm5lZC5cbiogICBCeSBkZWZhdWx0IGFsbCBpbmRleGVkIHRleHQgYXR0cmlidXRlcyBhcmUgaGlnaGxpZ2h0ZWQuXG4qICAgWW91IGNhbiB1c2UgYCpgIGlmIHlvdSB3YW50IHRvIGhpZ2hsaWdodCBhbGwgdGV4dHVhbCBhdHRyaWJ1dGVzLlxuKiAgIE51bWVyaWNhbCBhdHRyaWJ1dGVzIGFyZSBub3QgaGlnaGxpZ2h0ZWQuXG4qICAgQSBtYXRjaExldmVsIGlzIHJldHVybmVkIGZvciBlYWNoIGhpZ2hsaWdodGVkIGF0dHJpYnV0ZSBhbmQgY2FuIGNvbnRhaW46XG4qICAgICAgLSBmdWxsOiBpZiBhbGwgdGhlIHF1ZXJ5IHRlcm1zIHdlcmUgZm91bmQgaW4gdGhlIGF0dHJpYnV0ZSxcbiogICAgICAtIHBhcnRpYWw6IGlmIG9ubHkgc29tZSBvZiB0aGUgcXVlcnkgdGVybXMgd2VyZSBmb3VuZCxcbiogICAgICAtIG5vbmU6IGlmIG5vbmUgb2YgdGhlIHF1ZXJ5IHRlcm1zIHdlcmUgZm91bmQuXG4qIC0gYXR0cmlidXRlc1RvU25pcHBldDogYSBzdHJpbmcgdGhhdCBjb250YWlucyB0aGUgbGlzdCBvZiBhdHRyaWJ1dGVzIHRvIHNuaXBwZXQgYWxvbmdzaWRlXG4qIHRoZSBudW1iZXIgb2Ygd29yZHMgdG8gcmV0dXJuIChzeW50YXggaXMgYGF0dHJpYnV0ZU5hbWU6bmJXb3Jkc2ApLlxuKiAgICBBdHRyaWJ1dGVzIGFyZSBzZXBhcmF0ZWQgYnkgYSBjb21tYSAoRXhhbXBsZTogYXR0cmlidXRlc1RvU25pcHBldD1uYW1lOjEwLGNvbnRlbnQ6MTApLlxuKiAgICBZb3UgY2FuIGFsc28gdXNlIGFuIGFycmF5IChFeGFtcGxlOiBhdHRyaWJ1dGVzVG9TbmlwcGV0OiBbJ25hbWU6MTAnLCdjb250ZW50OjEwJ10pLlxuKiAgICBCeSBkZWZhdWx0IG5vIHNuaXBwZXQgaXMgY29tcHV0ZWQuXG4qIC0gbWluV29yZFNpemVmb3IxVHlwbzogdGhlIG1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gYSBxdWVyeSB3b3JkIHRvIGFjY2VwdCBvbmUgdHlwbyBpbiB0aGlzIHdvcmQuXG4qIERlZmF1bHRzIHRvIDMuXG4qIC0gbWluV29yZFNpemVmb3IyVHlwb3M6IHRoZSBtaW5pbXVtIG51bWJlciBvZiBjaGFyYWN0ZXJzIGluIGEgcXVlcnkgd29yZFxuKiB0byBhY2NlcHQgdHdvIHR5cG9zIGluIHRoaXMgd29yZC4gRGVmYXVsdHMgdG8gNy5cbiogLSBnZXRSYW5raW5nSW5mbzogaWYgc2V0IHRvIDEsIHRoZSByZXN1bHQgaGl0cyB3aWxsIGNvbnRhaW4gcmFua2luZ1xuKiBpbmZvcm1hdGlvbiBpbiBfcmFua2luZ0luZm8gYXR0cmlidXRlLlxuKiAtIGFyb3VuZExhdExuZzogc2VhcmNoIGZvciBlbnRyaWVzIGFyb3VuZCBhIGdpdmVuXG4qIGxhdGl0dWRlL2xvbmdpdHVkZSAoc3BlY2lmaWVkIGFzIHR3byBmbG9hdHMgc2VwYXJhdGVkIGJ5IGEgY29tbWEpLlxuKiAgIEZvciBleGFtcGxlIGFyb3VuZExhdExuZz00Ny4zMTY2NjksNS4wMTY2NzApLlxuKiAgIFlvdSBjYW4gc3BlY2lmeSB0aGUgbWF4aW11bSBkaXN0YW5jZSBpbiBtZXRlcnMgd2l0aCB0aGUgYXJvdW5kUmFkaXVzIHBhcmFtZXRlciAoaW4gbWV0ZXJzKVxuKiAgIGFuZCB0aGUgcHJlY2lzaW9uIGZvciByYW5raW5nIHdpdGggYXJvdW5kUHJlY2lzaW9uXG4qICAgKGZvciBleGFtcGxlIGlmIHlvdSBzZXQgYXJvdW5kUHJlY2lzaW9uPTEwMCwgdHdvIG9iamVjdHMgdGhhdCBhcmUgZGlzdGFudCBvZlxuKiAgIGxlc3MgdGhhbiAxMDBtIHdpbGwgYmUgY29uc2lkZXJlZCBhcyBpZGVudGljYWwgZm9yIFwiZ2VvXCIgcmFua2luZyBwYXJhbWV0ZXIpLlxuKiAgIEF0IGluZGV4aW5nLCB5b3Ugc2hvdWxkIHNwZWNpZnkgZ2VvbG9jIG9mIGFuIG9iamVjdCB3aXRoIHRoZSBfZ2VvbG9jIGF0dHJpYnV0ZVxuKiAgIChpbiB0aGUgZm9ybSB7XCJfZ2VvbG9jXCI6e1wibGF0XCI6NDguODUzNDA5LCBcImxuZ1wiOjIuMzQ4ODAwfX0pXG4qIC0gaW5zaWRlQm91bmRpbmdCb3g6IHNlYXJjaCBlbnRyaWVzIGluc2lkZSBhIGdpdmVuIGFyZWEgZGVmaW5lZCBieSB0aGUgdHdvIGV4dHJlbWUgcG9pbnRzXG4qIG9mIGEgcmVjdGFuZ2xlIChkZWZpbmVkIGJ5IDQgZmxvYXRzOiBwMUxhdCxwMUxuZyxwMkxhdCxwMkxuZykuXG4qICAgRm9yIGV4YW1wbGUgaW5zaWRlQm91bmRpbmdCb3g9NDcuMzE2NSw0Ljk2NjUsNDcuMzQyNCw1LjAyMDEpLlxuKiAgIEF0IGluZGV4aW5nLCB5b3Ugc2hvdWxkIHNwZWNpZnkgZ2VvbG9jIG9mIGFuIG9iamVjdCB3aXRoIHRoZSBfZ2VvbG9jIGF0dHJpYnV0ZVxuKiAgIChpbiB0aGUgZm9ybSB7XCJfZ2VvbG9jXCI6e1wibGF0XCI6NDguODUzNDA5LCBcImxuZ1wiOjIuMzQ4ODAwfX0pXG4qIC0gbnVtZXJpY0ZpbHRlcnM6IGEgc3RyaW5nIHRoYXQgY29udGFpbnMgdGhlIGxpc3Qgb2YgbnVtZXJpYyBmaWx0ZXJzIHlvdSB3YW50IHRvXG4qIGFwcGx5IHNlcGFyYXRlZCBieSBhIGNvbW1hLlxuKiAgIFRoZSBzeW50YXggb2Ygb25lIGZpbHRlciBpcyBgYXR0cmlidXRlTmFtZWAgZm9sbG93ZWQgYnkgYG9wZXJhbmRgIGZvbGxvd2VkIGJ5IGB2YWx1ZWAuXG4qICAgU3VwcG9ydGVkIG9wZXJhbmRzIGFyZSBgPGAsIGA8PWAsIGA9YCwgYD5gIGFuZCBgPj1gLlxuKiAgIFlvdSBjYW4gaGF2ZSBtdWx0aXBsZSBjb25kaXRpb25zIG9uIG9uZSBhdHRyaWJ1dGUgbGlrZSBmb3IgZXhhbXBsZSBudW1lcmljRmlsdGVycz1wcmljZT4xMDAscHJpY2U8MTAwMC5cbiogICBZb3UgY2FuIGFsc28gdXNlIGFuIGFycmF5IChmb3IgZXhhbXBsZSBudW1lcmljRmlsdGVyczogW1wicHJpY2U+MTAwXCIsXCJwcmljZTwxMDAwXCJdKS5cbiogLSB0YWdGaWx0ZXJzOiBmaWx0ZXIgdGhlIHF1ZXJ5IGJ5IGEgc2V0IG9mIHRhZ3MuIFlvdSBjYW4gQU5EIHRhZ3MgYnkgc2VwYXJhdGluZyB0aGVtIGJ5IGNvbW1hcy5cbiogICBUbyBPUiB0YWdzLCB5b3UgbXVzdCBhZGQgcGFyZW50aGVzZXMuIEZvciBleGFtcGxlLCB0YWdzPXRhZzEsKHRhZzIsdGFnMykgbWVhbnMgdGFnMSBBTkQgKHRhZzIgT1IgdGFnMykuXG4qICAgWW91IGNhbiBhbHNvIHVzZSBhbiBhcnJheSwgZm9yIGV4YW1wbGUgdGFnRmlsdGVyczogW1widGFnMVwiLFtcInRhZzJcIixcInRhZzNcIl1dXG4qICAgbWVhbnMgdGFnMSBBTkQgKHRhZzIgT1IgdGFnMykuXG4qICAgQXQgaW5kZXhpbmcsIHRhZ3Mgc2hvdWxkIGJlIGFkZGVkIGluIHRoZSBfdGFncyoqIGF0dHJpYnV0ZVxuKiAgIG9mIG9iamVjdHMgKGZvciBleGFtcGxlIHtcIl90YWdzXCI6W1widGFnMVwiLFwidGFnMlwiXX0pLlxuKiAtIGZhY2V0RmlsdGVyczogZmlsdGVyIHRoZSBxdWVyeSBieSBhIGxpc3Qgb2YgZmFjZXRzLlxuKiAgIEZhY2V0cyBhcmUgc2VwYXJhdGVkIGJ5IGNvbW1hcyBhbmQgZWFjaCBmYWNldCBpcyBlbmNvZGVkIGFzIGBhdHRyaWJ1dGVOYW1lOnZhbHVlYC5cbiogICBGb3IgZXhhbXBsZTogYGZhY2V0RmlsdGVycz1jYXRlZ29yeTpCb29rLGF1dGhvcjpKb2huJTIwRG9lYC5cbiogICBZb3UgY2FuIGFsc28gdXNlIGFuIGFycmF5IChmb3IgZXhhbXBsZSBgW1wiY2F0ZWdvcnk6Qm9va1wiLFwiYXV0aG9yOkpvaG4lMjBEb2VcIl1gKS5cbiogLSBmYWNldHM6IExpc3Qgb2Ygb2JqZWN0IGF0dHJpYnV0ZXMgdGhhdCB5b3Ugd2FudCB0byB1c2UgZm9yIGZhY2V0aW5nLlxuKiAgIENvbW1hIHNlcGFyYXRlZCBsaXN0OiBgXCJjYXRlZ29yeSxhdXRob3JcImAgb3IgYXJyYXkgYFsnY2F0ZWdvcnknLCdhdXRob3InXWBcbiogICBPbmx5IGF0dHJpYnV0ZXMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgaW4gKiphdHRyaWJ1dGVzRm9yRmFjZXRpbmcqKiBpbmRleCBzZXR0aW5nXG4qICAgY2FuIGJlIHVzZWQgaW4gdGhpcyBwYXJhbWV0ZXIuXG4qICAgWW91IGNhbiBhbHNvIHVzZSBgKmAgdG8gcGVyZm9ybSBmYWNldGluZyBvbiBhbGwgYXR0cmlidXRlcyBzcGVjaWZpZWQgaW4gKiphdHRyaWJ1dGVzRm9yRmFjZXRpbmcqKi5cbiogLSBxdWVyeVR5cGU6IHNlbGVjdCBob3cgdGhlIHF1ZXJ5IHdvcmRzIGFyZSBpbnRlcnByZXRlZCwgaXQgY2FuIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlOlxuKiAgICAtIHByZWZpeEFsbDogYWxsIHF1ZXJ5IHdvcmRzIGFyZSBpbnRlcnByZXRlZCBhcyBwcmVmaXhlcyxcbiogICAgLSBwcmVmaXhMYXN0OiBvbmx5IHRoZSBsYXN0IHdvcmQgaXMgaW50ZXJwcmV0ZWQgYXMgYSBwcmVmaXggKGRlZmF1bHQgYmVoYXZpb3IpLFxuKiAgICAtIHByZWZpeE5vbmU6IG5vIHF1ZXJ5IHdvcmQgaXMgaW50ZXJwcmV0ZWQgYXMgYSBwcmVmaXguIFRoaXMgb3B0aW9uIGlzIG5vdCByZWNvbW1lbmRlZC5cbiogLSBvcHRpb25hbFdvcmRzOiBhIHN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSBsaXN0IG9mIHdvcmRzIHRoYXQgc2hvdWxkXG4qIGJlIGNvbnNpZGVyZWQgYXMgb3B0aW9uYWwgd2hlbiBmb3VuZCBpbiB0aGUgcXVlcnkuXG4qICAgQ29tbWEgc2VwYXJhdGVkIGFuZCBhcnJheSBhcmUgYWNjZXB0ZWQuXG4qIC0gZGlzdGluY3Q6IElmIHNldCB0byAxLCBlbmFibGUgdGhlIGRpc3RpbmN0IGZlYXR1cmUgKGRpc2FibGVkIGJ5IGRlZmF1bHQpXG4qIGlmIHRoZSBhdHRyaWJ1dGVGb3JEaXN0aW5jdCBpbmRleCBzZXR0aW5nIGlzIHNldC5cbiogICBUaGlzIGZlYXR1cmUgaXMgc2ltaWxhciB0byB0aGUgU1FMIFwiZGlzdGluY3RcIiBrZXl3b3JkOiB3aGVuIGVuYWJsZWRcbiogICBpbiBhIHF1ZXJ5IHdpdGggdGhlIGRpc3RpbmN0PTEgcGFyYW1ldGVyLFxuKiAgIGFsbCBoaXRzIGNvbnRhaW5pbmcgYSBkdXBsaWNhdGUgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGVGb3JEaXN0aW5jdCBhdHRyaWJ1dGUgYXJlIHJlbW92ZWQgZnJvbSByZXN1bHRzLlxuKiAgIEZvciBleGFtcGxlLCBpZiB0aGUgY2hvc2VuIGF0dHJpYnV0ZSBpcyBzaG93X25hbWUgYW5kIHNldmVyYWwgaGl0cyBoYXZlXG4qICAgdGhlIHNhbWUgdmFsdWUgZm9yIHNob3dfbmFtZSwgdGhlbiBvbmx5IHRoZSBiZXN0XG4qICAgb25lIGlzIGtlcHQgYW5kIG90aGVycyBhcmUgcmVtb3ZlZC5cbiogLSByZXN0cmljdFNlYXJjaGFibGVBdHRyaWJ1dGVzOiBMaXN0IG9mIGF0dHJpYnV0ZXMgeW91IHdhbnQgdG8gdXNlIGZvclxuKiB0ZXh0dWFsIHNlYXJjaCAobXVzdCBiZSBhIHN1YnNldCBvZiB0aGUgYXR0cmlidXRlc1RvSW5kZXggaW5kZXggc2V0dGluZylcbiogZWl0aGVyIGNvbW1hIHNlcGFyYXRlZCBvciBhcyBhbiBhcnJheVxuKiBAcGFyYW0ge2Z1bmN0aW9ufSBbY2FsbGJhY2tdIHRoZSByZXN1bHQgY2FsbGJhY2sgY2FsbGVkIHdpdGggdHdvIGFyZ3VtZW50czpcbiogIGVycm9yOiBudWxsIG9yIEVycm9yKCdtZXNzYWdlJykuIElmIGZhbHNlLCB0aGUgY29udGVudCBjb250YWlucyB0aGUgZXJyb3IuXG4qICBjb250ZW50OiB0aGUgc2VydmVyIGFuc3dlciB0aGF0IGNvbnRhaW5zIHRoZSBsaXN0IG9mIHJlc3VsdHMuXG4qL1xuSW5kZXhDb3JlLnByb3RvdHlwZS5zZWFyY2ggPSBidWlsZFNlYXJjaE1ldGhvZCgncXVlcnknKTtcblxuLypcbiogLS0gQkVUQSAtLVxuKiBTZWFyY2ggYSByZWNvcmQgc2ltaWxhciB0byB0aGUgcXVlcnkgaW5zaWRlIHRoZSBpbmRleCB1c2luZyBYTUxIdHRwUmVxdWVzdCByZXF1ZXN0IChVc2luZyBhIFBPU1QgcXVlcnkgdG9cbiogbWluaW1pemUgbnVtYmVyIG9mIE9QVElPTlMgcXVlcmllczogQ3Jvc3MtT3JpZ2luIFJlc291cmNlIFNoYXJpbmcpLlxuKlxuKiBAcGFyYW0ge3N0cmluZ30gW3F1ZXJ5XSB0aGUgc2ltaWxhciBxdWVyeVxuKiBAcGFyYW0ge29iamVjdH0gW2FyZ3NdIChvcHRpb25hbCkgaWYgc2V0LCBjb250YWlucyBhbiBvYmplY3Qgd2l0aCBxdWVyeSBwYXJhbWV0ZXJzLlxuKiAgIEFsbCBzZWFyY2ggcGFyYW1ldGVycyBhcmUgc3VwcG9ydGVkIChzZWUgc2VhcmNoIGZ1bmN0aW9uKSwgcmVzdHJpY3RTZWFyY2hhYmxlQXR0cmlidXRlcyBhbmQgZmFjZXRGaWx0ZXJzXG4qICAgYXJlIHRoZSB0d28gbW9zdCB1c2VmdWwgdG8gcmVzdHJpY3QgdGhlIHNpbWlsYXIgcmVzdWx0cyBhbmQgZ2V0IG1vcmUgcmVsZXZhbnQgY29udGVudFxuKi9cbkluZGV4Q29yZS5wcm90b3R5cGUuc2ltaWxhclNlYXJjaCA9IGJ1aWxkU2VhcmNoTWV0aG9kKCdzaW1pbGFyUXVlcnknKTtcblxuLypcbiogQnJvd3NlIGluZGV4IGNvbnRlbnQuIFRoZSByZXNwb25zZSBjb250ZW50IHdpbGwgaGF2ZSBhIGBjdXJzb3JgIHByb3BlcnR5IHRoYXQgeW91IGNhbiB1c2VcbiogdG8gYnJvd3NlIHN1YnNlcXVlbnQgcGFnZXMgZm9yIHRoaXMgcXVlcnkuIFVzZSBgaW5kZXguYnJvd3NlRnJvbShjdXJzb3IpYCB3aGVuIHlvdSB3YW50LlxuKlxuKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgLSBUaGUgZnVsbCB0ZXh0IHF1ZXJ5XG4qIEBwYXJhbSB7T2JqZWN0fSBbcXVlcnlQYXJhbWV0ZXJzXSAtIEFueSBzZWFyY2ggcXVlcnkgcGFyYW1ldGVyXG4qIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBUaGUgcmVzdWx0IGNhbGxiYWNrIGNhbGxlZCB3aXRoIHR3byBhcmd1bWVudHNcbiogICBlcnJvcjogbnVsbCBvciBFcnJvcignbWVzc2FnZScpXG4qICAgY29udGVudDogdGhlIHNlcnZlciBhbnN3ZXIgd2l0aCB0aGUgYnJvd3NlIHJlc3VsdFxuKiBAcmV0dXJuIHtQcm9taXNlfHVuZGVmaW5lZH0gUmV0dXJucyBhIHByb21pc2UgaWYgbm8gY2FsbGJhY2sgZ2l2ZW5cbiogQGV4YW1wbGVcbiogaW5kZXguYnJvd3NlKCdjb29sIHNvbmdzJywge1xuKiAgIHRhZ0ZpbHRlcnM6ICdwdWJsaWMsY29tbWVudHMnLFxuKiAgIGhpdHNQZXJQYWdlOiA1MDBcbiogfSwgY2FsbGJhY2spO1xuKiBAc2VlIHtAbGluayBodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvcmVzdF9hcGkjQnJvd3NlfEFsZ29saWEgUkVTVCBBUEkgRG9jdW1lbnRhdGlvbn1cbiovXG5JbmRleENvcmUucHJvdG90eXBlLmJyb3dzZSA9IGZ1bmN0aW9uKHF1ZXJ5LCBxdWVyeVBhcmFtZXRlcnMsIGNhbGxiYWNrKSB7XG4gIHZhciBtZXJnZSA9IHJlcXVpcmUoJy4vbWVyZ2UuanMnKTtcblxuICB2YXIgaW5kZXhPYmogPSB0aGlzO1xuXG4gIHZhciBwYWdlO1xuICB2YXIgaGl0c1BlclBhZ2U7XG5cbiAgLy8gd2UgY2hlY2sgdmFyaWFkaWMgY2FsbHMgdGhhdCBhcmUgbm90IHRoZSBvbmUgZGVmaW5lZFxuICAvLyAuYnJvd3NlKCkvLmJyb3dzZShmbilcbiAgLy8gPT4gcGFnZSA9IDBcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcGFnZSA9IDA7XG4gICAgY2FsbGJhY2sgPSBhcmd1bWVudHNbMF07XG4gICAgcXVlcnkgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ251bWJlcicpIHtcbiAgICAvLyAuYnJvd3NlKDIpLy5icm93c2UoMiwgMTApLy5icm93c2UoMiwgZm4pLy5icm93c2UoMiwgMTAsIGZuKVxuICAgIHBhZ2UgPSBhcmd1bWVudHNbMF07XG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdudW1iZXInKSB7XG4gICAgICBoaXRzUGVyUGFnZSA9IGFyZ3VtZW50c1sxXTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdO1xuICAgICAgaGl0c1BlclBhZ2UgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHF1ZXJ5ID0gdW5kZWZpbmVkO1xuICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnb2JqZWN0Jykge1xuICAgIC8vIC5icm93c2UocXVlcnlQYXJhbWV0ZXJzKS8uYnJvd3NlKHF1ZXJ5UGFyYW1ldGVycywgY2IpXG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdO1xuICAgIH1cbiAgICBxdWVyeVBhcmFtZXRlcnMgPSBhcmd1bWVudHNbMF07XG4gICAgcXVlcnkgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIC5icm93c2UocXVlcnksIGNiKVxuICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdO1xuICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIG90aGVyd2lzZSBpdCdzIGEgLmJyb3dzZShxdWVyeSkvLmJyb3dzZShxdWVyeSwgcXVlcnlQYXJhbWV0ZXJzKS8uYnJvd3NlKHF1ZXJ5LCBxdWVyeVBhcmFtZXRlcnMsIGNiKVxuXG4gIC8vIGdldCBzZWFyY2ggcXVlcnkgcGFyYW1ldGVycyBjb21iaW5pbmcgdmFyaW91cyBwb3NzaWJsZSBjYWxsc1xuICAvLyB0byAuYnJvd3NlKCk7XG4gIHF1ZXJ5UGFyYW1ldGVycyA9IG1lcmdlKHt9LCBxdWVyeVBhcmFtZXRlcnMgfHwge30sIHtcbiAgICBwYWdlOiBwYWdlLFxuICAgIGhpdHNQZXJQYWdlOiBoaXRzUGVyUGFnZSxcbiAgICBxdWVyeTogcXVlcnlcbiAgfSk7XG5cbiAgdmFyIHBhcmFtcyA9IHRoaXMuYXMuX2dldFNlYXJjaFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsICcnKTtcblxuICByZXR1cm4gdGhpcy5hcy5fanNvblJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJy8xL2luZGV4ZXMvJyArIGVuY29kZVVSSUNvbXBvbmVudChpbmRleE9iai5pbmRleE5hbWUpICsgJy9icm93c2UnLFxuICAgIGJvZHk6IHtwYXJhbXM6IHBhcmFtc30sXG4gICAgaG9zdFR5cGU6ICdyZWFkJyxcbiAgICBjYWxsYmFjazogY2FsbGJhY2tcbiAgfSk7XG59O1xuXG4vKlxuKiBDb250aW51ZSBicm93c2luZyBmcm9tIGEgcHJldmlvdXMgcG9zaXRpb24gKGN1cnNvciksIG9idGFpbmVkIHZpYSBhIGNhbGwgdG8gYC5icm93c2UoKWAuXG4qXG4qIEBwYXJhbSB7c3RyaW5nfSBxdWVyeSAtIFRoZSBmdWxsIHRleHQgcXVlcnlcbiogQHBhcmFtIHtPYmplY3R9IFtxdWVyeVBhcmFtZXRlcnNdIC0gQW55IHNlYXJjaCBxdWVyeSBwYXJhbWV0ZXJcbiogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIFRoZSByZXN1bHQgY2FsbGJhY2sgY2FsbGVkIHdpdGggdHdvIGFyZ3VtZW50c1xuKiAgIGVycm9yOiBudWxsIG9yIEVycm9yKCdtZXNzYWdlJylcbiogICBjb250ZW50OiB0aGUgc2VydmVyIGFuc3dlciB3aXRoIHRoZSBicm93c2UgcmVzdWx0XG4qIEByZXR1cm4ge1Byb21pc2V8dW5kZWZpbmVkfSBSZXR1cm5zIGEgcHJvbWlzZSBpZiBubyBjYWxsYmFjayBnaXZlblxuKiBAZXhhbXBsZVxuKiBpbmRleC5icm93c2VGcm9tKCcxNGxrZnNha2wzMicsIGNhbGxiYWNrKTtcbiogQHNlZSB7QGxpbmsgaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20vZG9jL3Jlc3RfYXBpI0Jyb3dzZXxBbGdvbGlhIFJFU1QgQVBJIERvY3VtZW50YXRpb259XG4qL1xuSW5kZXhDb3JlLnByb3RvdHlwZS5icm93c2VGcm9tID0gZnVuY3Rpb24oY3Vyc29yLCBjYWxsYmFjaykge1xuICByZXR1cm4gdGhpcy5hcy5fanNvblJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJy8xL2luZGV4ZXMvJyArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmluZGV4TmFtZSkgKyAnL2Jyb3dzZScsXG4gICAgYm9keToge2N1cnNvcjogY3Vyc29yfSxcbiAgICBob3N0VHlwZTogJ3JlYWQnLFxuICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICB9KTtcbn07XG5cbi8qXG4qIFNlYXJjaCBmb3IgZmFjZXQgdmFsdWVzXG4qIGh0dHBzOi8vd3d3LmFsZ29saWEuY29tL2RvYy9yZXN0LWFwaS9zZWFyY2gjc2VhcmNoLWZvci1mYWNldC12YWx1ZXNcbipcbiogQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy5mYWNldE5hbWUgRmFjZXQgbmFtZSwgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHRvIHNlYXJjaCBmb3IgdmFsdWVzIGluLlxuKiBNdXN0IGJlIGRlY2xhcmVkIGFzIGEgZmFjZXRcbiogQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy5mYWNldFF1ZXJ5IFF1ZXJ5IGZvciB0aGUgZmFjZXQgc2VhcmNoXG4qIEBwYXJhbSB7c3RyaW5nfSBbcGFyYW1zLipdIEFueSBzZWFyY2ggcGFyYW1ldGVyIG9mIEFsZ29saWEsXG4qIHNlZSBodHRwczovL3d3dy5hbGdvbGlhLmNvbS9kb2MvYXBpLWNsaWVudC9qYXZhc2NyaXB0L3NlYXJjaCNzZWFyY2gtcGFyYW1ldGVyc1xuKiBQYWdpbmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQuIFRoZSBwYWdlIGFuZCBoaXRzUGVyUGFnZSBwYXJhbWV0ZXJzIHdpbGwgYmUgaWdub3JlZC5cbiogQHBhcmFtIGNhbGxiYWNrIChvcHRpb25hbClcbiovXG5JbmRleENvcmUucHJvdG90eXBlLnNlYXJjaEZvckZhY2V0VmFsdWVzID0gZnVuY3Rpb24ocGFyYW1zLCBjYWxsYmFjaykge1xuICB2YXIgY2xvbmUgPSByZXF1aXJlKCcuL2Nsb25lLmpzJyk7XG4gIHZhciBvbWl0ID0gcmVxdWlyZSgnLi9vbWl0LmpzJyk7XG4gIHZhciB1c2FnZSA9ICdVc2FnZTogaW5kZXguc2VhcmNoRm9yRmFjZXRWYWx1ZXMoe2ZhY2V0TmFtZSwgZmFjZXRRdWVyeSwgLi4ucGFyYW1zfVssIGNhbGxiYWNrXSknO1xuXG4gIGlmIChwYXJhbXMuZmFjZXROYW1lID09PSB1bmRlZmluZWQgfHwgcGFyYW1zLmZhY2V0UXVlcnkgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcih1c2FnZSk7XG4gIH1cblxuICB2YXIgZmFjZXROYW1lID0gcGFyYW1zLmZhY2V0TmFtZTtcbiAgdmFyIGZpbHRlcmVkUGFyYW1zID0gb21pdChjbG9uZShwYXJhbXMpLCBmdW5jdGlvbihrZXlOYW1lKSB7XG4gICAgcmV0dXJuIGtleU5hbWUgPT09ICdmYWNldE5hbWUnO1xuICB9KTtcbiAgdmFyIHNlYXJjaFBhcmFtZXRlcnMgPSB0aGlzLmFzLl9nZXRTZWFyY2hQYXJhbXMoZmlsdGVyZWRQYXJhbXMsICcnKTtcblxuICByZXR1cm4gdGhpcy5hcy5fanNvblJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJy8xL2luZGV4ZXMvJyArXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQodGhpcy5pbmRleE5hbWUpICsgJy9mYWNldHMvJyArIGVuY29kZVVSSUNvbXBvbmVudChmYWNldE5hbWUpICsgJy9xdWVyeScsXG4gICAgaG9zdFR5cGU6ICdyZWFkJyxcbiAgICBib2R5OiB7cGFyYW1zOiBzZWFyY2hQYXJhbWV0ZXJzfSxcbiAgICBjYWxsYmFjazogY2FsbGJhY2tcbiAgfSk7XG59O1xuXG5JbmRleENvcmUucHJvdG90eXBlLnNlYXJjaEZhY2V0ID0gZGVwcmVjYXRlKGZ1bmN0aW9uKHBhcmFtcywgY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuc2VhcmNoRm9yRmFjZXRWYWx1ZXMocGFyYW1zLCBjYWxsYmFjayk7XG59LCBkZXByZWNhdGVkTWVzc2FnZShcbiAgJ2luZGV4LnNlYXJjaEZhY2V0KHBhcmFtc1ssIGNhbGxiYWNrXSknLFxuICAnaW5kZXguc2VhcmNoRm9yRmFjZXRWYWx1ZXMocGFyYW1zWywgY2FsbGJhY2tdKSdcbikpO1xuXG5JbmRleENvcmUucHJvdG90eXBlLl9zZWFyY2ggPSBmdW5jdGlvbihwYXJhbXMsIHVybCwgY2FsbGJhY2ssIGFkZGl0aW9uYWxVQSkge1xuICByZXR1cm4gdGhpcy5hcy5fanNvblJlcXVlc3Qoe1xuICAgIGNhY2hlOiB0aGlzLmNhY2hlLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogdXJsIHx8ICcvMS9pbmRleGVzLycgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5pbmRleE5hbWUpICsgJy9xdWVyeScsXG4gICAgYm9keToge3BhcmFtczogcGFyYW1zfSxcbiAgICBob3N0VHlwZTogJ3JlYWQnLFxuICAgIGZhbGxiYWNrOiB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsOiAnLzEvaW5kZXhlcy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuaW5kZXhOYW1lKSxcbiAgICAgIGJvZHk6IHtwYXJhbXM6IHBhcmFtc31cbiAgICB9LFxuICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICBhZGRpdGlvbmFsVUE6IGFkZGl0aW9uYWxVQVxuICB9KTtcbn07XG5cbi8qXG4qIEdldCBhbiBvYmplY3QgZnJvbSB0aGlzIGluZGV4XG4qXG4qIEBwYXJhbSBvYmplY3RJRCB0aGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIG9iamVjdCB0byByZXRyaWV2ZVxuKiBAcGFyYW0gYXR0cnMgKG9wdGlvbmFsKSBpZiBzZXQsIGNvbnRhaW5zIHRoZSBhcnJheSBvZiBhdHRyaWJ1dGUgbmFtZXMgdG8gcmV0cmlldmVcbiogQHBhcmFtIGNhbGxiYWNrIChvcHRpb25hbCkgdGhlIHJlc3VsdCBjYWxsYmFjayBjYWxsZWQgd2l0aCB0d28gYXJndW1lbnRzXG4qICBlcnJvcjogbnVsbCBvciBFcnJvcignbWVzc2FnZScpXG4qICBjb250ZW50OiB0aGUgb2JqZWN0IHRvIHJldHJpZXZlIG9yIHRoZSBlcnJvciBtZXNzYWdlIGlmIGEgZmFpbHVyZSBvY2N1cmVkXG4qL1xuSW5kZXhDb3JlLnByb3RvdHlwZS5nZXRPYmplY3QgPSBmdW5jdGlvbihvYmplY3RJRCwgYXR0cnMsIGNhbGxiYWNrKSB7XG4gIHZhciBpbmRleE9iaiA9IHRoaXM7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgfHwgdHlwZW9mIGF0dHJzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBhdHRycztcbiAgICBhdHRycyA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciBwYXJhbXMgPSAnJztcbiAgaWYgKGF0dHJzICE9PSB1bmRlZmluZWQpIHtcbiAgICBwYXJhbXMgPSAnP2F0dHJpYnV0ZXM9JztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICBwYXJhbXMgKz0gJywnO1xuICAgICAgfVxuICAgICAgcGFyYW1zICs9IGF0dHJzW2ldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzLmFzLl9qc29uUmVxdWVzdCh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICcvMS9pbmRleGVzLycgKyBlbmNvZGVVUklDb21wb25lbnQoaW5kZXhPYmouaW5kZXhOYW1lKSArICcvJyArIGVuY29kZVVSSUNvbXBvbmVudChvYmplY3RJRCkgKyBwYXJhbXMsXG4gICAgaG9zdFR5cGU6ICdyZWFkJyxcbiAgICBjYWxsYmFjazogY2FsbGJhY2tcbiAgfSk7XG59O1xuXG4vKlxuKiBHZXQgc2V2ZXJhbCBvYmplY3RzIGZyb20gdGhpcyBpbmRleFxuKlxuKiBAcGFyYW0gb2JqZWN0SURzIHRoZSBhcnJheSBvZiB1bmlxdWUgaWRlbnRpZmllciBvZiBvYmplY3RzIHRvIHJldHJpZXZlXG4qL1xuSW5kZXhDb3JlLnByb3RvdHlwZS5nZXRPYmplY3RzID0gZnVuY3Rpb24ob2JqZWN0SURzLCBhdHRyaWJ1dGVzVG9SZXRyaWV2ZSwgY2FsbGJhY2spIHtcbiAgdmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7XG4gIHZhciBtYXAgPSByZXF1aXJlKCcuL21hcC5qcycpO1xuXG4gIHZhciB1c2FnZSA9ICdVc2FnZTogaW5kZXguZ2V0T2JqZWN0cyhhcnJheU9mT2JqZWN0SURzWywgY2FsbGJhY2tdKSc7XG5cbiAgaWYgKCFpc0FycmF5KG9iamVjdElEcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IodXNhZ2UpO1xuICB9XG5cbiAgdmFyIGluZGV4T2JqID0gdGhpcztcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSB8fCB0eXBlb2YgYXR0cmlidXRlc1RvUmV0cmlldmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IGF0dHJpYnV0ZXNUb1JldHJpZXZlO1xuICAgIGF0dHJpYnV0ZXNUb1JldHJpZXZlID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgdmFyIGJvZHkgPSB7XG4gICAgcmVxdWVzdHM6IG1hcChvYmplY3RJRHMsIGZ1bmN0aW9uIHByZXBhcmVSZXF1ZXN0KG9iamVjdElEKSB7XG4gICAgICB2YXIgcmVxdWVzdCA9IHtcbiAgICAgICAgaW5kZXhOYW1lOiBpbmRleE9iai5pbmRleE5hbWUsXG4gICAgICAgIG9iamVjdElEOiBvYmplY3RJRFxuICAgICAgfTtcblxuICAgICAgaWYgKGF0dHJpYnV0ZXNUb1JldHJpZXZlKSB7XG4gICAgICAgIHJlcXVlc3QuYXR0cmlidXRlc1RvUmV0cmlldmUgPSBhdHRyaWJ1dGVzVG9SZXRyaWV2ZS5qb2luKCcsJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXF1ZXN0O1xuICAgIH0pXG4gIH07XG5cbiAgcmV0dXJuIHRoaXMuYXMuX2pzb25SZXF1ZXN0KHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICB1cmw6ICcvMS9pbmRleGVzLyovb2JqZWN0cycsXG4gICAgaG9zdFR5cGU6ICdyZWFkJyxcbiAgICBib2R5OiBib2R5LFxuICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICB9KTtcbn07XG5cbkluZGV4Q29yZS5wcm90b3R5cGUuYXMgPSBudWxsO1xuSW5kZXhDb3JlLnByb3RvdHlwZS5pbmRleE5hbWUgPSBudWxsO1xuSW5kZXhDb3JlLnByb3RvdHlwZS50eXBlQWhlYWRBcmdzID0gbnVsbDtcbkluZGV4Q29yZS5wcm90b3R5cGUudHlwZUFoZWFkVmFsdWVPcHRpb24gPSBudWxsO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FsZ29saWFzZWFyY2gvc3JjL0luZGV4Q29yZS5qc1xuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQWxnb2xpYVNlYXJjaENvcmUgPSByZXF1aXJlKCcuLi8uLi9BbGdvbGlhU2VhcmNoQ29yZS5qcycpO1xudmFyIGNyZWF0ZUFsZ29saWFzZWFyY2ggPSByZXF1aXJlKCcuLi9jcmVhdGVBbGdvbGlhc2VhcmNoLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQWxnb2xpYXNlYXJjaChBbGdvbGlhU2VhcmNoQ29yZSwgJyhsaXRlKSAnKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9hbGdvbGlhc2VhcmNoL3NyYy9icm93c2VyL2J1aWxkcy9hbGdvbGlhc2VhcmNoTGl0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnZ2xvYmFsJyk7XG52YXIgUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlIHx8IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcblxuLy8gVGhpcyBpcyB0aGUgc3RhbmRhbG9uZSBicm93c2VyIGJ1aWxkIGVudHJ5IHBvaW50XG4vLyBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIHRoZSBBbGdvbGlhIFNlYXJjaCBKYXZhU2NyaXB0IGNsaWVudCxcbi8vIHVzaW5nIFhNTEh0dHBSZXF1ZXN0LCBYRG9tYWluUmVxdWVzdCBhbmQgSlNPTlAgYXMgZmFsbGJhY2tcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlQWxnb2xpYXNlYXJjaChBbGdvbGlhU2VhcmNoLCB1YVN1ZmZpeCkge1xuICB2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuICB2YXIgZXJyb3JzID0gcmVxdWlyZSgnLi4vZXJyb3JzJyk7XG4gIHZhciBpbmxpbmVIZWFkZXJzID0gcmVxdWlyZSgnLi9pbmxpbmUtaGVhZGVycycpO1xuICB2YXIganNvbnBSZXF1ZXN0ID0gcmVxdWlyZSgnLi9qc29ucC1yZXF1ZXN0Jyk7XG4gIHZhciBwbGFjZXMgPSByZXF1aXJlKCcuLi9wbGFjZXMuanMnKTtcbiAgdWFTdWZmaXggPSB1YVN1ZmZpeCB8fCAnJztcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZWJ1ZycpIHtcbiAgICByZXF1aXJlKCdkZWJ1ZycpLmVuYWJsZSgnYWxnb2xpYXNlYXJjaConKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFsZ29saWFzZWFyY2goYXBwbGljYXRpb25JRCwgYXBpS2V5LCBvcHRzKSB7XG4gICAgdmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJy4uL2Nsb25lLmpzJyk7XG5cbiAgICB2YXIgZ2V0RG9jdW1lbnRQcm90b2NvbCA9IHJlcXVpcmUoJy4vZ2V0LWRvY3VtZW50LXByb3RvY29sJyk7XG5cbiAgICBvcHRzID0gY2xvbmVEZWVwKG9wdHMgfHwge30pO1xuXG4gICAgaWYgKG9wdHMucHJvdG9jb2wgPT09IHVuZGVmaW5lZCkge1xuICAgICAgb3B0cy5wcm90b2NvbCA9IGdldERvY3VtZW50UHJvdG9jb2woKTtcbiAgICB9XG5cbiAgICBvcHRzLl91YSA9IG9wdHMuX3VhIHx8IGFsZ29saWFzZWFyY2gudWE7XG5cbiAgICByZXR1cm4gbmV3IEFsZ29saWFTZWFyY2hCcm93c2VyKGFwcGxpY2F0aW9uSUQsIGFwaUtleSwgb3B0cyk7XG4gIH1cblxuICBhbGdvbGlhc2VhcmNoLnZlcnNpb24gPSByZXF1aXJlKCcuLi92ZXJzaW9uLmpzJyk7XG4gIGFsZ29saWFzZWFyY2gudWEgPSAnQWxnb2xpYSBmb3IgdmFuaWxsYSBKYXZhU2NyaXB0ICcgKyB1YVN1ZmZpeCArIGFsZ29saWFzZWFyY2gudmVyc2lvbjtcbiAgYWxnb2xpYXNlYXJjaC5pbml0UGxhY2VzID0gcGxhY2VzKGFsZ29saWFzZWFyY2gpO1xuXG4gIC8vIHdlIGV4cG9zZSBpbnRvIHdpbmRvdyBubyBtYXR0ZXIgaG93IHdlIGFyZSB1c2VkLCB0aGlzIHdpbGwgYWxsb3dcbiAgLy8gdXMgdG8gZWFzaWx5IGRlYnVnIGFueSB3ZWJzaXRlIHJ1bm5pbmcgYWxnb2xpYVxuICBnbG9iYWwuX19hbGdvbGlhID0ge1xuICAgIGRlYnVnOiByZXF1aXJlKCdkZWJ1ZycpLFxuICAgIGFsZ29saWFzZWFyY2g6IGFsZ29saWFzZWFyY2hcbiAgfTtcblxuICB2YXIgc3VwcG9ydCA9IHtcbiAgICBoYXNYTUxIdHRwUmVxdWVzdDogJ1hNTEh0dHBSZXF1ZXN0JyBpbiBnbG9iYWwsXG4gICAgaGFzWERvbWFpblJlcXVlc3Q6ICdYRG9tYWluUmVxdWVzdCcgaW4gZ2xvYmFsXG4gIH07XG5cbiAgaWYgKHN1cHBvcnQuaGFzWE1MSHR0cFJlcXVlc3QpIHtcbiAgICBzdXBwb3J0LmNvcnMgPSAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEFsZ29saWFTZWFyY2hCcm93c2VyKCkge1xuICAgIC8vIGNhbGwgQWxnb2xpYVNlYXJjaCBjb25zdHJ1Y3RvclxuICAgIEFsZ29saWFTZWFyY2guYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGluaGVyaXRzKEFsZ29saWFTZWFyY2hCcm93c2VyLCBBbGdvbGlhU2VhcmNoKTtcblxuICBBbGdvbGlhU2VhcmNoQnJvd3Nlci5wcm90b3R5cGUuX3JlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KHVybCwgb3B0cykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiB3cmFwUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIC8vIG5vIGNvcnMgb3IgWERvbWFpblJlcXVlc3QsIG5vIHJlcXVlc3RcbiAgICAgIGlmICghc3VwcG9ydC5jb3JzICYmICFzdXBwb3J0Lmhhc1hEb21haW5SZXF1ZXN0KSB7XG4gICAgICAgIC8vIHZlcnkgb2xkIGJyb3dzZXIsIG5vdCBzdXBwb3J0ZWRcbiAgICAgICAgcmVqZWN0KG5ldyBlcnJvcnMuTmV0d29yaygnQ09SUyBub3Qgc3VwcG9ydGVkJykpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVybCA9IGlubGluZUhlYWRlcnModXJsLCBvcHRzLmhlYWRlcnMpO1xuXG4gICAgICB2YXIgYm9keSA9IG9wdHMuYm9keTtcbiAgICAgIHZhciByZXEgPSBzdXBwb3J0LmNvcnMgPyBuZXcgWE1MSHR0cFJlcXVlc3QoKSA6IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xuICAgICAgdmFyIHJlcVRpbWVvdXQ7XG4gICAgICB2YXIgdGltZWRPdXQ7XG4gICAgICB2YXIgY29ubmVjdGVkID0gZmFsc2U7XG5cbiAgICAgIHJlcVRpbWVvdXQgPSBzZXRUaW1lb3V0KG9uVGltZW91dCwgb3B0cy50aW1lb3V0cy5jb25uZWN0KTtcbiAgICAgIC8vIHdlIHNldCBhbiBlbXB0eSBvbnByb2dyZXNzIGxpc3RlbmVyXG4gICAgICAvLyBzbyB0aGF0IFhEb21haW5SZXF1ZXN0IG9uIElFOSBpcyBub3QgYWJvcnRlZFxuICAgICAgLy8gcmVmczpcbiAgICAgIC8vICAtIGh0dHBzOi8vZ2l0aHViLmNvbS9hbGdvbGlhL2FsZ29saWFzZWFyY2gtY2xpZW50LWpzL2lzc3Vlcy83NlxuICAgICAgLy8gIC0gaHR0cHM6Ly9zb2NpYWwubXNkbi5taWNyb3NvZnQuY29tL0ZvcnVtcy9pZS9lbi1VUy8zMGVmM2FkZC03NjdjLTQ0MzYtYjhhOS1mMWNhMTliNDgxMmUvaWU5LXJ0bS14ZG9tYWlucmVxdWVzdC1pc3N1ZWQtcmVxdWVzdHMtbWF5LWFib3J0LWlmLWFsbC1ldmVudC1oYW5kbGVycy1ub3Qtc3BlY2lmaWVkP2ZvcnVtPWlld2ViZGV2ZWxvcG1lbnRcbiAgICAgIHJlcS5vbnByb2dyZXNzID0gb25Qcm9ncmVzcztcbiAgICAgIGlmICgnb25yZWFkeXN0YXRlY2hhbmdlJyBpbiByZXEpIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBvblJlYWR5U3RhdGVDaGFuZ2U7XG4gICAgICByZXEub25sb2FkID0gb25Mb2FkO1xuICAgICAgcmVxLm9uZXJyb3IgPSBvbkVycm9yO1xuXG4gICAgICAvLyBkbyBub3QgcmVseSBvbiBkZWZhdWx0IFhIUiBhc3luYyBmbGFnLCBhcyBzb21lIGFuYWx5dGljcyBjb2RlIGxpa2UgaG90amFyXG4gICAgICAvLyBicmVha3MgaXQgYW5kIHNldCBpdCB0byBmYWxzZSBieSBkZWZhdWx0XG4gICAgICBpZiAocmVxIGluc3RhbmNlb2YgWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgcmVxLm9wZW4ob3B0cy5tZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXEub3BlbihvcHRzLm1ldGhvZCwgdXJsKTtcbiAgICAgIH1cblxuICAgICAgLy8gaGVhZGVycyBhcmUgbWVhbnQgdG8gYmUgc2VudCBhZnRlciBvcGVuXG4gICAgICBpZiAoc3VwcG9ydC5jb3JzKSB7XG4gICAgICAgIGlmIChib2R5KSB7XG4gICAgICAgICAgaWYgKG9wdHMubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvQWNjZXNzX2NvbnRyb2xfQ09SUyNTaW1wbGVfcmVxdWVzdHNcbiAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignYWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIH1cblxuICAgICAgcmVxLnNlbmQoYm9keSk7XG5cbiAgICAgIC8vIGV2ZW50IG9iamVjdCBub3QgcmVjZWl2ZWQgaW4gSUU4LCBhdCBsZWFzdFxuICAgICAgLy8gYnV0IHdlIGRvIG5vdCB1c2UgaXQsIHN0aWxsIGltcG9ydGFudCB0byBub3RlXG4gICAgICBmdW5jdGlvbiBvbkxvYWQoLyogZXZlbnQgKi8pIHtcbiAgICAgICAgLy8gV2hlbiBicm93c2VyIGRvZXMgbm90IHN1cHBvcnRzIHJlcS50aW1lb3V0LCB3ZSBjYW5cbiAgICAgICAgLy8gaGF2ZSBib3RoIGEgbG9hZCBhbmQgdGltZW91dCBldmVudCwgc2luY2UgaGFuZGxlZCBieSBhIGR1bWIgc2V0VGltZW91dFxuICAgICAgICBpZiAodGltZWRPdXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhclRpbWVvdXQocmVxVGltZW91dCk7XG5cbiAgICAgICAgdmFyIG91dDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIG91dCA9IHtcbiAgICAgICAgICAgIGJvZHk6IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlVGV4dCksXG4gICAgICAgICAgICByZXNwb25zZVRleHQ6IHJlcS5yZXNwb25zZVRleHQsXG4gICAgICAgICAgICBzdGF0dXNDb2RlOiByZXEuc3RhdHVzLFxuICAgICAgICAgICAgLy8gWERvbWFpblJlcXVlc3QgZG9lcyBub3QgaGF2ZSBhbnkgcmVzcG9uc2UgaGVhZGVyc1xuICAgICAgICAgICAgaGVhZGVyczogcmVxLmdldEFsbFJlc3BvbnNlSGVhZGVycyAmJiByZXEuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkgfHwge31cbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgb3V0ID0gbmV3IGVycm9ycy5VbnBhcnNhYmxlSlNPTih7XG4gICAgICAgICAgICBtb3JlOiByZXEucmVzcG9uc2VUZXh0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3V0IGluc3RhbmNlb2YgZXJyb3JzLlVucGFyc2FibGVKU09OKSB7XG4gICAgICAgICAgcmVqZWN0KG91dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShvdXQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRpbWVkT3V0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHJlcVRpbWVvdXQpO1xuXG4gICAgICAgIC8vIGVycm9yIGV2ZW50IGlzIHRyaWdlcnJlZCBib3RoIHdpdGggWERSL1hIUiBvbjpcbiAgICAgICAgLy8gICAtIEROUyBlcnJvclxuICAgICAgICAvLyAgIC0gdW5hbGxvd2VkIGNyb3NzIGRvbWFpbiByZXF1ZXN0XG4gICAgICAgIHJlamVjdChcbiAgICAgICAgICBuZXcgZXJyb3JzLk5ldHdvcmsoe1xuICAgICAgICAgICAgbW9yZTogZXZlbnRcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICAgIHRpbWVkT3V0ID0gdHJ1ZTtcbiAgICAgICAgcmVxLmFib3J0KCk7XG5cbiAgICAgICAgcmVqZWN0KG5ldyBlcnJvcnMuUmVxdWVzdFRpbWVvdXQoKSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uQ29ubmVjdCgpIHtcbiAgICAgICAgY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHJlcVRpbWVvdXQpO1xuICAgICAgICByZXFUaW1lb3V0ID0gc2V0VGltZW91dChvblRpbWVvdXQsIG9wdHMudGltZW91dHMuY29tcGxldGUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvblByb2dyZXNzKCkge1xuICAgICAgICBpZiAoIWNvbm5lY3RlZCkgb25Db25uZWN0KCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uUmVhZHlTdGF0ZUNoYW5nZSgpIHtcbiAgICAgICAgaWYgKCFjb25uZWN0ZWQgJiYgcmVxLnJlYWR5U3RhdGUgPiAxKSBvbkNvbm5lY3QoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBBbGdvbGlhU2VhcmNoQnJvd3Nlci5wcm90b3R5cGUuX3JlcXVlc3QuZmFsbGJhY2sgPSBmdW5jdGlvbiByZXF1ZXN0RmFsbGJhY2sodXJsLCBvcHRzKSB7XG4gICAgdXJsID0gaW5saW5lSGVhZGVycyh1cmwsIG9wdHMuaGVhZGVycyk7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gd3JhcEpzb25wUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGpzb25wUmVxdWVzdCh1cmwsIG9wdHMsIGZ1bmN0aW9uIGpzb25wUmVxdWVzdERvbmUoZXJyLCBjb250ZW50KSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKGNvbnRlbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgQWxnb2xpYVNlYXJjaEJyb3dzZXIucHJvdG90eXBlLl9wcm9taXNlID0ge1xuICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0UHJvbWlzZSh2YWwpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh2YWwpO1xuICAgIH0sXG4gICAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbCk7XG4gICAgfSxcbiAgICBkZWxheTogZnVuY3Rpb24gZGVsYXlQcm9taXNlKG1zKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gcmVzb2x2ZU9uVGltZW91dChyZXNvbHZlLyogLCByZWplY3QqLykge1xuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gYWxnb2xpYXNlYXJjaDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYWxnb2xpYXNlYXJjaC9zcmMvYnJvd3Nlci9jcmVhdGVBbGdvbGlhc2VhcmNoLmpzXG4vLyBtb2R1bGUgaWQgPSAzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0RG9jdW1lbnRQcm90b2NvbDtcblxuZnVuY3Rpb24gZ2V0RG9jdW1lbnRQcm90b2NvbCgpIHtcbiAgdmFyIHByb3RvY29sID0gd2luZG93LmRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sO1xuXG4gIC8vIHdoZW4gaW4gYGZpbGU6YCBtb2RlIChsb2NhbCBodG1sIGZpbGUpLCBkZWZhdWx0IHRvIGBodHRwOmBcbiAgaWYgKHByb3RvY29sICE9PSAnaHR0cDonICYmIHByb3RvY29sICE9PSAnaHR0cHM6Jykge1xuICAgIHByb3RvY29sID0gJ2h0dHA6JztcbiAgfVxuXG4gIHJldHVybiBwcm90b2NvbDtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9hbGdvbGlhc2VhcmNoL3NyYy9icm93c2VyL2dldC1kb2N1bWVudC1wcm90b2NvbC5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlubGluZUhlYWRlcnM7XG5cbnZhciBlbmNvZGUgPSByZXF1aXJlKCdxdWVyeXN0cmluZy1lczMvZW5jb2RlJyk7XG5cbmZ1bmN0aW9uIGlubGluZUhlYWRlcnModXJsLCBoZWFkZXJzKSB7XG4gIGlmICgvXFw/Ly50ZXN0KHVybCkpIHtcbiAgICB1cmwgKz0gJyYnO1xuICB9IGVsc2Uge1xuICAgIHVybCArPSAnPyc7XG4gIH1cblxuICByZXR1cm4gdXJsICsgZW5jb2RlKGhlYWRlcnMpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FsZ29saWFzZWFyY2gvc3JjL2Jyb3dzZXIvaW5saW5lLWhlYWRlcnMuanNcbi8vIG1vZHVsZSBpZCA9IDMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBqc29ucFJlcXVlc3Q7XG5cbnZhciBlcnJvcnMgPSByZXF1aXJlKCcuLi9lcnJvcnMnKTtcblxudmFyIEpTT05QQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGpzb25wUmVxdWVzdCh1cmwsIG9wdHMsIGNiKSB7XG4gIGlmIChvcHRzLm1ldGhvZCAhPT0gJ0dFVCcpIHtcbiAgICBjYihuZXcgRXJyb3IoJ01ldGhvZCAnICsgb3B0cy5tZXRob2QgKyAnICcgKyB1cmwgKyAnIGlzIG5vdCBzdXBwb3J0ZWQgYnkgSlNPTlAuJykpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG9wdHMuZGVidWcoJ0pTT05QOiBzdGFydCcpO1xuXG4gIHZhciBjYkNhbGxlZCA9IGZhbHNlO1xuICB2YXIgdGltZWRPdXQgPSBmYWxzZTtcblxuICBKU09OUENvdW50ZXIgKz0gMTtcbiAgdmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gIHZhciBjYk5hbWUgPSAnYWxnb2xpYUpTT05QXycgKyBKU09OUENvdW50ZXI7XG4gIHZhciBkb25lID0gZmFsc2U7XG5cbiAgd2luZG93W2NiTmFtZV0gPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgcmVtb3ZlR2xvYmFscygpO1xuXG4gICAgaWYgKHRpbWVkT3V0KSB7XG4gICAgICBvcHRzLmRlYnVnKCdKU09OUDogTGF0ZSBhbnN3ZXIsIGlnbm9yaW5nJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY2JDYWxsZWQgPSB0cnVlO1xuXG4gICAgY2xlYW4oKTtcblxuICAgIGNiKG51bGwsIHtcbiAgICAgIGJvZHk6IGRhdGEvKiAsXG4gICAgICAvLyBXZSBkbyBub3Qgc2VuZCB0aGUgc3RhdHVzQ29kZSwgdGhlcmUncyBubyBzdGF0dXNDb2RlIGluIEpTT05QLCBpdCB3aWxsIGJlXG4gICAgICAvLyBjb21wdXRlZCB1c2luZyBkYXRhLnN0YXR1cyAmJiBkYXRhLm1lc3NhZ2UgbGlrZSB3aXRoIFhEUlxuICAgICAgc3RhdHVzQ29kZSovXG4gICAgfSk7XG4gIH07XG5cbiAgLy8gYWRkIGNhbGxiYWNrIGJ5IGhhbmRcbiAgdXJsICs9ICcmY2FsbGJhY2s9JyArIGNiTmFtZTtcblxuICAvLyBhZGQgYm9keSBwYXJhbXMgbWFudWFsbHlcbiAgaWYgKG9wdHMuanNvbkJvZHkgJiYgb3B0cy5qc29uQm9keS5wYXJhbXMpIHtcbiAgICB1cmwgKz0gJyYnICsgb3B0cy5qc29uQm9keS5wYXJhbXM7XG4gIH1cblxuICB2YXIgb250aW1lb3V0ID0gc2V0VGltZW91dCh0aW1lb3V0LCBvcHRzLnRpbWVvdXRzLmNvbXBsZXRlKTtcblxuICAvLyBzY3JpcHQgb25yZWFkeXN0YXRlY2hhbmdlIG5lZWRlZCBvbmx5IGZvclxuICAvLyA8PSBJRThcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvNDUyM1xuICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gcmVhZHlzdGF0ZWNoYW5nZTtcbiAgc2NyaXB0Lm9ubG9hZCA9IHN1Y2Nlc3M7XG4gIHNjcmlwdC5vbmVycm9yID0gZXJyb3I7XG5cbiAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgc2NyaXB0LmRlZmVyID0gdHJ1ZTtcbiAgc2NyaXB0LnNyYyA9IHVybDtcbiAgaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXG4gIGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7XG4gICAgb3B0cy5kZWJ1ZygnSlNPTlA6IHN1Y2Nlc3MnKTtcblxuICAgIGlmIChkb25lIHx8IHRpbWVkT3V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZG9uZSA9IHRydWU7XG5cbiAgICAvLyBzY3JpcHQgbG9hZGVkIGJ1dCBkaWQgbm90IGNhbGwgdGhlIGZuID0+IHNjcmlwdCBsb2FkaW5nIGVycm9yXG4gICAgaWYgKCFjYkNhbGxlZCkge1xuICAgICAgb3B0cy5kZWJ1ZygnSlNPTlA6IEZhaWwuIFNjcmlwdCBsb2FkZWQgYnV0IGRpZCBub3QgY2FsbCB0aGUgY2FsbGJhY2snKTtcbiAgICAgIGNsZWFuKCk7XG4gICAgICBjYihuZXcgZXJyb3JzLkpTT05QU2NyaXB0RmFpbCgpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkeXN0YXRlY2hhbmdlKCkge1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09ICdsb2FkZWQnIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgc3VjY2VzcygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFuKCkge1xuICAgIGNsZWFyVGltZW91dChvbnRpbWVvdXQpO1xuICAgIHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgIHNjcmlwdC5vbmVycm9yID0gbnVsbDtcbiAgICBoZWFkLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVHbG9iYWxzKCkge1xuICAgIHRyeSB7XG4gICAgICBkZWxldGUgd2luZG93W2NiTmFtZV07XG4gICAgICBkZWxldGUgd2luZG93W2NiTmFtZSArICdfbG9hZGVkJ107XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgd2luZG93W2NiTmFtZV0gPSB3aW5kb3dbY2JOYW1lICsgJ19sb2FkZWQnXSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lb3V0KCkge1xuICAgIG9wdHMuZGVidWcoJ0pTT05QOiBTY3JpcHQgdGltZW91dCcpO1xuICAgIHRpbWVkT3V0ID0gdHJ1ZTtcbiAgICBjbGVhbigpO1xuICAgIGNiKG5ldyBlcnJvcnMuUmVxdWVzdFRpbWVvdXQoKSk7XG4gIH1cblxuICBmdW5jdGlvbiBlcnJvcigpIHtcbiAgICBvcHRzLmRlYnVnKCdKU09OUDogU2NyaXB0IGVycm9yJyk7XG5cbiAgICBpZiAoZG9uZSB8fCB0aW1lZE91dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNsZWFuKCk7XG4gICAgY2IobmV3IGVycm9ycy5KU09OUFNjcmlwdEVycm9yKCkpO1xuICB9XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYWxnb2xpYXNlYXJjaC9zcmMvYnJvd3Nlci9qc29ucC1yZXF1ZXN0LmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlcHJlY2F0ZShmbiwgbWVzc2FnZSkge1xuICB2YXIgd2FybmVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgLyogZXNsaW50IG5vLWNvbnNvbGU6MCAqL1xuICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIHJldHVybiBkZXByZWNhdGVkO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9hbGdvbGlhc2VhcmNoL3NyYy9kZXByZWNhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVwcmVjYXRlZE1lc3NhZ2UocHJldmlvdXNVc2FnZSwgbmV3VXNhZ2UpIHtcbiAgdmFyIGdpdGh1YkFuY2hvckxpbmsgPSBwcmV2aW91c1VzYWdlLnRvTG93ZXJDYXNlKClcbiAgICAucmVwbGFjZSgvW1xcLlxcKFxcKV0vZywgJycpO1xuXG4gIHJldHVybiAnYWxnb2xpYXNlYXJjaDogYCcgKyBwcmV2aW91c1VzYWdlICsgJ2Agd2FzIHJlcGxhY2VkIGJ5IGAnICsgbmV3VXNhZ2UgK1xuICAgICdgLiBQbGVhc2Ugc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbGdvbGlhL2FsZ29saWFzZWFyY2gtY2xpZW50LWphdmFzY3JpcHQvd2lraS9EZXByZWNhdGVkIycgKyBnaXRodWJBbmNob3JMaW5rO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9hbGdvbGlhc2VhcmNoL3NyYy9kZXByZWNhdGVkTWVzc2FnZS5qc1xuLy8gbW9kdWxlIGlkID0gMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gUGFyc2UgY2xvdWQgZG9lcyBub3Qgc3VwcG9ydHMgc2V0VGltZW91dFxuLy8gV2UgZG8gbm90IHN0b3JlIGEgc2V0VGltZW91dCByZWZlcmVuY2UgaW4gdGhlIGNsaWVudCBldmVyeXRpbWVcbi8vIFdlIG9ubHkgZmFsbGJhY2sgdG8gYSBmYWtlIHNldFRpbWVvdXQgd2hlbiBub3QgYXZhaWxhYmxlXG4vLyBzZXRUaW1lb3V0IGNhbm5vdCBiZSBvdmVycmlkZSBnbG9iYWxseSBzYWRseVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBleGl0UHJvbWlzZShmbiwgX3NldFRpbWVvdXQpIHtcbiAgX3NldFRpbWVvdXQoZm4sIDApO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9hbGdvbGlhc2VhcmNoL3NyYy9leGl0UHJvbWlzZS5qc1xuLy8gbW9kdWxlIGlkID0gMzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGZvcmVhY2ggPSByZXF1aXJlKCdmb3JlYWNoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWVyZ2UoZGVzdGluYXRpb24vKiAsIHNvdXJjZXMgKi8pIHtcbiAgdmFyIHNvdXJjZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gIGZvcmVhY2goc291cmNlcywgZnVuY3Rpb24oc291cmNlKSB7XG4gICAgZm9yICh2YXIga2V5TmFtZSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5TmFtZSkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbltrZXlOYW1lXSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHNvdXJjZVtrZXlOYW1lXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBkZXN0aW5hdGlvbltrZXlOYW1lXSA9IG1lcmdlKHt9LCBkZXN0aW5hdGlvbltrZXlOYW1lXSwgc291cmNlW2tleU5hbWVdKTtcbiAgICAgICAgfSBlbHNlIGlmIChzb3VyY2Vba2V5TmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGRlc3RpbmF0aW9uW2tleU5hbWVdID0gc291cmNlW2tleU5hbWVdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZGVzdGluYXRpb247XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FsZ29saWFzZWFyY2gvc3JjL21lcmdlLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG9taXQob2JqLCB0ZXN0KSB7XG4gIHZhciBrZXlzID0gcmVxdWlyZSgnb2JqZWN0LWtleXMnKTtcbiAgdmFyIGZvcmVhY2ggPSByZXF1aXJlKCdmb3JlYWNoJyk7XG5cbiAgdmFyIGZpbHRlcmVkID0ge307XG5cbiAgZm9yZWFjaChrZXlzKG9iaiksIGZ1bmN0aW9uIGRvRmlsdGVyKGtleU5hbWUpIHtcbiAgICBpZiAodGVzdChrZXlOYW1lKSAhPT0gdHJ1ZSkge1xuICAgICAgZmlsdGVyZWRba2V5TmFtZV0gPSBvYmpba2V5TmFtZV07XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZmlsdGVyZWQ7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FsZ29saWFzZWFyY2gvc3JjL29taXQuanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUGxhY2VzQ2xpZW50O1xuXG52YXIgYnVpbGRTZWFyY2hNZXRob2QgPSByZXF1aXJlKCcuL2J1aWxkU2VhcmNoTWV0aG9kLmpzJyk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVBsYWNlc0NsaWVudChhbGdvbGlhc2VhcmNoKSB7XG4gIHJldHVybiBmdW5jdGlvbiBwbGFjZXMoYXBwSUQsIGFwaUtleSwgb3B0cykge1xuICAgIHZhciBjbG9uZURlZXAgPSByZXF1aXJlKCcuL2Nsb25lLmpzJyk7XG5cbiAgICBvcHRzID0gb3B0cyAmJiBjbG9uZURlZXAob3B0cykgfHwge307XG4gICAgb3B0cy5ob3N0cyA9IG9wdHMuaG9zdHMgfHwgW1xuICAgICAgJ3BsYWNlcy1kc24uYWxnb2xpYS5uZXQnLFxuICAgICAgJ3BsYWNlcy0xLmFsZ29saWFuZXQuY29tJyxcbiAgICAgICdwbGFjZXMtMi5hbGdvbGlhbmV0LmNvbScsXG4gICAgICAncGxhY2VzLTMuYWxnb2xpYW5ldC5jb20nXG4gICAgXTtcblxuICAgIC8vIGFsbG93IGluaXRQbGFjZXMoKSBubyBhcmd1bWVudHMgPT4gY29tbXVuaXR5IHJhdGUgbGltaXRlZFxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwIHx8IHR5cGVvZiBhcHBJRCA9PT0gJ29iamVjdCcgfHwgYXBwSUQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgYXBwSUQgPSAnJztcbiAgICAgIGFwaUtleSA9ICcnO1xuICAgICAgb3B0cy5fYWxsb3dFbXB0eUNyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgY2xpZW50ID0gYWxnb2xpYXNlYXJjaChhcHBJRCwgYXBpS2V5LCBvcHRzKTtcbiAgICB2YXIgaW5kZXggPSBjbGllbnQuaW5pdEluZGV4KCdwbGFjZXMnKTtcbiAgICBpbmRleC5zZWFyY2ggPSBidWlsZFNlYXJjaE1ldGhvZCgncXVlcnknLCAnLzEvcGxhY2VzL3F1ZXJ5Jyk7XG4gICAgaW5kZXguZ2V0T2JqZWN0ID0gZnVuY3Rpb24ob2JqZWN0SUQsIGNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gdGhpcy5hcy5fanNvblJlcXVlc3Qoe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICB1cmw6ICcvMS9wbGFjZXMvJyArIGVuY29kZVVSSUNvbXBvbmVudChvYmplY3RJRCksXG4gICAgICAgIGhvc3RUeXBlOiAncmVhZCcsXG4gICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYWxnb2xpYXNlYXJjaC9zcmMvcGxhY2VzLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdhbGdvbGlhc2VhcmNoOnNyYy9ob3N0SW5kZXhTdGF0ZS5qcycpO1xudmFyIGxvY2FsU3RvcmFnZU5hbWVzcGFjZSA9ICdhbGdvbGlhc2VhcmNoLWNsaWVudC1qcyc7XG5cbnZhciBzdG9yZTtcbnZhciBtb2R1bGVTdG9yZSA9IHtcbiAgc3RhdGU6IHt9LFxuICBzZXQ6IGZ1bmN0aW9uKGtleSwgZGF0YSkge1xuICAgIHRoaXMuc3RhdGVba2V5XSA9IGRhdGE7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVba2V5XTtcbiAgfSxcbiAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZVtrZXldIHx8IG51bGw7XG4gIH1cbn07XG5cbnZhciBsb2NhbFN0b3JhZ2VTdG9yZSA9IHtcbiAgc2V0OiBmdW5jdGlvbihrZXksIGRhdGEpIHtcbiAgICBtb2R1bGVTdG9yZS5zZXQoa2V5LCBkYXRhKTsgLy8gYWx3YXlzIHJlcGxpY2F0ZSBsb2NhbFN0b3JhZ2VTdG9yZSB0byBtb2R1bGVTdG9yZSBpbiBjYXNlIG9mIGZhaWx1cmVcblxuICAgIHRyeSB7XG4gICAgICB2YXIgbmFtZXNwYWNlID0gSlNPTi5wYXJzZShnbG9iYWwubG9jYWxTdG9yYWdlW2xvY2FsU3RvcmFnZU5hbWVzcGFjZV0pO1xuICAgICAgbmFtZXNwYWNlW2tleV0gPSBkYXRhO1xuICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZVtsb2NhbFN0b3JhZ2VOYW1lc3BhY2VdID0gSlNPTi5zdHJpbmdpZnkobmFtZXNwYWNlKTtcbiAgICAgIHJldHVybiBuYW1lc3BhY2Vba2V5XTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gbG9jYWxTdG9yYWdlRmFpbHVyZShrZXksIGUpO1xuICAgIH1cbiAgfSxcbiAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZ2xvYmFsLmxvY2FsU3RvcmFnZVtsb2NhbFN0b3JhZ2VOYW1lc3BhY2VdKVtrZXldIHx8IG51bGw7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZUZhaWx1cmUoa2V5LCBlKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGxvY2FsU3RvcmFnZUZhaWx1cmUoa2V5LCBlKSB7XG4gIGRlYnVnKCdsb2NhbFN0b3JhZ2UgZmFpbGVkIHdpdGgnLCBlKTtcbiAgY2xlYW51cCgpO1xuICBzdG9yZSA9IG1vZHVsZVN0b3JlO1xuICByZXR1cm4gc3RvcmUuZ2V0KGtleSk7XG59XG5cbnN0b3JlID0gc3VwcG9ydHNMb2NhbFN0b3JhZ2UoKSA/IGxvY2FsU3RvcmFnZVN0b3JlIDogbW9kdWxlU3RvcmU7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXQ6IGdldE9yU2V0LFxuICBzZXQ6IGdldE9yU2V0LFxuICBzdXBwb3J0c0xvY2FsU3RvcmFnZTogc3VwcG9ydHNMb2NhbFN0b3JhZ2Vcbn07XG5cbmZ1bmN0aW9uIGdldE9yU2V0KGtleSwgZGF0YSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBzdG9yZS5nZXQoa2V5KTtcbiAgfVxuXG4gIHJldHVybiBzdG9yZS5zZXQoa2V5LCBkYXRhKTtcbn1cblxuZnVuY3Rpb24gc3VwcG9ydHNMb2NhbFN0b3JhZ2UoKSB7XG4gIHRyeSB7XG4gICAgaWYgKCdsb2NhbFN0b3JhZ2UnIGluIGdsb2JhbCAmJlxuICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZSAhPT0gbnVsbCkge1xuICAgICAgaWYgKCFnbG9iYWwubG9jYWxTdG9yYWdlW2xvY2FsU3RvcmFnZU5hbWVzcGFjZV0pIHtcbiAgICAgICAgLy8gYWN0dWFsIGNyZWF0aW9uIG9mIHRoZSBuYW1lc3BhY2VcbiAgICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKGxvY2FsU3RvcmFnZU5hbWVzcGFjZSwgSlNPTi5zdHJpbmdpZnkoe30pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSBjYXRjaCAoXykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBJbiBjYXNlIG9mIGFueSBlcnJvciBvbiBsb2NhbFN0b3JhZ2UsIHdlIGNsZWFuIG91ciBvd24gbmFtZXNwYWNlLCB0aGlzIHNob3VsZCBoYW5kbGVcbi8vIHF1b3RhIGVycm9ycyB3aGVuIGEgbG90IG9mIGtleXMgKyBkYXRhIGFyZSB1c2VkXG5mdW5jdGlvbiBjbGVhbnVwKCkge1xuICB0cnkge1xuICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShsb2NhbFN0b3JhZ2VOYW1lc3BhY2UpO1xuICB9IGNhdGNoIChfKSB7XG4gICAgLy8gbm90aGluZyB0byBkb1xuICB9XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYWxnb2xpYXNlYXJjaC9zcmMvc3RvcmUuanNcbi8vIG1vZHVsZSBpZCA9IDQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSAnMy4yNC4xMic7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYWxnb2xpYXNlYXJjaC9zcmMvdmVyc2lvbi5qc1xuLy8gbW9kdWxlIGlkID0gNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAyMDE3IEp1bGlhbiBHYXJuaWVyXG4gUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4qL1xudmFyICRqc2NvbXA9e3Njb3BlOnt9fTskanNjb21wLmRlZmluZVByb3BlcnR5PVwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHIscCl7aWYocC5nZXR8fHAuc2V0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJFUzMgZG9lcyBub3Qgc3VwcG9ydCBnZXR0ZXJzIGFuZCBzZXR0ZXJzLlwiKTtlIT1BcnJheS5wcm90b3R5cGUmJmUhPU9iamVjdC5wcm90b3R5cGUmJihlW3JdPXAudmFsdWUpfTskanNjb21wLmdldEdsb2JhbD1mdW5jdGlvbihlKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3c9PT1lP2U6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCYmbnVsbCE9Z2xvYmFsP2dsb2JhbDplfTskanNjb21wLmdsb2JhbD0kanNjb21wLmdldEdsb2JhbCh0aGlzKTskanNjb21wLlNZTUJPTF9QUkVGSVg9XCJqc2NvbXBfc3ltYm9sX1wiO1xuJGpzY29tcC5pbml0U3ltYm9sPWZ1bmN0aW9uKCl7JGpzY29tcC5pbml0U3ltYm9sPWZ1bmN0aW9uKCl7fTskanNjb21wLmdsb2JhbC5TeW1ib2x8fCgkanNjb21wLmdsb2JhbC5TeW1ib2w9JGpzY29tcC5TeW1ib2wpfTskanNjb21wLnN5bWJvbENvdW50ZXJfPTA7JGpzY29tcC5TeW1ib2w9ZnVuY3Rpb24oZSl7cmV0dXJuICRqc2NvbXAuU1lNQk9MX1BSRUZJWCsoZXx8XCJcIikrJGpzY29tcC5zeW1ib2xDb3VudGVyXysrfTtcbiRqc2NvbXAuaW5pdFN5bWJvbEl0ZXJhdG9yPWZ1bmN0aW9uKCl7JGpzY29tcC5pbml0U3ltYm9sKCk7dmFyIGU9JGpzY29tcC5nbG9iYWwuU3ltYm9sLml0ZXJhdG9yO2V8fChlPSRqc2NvbXAuZ2xvYmFsLlN5bWJvbC5pdGVyYXRvcj0kanNjb21wLmdsb2JhbC5TeW1ib2woXCJpdGVyYXRvclwiKSk7XCJmdW5jdGlvblwiIT10eXBlb2YgQXJyYXkucHJvdG90eXBlW2VdJiYkanNjb21wLmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSxlLHtjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gJGpzY29tcC5hcnJheUl0ZXJhdG9yKHRoaXMpfX0pOyRqc2NvbXAuaW5pdFN5bWJvbEl0ZXJhdG9yPWZ1bmN0aW9uKCl7fX07JGpzY29tcC5hcnJheUl0ZXJhdG9yPWZ1bmN0aW9uKGUpe3ZhciByPTA7cmV0dXJuICRqc2NvbXAuaXRlcmF0b3JQcm90b3R5cGUoZnVuY3Rpb24oKXtyZXR1cm4gcjxlLmxlbmd0aD97ZG9uZTohMSx2YWx1ZTplW3IrK119Ontkb25lOiEwfX0pfTtcbiRqc2NvbXAuaXRlcmF0b3JQcm90b3R5cGU9ZnVuY3Rpb24oZSl7JGpzY29tcC5pbml0U3ltYm9sSXRlcmF0b3IoKTtlPXtuZXh0OmV9O2VbJGpzY29tcC5nbG9iYWwuU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtyZXR1cm4gZX07JGpzY29tcC5hcnJheT0kanNjb21wLmFycmF5fHx7fTskanNjb21wLml0ZXJhdG9yRnJvbUFycmF5PWZ1bmN0aW9uKGUscil7JGpzY29tcC5pbml0U3ltYm9sSXRlcmF0b3IoKTtlIGluc3RhbmNlb2YgU3RyaW5nJiYoZSs9XCJcIik7dmFyIHA9MCxtPXtuZXh0OmZ1bmN0aW9uKCl7aWYocDxlLmxlbmd0aCl7dmFyIHU9cCsrO3JldHVybnt2YWx1ZTpyKHUsZVt1XSksZG9uZTohMX19bS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6ITAsdmFsdWU6dm9pZCAwfX07cmV0dXJuIG0ubmV4dCgpfX07bVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIG19O3JldHVybiBtfTtcbiRqc2NvbXAucG9seWZpbGw9ZnVuY3Rpb24oZSxyLHAsbSl7aWYocil7cD0kanNjb21wLmdsb2JhbDtlPWUuc3BsaXQoXCIuXCIpO2ZvcihtPTA7bTxlLmxlbmd0aC0xO20rKyl7dmFyIHU9ZVttXTt1IGluIHB8fChwW3VdPXt9KTtwPXBbdV19ZT1lW2UubGVuZ3RoLTFdO209cFtlXTtyPXIobSk7ciE9bSYmbnVsbCE9ciYmJGpzY29tcC5kZWZpbmVQcm9wZXJ0eShwLGUse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpyfSl9fTskanNjb21wLnBvbHlmaWxsKFwiQXJyYXkucHJvdG90eXBlLmtleXNcIixmdW5jdGlvbihlKXtyZXR1cm4gZT9lOmZ1bmN0aW9uKCl7cmV0dXJuICRqc2NvbXAuaXRlcmF0b3JGcm9tQXJyYXkodGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gZX0pfX0sXCJlczYtaW1wbFwiLFwiZXMzXCIpO3ZhciAkanNjb21wJHRoaXM9dGhpcztcbihmdW5jdGlvbihlLHIpe1wiZnVuY3Rpb25cIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLHIpOlwib2JqZWN0XCI9PT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1yKCk6ZS5hbmltZT1yKCl9KSh0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShhKXtpZighaC5jb2woYSkpdHJ5e3JldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGEpfWNhdGNoKGMpe319ZnVuY3Rpb24gcihhLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxiPTI8PWFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzFdOnZvaWQgMCxmPVtdLG49MDtuPGQ7bisrKWlmKG4gaW4gYSl7dmFyIGs9YVtuXTtjLmNhbGwoYixrLG4sYSkmJmYucHVzaChrKX1yZXR1cm4gZn1mdW5jdGlvbiBwKGEpe3JldHVybiBhLnJlZHVjZShmdW5jdGlvbihhLGQpe3JldHVybiBhLmNvbmNhdChoLmFycihkKT9wKGQpOmQpfSxbXSl9ZnVuY3Rpb24gbShhKXtpZihoLmFycihhKSlyZXR1cm4gYTtcbmguc3RyKGEpJiYoYT1lKGEpfHxhKTtyZXR1cm4gYSBpbnN0YW5jZW9mIE5vZGVMaXN0fHxhIGluc3RhbmNlb2YgSFRNTENvbGxlY3Rpb24/W10uc2xpY2UuY2FsbChhKTpbYV19ZnVuY3Rpb24gdShhLGMpe3JldHVybiBhLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1jfSl9ZnVuY3Rpb24gQyhhKXt2YXIgYz17fSxkO2ZvcihkIGluIGEpY1tkXT1hW2RdO3JldHVybiBjfWZ1bmN0aW9uIEQoYSxjKXt2YXIgZD1DKGEpLGI7Zm9yKGIgaW4gYSlkW2JdPWMuaGFzT3duUHJvcGVydHkoYik/Y1tiXTphW2JdO3JldHVybiBkfWZ1bmN0aW9uIHooYSxjKXt2YXIgZD1DKGEpLGI7Zm9yKGIgaW4gYylkW2JdPWgudW5kKGFbYl0pP2NbYl06YVtiXTtyZXR1cm4gZH1mdW5jdGlvbiBUKGEpe2E9YS5yZXBsYWNlKC9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2ksZnVuY3Rpb24oYSxjLGQsayl7cmV0dXJuIGMrYytkK2QraytrfSk7dmFyIGM9L14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGEpO1xuYT1wYXJzZUludChjWzFdLDE2KTt2YXIgZD1wYXJzZUludChjWzJdLDE2KSxjPXBhcnNlSW50KGNbM10sMTYpO3JldHVyblwicmdiYShcIithK1wiLFwiK2QrXCIsXCIrYytcIiwxKVwifWZ1bmN0aW9uIFUoYSl7ZnVuY3Rpb24gYyhhLGMsYil7MD5iJiYoYis9MSk7MTxiJiYtLWI7cmV0dXJuIGI8MS82P2ErNiooYy1hKSpiOi41PmI/YzpiPDIvMz9hKyhjLWEpKigyLzMtYikqNjphfXZhciBkPS9oc2xcXCgoXFxkKyksXFxzKihbXFxkLl0rKSUsXFxzKihbXFxkLl0rKSVcXCkvZy5leGVjKGEpfHwvaHNsYVxcKChcXGQrKSxcXHMqKFtcXGQuXSspJSxcXHMqKFtcXGQuXSspJSxcXHMqKFtcXGQuXSspXFwpL2cuZXhlYyhhKTthPXBhcnNlSW50KGRbMV0pLzM2MDt2YXIgYj1wYXJzZUludChkWzJdKS8xMDAsZj1wYXJzZUludChkWzNdKS8xMDAsZD1kWzRdfHwxO2lmKDA9PWIpZj1iPWE9ZjtlbHNle3ZhciBuPS41PmY/ZiooMStiKTpmK2ItZipiLGs9MipmLW4sZj1jKGssbixhKzEvMyksYj1jKGssbixhKTthPWMoayxuLGEtMS8zKX1yZXR1cm5cInJnYmEoXCIrXG4yNTUqZitcIixcIisyNTUqYitcIixcIisyNTUqYStcIixcIitkK1wiKVwifWZ1bmN0aW9uIHkoYSl7aWYoYT0vKFtcXCtcXC1dP1swLTkjXFwuXSspKCV8cHh8cHR8ZW18cmVtfGlufGNtfG1tfGV4fGNofHBjfHZ3fHZofHZtaW58dm1heHxkZWd8cmFkfHR1cm4pPyQvLmV4ZWMoYSkpcmV0dXJuIGFbMl19ZnVuY3Rpb24gVihhKXtpZigtMTxhLmluZGV4T2YoXCJ0cmFuc2xhdGVcIil8fFwicGVyc3BlY3RpdmVcIj09PWEpcmV0dXJuXCJweFwiO2lmKC0xPGEuaW5kZXhPZihcInJvdGF0ZVwiKXx8LTE8YS5pbmRleE9mKFwic2tld1wiKSlyZXR1cm5cImRlZ1wifWZ1bmN0aW9uIEkoYSxjKXtyZXR1cm4gaC5mbmMoYSk/YShjLnRhcmdldCxjLmlkLGMudG90YWwpOmF9ZnVuY3Rpb24gRShhLGMpe2lmKGMgaW4gYS5zdHlsZSlyZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZShhKS5nZXRQcm9wZXJ0eVZhbHVlKGMucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZyxcIiQxLSQyXCIpLnRvTG93ZXJDYXNlKCkpfHxcIjBcIn1mdW5jdGlvbiBKKGEsYyl7aWYoaC5kb20oYSkmJlxudShXLGMpKXJldHVyblwidHJhbnNmb3JtXCI7aWYoaC5kb20oYSkmJihhLmdldEF0dHJpYnV0ZShjKXx8aC5zdmcoYSkmJmFbY10pKXJldHVyblwiYXR0cmlidXRlXCI7aWYoaC5kb20oYSkmJlwidHJhbnNmb3JtXCIhPT1jJiZFKGEsYykpcmV0dXJuXCJjc3NcIjtpZihudWxsIT1hW2NdKXJldHVyblwib2JqZWN0XCJ9ZnVuY3Rpb24gWChhLGMpe3ZhciBkPVYoYyksZD0tMTxjLmluZGV4T2YoXCJzY2FsZVwiKT8xOjArZDthPWEuc3R5bGUudHJhbnNmb3JtO2lmKCFhKXJldHVybiBkO2Zvcih2YXIgYj1bXSxmPVtdLG49W10saz0vKFxcdyspXFwoKC4rPylcXCkvZztiPWsuZXhlYyhhKTspZi5wdXNoKGJbMV0pLG4ucHVzaChiWzJdKTthPXIobixmdW5jdGlvbihhLGIpe3JldHVybiBmW2JdPT09Y30pO3JldHVybiBhLmxlbmd0aD9hWzBdOmR9ZnVuY3Rpb24gSyhhLGMpe3N3aXRjaChKKGEsYykpe2Nhc2UgXCJ0cmFuc2Zvcm1cIjpyZXR1cm4gWChhLGMpO2Nhc2UgXCJjc3NcIjpyZXR1cm4gRShhLGMpO2Nhc2UgXCJhdHRyaWJ1dGVcIjpyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYyl9cmV0dXJuIGFbY118fFxuMH1mdW5jdGlvbiBMKGEsYyl7dmFyIGQ9L14oXFwqPXxcXCs9fC09KS8uZXhlYyhhKTtpZighZClyZXR1cm4gYTt2YXIgYj15KGEpfHwwO2M9cGFyc2VGbG9hdChjKTthPXBhcnNlRmxvYXQoYS5yZXBsYWNlKGRbMF0sXCJcIikpO3N3aXRjaChkWzBdWzBdKXtjYXNlIFwiK1wiOnJldHVybiBjK2ErYjtjYXNlIFwiLVwiOnJldHVybiBjLWErYjtjYXNlIFwiKlwiOnJldHVybiBjKmErYn19ZnVuY3Rpb24gRihhLGMpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYy54LWEueCwyKStNYXRoLnBvdyhjLnktYS55LDIpKX1mdW5jdGlvbiBNKGEpe2E9YS5wb2ludHM7Zm9yKHZhciBjPTAsZCxiPTA7YjxhLm51bWJlck9mSXRlbXM7YisrKXt2YXIgZj1hLmdldEl0ZW0oYik7MDxiJiYoYys9RihkLGYpKTtkPWZ9cmV0dXJuIGN9ZnVuY3Rpb24gTihhKXtpZihhLmdldFRvdGFsTGVuZ3RoKXJldHVybiBhLmdldFRvdGFsTGVuZ3RoKCk7c3dpdGNoKGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlIFwiY2lyY2xlXCI6cmV0dXJuIDIqXG5NYXRoLlBJKmEuZ2V0QXR0cmlidXRlKFwiclwiKTtjYXNlIFwicmVjdFwiOnJldHVybiAyKmEuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikrMiphLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKTtjYXNlIFwibGluZVwiOnJldHVybiBGKHt4OmEuZ2V0QXR0cmlidXRlKFwieDFcIikseTphLmdldEF0dHJpYnV0ZShcInkxXCIpfSx7eDphLmdldEF0dHJpYnV0ZShcIngyXCIpLHk6YS5nZXRBdHRyaWJ1dGUoXCJ5MlwiKX0pO2Nhc2UgXCJwb2x5bGluZVwiOnJldHVybiBNKGEpO2Nhc2UgXCJwb2x5Z29uXCI6dmFyIGM9YS5wb2ludHM7cmV0dXJuIE0oYSkrRihjLmdldEl0ZW0oYy5udW1iZXJPZkl0ZW1zLTEpLGMuZ2V0SXRlbSgwKSl9fWZ1bmN0aW9uIFkoYSxjKXtmdW5jdGlvbiBkKGIpe2I9dm9pZCAwPT09Yj8wOmI7cmV0dXJuIGEuZWwuZ2V0UG9pbnRBdExlbmd0aCgxPD1jK2I/YytiOjApfXZhciBiPWQoKSxmPWQoLTEpLG49ZCgxKTtzd2l0Y2goYS5wcm9wZXJ0eSl7Y2FzZSBcInhcIjpyZXR1cm4gYi54O2Nhc2UgXCJ5XCI6cmV0dXJuIGIueTtcbmNhc2UgXCJhbmdsZVwiOnJldHVybiAxODAqTWF0aC5hdGFuMihuLnktZi55LG4ueC1mLngpL01hdGguUEl9fWZ1bmN0aW9uIE8oYSxjKXt2YXIgZD0vLT9cXGQqXFwuP1xcZCsvZyxiO2I9aC5wdGgoYSk/YS50b3RhbExlbmd0aDphO2lmKGguY29sKGIpKWlmKGgucmdiKGIpKXt2YXIgZj0vcmdiXFwoKFxcZCssXFxzKltcXGRdKyxcXHMqW1xcZF0rKVxcKS9nLmV4ZWMoYik7Yj1mP1wicmdiYShcIitmWzFdK1wiLDEpXCI6Yn1lbHNlIGI9aC5oZXgoYik/VChiKTpoLmhzbChiKT9VKGIpOnZvaWQgMDtlbHNlIGY9KGY9eShiKSk/Yi5zdWJzdHIoMCxiLmxlbmd0aC1mLmxlbmd0aCk6YixiPWMmJiEvXFxzL2cudGVzdChiKT9mK2M6ZjtiKz1cIlwiO3JldHVybntvcmlnaW5hbDpiLG51bWJlcnM6Yi5tYXRjaChkKT9iLm1hdGNoKGQpLm1hcChOdW1iZXIpOlswXSxzdHJpbmdzOmguc3RyKGEpfHxjP2Iuc3BsaXQoZCk6W119fWZ1bmN0aW9uIFAoYSl7YT1hP3AoaC5hcnIoYSk/YS5tYXAobSk6bShhKSk6W107cmV0dXJuIHIoYSxcbmZ1bmN0aW9uKGEsZCxiKXtyZXR1cm4gYi5pbmRleE9mKGEpPT09ZH0pfWZ1bmN0aW9uIFooYSl7dmFyIGM9UChhKTtyZXR1cm4gYy5tYXAoZnVuY3Rpb24oYSxiKXtyZXR1cm57dGFyZ2V0OmEsaWQ6Yix0b3RhbDpjLmxlbmd0aH19KX1mdW5jdGlvbiBhYShhLGMpe3ZhciBkPUMoYyk7aWYoaC5hcnIoYSkpe3ZhciBiPWEubGVuZ3RoOzIhPT1ifHxoLm9iaihhWzBdKT9oLmZuYyhjLmR1cmF0aW9uKXx8KGQuZHVyYXRpb249Yy5kdXJhdGlvbi9iKTphPXt2YWx1ZTphfX1yZXR1cm4gbShhKS5tYXAoZnVuY3Rpb24oYSxiKXtiPWI/MDpjLmRlbGF5O2E9aC5vYmooYSkmJiFoLnB0aChhKT9hOnt2YWx1ZTphfTtoLnVuZChhLmRlbGF5KSYmKGEuZGVsYXk9Yik7cmV0dXJuIGF9KS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIHooYSxkKX0pfWZ1bmN0aW9uIGJhKGEsYyl7dmFyIGQ9e30sYjtmb3IoYiBpbiBhKXt2YXIgZj1JKGFbYl0sYyk7aC5hcnIoZikmJihmPWYubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBJKGEsXG5jKX0pLDE9PT1mLmxlbmd0aCYmKGY9ZlswXSkpO2RbYl09Zn1kLmR1cmF0aW9uPXBhcnNlRmxvYXQoZC5kdXJhdGlvbik7ZC5kZWxheT1wYXJzZUZsb2F0KGQuZGVsYXkpO3JldHVybiBkfWZ1bmN0aW9uIGNhKGEpe3JldHVybiBoLmFycihhKT9BLmFwcGx5KHRoaXMsYSk6UVthXX1mdW5jdGlvbiBkYShhLGMpe3ZhciBkO3JldHVybiBhLnR3ZWVucy5tYXAoZnVuY3Rpb24oYil7Yj1iYShiLGMpO3ZhciBmPWIudmFsdWUsZT1LKGMudGFyZ2V0LGEubmFtZSksaz1kP2QudG8ub3JpZ2luYWw6ZSxrPWguYXJyKGYpP2ZbMF06ayx3PUwoaC5hcnIoZik/ZlsxXTpmLGspLGU9eSh3KXx8eShrKXx8eShlKTtiLmZyb209TyhrLGUpO2IudG89Tyh3LGUpO2Iuc3RhcnQ9ZD9kLmVuZDphLm9mZnNldDtiLmVuZD1iLnN0YXJ0K2IuZGVsYXkrYi5kdXJhdGlvbjtiLmVhc2luZz1jYShiLmVhc2luZyk7Yi5lbGFzdGljaXR5PSgxRTMtTWF0aC5taW4oTWF0aC5tYXgoYi5lbGFzdGljaXR5LDEpLDk5OSkpL1xuMUUzO2IuaXNQYXRoPWgucHRoKGYpO2IuaXNDb2xvcj1oLmNvbChiLmZyb20ub3JpZ2luYWwpO2IuaXNDb2xvciYmKGIucm91bmQ9MSk7cmV0dXJuIGQ9Yn0pfWZ1bmN0aW9uIGVhKGEsYyl7cmV0dXJuIHIocChhLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYy5tYXAoZnVuY3Rpb24oYil7dmFyIGM9SihhLnRhcmdldCxiLm5hbWUpO2lmKGMpe3ZhciBkPWRhKGIsYSk7Yj17dHlwZTpjLHByb3BlcnR5OmIubmFtZSxhbmltYXRhYmxlOmEsdHdlZW5zOmQsZHVyYXRpb246ZFtkLmxlbmd0aC0xXS5lbmQsZGVsYXk6ZFswXS5kZWxheX19ZWxzZSBiPXZvaWQgMDtyZXR1cm4gYn0pfSkpLGZ1bmN0aW9uKGEpe3JldHVybiFoLnVuZChhKX0pfWZ1bmN0aW9uIFIoYSxjLGQsYil7dmFyIGY9XCJkZWxheVwiPT09YTtyZXR1cm4gYy5sZW5ndGg/KGY/TWF0aC5taW46TWF0aC5tYXgpLmFwcGx5KE1hdGgsYy5tYXAoZnVuY3Rpb24oYil7cmV0dXJuIGJbYV19KSk6Zj9iLmRlbGF5OmQub2Zmc2V0K2IuZGVsYXkrXG5iLmR1cmF0aW9ufWZ1bmN0aW9uIGZhKGEpe3ZhciBjPUQoZ2EsYSksZD1EKFMsYSksYj1aKGEudGFyZ2V0cyksZj1bXSxlPXooYyxkKSxrO2ZvcihrIGluIGEpZS5oYXNPd25Qcm9wZXJ0eShrKXx8XCJ0YXJnZXRzXCI9PT1rfHxmLnB1c2goe25hbWU6ayxvZmZzZXQ6ZS5vZmZzZXQsdHdlZW5zOmFhKGFba10sZCl9KTthPWVhKGIsZik7cmV0dXJuIHooYyx7Y2hpbGRyZW46W10sYW5pbWF0YWJsZXM6YixhbmltYXRpb25zOmEsZHVyYXRpb246UihcImR1cmF0aW9uXCIsYSxjLGQpLGRlbGF5OlIoXCJkZWxheVwiLGEsYyxkKX0pfWZ1bmN0aW9uIHEoYSl7ZnVuY3Rpb24gYygpe3JldHVybiB3aW5kb3cuUHJvbWlzZSYmbmV3IFByb21pc2UoZnVuY3Rpb24oYSl7cmV0dXJuIHA9YX0pfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGcucmV2ZXJzZWQ/Zy5kdXJhdGlvbi1hOmF9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MCxjPXt9LGQ9Zy5hbmltYXRpb25zLGY9ZC5sZW5ndGg7YjxmOyl7dmFyIGU9ZFtiXSxcbms9ZS5hbmltYXRhYmxlLGg9ZS50d2VlbnMsbj1oLmxlbmd0aC0xLGw9aFtuXTtuJiYobD1yKGgsZnVuY3Rpb24oYil7cmV0dXJuIGE8Yi5lbmR9KVswXXx8bCk7Zm9yKHZhciBoPU1hdGgubWluKE1hdGgubWF4KGEtbC5zdGFydC1sLmRlbGF5LDApLGwuZHVyYXRpb24pL2wuZHVyYXRpb24sdz1pc05hTihoKT8xOmwuZWFzaW5nKGgsbC5lbGFzdGljaXR5KSxoPWwudG8uc3RyaW5ncyxwPWwucm91bmQsbj1bXSxtPXZvaWQgMCxtPWwudG8ubnVtYmVycy5sZW5ndGgsdD0wO3Q8bTt0Kyspe3ZhciB4PXZvaWQgMCx4PWwudG8ubnVtYmVyc1t0XSxxPWwuZnJvbS5udW1iZXJzW3RdLHg9bC5pc1BhdGg/WShsLnZhbHVlLHcqeCk6cSt3Kih4LXEpO3AmJihsLmlzQ29sb3ImJjI8dHx8KHg9TWF0aC5yb3VuZCh4KnApL3ApKTtuLnB1c2goeCl9aWYobD1oLmxlbmd0aClmb3IobT1oWzBdLHc9MDt3PGw7dysrKXA9aFt3KzFdLHQ9blt3XSxpc05hTih0KXx8KG09cD9tKyh0K3ApOm0rKHQrXCIgXCIpKTtcbmVsc2UgbT1uWzBdO2hhW2UudHlwZV0oay50YXJnZXQsZS5wcm9wZXJ0eSxtLGMsay5pZCk7ZS5jdXJyZW50VmFsdWU9bTtiKyt9aWYoYj1PYmplY3Qua2V5cyhjKS5sZW5ndGgpZm9yKGQ9MDtkPGI7ZCsrKUh8fChIPUUoZG9jdW1lbnQuYm9keSxcInRyYW5zZm9ybVwiKT9cInRyYW5zZm9ybVwiOlwiLXdlYmtpdC10cmFuc2Zvcm1cIiksZy5hbmltYXRhYmxlc1tkXS50YXJnZXQuc3R5bGVbSF09Y1tkXS5qb2luKFwiIFwiKTtnLmN1cnJlbnRUaW1lPWE7Zy5wcm9ncmVzcz1hL2cuZHVyYXRpb24qMTAwfWZ1bmN0aW9uIGYoYSl7aWYoZ1thXSlnW2FdKGcpfWZ1bmN0aW9uIGUoKXtnLnJlbWFpbmluZyYmITAhPT1nLnJlbWFpbmluZyYmZy5yZW1haW5pbmctLX1mdW5jdGlvbiBrKGEpe3ZhciBrPWcuZHVyYXRpb24sbj1nLm9mZnNldCx3PW4rZy5kZWxheSxyPWcuY3VycmVudFRpbWUseD1nLnJldmVyc2VkLHE9ZChhKTtpZihnLmNoaWxkcmVuLmxlbmd0aCl7dmFyIHU9Zy5jaGlsZHJlbix2PXUubGVuZ3RoO1xuaWYocT49Zy5jdXJyZW50VGltZSlmb3IodmFyIEc9MDtHPHY7RysrKXVbR10uc2VlayhxKTtlbHNlIGZvcig7di0tOyl1W3ZdLnNlZWsocSl9aWYocT49d3x8IWspZy5iZWdhbnx8KGcuYmVnYW49ITAsZihcImJlZ2luXCIpKSxmKFwicnVuXCIpO2lmKHE+biYmcTxrKWIocSk7ZWxzZSBpZihxPD1uJiYwIT09ciYmKGIoMCkseCYmZSgpKSxxPj1rJiZyIT09a3x8IWspYihrKSx4fHxlKCk7ZihcInVwZGF0ZVwiKTthPj1rJiYoZy5yZW1haW5pbmc/KHQ9aCxcImFsdGVybmF0ZVwiPT09Zy5kaXJlY3Rpb24mJihnLnJldmVyc2VkPSFnLnJldmVyc2VkKSk6KGcucGF1c2UoKSxnLmNvbXBsZXRlZHx8KGcuY29tcGxldGVkPSEwLGYoXCJjb21wbGV0ZVwiKSxcIlByb21pc2VcImluIHdpbmRvdyYmKHAoKSxtPWMoKSkpKSxsPTApfWE9dm9pZCAwPT09YT97fTphO3ZhciBoLHQsbD0wLHA9bnVsbCxtPWMoKSxnPWZhKGEpO2cucmVzZXQ9ZnVuY3Rpb24oKXt2YXIgYT1nLmRpcmVjdGlvbixjPWcubG9vcDtnLmN1cnJlbnRUaW1lPVxuMDtnLnByb2dyZXNzPTA7Zy5wYXVzZWQ9ITA7Zy5iZWdhbj0hMTtnLmNvbXBsZXRlZD0hMTtnLnJldmVyc2VkPVwicmV2ZXJzZVwiPT09YTtnLnJlbWFpbmluZz1cImFsdGVybmF0ZVwiPT09YSYmMT09PWM/MjpjO2IoMCk7Zm9yKGE9Zy5jaGlsZHJlbi5sZW5ndGg7YS0tOylnLmNoaWxkcmVuW2FdLnJlc2V0KCl9O2cudGljaz1mdW5jdGlvbihhKXtoPWE7dHx8KHQ9aCk7aygobCtoLXQpKnEuc3BlZWQpfTtnLnNlZWs9ZnVuY3Rpb24oYSl7ayhkKGEpKX07Zy5wYXVzZT1mdW5jdGlvbigpe3ZhciBhPXYuaW5kZXhPZihnKTstMTxhJiZ2LnNwbGljZShhLDEpO2cucGF1c2VkPSEwfTtnLnBsYXk9ZnVuY3Rpb24oKXtnLnBhdXNlZCYmKGcucGF1c2VkPSExLHQ9MCxsPWQoZy5jdXJyZW50VGltZSksdi5wdXNoKGcpLEJ8fGlhKCkpfTtnLnJldmVyc2U9ZnVuY3Rpb24oKXtnLnJldmVyc2VkPSFnLnJldmVyc2VkO3Q9MDtsPWQoZy5jdXJyZW50VGltZSl9O2cucmVzdGFydD1mdW5jdGlvbigpe2cucGF1c2UoKTtcbmcucmVzZXQoKTtnLnBsYXkoKX07Zy5maW5pc2hlZD1tO2cucmVzZXQoKTtnLmF1dG9wbGF5JiZnLnBsYXkoKTtyZXR1cm4gZ312YXIgZ2E9e3VwZGF0ZTp2b2lkIDAsYmVnaW46dm9pZCAwLHJ1bjp2b2lkIDAsY29tcGxldGU6dm9pZCAwLGxvb3A6MSxkaXJlY3Rpb246XCJub3JtYWxcIixhdXRvcGxheTohMCxvZmZzZXQ6MH0sUz17ZHVyYXRpb246MUUzLGRlbGF5OjAsZWFzaW5nOlwiZWFzZU91dEVsYXN0aWNcIixlbGFzdGljaXR5OjUwMCxyb3VuZDowfSxXPVwidHJhbnNsYXRlWCB0cmFuc2xhdGVZIHRyYW5zbGF0ZVogcm90YXRlIHJvdGF0ZVggcm90YXRlWSByb3RhdGVaIHNjYWxlIHNjYWxlWCBzY2FsZVkgc2NhbGVaIHNrZXdYIHNrZXdZIHBlcnNwZWN0aXZlXCIuc3BsaXQoXCIgXCIpLEgsaD17YXJyOmZ1bmN0aW9uKGEpe3JldHVybiBBcnJheS5pc0FycmF5KGEpfSxvYmo6ZnVuY3Rpb24oYSl7cmV0dXJuLTE8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpLmluZGV4T2YoXCJPYmplY3RcIil9LFxucHRoOmZ1bmN0aW9uKGEpe3JldHVybiBoLm9iaihhKSYmYS5oYXNPd25Qcm9wZXJ0eShcInRvdGFsTGVuZ3RoXCIpfSxzdmc6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBTVkdFbGVtZW50fSxkb206ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZVR5cGV8fGguc3ZnKGEpfSxzdHI6ZnVuY3Rpb24oYSl7cmV0dXJuXCJzdHJpbmdcIj09PXR5cGVvZiBhfSxmbmM6ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09dHlwZW9mIGF9LHVuZDpmdW5jdGlvbihhKXtyZXR1cm5cInVuZGVmaW5lZFwiPT09dHlwZW9mIGF9LGhleDpmdW5jdGlvbihhKXtyZXR1cm4vKF4jWzAtOUEtRl17Nn0kKXwoXiNbMC05QS1GXXszfSQpL2kudGVzdChhKX0scmdiOmZ1bmN0aW9uKGEpe3JldHVybi9ecmdiLy50ZXN0KGEpfSxoc2w6ZnVuY3Rpb24oYSl7cmV0dXJuL15oc2wvLnRlc3QoYSl9LGNvbDpmdW5jdGlvbihhKXtyZXR1cm4gaC5oZXgoYSl8fGgucmdiKGEpfHxoLmhzbChhKX19LEE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsXG5kLGIpe3JldHVybigoKDEtMypiKzMqZCkqYSsoMypiLTYqZCkpKmErMypkKSphfXJldHVybiBmdW5jdGlvbihjLGQsYixmKXtpZigwPD1jJiYxPj1jJiYwPD1iJiYxPj1iKXt2YXIgZT1uZXcgRmxvYXQzMkFycmF5KDExKTtpZihjIT09ZHx8YiE9PWYpZm9yKHZhciBrPTA7MTE+azsrK2spZVtrXT1hKC4xKmssYyxiKTtyZXR1cm4gZnVuY3Rpb24oayl7aWYoYz09PWQmJmI9PT1mKXJldHVybiBrO2lmKDA9PT1rKXJldHVybiAwO2lmKDE9PT1rKXJldHVybiAxO2Zvcih2YXIgaD0wLGw9MTsxMCE9PWwmJmVbbF08PWs7KytsKWgrPS4xOy0tbDt2YXIgbD1oKyhrLWVbbF0pLyhlW2wrMV0tZVtsXSkqLjEsbj0zKigxLTMqYiszKmMpKmwqbCsyKigzKmItNipjKSpsKzMqYztpZiguMDAxPD1uKXtmb3IoaD0wOzQ+aDsrK2gpe249MyooMS0zKmIrMypjKSpsKmwrMiooMypiLTYqYykqbCszKmM7aWYoMD09PW4pYnJlYWs7dmFyIG09YShsLGMsYiktayxsPWwtbS9ufWs9bH1lbHNlIGlmKDA9PT1cbm4paz1sO2Vsc2V7dmFyIGw9aCxoPWgrLjEsZz0wO2RvIG09bCsoaC1sKS8yLG49YShtLGMsYiktaywwPG4/aD1tOmw9bTt3aGlsZSgxZS03PE1hdGguYWJzKG4pJiYxMD4rK2cpO2s9bX1yZXR1cm4gYShrLGQsZil9fX19KCksUT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiKXtyZXR1cm4gMD09PWF8fDE9PT1hP2E6LU1hdGgucG93KDIsMTAqKGEtMSkpKk1hdGguc2luKDIqKGEtMS1iLygyKk1hdGguUEkpKk1hdGguYXNpbigxKSkqTWF0aC5QSS9iKX12YXIgYz1cIlF1YWQgQ3ViaWMgUXVhcnQgUXVpbnQgU2luZSBFeHBvIENpcmMgQmFjayBFbGFzdGljXCIuc3BsaXQoXCIgXCIpLGQ9e0luOltbLjU1LC4wODUsLjY4LC41M10sWy41NSwuMDU1LC42NzUsLjE5XSxbLjg5NSwuMDMsLjY4NSwuMjJdLFsuNzU1LC4wNSwuODU1LC4wNl0sWy40NywwLC43NDUsLjcxNV0sWy45NSwuMDUsLjc5NSwuMDM1XSxbLjYsLjA0LC45OCwuMzM1XSxbLjYsLS4yOCwuNzM1LC4wNDVdLGFdLE91dDpbWy4yNSxcbi40NiwuNDUsLjk0XSxbLjIxNSwuNjEsLjM1NSwxXSxbLjE2NSwuODQsLjQ0LDFdLFsuMjMsMSwuMzIsMV0sWy4zOSwuNTc1LC41NjUsMV0sWy4xOSwxLC4yMiwxXSxbLjA3NSwuODIsLjE2NSwxXSxbLjE3NSwuODg1LC4zMiwxLjI3NV0sZnVuY3Rpb24oYixjKXtyZXR1cm4gMS1hKDEtYixjKX1dLEluT3V0OltbLjQ1NSwuMDMsLjUxNSwuOTU1XSxbLjY0NSwuMDQ1LC4zNTUsMV0sWy43NywwLC4xNzUsMV0sWy44NiwwLC4wNywxXSxbLjQ0NSwuMDUsLjU1LC45NV0sWzEsMCwwLDFdLFsuNzg1LC4xMzUsLjE1LC44Nl0sWy42OCwtLjU1LC4yNjUsMS41NV0sZnVuY3Rpb24oYixjKXtyZXR1cm4uNT5iP2EoMipiLGMpLzI6MS1hKC0yKmIrMixjKS8yfV19LGI9e2xpbmVhcjpBKC4yNSwuMjUsLjc1LC43NSl9LGY9e30sZTtmb3IoZSBpbiBkKWYudHlwZT1lLGRbZi50eXBlXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihkLGYpe2JbXCJlYXNlXCIrYS50eXBlK2NbZl1dPWguZm5jKGQpP1xuZDpBLmFwcGx5KCRqc2NvbXAkdGhpcyxkKX19KGYpKSxmPXt0eXBlOmYudHlwZX07cmV0dXJuIGJ9KCksaGE9e2NzczpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGEuc3R5bGVbY109ZH0sYXR0cmlidXRlOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoYyxkKX0sb2JqZWN0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYVtjXT1kfSx0cmFuc2Zvcm06ZnVuY3Rpb24oYSxjLGQsYixmKXtiW2ZdfHwoYltmXT1bXSk7YltmXS5wdXNoKGMrXCIoXCIrZCtcIilcIil9fSx2PVtdLEI9MCxpYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtCPXJlcXVlc3RBbmltYXRpb25GcmFtZShjKX1mdW5jdGlvbiBjKGMpe3ZhciBiPXYubGVuZ3RoO2lmKGIpe2Zvcih2YXIgZD0wO2Q8YjspdltkXSYmdltkXS50aWNrKGMpLGQrKzthKCl9ZWxzZSBjYW5jZWxBbmltYXRpb25GcmFtZShCKSxCPTB9cmV0dXJuIGF9KCk7cS52ZXJzaW9uPVwiMi4yLjBcIjtxLnNwZWVkPTE7cS5ydW5uaW5nPXY7cS5yZW1vdmU9XG5mdW5jdGlvbihhKXthPVAoYSk7Zm9yKHZhciBjPXYubGVuZ3RoO2MtLTspZm9yKHZhciBkPXZbY10sYj1kLmFuaW1hdGlvbnMsZj1iLmxlbmd0aDtmLS07KXUoYSxiW2ZdLmFuaW1hdGFibGUudGFyZ2V0KSYmKGIuc3BsaWNlKGYsMSksYi5sZW5ndGh8fGQucGF1c2UoKSl9O3EuZ2V0VmFsdWU9SztxLnBhdGg9ZnVuY3Rpb24oYSxjKXt2YXIgZD1oLnN0cihhKT9lKGEpWzBdOmEsYj1jfHwxMDA7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybntlbDpkLHByb3BlcnR5OmEsdG90YWxMZW5ndGg6TihkKSooYi8xMDApfX19O3Euc2V0RGFzaG9mZnNldD1mdW5jdGlvbihhKXt2YXIgYz1OKGEpO2Euc2V0QXR0cmlidXRlKFwic3Ryb2tlLWRhc2hhcnJheVwiLGMpO3JldHVybiBjfTtxLmJlemllcj1BO3EuZWFzaW5ncz1RO3EudGltZWxpbmU9ZnVuY3Rpb24oYSl7dmFyIGM9cShhKTtjLnBhdXNlKCk7Yy5kdXJhdGlvbj0wO2MuYWRkPWZ1bmN0aW9uKGQpe2MuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihhKXthLmJlZ2FuPVxuITA7YS5jb21wbGV0ZWQ9ITB9KTttKGQpLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGQ9eihiLEQoUyxhfHx7fSkpO2QudGFyZ2V0cz1kLnRhcmdldHN8fGEudGFyZ2V0cztiPWMuZHVyYXRpb247dmFyIGU9ZC5vZmZzZXQ7ZC5hdXRvcGxheT0hMTtkLmRpcmVjdGlvbj1jLmRpcmVjdGlvbjtkLm9mZnNldD1oLnVuZChlKT9iOkwoZSxiKTtjLmJlZ2FuPSEwO2MuY29tcGxldGVkPSEwO2Muc2VlayhkLm9mZnNldCk7ZD1xKGQpO2QuYmVnYW49ITA7ZC5jb21wbGV0ZWQ9ITA7ZC5kdXJhdGlvbj5iJiYoYy5kdXJhdGlvbj1kLmR1cmF0aW9uKTtjLmNoaWxkcmVuLnB1c2goZCl9KTtjLnNlZWsoMCk7Yy5yZXNldCgpO2MuYXV0b3BsYXkmJmMucmVzdGFydCgpO3JldHVybiBjfTtyZXR1cm4gY307cS5yYW5kb209ZnVuY3Rpb24oYSxjKXtyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihjLWErMSkpK2F9O3JldHVybiBxfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2FuaW1lanMvYW5pbWUubWluLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2F1dG8tZW50ZXItdnInLCB7XG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcGx1Z1lvdXJIZWFkc2V0O1xuXG4gICAgLy8gSW5pdGlhbCBlbnRlciBWUi4gRG9uJ3QgdHJ5IHRvIGVudGVyIFZSIGlmIG5vdCBhY3RpdmUgdGFiIChlLmcuLCBsb2JieSBqdXN0IHJlY292ZXJlZFxuICAgIC8vIGZyb20gYSBjcmFzaCBhbmQgcmVpbml0aWFsaXplZCkuXG4gICAgaWYgKCFkb2N1bWVudC5oaWRkZW4pIHtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCdjbGljaycpKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmVsLnNjZW5lRWwuZW50ZXJWUigpO1xuICAgICAgfSwgMjAwMCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIG5vdGlmaWNhdGlvbi5cbiAgICBwbHVnWW91ckhlYWRzZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGx1Z3lvdXJoZWFkc2V0Jyk7XG4gICAgdGhpcy5lbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2VudGVyLXZyJywgKCkgPT4ge1xuICAgICAgaWYgKEFGUkFNRS51dGlscy5kZXZpY2UuY2hlY2tIZWFkc2V0Q29ubmVjdGVkKCkpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsdWd5b3VyaGVhZHNldCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRldXAnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbHVneW91cmhlYWRzZXQnKS5jbGFzc0xpc3QuYWRkKCdzbGlkZXVwJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGV2dCA9PiB7XG4gICAgICBpZiAoZXZ0LmRhdGEuYWN0aW9uID09PSAnc3dpdGNoVG9Mb2JieScpIHtcbiAgICAgICAgdGhpcy5lbC5zY2VuZUVsLmVudGVyVlIoKS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBJbiBhIHZlcnkgcmFyZSBjYXNlLCB0aGUgY29udGVudCB0YWIgd2lsbCBub3QgaGF2ZSBleGl0ZWQgVlIgaW4gdGltZVxuICAgICAgICAgICAgLy8gYW5kIHRoZSBsb2JieSB0YWIgd2lsbCBiZSB0cnlpbmcgdG8gZW50ZXIgVlIgd2hpbGUgdGhlIGNvbnRlbnQgdGFiXG4gICAgICAgICAgICAvLyBoYXMgbm90IHlldCBleGl0ZWQgVlIuIEhhY2sgYXJvdW5kIHRoaXMgYnkgdGVsbGluZyB0aGUgY29udGVudCB0YWIgdG9cbiAgICAgICAgICAgIC8vIGV4aXQgVlIuXG4gICAgICAgICAgICB0aGlzLmVsLnNjZW5lRWwuZW50ZXJWUigpLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHthY3Rpb246ICdmb3JjZUV4aXRWUkNvbW1hbmQnfSwgJyonKTtcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zY2VuZUVsLmVudGVyVlIoKTtcbiAgICAgICAgICAgICAgfSwgMjUwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIDI1MCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2F1dG8tZW50ZXItdnIuanMiLCJBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2JhY2tncm91bmQtYW5pbWF0aW9uJywge1xuICBzY2hlbWE6IHtcbiAgICBpc0NvbGxlY3Rpb25PcGVuOiB7ZGVmYXVsdDogZmFsc2V9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdGhpcy5vbk5hdmlnYXRlU3RhcnQgPSB0aGlzLm9uTmF2aWdhdGVTdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25OYXZpZ2F0ZUVuZCA9IHRoaXMub25OYXZpZ2F0ZUVuZC5iaW5kKHRoaXMpO1xuICAgIGVsLnNjZW5lRWwuYWRkRXZlbnRMaXN0ZW5lcignbmF2aWdhdGUnLCB0aGlzLm9uTmF2aWdhdGVTdGFydCk7XG4gICAgZWwuc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKCdwcmVTd2l0Y2hUb0NvbnRlbnQnLCB0aGlzLm9uTmF2aWdhdGVFbmQpO1xuICAgIGVsLnNjZW5lRWwuYWRkRXZlbnRMaXN0ZW5lcignY2FuY2VsbG9hZGluZycsIHRoaXMub25OYXZpZ2F0ZUVuZCk7XG4gICAgdGhpcy5hbmltYXRpb25TZXQgPSB7fTtcbiAgfSxcblxuICBvbk5hdmlnYXRlU3RhcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHRoaXMuYW5pbWF0aW9uU2V0LmZyb20gPSBlbC5jb21wb25lbnRzLm1hdGVyaWFsLm1hdGVyaWFsLnVuaWZvcm1zLmJyaWdodG5lc3MudmFsdWU7XG4gICAgdGhpcy5hbmltYXRpb25TZXQudG8gPSAwLjI7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdhbmltYXRpb25fX25hdmlnYXRlJywgdGhpcy5hbmltYXRpb25TZXQpO1xuICAgIGVsLmVtaXQoJ25hdmlnYXRlYmFja2dyb3VuZGFuaW1hdGlvbicpO1xuICB9LFxuXG4gIG9uTmF2aWdhdGVFbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHRoaXMuYW5pbWF0aW9uU2V0LmZyb20gPSBlbC5jb21wb25lbnRzLm1hdGVyaWFsLm1hdGVyaWFsLnVuaWZvcm1zLmJyaWdodG5lc3MudmFsdWU7XG4gICAgdGhpcy5hbmltYXRpb25TZXQudG8gPSB0aGlzLmRhdGEuaXNDb2xsZWN0aW9uT3BlbiA/IDAuNSA6IDAuOTtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ2FuaW1hdGlvbl9fbmF2aWdhdGUnLCB0aGlzLmFuaW1hdGlvblNldCk7XG4gICAgZWwuZW1pdCgnbmF2aWdhdGViYWNrZ3JvdW5kYW5pbWF0aW9uJyk7XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvYmFja2dyb3VuZC1hbmltYXRpb24uanMiLCIvKipcbiAqIEFtYmllbnQgYXVkaW8gd2l0aCB2b2x1bWUgc2V0LlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2JhY2tncm91bmQtYXVkaW8nLCB7XG4gIHNjaGVtYToge1xuICAgIHNyYzoge3R5cGU6ICdzdHJpbmcnfSxcbiAgICB2b2x1bWU6IHt0eXBlOiAnbnVtYmVyJ31cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hdWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5kYXRhLnNyYyk7XG4gICAgdGhpcy5hdWRpby52b2x1bWUgPSB0aGlzLmRhdGEudm9sdW1lO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICdoaWRkZW4nKSB7XG4gICAgICAgIHRoaXMuZmFkZU91dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mYWRlSW4oKTtcbiAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG4gIH0sXG5cbiAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICB0aGlzLmF1ZGlvLnBsYXkoKTtcbiAgICB9XG4gIH0sXG5cbiAgZmFkZUluOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGF1ZGlvID0gdGhpcy5hdWRpbztcbiAgICB2YXIgZmFkZUF1ZGlvSW50ZXJ2YWw7XG5cbiAgICB0aGlzLmF1ZGlvLnBsYXkoKTtcblxuICAgIGZhZGVBdWRpb0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgLy8gRmFkZSB2b2x1bWUgaW4uXG4gICAgICBpZiAoYXVkaW8udm9sdW1lIDw9IHRoaXMuZGF0YS52b2x1bWUpIHsgYXVkaW8udm9sdW1lICs9IDAuMDA1OyB9XG5cbiAgICAgIC8vIFdoZW4gdm9sdW1lIHJlYWNoZXMgemVybywgc3RvcC5cbiAgICAgIGlmIChhdWRpby52b2x1bWUgPj0gdGhpcy5kYXRhLnZvbHVtZSkge1xuICAgICAgICBjbGVhckludGVydmFsKGZhZGVBdWRpb0ludGVydmFsKTtcbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9LFxuXG4gIGZhZGVPdXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXVkaW8gPSB0aGlzLmF1ZGlvO1xuICAgIHZhciBmYWRlQXVkaW9JbnRlcnZhbDtcblxuICAgIGZhZGVBdWRpb0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgLy8gRmFkZSB2b2x1bWUuXG4gICAgICBpZiAoYXVkaW8udm9sdW1lID49IDAuMDA1KSB7XG4gICAgICAgIGF1ZGlvLnZvbHVtZSAtPSAwLjAwNTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF1ZGlvLnZvbHVtZSA9IDA7XG4gICAgICB9XG5cbiAgICAgIC8vIFdoZW4gdm9sdW1lIHJlYWNoZXMgemVybywgc3RvcC5cbiAgICAgIGlmIChhdWRpby52b2x1bWUgPD0gMCkge1xuICAgICAgICBjbGVhckludGVydmFsKGZhZGVBdWRpb0ludGVydmFsKTtcbiAgICAgICAgdGhpcy5hdWRpby5wYXVzZSgpO1xuICAgICAgfVxuICAgIH0sIDEwMCk7XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvYmFja2dyb3VuZC1hdWRpby5qcyIsIi8qKlxuICogaHR0cHM6Ly93d3cuc2hhZGVydG95LmNvbS92aWV3L2xkQjN6Y1xuICogaHR0cHM6Ly93d3cuc2hhZGVydG95LmNvbS92aWV3L01zUzNXY1xuICovXG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnYmFja2dyb3VuZC1zaGFkZXInLCB7XG4gcGxheTogZnVuY3Rpb24gKCkge1xuICAgdGhpcy5jYW1lcmEgPSB0aGlzLmVsLnNjZW5lRWwuY2FtZXJhLmVsLm9iamVjdDNEO1xuICAgdGhpcy51bmlmb3JtID0gdGhpcy5lbC5jb21wb25lbnRzLm1hdGVyaWFsLm1hdGVyaWFsLnVuaWZvcm1zLmNhbWVyYS52YWx1ZTtcbiB9LFxuXG4gdGljazogZnVuY3Rpb24gKHRpbWUsIGRlbHRhKSB7XG4gICB0aGlzLnVuaWZvcm0ueCA9IHRoaXMuY2FtZXJhLnBvc2l0aW9uLng7XG4gICB0aGlzLnVuaWZvcm0ueSA9IHRoaXMuY2FtZXJhLnBvc2l0aW9uLnk7XG4gICB0aGlzLnVuaWZvcm0ueiA9IHRoaXMuY2FtZXJhLnBvc2l0aW9uLno7XG4gfVxufSk7XG5cblxuQUZSQU1FLnJlZ2lzdGVyU2hhZGVyKCdiYWNrZ3JvdW5kU2hhZGVyJywge1xuICBzY2hlbWE6IHtcbiAgICBicmlnaHRuZXNzOiB7dHlwZTogJ251bWJlcicsIGRlZmF1bHQ6IDAuOSwgbWluOiAwLCBtYXg6IDEsIGlzOiAndW5pZm9ybSd9LFxuICAgIHRpbWU6IHt0eXBlOiAnbnVtYmVyJywgZGVmYXVsdDogMCwgaXM6ICd1bmlmb3JtJ30sXG4gICAgdGludDoge3R5cGU6ICdjb2xvcicsIGRlZmF1bHQ6ICcjMDAwJywgaXM6ICd1bmlmb3JtJ30sXG4gICAgY2FtZXJhOiB7dHlwZTogJ3ZlYzMnLCBpczogJ3VuaWZvcm0nfSxcbiAgICBvcGFjaXR5OiB7dHlwZTogJ251bWJlcicsIGRlZmF1bHQ6IDEsIGlzOiAndW5pZm9ybSd9XG4gIH0sXG5cbiAgdmVydGV4U2hhZGVyOiByZXF1aXJlKCcuL3NoYWRlcnMvYmFja2dyb3VuZFZlcnRleC5nbHNsJyksXG5cbiAgZnJhZ21lbnRTaGFkZXI6IHJlcXVpcmUoJy4vc2hhZGVycy9iYWNrZ3JvdW5kRnJhZ21lbnQuZ2xzbCcpXG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2JhY2tncm91bmQtc2hhZGVyLmpzIiwiQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdjYW5jZWwtYnV0dG9uJywge1xuICBzY2hlbWE6IHtcbiAgICB2ZXJzaW9uOiB7ZGVmYXVsdDogMH1cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB0aGlzLnBvc3RNZXNzYWdlRGF0YSA9IHthY3Rpb246ICdjYW5jZWxMb2FkaW5nJ307XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGVsLnNjZW5lRWwuZW1pdCgnY2FuY2VsbG9hZGluZycpO1xuICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHRoaXMucG9zdE1lc3NhZ2VEYXRhLCAnKicpO1xuICAgIH0pO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZWwub2JqZWN0M0QudmlzaWJsZSA9ICF0aGlzLmRhdGEudmVyc2lvbiB8fCB0aGlzLmRhdGEudmVyc2lvbiA+PSAyLjQ7XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvY2FuY2VsLWJ1dHRvbi5qcyIsIkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnY2FzY2FkZS1yYXljYXN0YWJsZScsIHtcbiAgc2NoZW1hOiB7dHlwZTogJ3N0cmluZyd9LFxuXG4gIHBsYXk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbHM7XG4gICAgdmFyIGk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBlbHMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJyonKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YSkge1xuICAgICAgICAgIGVsc1tpXS5zZXRBdHRyaWJ1dGUoJ2JpbmQtdG9nZ2xlX19yYXljYXN0YWJsZScsIHRoaXMuZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxzW2ldLnNldEF0dHJpYnV0ZSgncmF5Y2FzdGFibGUnLCAnJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9LFxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9jYXNjYWRlLXJheWNhc3RhYmxlLmpzIiwiLyoqXG4gKiBDbG9zZSBwb3BwZWQgd2luZG93IGlmIGNsaWNraW5nIGFueXdoZXJlIG91dHNpZGUgaXQuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnY2xpY2stb3V0Jywge1xuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5vbkNsaWNrID0gdGhpcy5vbkNsaWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0cmlnZ2VyZG93bicsIHRoaXMub25DbGljayk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdhYnV0dG9uZG93bicsIHRoaXMub25DbGljayk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdiYnV0dG9uZG93bicsIHRoaXMub25DbGljayk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd4YnV0dG9uZG93bicsIHRoaXMub25DbGljayk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd5YnV0dG9uZG93bicsIHRoaXMub25DbGljayk7XG5cbiAgICBpZiAodGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdtb3VzZUN1cnNvcicpIHtcbiAgICAgIHRoaXMuaXNNb3VzZUN1cnNvciA9IHRydWU7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldnQgPT4ge1xuICAgICAgICBpZiAoIWV2dC5pc1RydXN0ZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMub25DbGljaygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldnQgPT4ge1xuICAgICAgaWYgKGV2dC5rZXlDb2RlICE9PSAyNykgeyByZXR1cm47IH0gIC8vIDxlc2M+LlxuICAgICAgdGhpcy5vbkNsaWNrKCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgb25DbGljazogZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnRlcnNlY3RlZEVsO1xuICAgIHZhciBzdGF0ZTtcblxuICAgIGlmICghdGhpcy5lbC5zY2VuZUVsLmlzUGxheWluZykgeyByZXR1cm47IH1cblxuICAgIHN0YXRlID0gdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXMuc3RhdGUuc3RhdGU7XG4gICAgaW50ZXJzZWN0ZWRFbCA9IHRoaXMuZWwuY29tcG9uZW50cy5yYXljYXN0ZXIuaW50ZXJzZWN0ZWRFbHNbMF07XG5cbiAgICBpZiAoc3RhdGUuaXNMb2FkaW5nU2l0ZSkgeyByZXR1cm47IH1cblxuICAgIGlmIChzdGF0ZS5zY3JlZW4gPT09ICd0dXRvcmlhbG1vZGFsJykgeyByZXR1cm47IH1cblxuICAgIC8vIENsb3NlIGtleWJvYXJkIHdoZW4gY2xpY2tpbmcgb3V0IG9mIHNlYXJjaC5cbiAgICAvLyBUT0RPOiBTZXBhcmF0ZSBjb21wb25lbnQgdG8gZGlzbWlzcyBrZXlib2FyZC5cbiAgICBpZiAoc3RhdGUuc2NyZWVuID09PSAnc2VhcmNoJyAmJiBpbnRlcnNlY3RlZEVsICYmXG4gICAgICAgIGludGVyc2VjdGVkRWwuZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnY3Vyc29yRHVtbXknKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2V5Ym9hcmQnKS5kaXNtaXNzKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUG9wLlxuICAgIGlmICghc3RhdGUuc2NyZWVuKSB7IHJldHVybjsgfVxuICAgIGlmIChpbnRlcnNlY3RlZEVsICYmIGludGVyc2VjdGVkRWwuZ2V0QXR0cmlidXRlKCdpZCcpICE9PSAnY3Vyc29yRHVtbXknKSB7IHJldHVybjsgfVxuICAgIHRoaXMuZWwuc2NlbmVFbC5lbWl0KCdzY3JlZW5wb3AnKTsgIC8vIFdpbGwgbm90aWZ5IHNjcmVlbi1tYW5hZ2VyIHRocnUgc3RhdGUuXG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvY2xpY2stb3V0LmpzIiwiQUZSQU1FLnJlZ2lzdGVyU2hhZGVyKCdjb2xsZWN0aW9uU2hhZGVyJywge1xuICBzY2hlbWE6IHtcbiAgICBjb2xvcjoge2RlZmF1bHQ6ICcjRkZGJywgdHlwZTogJ2NvbG9yJywgaXM6ICd1bmlmb3JtJ30sXG4gICAgb3BhY2l0eToge2RlZmF1bHQ6IDEuMCwgaXM6ICd1bmlmb3JtJ30sXG4gICAgc3JjOiB7ZGVmYXVsdDogJyN3aGl0ZVBpeGVsSW1nJywgdHlwZTogJ21hcCcsIGlzOiAndW5pZm9ybSd9XG4gIH0sXG5cbiAgdmVydGV4U2hhZGVyOiByZXF1aXJlKCcuL3NoYWRlcnMvZmFkZVZlcnRleC5nbHNsJyksXG5cbiAgZnJhZ21lbnRTaGFkZXI6IHJlcXVpcmUoJy4vc2hhZGVycy9jb2xsZWN0aW9uRnJhZ21lbnQuZ2xzbCcpXG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2NvbGxlY3Rpb24tc2hhZGVyLmpzIiwiQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdjb25zb2xlLXNob3J0Y3V0cycsIHtcbiAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy5zY2VuZSA9IHRoaXMuZWw7XG4gICAgd2luZG93LnN0YXRlID0gdGhpcy5lbC5zeXN0ZW1zLnN0YXRlLnN0YXRlO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2NvbnNvbGUtc2hvcnRjdXRzLmpzIiwiLyoqXG4gKiBMaXN0ZW4gdG8gY29udGVudFBhZ2VMb2FkZWQgbWVzc2FnZSwgYnV0IGlnbm9yZSB0aGUgZmlyc3Qgb25lLlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2NvbnRlbnQtcGFnZS1sb2FkZWQnLCB7XG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaXNGaXJzdCA9IHRydWU7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG1lc3NhZ2UgPT4ge1xuICAgICAgaWYgKG1lc3NhZ2UuZGF0YS5hY3Rpb24gIT09ICdjb250ZW50UGFnZUxvYWRlZCcpIHsgcmV0dXJuOyB9XG4gICAgICBpZiAoaXNGaXJzdCkge1xuICAgICAgICBpc0ZpcnN0ID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWwuZW1pdCgnY29udGVudHBhZ2Vsb2FkZWQnKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9jb250ZW50LXBhZ2UtbG9hZGVkLmpzIiwiQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdjb250cm9sbGVyLWJ1dHRvbi1mZWVkYmFjaycsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudHJpZ2dlciA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmNvbnRyb2xsZXItdHJpZ2dlcicpO1xuICAgIHRoaXMudGh1bWJzdGljayA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmNvbnRyb2xsZXItdGh1bWJzdGljaycpO1xuICB9LFxuXG4gIHRpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29udHJvbHM7XG4gICAgdmFyIHRyaWdnZXI7XG4gICAgdmFyIHRodW1ic3RpY2s7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIGNvbnRyb2xzID0gZWwuY29tcG9uZW50c1sndHJhY2tlZC1jb250cm9scyddO1xuICAgIGlmICghY29udHJvbHMpIHsgcmV0dXJuOyB9XG5cbiAgICB0cmlnZ2VyID0gdGhpcy50cmlnZ2VyID8gdGhpcy50cmlnZ2VyLmdldE9iamVjdDNEKCdtZXNoJykgOiBudWxsO1xuICAgIHRodW1ic3RpY2sgPSB0aGlzLnRodW1ic3RpY2sgPyB0aGlzLnRodW1ic3RpY2suZ2V0T2JqZWN0M0QoJ21lc2gnKSA6IG51bGw7XG5cbiAgICBpZiAodHJpZ2dlciAmJiBjb250cm9scy5idXR0b25TdGF0ZXNbMV0pIHtcbiAgICAgIHRyaWdnZXIucm90YXRpb24ueCA9IFRIUkVFLk1hdGgubGVycCgwLCAtTWF0aC5QSSAvIDkuMCwgY29udHJvbHMuYnV0dG9uU3RhdGVzWzFdLnZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodGh1bWJzdGljaykge1xuICAgICAgdGh1bWJzdGljay5yb3RhdGlvbi56ID0gLWNvbnRyb2xzLmF4aXNbMF0gKiAwLjQ7XG4gICAgICB0aHVtYnN0aWNrLnJvdGF0aW9uLnggPSBjb250cm9scy5heGlzWzFdICogMC40O1xuICAgIH1cbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9jb250cm9sbGVyLWJ1dHRvbi1mZWVkYmFjay5qcyIsInZhciBoYW5kRGF0YSA9IHtcbiAgcmlnaHQ6IHtoYW5kOiAncmlnaHQnLCBtb2RlbDogZmFsc2V9LFxuICBsZWZ0OiB7aGFuZDogJ2xlZnQnLCBtb2RlbDogZmFsc2V9XG59O1xuXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2NvbnRyb2xsZXInLCB7XG4gIHNjaGVtYToge1xuICAgIGhhbmQ6IHtkZWZhdWx0OiAncmlnaHQnfSxcbiAgICBpc0xvYWRpbmdTaXRlOiB7ZGVmYXVsdDogZmFsc2V9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBpO1xuXG4gICAgdGhpcy5vcmlnaW5hbEdhbWVwYWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vcmlnaW5hbFVwZGF0ZUdhbWVwYWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5wcm94eUNvbnRyb2xsZXIgPSB7fTtcblxuICAgIC8vIFNldCBjb250cm9sbGVycy5cbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ29jdWx1cy10b3VjaC1jb250cm9scycsIGhhbmREYXRhW2RhdGEuaGFuZF0pO1xuICAgIC8vIERlZmF1bHQgbW9kZWwgZm9yIFJpZnQuXG4gICAgZWwuc2V0QXR0cmlidXRlKCdvY3VsdXMtdG91Y2gtY29udHJvbHMnLCAnbW9kZWwnLCB0cnVlKTtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ3ZpdmUtY29udHJvbHMnLCBoYW5kRGF0YVtkYXRhLmhhbmRdKTtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ3dpbmRvd3MtbW90aW9uLWNvbnRyb2xzJywgaGFuZERhdGFbZGF0YS5oYW5kXSk7XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjb250cm9sbGVyY29ubmVjdGVkJywgZXZ0ID0+IHtcbiAgICAgIHZhciBjb250cm9sbGVyQ29uZmlnO1xuICAgICAgdmFyIGFzc2V0O1xuICAgICAgdmFyIGNvbnRyb2xsZXJMYXNlckVsID0gZWwucXVlcnlTZWxlY3RvcignLmNvbnRyb2xsZXJMYXNlcicpO1xuXG4gICAgICBjb250cm9sbGVyQ29uZmlnID0gY29uZmlnW2V2dC5kZXRhaWwubmFtZV07XG4gICAgICBpZiAoY29udHJvbGxlckNvbmZpZy5yYXljYXN0ZXIpIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdyYXljYXN0ZXInLCBjb250cm9sbGVyQ29uZmlnLnJheWNhc3RlciB8fCB7fSk7XG4gICAgICB9XG4gICAgICBpZiAoY29udHJvbGxlckNvbmZpZy5jdXJzb3IpIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdjdXJzb3InLCBjb250cm9sbGVyQ29uZmlnLmN1cnNvciB8fCB7fSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFBvc2l0aW9uIGxhc2VyIHZpc3VhbGl6YXRpb24uXG4gICAgICBpZiAoY29udHJvbGxlckNvbmZpZy5sYXNlcikge1xuICAgICAgICBjb250cm9sbGVyTGFzZXJFbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgY29udHJvbGxlckNvbmZpZy5sYXNlci5wb3NpdGlvbik7XG4gICAgICAgIGNvbnRyb2xsZXJMYXNlckVsLnNldEF0dHJpYnV0ZSgncm90YXRpb24nLCBjb250cm9sbGVyQ29uZmlnLmxhc2VyLnJvdGF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXNlIGRlZmF1bHQgbW9kZWwuXG4gICAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKGV2dC5kZXRhaWwubmFtZSkubW9kZWwpIHsgcmV0dXJuOyB9XG5cbiAgICAgIC8vIExvYWQgY29udHJvbGxlciBtb2RlbHMuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY29udHJvbGxlckNvbmZpZy5wYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yKCcuY29udHJvbGxlci0nICsgY29udHJvbGxlckNvbmZpZy5wYXJ0c1tpXSkuc2V0QXR0cmlidXRlKCdnbHRmLXBhcnQnLCB7XG4gICAgICAgICAgc3JjOiBjb250cm9sbGVyQ29uZmlnLmFzc2V0LFxuICAgICAgICAgIHBhcnQ6IGNvbnRyb2xsZXJDb25maWcucGFydHNbaV1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0cmFja2luZy5cbiAgICAgIGlmICghQUZSQU1FLnV0aWxzLmdldFVybFBhcmFtZXRlcignZGVidWcnKSAmJiBldnQuZGV0YWlsLm5hbWUpIHtcbiAgICAgICAgZ3RhZygnc2V0Jywge2hlYWRzZXQ6IGV2dC5kZXRhaWwubmFtZS5zcGxpdCgnLScpWzBdfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoQUZSQU1FLnV0aWxzLmdldFVybFBhcmFtZXRlcignZGVidWcnKSkge1xuICAgICAgZWwuZW1pdCgnY29udHJvbGxlcmNvbm5lY3RlZCcsIHtuYW1lOiAndml2ZS1jb250cm9scyd9KTtcbiAgICB9XG5cbiAgICAvLyBNYWtlIGNvbnRyb2xsZXJzIHZpc2libGUgYWdhaW4gYWZ0ZXIgcmV0dXJuaW5nIHRvIGxvYmJ5LlxuICAgIC8vIE1heSBiZSBpbnZpc2libGUgc2luY2Ugd2UgaGlkZSBkdXJpbmcgbG9hZGluZyBzY3JlZW4gdW50aWwgcHJveHkgZ2FtZXBhZHMgYXJlXG4gICAgLy8gcGlja2VkIHVwLlxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbWVzc2FnZSA9PiB7XG4gICAgICBpZiAoIW1lc3NhZ2UuZGF0YSB8fCAhbWVzc2FnZS5kYXRhLmFjdGlvbikgeyByZXR1cm47IH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5pc0xvYWRpbmdTaXRlICYmIG1lc3NhZ2UuZGF0YS5hY3Rpb24gPT09ICdjb250ZW50UGFnZVJlYWR5Jykge1xuICAgICAgICB0aGlzLmVsLm9iamVjdDNELnZpc2libGUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lc3NhZ2UuZGF0YS5hY3Rpb24gPT09ICdzd2l0Y2hUb0xvYmJ5Jykge1xuICAgICAgICB0aGlzLnJlc3RvcmVHYW1lcGFkKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAob2xkRGF0YSkge1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICBpZiAoIW9sZERhdGEpIHsgcmV0dXJuOyB9XG5cbiAgICBpZiAoIWVsLmNvbXBvbmVudHNbJ3RyYWNrZWQtY29udHJvbHMnXSkgeyByZXR1cm47IH1cblxuICAgIGlmICghb2xkRGF0YS5pc0xvYWRpbmdTaXRlICYmIGRhdGEuaXNMb2FkaW5nU2l0ZSkge1xuICAgICAgZWwub2JqZWN0M0QudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy51c2VQcm94eUdhbWVwYWQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBObyBsb25nZXIgbG9hZGluZywgc2V0IGJhY2sgdG8gZ2FtZXBhZC5cbiAgICBpZiAob2xkRGF0YS5pc0xvYWRpbmdTaXRlICYmICFkYXRhLmlzTG9hZGluZ1NpdGUpIHsgdGhpcy5yZXN0b3JlR2FtZXBhZCgpOyB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdoaWxlIHNpdGUgaXMgbG9hZGluZywgdGhlIGJyb3dzZXIgc3dpdGNoZXMgZm9jdXMgdG8gY29udGVudCB0YWIgZm9yIGZhc3RlciBsb2FkaW5nLlxuICAgKiBEdXJpbmcgdGhpcyB0aW1lLCB0aGUgbG9iYnkgY2Fubm90IGRpcmVjdGx5IGFjY2VzcyBnYW1lcGFkIHBvc2UuXG4gICAqIFRvIHJlc29sdmUsIHRoZSBjb250ZW50IHRhYiBpbmplY3RzIGFuIEktRnJhbWUgdGhhdCByZWFkcyBnYW1lcGFkIGRhdGEgYW5kIHByb3hpZXMgaXQgdG9cbiAgICogdGhlIGxvYmJ5IHRhYiBieSB3cml0aW5nIHRvIHNoYXJlZCBsb2NhbFN0b3JhZ2UgdmlhIHNhbWUgZG9tYWluLlxuICAgKiBXaGlsZSBzaXRlIGlzIGxvYWRpbmcsIGNoZWNrIGxvY2FsU3RvcmFnZSBhbmQgcmVhZCBmb3IgYW55IGdhbWVwYWQgcG9zZS5cbiAgICovXG4gIHRpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaTtcbiAgICB2YXIgcHJveHlEYXRhO1xuXG4gICAgaWYgKCF0aGlzLmRhdGEuaXNMb2FkaW5nU2l0ZSkgeyByZXR1cm47IH1cblxuICAgIHByb3h5RGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm94eUdhbWVwYWRzJyk7XG4gICAgaWYgKCFwcm94eURhdGEpIHsgcmV0dXJuOyB9XG5cbiAgICBwcm94eURhdGEgPSBKU09OLnBhcnNlKHByb3h5RGF0YSk7XG4gICAgZm9yIChpID0gMDsgaSA8IHByb3h5RGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHByb3h5RGF0YVtpXSAmJiBwcm94eURhdGFbaV0uaGFuZCA9PT0gdGhpcy5kYXRhLmhhbmQgJiYgcHJveHlEYXRhW2ldLnBvc2UpIHtcbiAgICAgICAgdGhpcy5lbC5vYmplY3QzRC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wcm94eUNvbnRyb2xsZXIuYnV0dG9ucyA9IHByb3h5RGF0YVtpXS5idXR0b25zO1xuICAgICAgICB0aGlzLnByb3h5Q29udHJvbGxlci5wb3NlID0gcHJveHlEYXRhW2ldLnBvc2U7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVzZVByb3h5R2FtZXBhZDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIHByb3h5Q29udHJvbGxlciA9IHRoaXMucHJveHlDb250cm9sbGVyO1xuXG4gICAgaWYgKCFlbC5jb21wb25lbnRzWyd0cmFja2VkLWNvbnRyb2xzJ10uY29udHJvbGxlcikgeyByZXR1cm47IH1cblxuICAgIC8vIENsZWFyIGxvY2FsU3RvcmFnZSBwcm94eSBnYW1lcGFkcy5cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJveHlHYW1lcGFkcycsICcnKTtcblxuICAgIC8vIFN0b3JlIG9yaWdpbmFsIGdhbWVwYWQgdG8gcmVzdG9yZSBsYXRlci5cbiAgICB0aGlzLm9yaWdpbmFsR2FtZXBhZCA9IGVsLmNvbXBvbmVudHNbJ3RyYWNrZWQtY29udHJvbHMnXS5jb250cm9sbGVyO1xuICAgIHRoaXMub3JpZ2luYWxVcGRhdGVHYW1lcGFkID0gZWwuY29tcG9uZW50c1sndHJhY2tlZC1jb250cm9scyddLnVwZGF0ZUdhbWVwYWQ7XG5cbiAgICAvLyBTZXQgdXAgdHJhY2tlZC1jb250cm9scyB0byByZWFkIGZyb20gcHJveHkgY29udHJvbGxlci5cbiAgICBwcm94eUNvbnRyb2xsZXIuYXhlcyA9IHRoaXMub3JpZ2luYWxHYW1lcGFkLmF4ZXM7XG4gICAgcHJveHlDb250cm9sbGVyLmJ1dHRvbnMgPSB0aGlzLm9yaWdpbmFsR2FtZXBhZC5idXR0b25zO1xuICAgIHByb3h5Q29udHJvbGxlci5oYW5kID0gdGhpcy5vcmlnaW5hbEdhbWVwYWQuaGFuZDtcbiAgICBwcm94eUNvbnRyb2xsZXIucG9zZSA9IHRoaXMub3JpZ2luYWxHYW1lcGFkLnBvc2U7XG4gICAgZWwuY29tcG9uZW50c1sndHJhY2tlZC1jb250cm9scyddLmNvbnRyb2xsZXIgPSB0aGlzLnByb3h5Q29udHJvbGxlcjtcbiAgICBlbC5jb21wb25lbnRzWyd0cmFja2VkLWNvbnRyb2xzJ10udXBkYXRlR2FtZXBhZCA9ICgpID0+IHt9O1xuICB9LFxuXG4gIHJlc3RvcmVHYW1lcGFkOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBpZiAodGhpcy5vcmlnaW5hbEdhbWVwYWQpIHtcbiAgICAgIGVsLmNvbXBvbmVudHNbJ3RyYWNrZWQtY29udHJvbHMnXS5jb250cm9sbGVyID0gdGhpcy5vcmlnaW5hbEdhbWVwYWQ7XG4gICAgICBlbC5jb21wb25lbnRzWyd0cmFja2VkLWNvbnRyb2xzJ10udXBkYXRlR2FtZXBhZCA9IHRoaXMub3JpZ2luYWxVcGRhdGVHYW1lcGFkO1xuICAgIH1cbiAgICAvLyBIYWNrIHRpbWVvdXQgdG8gd2FpdCBmb3IgdGFiIHRvIHN3aXRjaCBiYWNrIGFuZCBsb2JieSB0byByZWdhaW4gY29udHJvbGxlciB0cmFja2luZy5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgZWwub2JqZWN0M0QudmlzaWJsZSA9IHRydWU7IH0sIDEwMDApO1xuICB9LFxuXG4gIGNvbmZpZzoge1xuICAgICdkYXlkcmVhbS1jb250cm9scyc6IHtcbiAgICAgIGFzc2V0OiAnI2NvbnRyb2xsZXItdml2ZScsXG4gICAgICBwYXJ0czogWydib2R5JywgJ21lbnUnLCAndG91Y2hwYWQnLCAndHJpZ2dlcicsICdsb2dvJ10sXG4gICAgICBjdXJzb3I6IHtkb3duRXZlbnRzOiBbJ3RyYWNrcGFkZG93biddLCB1cEV2ZW50czogWyd0cmFja3BhZHVwJ119XG4gICAgfSxcblxuICAgICdnZWFydnItY29udHJvbHMnOiB7XG4gICAgICBhc3NldDogJyNjb250cm9sbGVyLXZpdmUnLFxuICAgICAgcGFydHM6IFsnYm9keScsICdtZW51JywgJ3RvdWNocGFkJywgJ3RyaWdnZXInLCAnbG9nbyddLFxuICAgICAgY3Vyc29yOiB7ZG93bkV2ZW50czogWyd0cmFja3BhZGRvd24nXSwgdXBFdmVudHM6IFsndHJhY2twYWR1cCddfSxcbiAgICAgIHJheWNhc3Rlcjoge29yaWdpbjoge3g6IDAsIHk6IDAuMDAwNSwgejogMH19XG4gICAgfSxcblxuICAgICdvY3VsdXMtdG91Y2gtY29udHJvbHMnOiB7XG4gICAgICBhc3NldDogJyNjb250cm9sbGVyLW9jdWx1cycsXG4gICAgICBwYXJ0czogWydib2R5JywgJ3RodW1ic3RpY2snLCAnYnV0dG9uYScsICdidXR0b25iJywgJ3RyaWdnZXInLCAnbG9nbyddLFxuICAgICAgY3Vyc29yOiB7XG4gICAgICAgIGRvd25FdmVudHM6IFsndHJpZ2dlcmRvd24nLCAnZ3JpcGRvd24nLCAnYWJ1dHRvbmRvd24nLFxuICAgICAgICAgICAgICAgICAgICAgJ2JidXR0b25kb3duJywgJ3hidXR0b25kb3duJywgJ3lidXR0b25kb3duJ10sXG4gICAgICAgIHVwRXZlbnRzOiBbJ3RyaWdnZXJ1cCcsICdncmlwdXAnLCAnYWJ1dHRvbnVwJywgJ2JidXR0b251cCcsXG4gICAgICAgICAgICAgICAgICAgJ3hidXR0b251cCcsICd5YnV0dG9udXAnXVxuICAgICAgfSxcbiAgICAgIHJheWNhc3Rlcjoge1xuICAgICAgICBvcmlnaW46IHt4OiAwLCB5OiAtMC4wMDUsIHo6IDB9LFxuICAgICAgICBkaXJlY3Rpb246IHt4OiAwLCB5OiAtMSwgejogLTF9LFxuICAgICAgICBzaG93TGluZTogZmFsc2UsXG4gICAgICB9LFxuICAgICAgbGFzZXI6IHtcbiAgICAgICAgcG9zaXRpb246IHt4OiAwLCB5OiAtMC4wNiwgejogLTAuMDZ9LFxuICAgICAgICByb3RhdGlvbjoge3g6IDQ1LCB5OiAwLCB6OiAwfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAndml2ZS1jb250cm9scyc6IHtcbiAgICAgIGFzc2V0OiAnI2NvbnRyb2xsZXItdml2ZScsXG4gICAgICBwYXJ0czogWydib2R5JywgJ21lbnUnLCAndG91Y2hwYWQnLCAndHJpZ2dlcicsICdsb2dvJ10sXG4gICAgICBjdXJzb3I6IHtcbiAgICAgICAgZG93bkV2ZW50czogWyd0cmlnZ2VyZG93bicsICdncmlwZG93biddLFxuICAgICAgICB1cEV2ZW50czogWyd0cmlnZ2VydXAnLCAnZ3JpcHVwJ11cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ3dpbmRvd3MtbW90aW9uLWNvbnRyb2xzJzoge1xuICAgICAgYXNzZXQ6ICcjY29udHJvbGxlci12aXZlJyxcbiAgICAgIHBhcnRzOiBbJ2JvZHknLCAnbWVudScsICd0b3VjaHBhZCcsICd0cmlnZ2VyJywgJ2xvZ28nXSxcbiAgICAgIGN1cnNvcjoge1xuICAgICAgICBkb3duRXZlbnRzOiBbJ3RyYWNrcGFkZG93bicsICd0cmlnZ2VyZG93bicsICdncmlwZG93biddLFxuICAgICAgICB1cEV2ZW50czogWyd0cmFja3BhZHVwJywgJ3RyaWdnZXJ1cCcsICdncmlwdXAnXVxuICAgICAgfSxcbiAgICAgIHJheWNhc3Rlcjoge3Nob3dMaW5lOiBmYWxzZX1cbiAgICB9XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci5qcyIsIi8qKlxuICogQ3Vyc29yIG1lc2ggdG8gc2hvdyBhdCBpbnRlcnNlY3Rpb24gcG9pbnQgd2l0aCByZXNwZWN0aXZlIGhhbmQuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnY3Vyc29yLW1lc2gnLCB7XG4gIHNjaGVtYToge1xuICAgIGN1cnNvckVsOiB7dHlwZTogJ3NlbGVjdG9yJ31cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zY2VuZVBpdm90RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NlbmVQaXZvdCcpO1xuICB9LFxuXG4gIHRpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY3Vyc29yO1xuICAgIHZhciBjdXJzb3JFbCA9IHRoaXMuZGF0YS5jdXJzb3JFbDtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBpO1xuICAgIHZhciBpbnRlcnNlY3Rpb247XG4gICAgdmFyIGludGVyc2VjdGVkRWw7XG4gICAgdmFyIGludGVyc2VjdGlvblBvaW50O1xuICAgIHZhciBvYmplY3QzRCA9IHRoaXMuZWwub2JqZWN0M0Q7XG4gICAgdmFyIHNjZW5lUGl2b3RFbCA9IHRoaXMuc2NlbmVQaXZvdEVsO1xuXG4gICAgY3Vyc29yID0gY3Vyc29yRWwuY29tcG9uZW50cy5jdXJzb3I7XG4gICAgaWYgKCFjdXJzb3IpIHsgcmV0dXJuOyB9XG5cbiAgICAvLyBMb29rIGZvciB2YWxpZCBpbnRlcnNlY3Rpb24gdGFyZ2V0LlxuICAgIGludGVyc2VjdGVkRWwgPSBjdXJzb3JFbC5jb21wb25lbnRzLmN1cnNvci5pbnRlcnNlY3RlZEVsO1xuICAgIGlmICghaW50ZXJzZWN0ZWRFbCkgeyByZXR1cm47IH1cblxuICAgIC8vIFVwZGF0ZSBjdXJzb3IgbWVzaC5cbiAgICBpbnRlcnNlY3Rpb24gPSBjdXJzb3JFbC5jb21wb25lbnRzLnJheWNhc3Rlci5nZXRJbnRlcnNlY3Rpb24oaW50ZXJzZWN0ZWRFbCk7XG4gICAgZWwub2JqZWN0M0QucG9zaXRpb24uY29weShpbnRlcnNlY3Rpb24ucG9pbnQpO1xuICAgIGVsLm9iamVjdDNELnJvdGF0aW9uLmNvcHkoc2NlbmVQaXZvdEVsLm9iamVjdDNELnJvdGF0aW9uKTtcbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9jdXJzb3ItbWVzaC5qcyIsIi8qKlxuICogVG9nZ2xlIGZvciBvbmx5IG9uZSBjdXJzb3IgYXQgYSB0aW1lIGJldHdlZW4gdGhlIGNvbnRyb2xsZXJzLlxuICpcbiAqIFdoZW4gYW55IGJ1dHRvbiBvbiBjb250cm9sbGVyIHByZXNzZWQsIHRoYXQgaGFuZCBiZWNvbWVzIG5ldyBhY3RpdmUgY29udHJvbGxlci5cbiAqXG4gKiBGb3Igbm93LCBzdXBwb3J0IGZ1c2UgbW9kZSB3aXRoIGNhbWVyYSB3aGlsZSBzaXRlIGlzIGxvYWRpbmcgc2luY2UgbG9iYnkgdGFiXG4gKiBkb2VzIG5vdCBoYXZlIGFjY2VzcyB0byBjb250cm9sbGVyIHdoaWxlIHNpdGUgaXMgbG9hZGluZyBmb3IgY2FuY2VsIGJ1dHRvbi5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdjdXJzb3ItdG9nZ2xlcicsIHtcbiAgc2NoZW1hOiB7XG4gICAgY2FtZXJhOiB7ZGVmYXVsdDogJ2NhbWVyYSd9LFxuICAgIGN1cnNvck1lc2g6IHtkZWZhdWx0OiAnY3Vyc29yTWVzaCd9LFxuICAgIGZ1c2VNb2RlOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgIGhhbmRPbmU6IHtkZWZhdWx0OiAncHJpbWFyeUhhbmQnfSxcbiAgICBoYW5kVHdvOiB7ZGVmYXVsdDogJ3NlY29uZGFyeUhhbmQnfSxcbiAgICBtb3VzZUN1cnNvcjoge2RlZmF1bHQ6ICdtb3VzZUN1cnNvcid9LFxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgbW91c2VDdXJzb3I7XG5cbiAgICB0aGlzLmNhbWVyYUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGF0YS5jYW1lcmEpO1xuICAgIHRoaXMuY3Vyc29yTWVzaCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGEuY3Vyc29yTWVzaCk7XG5cbiAgICBtb3VzZUN1cnNvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGEubW91c2VDdXJzb3IpO1xuICAgIHRoaXMuZWwuc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKCdjb250cm9sbGVyY29ubmVjdGVkJywgKCkgPT4ge1xuICAgICAgLy8gU3dpdGNoIHRvIGNvbnRyb2xsZXIgY3Vyc29yLlxuICAgICAgdGhpcy50b2dnbGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGF0YS5oYW5kT25lKSxcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGEuaGFuZFR3byksXG4gICAgICAgICAgICAgICAgICB0aGlzLmN1cnNvck1lc2gpO1xuICAgICAgbW91c2VDdXJzb3Iuc2V0QXR0cmlidXRlKCdyYXljYXN0ZXInLCAnZW5hYmxlZCcsIGZhbHNlKTtcbiAgICB9KTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIChvbGREYXRhKSB7XG4gICAgaWYgKCFvbGREYXRhLmZ1c2VNb2RlICYmIHRoaXMuZGF0YS5mdXNlTW9kZSkge1xuICAgICAgLy8gU3dpdGNoIHRvIGNhbWVyYSBjdXJzb3IuXG4gICAgICB0aGlzLmxhc3RDdXJzb3JFbCA9IHRoaXMuY3VycmVudEN1cnNvckVsO1xuICAgICAgdGhpcy50b2dnbGUodGhpcy5jYW1lcmFFbCwgdGhpcy5jdXJyZW50Q3Vyc29yRWwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChvbGREYXRhLmZ1c2VNb2RlICYmICF0aGlzLmRhdGEuZnVzZU1vZGUpIHtcbiAgICAgIC8vIFN3aXRjaCBiYWNrIHRvIGN1cnNvciBiZWZvcmUgZnVzZSBtb2RlIHdhcyBlbmFibGVkLlxuICAgICAgdGhpcy50b2dnbGUodGhpcy5sYXN0Q3Vyc29yRWwsIHRoaXMuY2FtZXJhRWwpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU3dpdGNoIGN1cnNvciBtZXNoIGJldHdlZW4gaGFuZHMgZGVwZW5kaW5nIG9uIGxhc3QgY29udHJvbGxlciB1c2VkLlxuICAgKi9cbiAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBjdXJzb3JNZXNoO1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIHZhciBoYW5kT25lO1xuICAgIHZhciBoYW5kVHdvO1xuXG4gICAgaGFuZE9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGEuaGFuZE9uZSk7XG4gICAgaGFuZFR3byA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGEuaGFuZFR3byk7XG5cbiAgICBpZiAoIWhhbmRPbmUgfHwgIWhhbmRUd28pIHsgcmV0dXJuOyB9XG5cbiAgICBoYW5kT25lLnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sbGVyTGFzZXInKS5vYmplY3QzRC52aXNpYmxlID0gdHJ1ZTtcblxuICAgIGhhbmRPbmUuYWRkRXZlbnRMaXN0ZW5lcignYnV0dG9udXAnLCAoKSA9PiB7XG4gICAgICB0aGlzLnRvZ2dsZShoYW5kT25lLCBoYW5kVHdvLCBjdXJzb3JNZXNoKTtcbiAgICB9KTtcblxuICAgIGhhbmRUd28uYWRkRXZlbnRMaXN0ZW5lcignYnV0dG9udXAnLCAoKSA9PiB7XG4gICAgICB0aGlzLnRvZ2dsZShoYW5kVHdvLCBoYW5kT25lLCBjdXJzb3JNZXNoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogVG9nZ2xlIGhhbmQgcmF5Y2FzdGVyIGFuZCBjdXJzb3IgbWVzaCB2aXNpYmlsaXR5LlxuICAgKi9cbiAgdG9nZ2xlOiBmdW5jdGlvbiAoZW5hYmxlQ3Vyc29yRWwsIGRpc2FibGVDdXJzb3JFbCkge1xuICAgIHRoaXMuY3VycmVudEN1cnNvckVsID0gZW5hYmxlQ3Vyc29yRWw7XG5cbiAgICB0aGlzLmN1cnNvck1lc2gub2JqZWN0M0QudmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuY3Vyc29yTWVzaC5zZXRBdHRyaWJ1dGUoJ2N1cnNvci1tZXNoJywgJ2N1cnNvckVsJywgZW5hYmxlQ3Vyc29yRWwpO1xuXG4gICAgaWYgKGVuYWJsZUN1cnNvckVsLnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sbGVyTGFzZXInKSkge1xuICAgICAgZW5hYmxlQ3Vyc29yRWwucXVlcnlTZWxlY3RvcignLmNvbnRyb2xsZXJMYXNlcicpLm9iamVjdDNELnZpc2libGUgPSB0cnVlO1xuICAgIH1cbiAgICBlbmFibGVDdXJzb3JFbC5zZXRBdHRyaWJ1dGUoJ3JheWNhc3RlcicsICdlbmFibGVkJywgdHJ1ZSk7XG5cbiAgICBpZiAoZGlzYWJsZUN1cnNvckVsLnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sbGVyTGFzZXInKSkge1xuICAgICAgZGlzYWJsZUN1cnNvckVsLnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sbGVyTGFzZXInKS5vYmplY3QzRC52aXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICAgIGRpc2FibGVDdXJzb3JFbC5zZXRBdHRyaWJ1dGUoJ3JheWNhc3RlcicsICdlbmFibGVkJywgZmFsc2UpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4geyBjdXJzb3JNZXNoLm9iamVjdDNELnZpc2libGUgPSB0cnVlOyB9KTtcbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9jdXJzb3ItdG9nZ2xlci5qcyIsIi8qKlxuICogS2V5Ym9hcmQgYmluZGluZ3MgdG8gY29udHJvbCBjb250cm9sbGVyLlxuICogUG9zaXRpb24gY29udHJvbGxlciBpbiBmcm9udCBvZiBjYW1lcmEuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZGVidWctY29udHJvbGxlcicsIHtcbiAgc2NoZW1hOiB7XG4gICAgZW5hYmxlZDoge2RlZmF1bHQ6IGZhbHNlfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcHJpbWFyeUhhbmQ7XG4gICAgdmFyIHNlY29uZGFyeUhhbmQ7XG5cbiAgICBpZiAoIXRoaXMuZGF0YS5lbmFibGVkICYmICFBRlJBTUUudXRpbHMuZ2V0VXJsUGFyYW1ldGVyKCdkZWJ1ZycpKSB7IHJldHVybjsgfVxuXG4gICAgY29uc29sZS5sb2coJyVjIGRlYnVnLWNvbnRyb2xsZXIgZW5hYmxlZCAnLCAnYmFja2dyb3VuZDogIzExMTsgY29sb3I6IHJlZCcpO1xuXG4gICAgdGhpcy5pc1RyaWdnZXJEb3duID0gZmFsc2U7XG5cbiAgICBwcmltYXJ5SGFuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmltYXJ5SGFuZENvbnRhaW5lcicpO1xuICAgIHNlY29uZGFyeUhhbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vjb25kYXJ5SGFuZENvbnRhaW5lcicpO1xuXG4gICAgcHJpbWFyeUhhbmQuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHt4OiAwLjIsIHk6IDEuNSwgejogLTAuNX0pO1xuICAgIHNlY29uZGFyeUhhbmQuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHt4OiAtMC4yLCB5OiAxLjUsIHo6IC0wLjV9KTtcbiAgICBwcmltYXJ5SGFuZC5zZXRBdHRyaWJ1dGUoJ3JvdGF0aW9uJywge3g6IDAsIHk6IDAsIHo6IDB9KTtcbiAgICBzZWNvbmRhcnlIYW5kLnNldEF0dHJpYnV0ZSgncm90YXRpb24nLCB7eDogMCwgeTogMCwgejogMH0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2dCA9PiB7XG4gICAgICB2YXIgcHJpbWFyeVBvc2l0aW9uO1xuICAgICAgdmFyIHByaW1hcnlSb3RhdGlvbjtcbiAgICAgIHZhciBzZWNvbmRhcnlQb3NpdGlvbjtcblxuICAgICAgaWYgKCFldnQuc2hpZnRLZXkpIHsgcmV0dXJuOyB9XG5cbiAgICAgIC8vIDxzcGFjZT4gZm9yIHRyaWdnZXIuXG4gICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDMyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVHJpZ2dlckRvd24pIHtcbiAgICAgICAgICBwcmltYXJ5SGFuZC5lbWl0KCd0cmlnZ2VydXAnKTtcbiAgICAgICAgICB0aGlzLmlzVHJpZ2dlckRvd24gPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmltYXJ5SGFuZC5lbWl0KCd0cmlnZ2VyZG93bicpO1xuICAgICAgICAgIHRoaXMuaXNUcmlnZ2VyRG93biA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyA8bj4gc2Vjb25kYXJ5IGdyaXAuXG4gICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDc4KSB7XG4gICAgICAgIGlmICh0aGlzLnNlY29uZGFyeUdyaXBEb3duKSB7XG4gICAgICAgICAgc2Vjb25kYXJ5SGFuZC5lbWl0KCdncmlwdXAnKTtcbiAgICAgICAgICB0aGlzLnNlY29uZGFyeUdyaXBEb3duID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2Vjb25kYXJ5SGFuZC5lbWl0KCdncmlwZG93bicpO1xuICAgICAgICAgIHRoaXMuc2Vjb25kYXJ5R3JpcERvd24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIDxtPiBwcmltYXJ5IGdyaXAuXG4gICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDc3KSB7XG4gICAgICAgIGlmICh0aGlzLnByaW1hcnlHcmlwRG93bikge1xuICAgICAgICAgIHByaW1hcnlIYW5kLmVtaXQoJ2dyaXB1cCcpO1xuICAgICAgICAgIHRoaXMucHJpbWFyeUdyaXBEb3duID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJpbWFyeUhhbmQuZW1pdCgnZ3JpcGRvd24nKTtcbiAgICAgICAgICB0aGlzLnByaW1hcnlHcmlwRG93biA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUG9zaXRpb24gYmluZGluZ3MuXG4gICAgICBpZiAoIWV2dC5jdHJsS2V5KSB7XG4gICAgICAgIHByaW1hcnlQb3NpdGlvbiA9IHByaW1hcnlIYW5kLm9iamVjdDNELnBvc2l0aW9uO1xuICAgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDcyKSB7IHByaW1hcnlQb3NpdGlvbi54IC09IDAuMDEgfSAgLy8gaC5cbiAgICAgICAgaWYgKGV2dC5rZXlDb2RlID09PSA3NCkgeyBwcmltYXJ5UG9zaXRpb24ueSAtPSAwLjAxIH0gIC8vIGouXG4gICAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gNzUpIHsgcHJpbWFyeVBvc2l0aW9uLnkgKz0gMC4wMSB9ICAvLyBrLlxuICAgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDc2KSB7IHByaW1hcnlQb3NpdGlvbi54ICs9IDAuMDEgfSAgLy8gbC5cbiAgICAgICAgaWYgKGV2dC5rZXlDb2RlID09PSA1OSB8fCBldnQua2V5Q29kZSA9PT0gMTg2KSB7IHByaW1hcnlQb3NpdGlvbi56IC09IDAuMDEgfSAgLy8gOy5cbiAgICAgICAgaWYgKGV2dC5rZXlDb2RlID09PSAyMjIpIHsgcHJpbWFyeVBvc2l0aW9uLnogKz0gMC4wMSB9ICAvLyA7LlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2Vjb25kYXJ5UG9zaXRpb24gPSBzZWNvbmRhcnlIYW5kLm9iamVjdDNELnBvc2l0aW9uO1xuICAgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDcyKSB7IHNlY29uZGFyeVBvc2l0aW9uLnggLT0gMC4wMSB9ICAvLyBoLlxuICAgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDc0KSB7IHNlY29uZGFyeVBvc2l0aW9uLnkgLT0gMC4wMSB9ICAvLyBqLlxuICAgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDc1KSB7IHNlY29uZGFyeVBvc2l0aW9uLnkgKz0gMC4wMSB9ICAvLyBrLlxuICAgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDc2KSB7IHNlY29uZGFyeVBvc2l0aW9uLnggKz0gMC4wMSB9ICAvLyBsLlxuICAgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDU5IHx8IGV2dC5rZXlDb2RlID09PSAxODYpIHsgc2Vjb25kYXJ5UG9zaXRpb24ueiAtPSAwLjAxIH0gIC8vIDsuXG4gICAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gMjIyKSB7IHNlY29uZGFyeVBvc2l0aW9uLnogKz0gMC4wMSB9ICAvLyA7LlxuICAgICAgfVxuXG4gICAgICB2YXIgcHJpbWFyeVJvdGF0aW9uLCBzZWNvbmRhcnlSb3RhdGlvbjtcbiAgICAgIC8vIFJvdGF0aW9uIGJpbmRpbmdzLlxuICAgICAgaWYgKCFldnQuY3RybEtleSkge1xuICAgICAgICBwcmltYXJ5Um90YXRpb24gPSBwcmltYXJ5SGFuZC5nZXRBdHRyaWJ1dGUoJ3JvdGF0aW9uJyk7XG4gICAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gODkpIHsgcHJpbWFyeVJvdGF0aW9uLnggLT0gMTAgfSAgLy8geS5cbiAgICAgICAgaWYgKGV2dC5rZXlDb2RlID09PSA3OSkgeyBwcmltYXJ5Um90YXRpb24ueCArPSAxMCB9ICAvLyBvLlxuICAgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDg1KSB7IHByaW1hcnlSb3RhdGlvbi55IC09IDEwIH0gIC8vIHUuXG4gICAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gNzMpIHsgcHJpbWFyeVJvdGF0aW9uLnkgKz0gMTAgfSAgLy8gaS5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlY29uZGFyeVJvdGF0aW9uID0gc2Vjb25kYXJ5SGFuZC5nZXRBdHRyaWJ1dGUoJ3JvdGF0aW9uJyk7XG4gICAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gODkpIHsgc2Vjb25kYXJ5Um90YXRpb24ueCAtPSAxMCB9ICAvLyB5LlxuICAgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDc5KSB7IHNlY29uZGFyeVJvdGF0aW9uLnggKz0gMTAgfSAgLy8gby5cbiAgICAgICAgaWYgKGV2dC5rZXlDb2RlID09PSA4NSkgeyBzZWNvbmRhcnlSb3RhdGlvbi55IC09IDEwIH0gIC8vIHUuXG4gICAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gNzMpIHsgc2Vjb25kYXJ5Um90YXRpb24ueSArPSAxMCB9ICAvLyBpLlxuICAgICAgfVxuXG4gICAgICBwcmltYXJ5SGFuZC5zZXRBdHRyaWJ1dGUoJ3JvdGF0aW9uJywgQUZSQU1FLnV0aWxzLmNsb25lKHByaW1hcnlSb3RhdGlvbikpO1xuICAgICAgc2Vjb25kYXJ5SGFuZC5zZXRBdHRyaWJ1dGUoJ3JvdGF0aW9uJywgQUZSQU1FLnV0aWxzLmNsb25lKHNlY29uZGFyeVJvdGF0aW9uKSk7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvZGVidWctY29udHJvbGxlci5qcyIsIi8qKlxuICogTG9nIGN1cnNvciBldmVudHMuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZGVidWctY3Vyc29yJywge1xuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHsgcmV0dXJuOyB9XG5cbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBldnQgPT4ge1xuICAgICAgdGhpcy5sb2coJ21vdXNlZW50ZXInLCBldnQuZGV0YWlsLmludGVyc2VjdGVkRWwsICdncmVlbicpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZXZ0ID0+IHtcbiAgICAgIHRoaXMubG9nKCdtb3VzZWxlYXZlJywgZXZ0LmRldGFpbC5pbnRlcnNlY3RlZEVsLCAncmVkJyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZ0ID0+IHtcbiAgICAgIHRoaXMubG9nKCdjbGljaycsIGV2dC5kZXRhaWwuaW50ZXJzZWN0ZWRFbCwgJ2JsdWUnKTtcbiAgICB9KTtcbiAgfSxcblxuICBsb2c6IGZ1bmN0aW9uIChldmVudCwgaW50ZXJzZWN0ZWRFbCwgY29sb3IpIHtcbiAgICBpZiAoaW50ZXJzZWN0ZWRFbC5pZCkge1xuICAgICAgY29uc29sZS5sb2coYCVjWyR7ZXZlbnR9XSAke2ludGVyc2VjdGVkRWwuaWR9YCwgYGNvbG9yOiAke2NvbG9yfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhgJWNbJHtldmVudH1dYCwgYGNvbG9yOiAke2NvbG9yfWApO1xuICAgICAgY29uc29sZS5sb2coaW50ZXJzZWN0ZWRFbCk7XG4gICAgfVxuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2RlYnVnLWN1cnNvci5qcyIsIi8qKlxuICogS2V5Ym9hcmQgc2hvcnRjdXQgdG8gY2xpY2sgbGlua3MgKGkuZS4sIHNoaWZ0LzEsIHNoaWZ0LzIsIHNoaWZ0LzMuLi4pXG4gKiBhbmQgY2hhbmdlIHBhZ2VzIChpLmUuLCBwLzAsIHAvMSwgcC8yKS5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdkZWJ1Zy1saW5rcycsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaW5pdExpbmtDbGlja1Nob3J0Y3V0KCk7XG4gICAgdGhpcy5pbml0UGFnaW5hdGVTaG9ydGN1dCgpO1xuICB9LFxuXG4gIGluaXRMaW5rQ2xpY2tTaG9ydGN1dDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBsaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rcycpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGV2dCA9PiB7XG4gICAgICBpZiAoIWV2dC5zaGlmdEtleSkgeyByZXR1cm47IH1cbiAgICAgIGlmIChldnQua2V5Q29kZSA8IDQ5IHx8IGV2dC5rZXlDb2RlID4gNTQpIHsgcmV0dXJuOyB9XG4gICAgICBsaW5rcy5jaGlsZHJlbltldnQua2V5Q29kZSAtIDQ5XS5lbWl0KCdjbGljaycpO1xuICAgIH0pO1xuICB9LFxuXG4gIGluaXRQYWdpbmF0ZVNob3J0Y3V0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBLZXlEb3duID0gZmFsc2U7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2dCA9PiB7XG4gICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDgwKSB7IHBLZXlEb3duID0gdHJ1ZTsgfVxuICAgIH0pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZXZ0ID0+IHtcbiAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gODApIHsgcEtleURvd24gPSBmYWxzZTsgfVxuICAgICAgaWYgKCFwS2V5RG93bikgeyByZXR1cm47IH1cbiAgICAgIGlmIChldnQua2V5Q29kZSA8IDQ4IHx8IGV2dC5rZXlDb2RlID4gNTQpIHsgcmV0dXJuOyB9XG4gICAgICB0aGlzLmVsLmVtaXQoJ3BhZ2Vnb3RvJywge3BhZ2U6IGV2dC5rZXlDb2RlIC0gNDh9KTtcbiAgICB9KTtcbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9kZWJ1Zy1saW5rcy5qcyIsIi8qKlxuICogV2hlbiBjbGlja2VkLCBzd2l0Y2ggdG8gY29udGVudCB0YWIuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZW50ZXItc2l0ZS1idXR0b24nLCB7XG4gIHNjaGVtYToge1xuICAgIGVuYWJsZWQ6IHtkZWZhdWx0OiBmYWxzZX1cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5kYXRhLmVuYWJsZWQpIHsgcmV0dXJuOyB9XG4gICAgICBlbC5zY2VuZUVsLmVtaXQoJ2VudGVyc2l0ZScpO1xuICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHthY3Rpb246ICdzd2l0Y2hUb0NvbnRlbnQnLCBpc1JlZW50ZXI6IHRydWV9LCAnKicpO1xuICAgICAgZ3RhZygnZXZlbnQnLCAnZW50ZXJzaXRlYnV0dG9uJyk7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvZW50ZXItc2l0ZS1idXR0b24uanMiLCIvKipcbiAqIEZhZGUgc2hhZGVyIGhlbHBlci5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdmYWRlLXNoYWRlcicsIHtcbiAgZGVwZW5kZW5jaWVzOiBbJ21hdGVyaWFsJ10sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIG1hdGVyaWFsO1xuICAgIHZhciBtYXRyaXg7XG4gICAgdGhpcy5tYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuICAgIHRoaXMudXBkYXRlVW5pZm9ybXMgPSB0aGlzLnVwZGF0ZVVuaWZvcm1zLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2VudGVyLXZyJywgdGhpcy51cGRhdGVVbmlmb3Jtcyk7XG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ21hdGVyaWFsJywgJ3RyYW5zcGFyZW50JywgdHJ1ZSk7XG4gICAgdGhpcy51cGRhdGVVbmlmb3JtcygpO1xuICB9LFxuXG4gIHVwZGF0ZVVuaWZvcm1zOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgbWVzaDtcbiAgICB2YXIgbWF0ZXJpYWw7XG4gICAgdmFyIG1hdHJpeCA9IHRoaXMubWF0cml4O1xuXG4gICAgbWVzaCA9IGVsLmdldE9iamVjdDNEKCdtZXNoJyk7XG4gICAgaWYgKCFtZXNoKSB7IHJldHVybjsgfVxuICAgIG1hdGVyaWFsID0gbWVzaC5tYXRlcmlhbDtcbiAgICBtYXRyaXguZ2V0SW52ZXJzZShlbC5vYmplY3QzRC5tYXRyaXhXb3JsZCk7XG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuaW52ZXJzZU1hdHJpeCA9IHt2YWx1ZTogbWF0cml4fTtcbiAgfVxufSk7XG5cbkFGUkFNRS5yZWdpc3RlclNoYWRlcignZmFkZVNoYWRlcicsIHtcbiAgc2NoZW1hOiB7XG4gICAgY29sb3I6IHtkZWZhdWx0OiAnI0ZGRicsIHR5cGU6ICdjb2xvcicsIGlzOiAndW5pZm9ybSd9LFxuICAgIG9wYWNpdHk6IHtkZWZhdWx0OiAxLjAsIGlzOiAndW5pZm9ybSd9LFxuICAgIHNyYzoge2RlZmF1bHQ6ICcjd2hpdGVQaXhlbEltZycsIHR5cGU6ICdtYXAnLCBpczogJ3VuaWZvcm0nfVxuICB9LFxuXG4gIHZlcnRleFNoYWRlcjogcmVxdWlyZSgnLi9zaGFkZXJzL2ZhZGVWZXJ0ZXguZ2xzbCcpLFxuXG4gIGZyYWdtZW50U2hhZGVyOiByZXF1aXJlKCcuL3NoYWRlcnMvZmFkZUZyYWdtZW50Lmdsc2wnKVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9mYWRlLXNoYWRlci5qcyIsIi8qKlxuICogTXVsdGktY2hhbm5lbCBzaWduZWQgZGlzdGFuY2UgZmllbGQuXG4gKiBVc2VkIGJ5IHRleHQgY29tcG9uZW50LlxuICovXG5BRlJBTUUucmVnaXN0ZXJTaGFkZXIoJ2ZhZGVUZXh0U2hhZGVyJywge1xuICBzY2hlbWE6IHtcbiAgICBhbHBoYVRlc3Q6IHt0eXBlOiAnbnVtYmVyJywgaXM6ICd1bmlmb3JtJywgZGVmYXVsdDogMC41fSxcbiAgICBjb2xvcjoge3R5cGU6ICdjb2xvcicsIGlzOiAndW5pZm9ybScsIGRlZmF1bHQ6ICd3aGl0ZSd9LFxuICAgIG1hcDoge3R5cGU6ICdtYXAnLCBpczogJ3VuaWZvcm0nfSxcbiAgICBuZWdhdGU6IHt0eXBlOiAnYm9vbGVhbicsIGlzOiAndW5pZm9ybScsIGRlZmF1bHQ6IHRydWV9LFxuICAgIG9wYWNpdHk6IHt0eXBlOiAnbnVtYmVyJywgaXM6ICd1bmlmb3JtJywgZGVmYXVsdDogMS4wfVxuICB9LFxuXG4gIHJhdzogdHJ1ZSxcblxuICB2ZXJ0ZXhTaGFkZXI6IHJlcXVpcmUoJy4vc2hhZGVycy9mYWRlVGV4dFZlcnRleC5nbHNsJyksXG5cbiAgZnJhZ21lbnRTaGFkZXI6IHJlcXVpcmUoJy4vc2hhZGVycy9mYWRlVGV4dEZyYWdtZW50Lmdsc2wnKVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9mYWRlLXRleHQtc2hhZGVyLmpzIiwiQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdmZWVkLWNvbGxlY3Rpb24nLCB7XG4gIHNjaGVtYToge1xuICAgIGNvbGxlY3Rpb25JZDoge3R5cGU6ICdzdHJpbmcnfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKGVsLmNsb3Nlc3QoJ1tkYXRhLWlzLXNjcm9sbGluZ10nKSkgeyByZXR1cm47IH1cbiAgICAgIGVsLnNjZW5lRWwuZW1pdCgnY29sbGVjdGlvbnNldCcsIHRoaXMuZGF0YSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHsgZWwuc2NlbmVFbC5lbWl0KCdjb2xsZWN0aW9ub3BlbicpOyB9KTtcbiAgICB9KTtcbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9mZWVkLWNvbGxlY3Rpb24uanMiLCIvKipcbiAqIEZlZWQgc2luZ2xlIHRpbGUgb3BlbiBsaW5rIGRldGFpbC5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdmZWVkLXNpbmdsZScsIHtcbiAgc2NoZW1hOiB7XG4gICAgc2l0ZUlkOiB7dHlwZTogJ3N0cmluZyd9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBlbC5zY2VuZUVsLmVtaXQoJ2xpbmtkZXRhaWxvcGVuJywgdGhpcy5kYXRhKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9mZWVkLXNpbmdsZS5qcyIsImltcG9ydCBTSVRFX0RBVEEgZnJvbSAnLi4vc2l0ZXMuanNvbic7XG5cbnZhciBTSVRFX0lEUyA9IE9iamVjdC5rZXlzKFNJVEVfREFUQS5TSVRFUyk7XG5cbnZhciBkYXRlID0gbmV3IERhdGUoKTtcbnZhciBkYXRlU2VlZCA9IGAke2RhdGUuZ2V0WWVhcigpfS0ke2RhdGUuZ2V0TW9udGgoKX0tJHtkYXRlLmdldERhdGUoKX1gO1xuXG4vKipcbiAqIEdpdmVuIGFycmF5IG9mIHNpdGUgSURzIHNldCBvbiBkYXRhLXNpdGVzIChzdGF0aWNhbGx5KSwgcmVuZGVyIGZyb20gdGVtcGxhdGUuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZmVlZC10aWxlcycsIHtcbiAgc2NoZW1hOiB7XG4gICAgaXNEYWlseU1peDoge2RlZmF1bHQ6IGZhbHNlfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBmcmFnbWVudDtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIHJhbmRvbVNpdGVJZDtcbiAgICB2YXIgdGVtcGxhdGU7XG4gICAgdmFyIHNpdGU7XG4gICAgdmFyIHNpdGVJZHM7XG5cbiAgICBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgdGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlua1RlbXBsYXRlJykuaW5uZXJIVE1MO1xuXG4gICAgaWYgKGRhdGEuaXNEYWlseU1peCkge1xuICAgICAgc2l0ZUlkcyA9IFtdO1xuICAgICAgd2hpbGUgKHNpdGVJZHMubGVuZ3RoIDwgNikge1xuICAgICAgICByYW5kb21TaXRlSWQgPSB0aGlzLmdldFJhbmRvbVNpdGUoaSsrKTtcbiAgICAgICAgaWYgKHNpdGVJZHMuaW5kZXhPZihyYW5kb21TaXRlSWQpICE9PSAtMSkgeyBjb250aW51ZTsgfVxuICAgICAgICBzaXRlSWRzLnB1c2gocmFuZG9tU2l0ZUlkKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2l0ZUlkcyA9IEpTT04ucGFyc2UoZWwuZGF0YXNldC5zaXRlcyk7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMCA7IGkgPCBzaXRlSWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzaXRlID0gU0lURV9EQVRBLlNJVEVTW3NpdGVJZHNbaV1dO1xuICAgICAgZWwuYXBwZW5kQ2hpbGQoZWwuc2NlbmVFbC5zeXN0ZW1zLnN0YXRlLnJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCBzaXRlKSk7XG4gICAgfVxuICB9LFxuXG4gIGdldFJhbmRvbVNpdGU6IGZ1bmN0aW9uIChpKSB7XG4gICAgcmV0dXJuIFNJVEVfSURTW01hdGguZmxvb3Ioc2VlZGVkUmFuZG9tKGRhdGVTZWVkLCBpKSAqIFNJVEVfSURTLmxlbmd0aCldO1xuICB9XG59KTtcblxuZnVuY3Rpb24gc2VlZGVkUmFuZG9tIChzZWVkU3RyLCB4KSB7XG4gIHZhciBpO1xuICB2YXIgc2VlZDtcbiAgc2VlZCA9IDA7XG4gIGZvciAoaSA9IDA7IGkgPCBzZWVkU3RyLmxlbmd0aDsgaSsrKSB7IHNlZWQgKz0gc2VlZFN0ci5jaGFyQ29kZUF0KGkpOyB9XG4gIHJldHVybiBwYXJzZUZsb2F0KCcwLicgKyBNYXRoLnNpbihzZWVkICogOTk5OSAqIHggKyAxKS50b1N0cmluZygpLnN1YnN0cig3KSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9mZWVkLXRpbGVzLmpzIiwidmFyIGkgPSAwO1xuXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2dwdS1wcmVsb2FkZXInLCB7XG4gIHBsYXk6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaTtcbiAgICB2YXIgbGlua3M7XG4gICAgdmFyIGxvZ29zO1xuXG4gICAgbGlua3MgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5rSW1hZ2UnKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMucHJlbG9hZExpbmtJbWFnZShsaW5rc1tpXSk7XG4gICAgfVxuXG4gICAgbG9nb3MgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5rTG9nbycpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsb2dvcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5wcmVsb2FkTGlua0xvZ28obG9nb3NbaV0pO1xuICAgIH1cblxuICAgIHRoaXMucHJlbG9hZEtleWJvYXJkKCk7XG4gIH0sXG5cbiAgcHJlbG9hZExpbmtJbWFnZTogZnVuY3Rpb24gKGltYWdlRWwpIHtcbiAgICBpZiAoaW1hZ2VFbC5jb21wb25lbnRzLm1hdGVyaWFsLm1hdGVyaWFsLnVuaWZvcm1zLnNyYy52YWx1ZSkge1xuICAgICAgdGhpcy5wcmVsb2FkKGltYWdlRWwuY29tcG9uZW50cy5tYXRlcmlhbC5tYXRlcmlhbC51bmlmb3Jtcy5zcmMudmFsdWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ21hdGVyaWFsdGV4dHVyZWxvYWRlZCcsICgpID0+IHtcbiAgICAgIHRoaXMucHJlbG9hZChpbWFnZUVsLmNvbXBvbmVudHMubWF0ZXJpYWwubWF0ZXJpYWwudW5pZm9ybXMuc3JjLnZhbHVlKTtcbiAgICB9KTtcbiAgfSxcblxuICBwcmVsb2FkTGlua0xvZ286IGZ1bmN0aW9uIChsb2dvRWwpIHtcbiAgICBpZiAobG9nb0VsLmNvbXBvbmVudHMubWF0ZXJpYWwubWF0ZXJpYWwubWFwKSB7XG4gICAgICB0aGlzLnByZWxvYWQobG9nb0VsLmNvbXBvbmVudHMubWF0ZXJpYWwubWF0ZXJpYWwubWFwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbG9nb0VsLmFkZEV2ZW50TGlzdGVuZXIoJ21hdGVyaWFsdGV4dHVyZWxvYWRlZCcsICgpID0+IHtcbiAgICAgIHRoaXMucHJlbG9hZChsb2dvRWwuY29tcG9uZW50cy5tYXRlcmlhbC5tYXRlcmlhbC5tYXApO1xuICAgIH0pO1xuICB9LFxuXG4gIHByZWxvYWRLZXlib2FyZDogZnVuY3Rpb24gKCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrZXlib2FyZCcpLm9iamVjdDNELnRyYXZlcnNlKG5vZGUgPT4ge1xuICAgICAgaWYgKCFub2RlLm1hdGVyaWFsKSB7IHJldHVybjsgfVxuXG4gICAgICBpZiAobm9kZS5lbC5jb21wb25lbnRzLm1hdGVyaWFsKSB7XG4gICAgICAgIG5vZGUuZWwuYWRkRXZlbnRMaXN0ZW5lcignbWF0ZXJpYWx0ZXh0dXJlbG9hZGVkJywgKCkgPT4ge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLnByZWxvYWQobm9kZS5tYXRlcmlhbC5tYXApOyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGUuZWwuY29tcG9uZW50cy50ZXh0KSB7XG4gICAgICAgIG5vZGUuZWwuYWRkRXZlbnRMaXN0ZW5lcigndGV4dGZvbnRzZXQnLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wcmVsb2FkKG5vZGUubWF0ZXJpYWwudW5pZm9ybXMubWFwLnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwgdHJ1ZSk7XG4gIH0sXG5cbiAgcHJlbG9hZDogZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAgICBpKys7XG4gICAgaWYgKGkgPiAxNikgeyBpID0gMDsgfVxuICAgIHRoaXMuZWwucmVuZGVyZXIuc2V0VGV4dHVyZTJEKHRleHR1cmUsIGkpO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2dwdS1wcmVsb2FkZXIuanMiLCJBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2hlbHAtYmFjay1sb2JieScsIHtcbiAgc2NoZW1hOiB7XG4gICAgY29udGFpbmVyOiB7ZGVmYXVsdDogJ2hlbHBCYWNrTG9iYnknfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29udGFpbmVyO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kYXRhLmNvbnRhaW5lcik7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29udHJvbGxlcmNvbm5lY3RlZCcsIGV2dCA9PiB7XG4gICAgICBjb250YWluZXIuZGF0YXNldC5jb250cm9sbGVyID0gZXZ0LmRldGFpbC5uYW1lO1xuICAgIH0pO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2hlbHAtYmFjay1sb2JieS5qcyIsIi8qKlxuICogV2hlbiB0aGUgT2N1bHVzIHVuaXZlcnNhbCBtZW51IGlzIG9wZW5lZCBvciB0aGUgaGVhZHNldCBpcyByZW1vdmVkIHdpdGhpbiBjb250ZW50XG4gKiB0aGUgdXNlciBpcyBzZW50IGJhY2sgdG8gdGhlIGxvYmJ5LlxuICpcbiAqIFdoZW4gdGhlIHVuaXZlcnNhbCBtZW51IGlzIGNsb3NlZCB0aGUgbGluayBkZXRhaWwgb2YgdGhlIHByZXZpb3VzbHkgdmlzaXRlZFxuICogZXhwZXJpZW5jZSBpcyBkaXNwbGF5ZWQsIGFsbG93aW5nIHRoZSB1c2VyIHRvIGdvIGJhY2suXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnaGlnaC1wZXJmb3JtYW5jZScsIHtcbiAgc2NoZW1hOiB7XG4gICAgZGV2ZWxvcGVyVXJsOiB7dHlwZTogJ3N0cmluZyd9LFxuICAgIGxpbmtEZXRhaWxTaXRlSWQ6IHt0eXBlOiAnbnVtYmVyJ30sXG4gICAgc3dpdGNoZWRUb0xvYmJ5OiB7ZGVmYXVsdDogZmFsc2V9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIGlmICghd2luZG93LmhpZ2hQZXJmb3JtYW5jZSkgeyByZXR1cm47IH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndnJkaXNwbGF5Zm9jdXMnLCB0aGlzLm9uVlJEaXNwbGF5Rm9jdXMuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5ldmVudERldGFpbCA9IHt9O1xuICB9LFxuXG4gIG9uVlJEaXNwbGF5Rm9jdXM6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgc2NlbmVFbCA9IHRoaXMuZWw7XG5cbiAgICBpZiAoZGF0YS5zd2l0Y2hlZFRvTG9iYnkgPT09IGZhbHNlIHx8XG4gICAgICAgIGRhdGEubGlua0RldGFpbEluZGV4ID09PSAtMSB8fFxuICAgICAgICBkYXRhLmxpbmtEZXRhaWxJbmRleCA9PT0gMCAmJlxuICAgICAgICAhZGF0YS5kZXZlbG9wZXJVcmwpIHsgcmV0dXJuOyB9XG5cbiAgICB0aGlzLmV2ZW50RGV0YWlsLnNpdGVJZCA9IHRoaXMuZGF0YS5saW5rRGV0YWlsU2l0ZUlkO1xuICAgIHNjZW5lRWwuZW1pdCgnbGlua2RldGFpbG9wZW4nLCB0aGlzLmV2ZW50RGV0YWlsKTtcbiAgICBkYXRhLnN3aXRjaGVkVG9Mb2JieSA9IGZhbHNlO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2hpZ2gtcGVyZm9ybWFuY2UuanMiLCJpbXBvcnQgU0lURV9EQVRBIGZyb20gJy4uL3NpdGVzLmpzb24nO1xuXG52YXIgTlVNX1BBR0lOQVRFX0xJTksgPSAyO1xudmFyIE5VTV9QRVJfUEFHRSA9IDY7XG5cbnZhciBNQVJHSU5fWCA9IDAuNjY2O1xudmFyIE1BUkdJTl9ZID0gMC40MjtcblxuLyoqXG4gKiBMaW5rIHBvc2l0aW9ucywgcm90YXRpb25zLCBwYWdpbmF0aW9uIGZvciBjb2xsZWN0aW9ucy5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdsYXlvdXQtY29sbGVjdGlvbicsIHtcbiAgc2NoZW1hOiB7XG4gICAgY29sbGVjdGlvbklkOiB7ZGVmYXVsdDogJyd9LFxuICAgIGlzT3Blbjoge2RlZmF1bHQ6IGZhbHNlfSxcbiAgICBwYWdlOiB7ZGVmYXVsdDogMH1cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tncm91bmQnKTtcbiAgICB0aGlzLmNvbGxlY3Rpb25UaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xsZWN0aW9uVGl0bGUnKTtcbiAgICB0aGlzLm1hc2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyZWVuTWFzaycpO1xuXG4gICAgdGhpcy5pc1Njcm9sbGluZyA9IGZhbHNlO1xuICAgIHRoaXMucGFnZVdpZHRoID0gTUFSR0lOX1ggKiAzO1xuICAgIHRoaXMuc2Nyb2xsID0gMDtcbiAgICB0aGlzLnNjcm9sbEdvYWwgPSAwO1xuICAgIHRoaXMuc2Nyb2xsU3BlZWQgPSAwLjE7XG5cbiAgICAvLyBVcGRhdGUgbGlua3Mgd2hlbiBjb2xsZWN0aW9uIGlzIHNldC5cbiAgICB0aGlzLmVsLnNjZW5lRWwuYWRkRXZlbnRMaXN0ZW5lcignY29sbGVjdGlvbnNldCcsICgpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgdXBkYXRlOiAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb2xvckhlbHBlciA9IG5ldyBUSFJFRS5Db2xvcigpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvbGREYXRhKSB7XG4gICAgICB2YXIgdGludDtcbiAgICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuXG4gICAgICAvLyBVcGRhdGUgYmFja2dyb3VuZCB0aW50IGFuaW1hdGlvbnMuXG4gICAgICBpZiAoZGF0YS5jb2xsZWN0aW9uSWQpIHtcbiAgICAgICAgY29sb3JIZWxwZXIuc2V0KFNJVEVfREFUQS5DT0xMRUNUSU9OU1tkYXRhLmNvbGxlY3Rpb25JZF0uY29sb3IpO1xuICAgICAgICBjb2xvckhlbHBlci5tdWx0aXBseVNjYWxhcigwLjMpO1xuXG4gICAgICAgIHRpbnQgPSBgIyR7Y29sb3JIZWxwZXIuZ2V0SGV4U3RyaW5nKCl9YDtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSgnYW5pbWF0aW9uX19hZGR0aW50JywgJ3RvJywgdGludCk7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoJ2FuaW1hdGlvbl9fcmVtb3ZldGludCcsICdmcm9tJywgdGludCk7XG4gICAgICAgIHRoaXMubWFzay5zZXRBdHRyaWJ1dGUoJ2FuaW1hdGlvbl9fYWRkdGludCcsICd0bycsIHRpbnQpO1xuICAgICAgICB0aGlzLm1hc2suc2V0QXR0cmlidXRlKCdhbmltYXRpb25fX3JlbW92ZXRpbnQnLCAnZnJvbScsIHRpbnQpO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgbGlua3Mgb24gcGFnZSB0dXJuLlxuICAgICAgaWYgKG9sZERhdGEucGFnZSAhPT0gZGF0YS5wYWdlKSB7IHRoaXMudXBkYXRlTGF5b3V0KCk7IH1cblxuICAgICAgLy8gVXBkYXRlIGxpbmsgcmF5Y2FzdGFiaWxpdHkgd2l0aGluIHRoZSBjb2xsZWN0aW9uLlxuICAgICAgaWYgKG9sZERhdGEuaXNPcGVuICE9PSBkYXRhLmlzT3Blbikge1xuICAgICAgICB0aGlzLnVwZGF0ZUxpbmtSYXljYXN0YWJsZXMoZGF0YS5pc09wZW4pO1xuICAgICAgfVxuICAgIH07XG4gIH0pKCksXG5cbiAgdGljazogZnVuY3Rpb24gKHRpbWUsIGRlbHRhKSB7XG4gICAgaWYgKCF0aGlzLmlzU2Nyb2xsaW5nKSB7IHJldHVybjsgfVxuXG4gICAgaWYgKE1hdGguYWJzKHRoaXMuc2Nyb2xsR29hbCAtIHRoaXMuc2Nyb2xsKSA8IDAuMjUpIHtcbiAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWlzLXNjcm9sbGluZycsICcnKTtcbiAgICAgIHRoaXMudXBkYXRlTGlua1JheWNhc3RhYmxlcyh0aGlzLmRhdGEuaXNPcGVuKTtcbiAgICB9XG5cbiAgICBpZiAoTWF0aC5hYnModGhpcy5zY3JvbGxHb2FsIC0gdGhpcy5zY3JvbGwpIDwgMC4wMDEpIHtcbiAgICAgIHRoaXMuaXNTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2Nyb2xsID0gdGhpcy5zY3JvbGxHb2FsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNjcm9sbCArPSAodGhpcy5zY3JvbGxHb2FsIC0gdGhpcy5zY3JvbGwpICogKHRoaXMuc2Nyb2xsU3BlZWQpO1xuICAgIH1cblxuICAgIHRoaXMuZWwub2JqZWN0M0QucG9zaXRpb24ueCA9IC0xICogdGhpcy5zY3JvbGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwYWdlIHVwZGF0ZS5cbiAgICogVXBkYXRlIGxpbmsgcG9zaXRpb25zLCBhY3RpdmVuZXNzLCBwYWdpbmF0aW9uLCBldGMuXG4gICAqL1xuICB1cGRhdGVMYXlvdXQ6IGZ1bmN0aW9uIChvbGREYXRhKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgbGVmdEJvdW5kO1xuICAgIHZhciBpO1xuICAgIHZhciBpc0xlZnRQYWdpbmF0b3I7XG4gICAgdmFyIGlzUmlnaHRQYWdpbmF0b3I7XG4gICAgdmFyIHJpZ2h0Qm91bmQ7XG4gICAgdmFyIHJvdztcblxuICAgIHRoaXMubnVtUGFnZXMgPSBNYXRoLmNlaWwoZWwuY2hpbGRyZW4ubGVuZ3RoIC8gTlVNX1BFUl9QQUdFKTtcblxuICAgIC8vIEluZGV4IGJvdW5kIG9mIHRoZSBOVU1fUEVSX1BBR0UgbGlua3Mgb24gdGhlIGN1cnJlbnQgcGFnZS4gRG9lcyBub3QgaW5jbHVkZSB0aGUgdHdvXG4gICAgLy8gcGFnaW5hdG9yIGxpbmtzLlxuICAgIGxlZnRCb3VuZCA9ICh0aGlzLmRhdGEucGFnZSAqIE5VTV9QRVJfUEFHRSkgKyBOVU1fUEVSX1BBR0U7XG4gICAgcmlnaHRCb3VuZCA9IHRoaXMuZGF0YS5wYWdlICogTlVNX1BFUl9QQUdFO1xuXG4gICAgLy8gVG9nZ2xlIGxpbmsgYWN0aXZlbmVzcyBhbmQgcmF5Y2FzdGFiaWxpdHkuXG4gICAgZm9yIChpID0gMDsgaSA8IGVsLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluaztcbiAgICAgIHZhciBpc0FjdGl2ZTtcblxuICAgICAgbGluayA9IGVsLmNoaWxkcmVuW2ldO1xuXG4gICAgICAvLyBUb2dnbGUgcmF5Y2FzdGFibGUgb24gI2xpbmtJbWFnZS5cbiAgICAgIGlzQWN0aXZlID0gaSA+PSByaWdodEJvdW5kICYmIGkgPCBsZWZ0Qm91bmQ7XG4gICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnc3VwZXJsaW5rJywgJ2lzQWN0aXZlJywgaXNBY3RpdmUpO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgcG9zaXRpb24uXG4gICAgICByb3cgPSBpICUgMjtcbiAgICAgIGxpbmsub2JqZWN0M0QucG9zaXRpb24uc2V0KHRoaXMuZ2V0UG9zaXRpb25YKGkpLCByb3cgKiBNQVJHSU5fWSwgMCk7XG4gICAgICBsaW5rLm9iamVjdDNELnNjYWxlLnNldCgxLjIsIDEuMiwgMS4yKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgbGluayBhY3RzIGFzIGxlZnQgcGFnaW5hdG9yIGFuZCBzaGlmdCBsZWZ0IGEgYml0LlxuICAgICAgaXNMZWZ0UGFnaW5hdG9yID0gZmFsc2U7XG4gICAgICBpZiAoaSA9PT0gbGVmdEJvdW5kIHx8IGkgPT09IGxlZnRCb3VuZCArIDEgfHwgaSA9PT0gbGVmdEJvdW5kICsgMiB8fFxuICAgICAgICAgIGkgPT09IGxlZnRCb3VuZCArIDMpIHtcbiAgICAgICAgaXNMZWZ0UGFnaW5hdG9yID0gdHJ1ZTtcbiAgICAgICAgbGluay5vYmplY3QzRC5wb3NpdGlvbi54ICs9IDAuMjA7XG4gICAgICAgIGxpbmsub2JqZWN0M0QucG9zaXRpb24ueiA9IC0wLjE1O1xuICAgICAgfVxuICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ3N1cGVybGluaycsICdpc0xlZnRQYWdpbmF0b3InLCBpc0xlZnRQYWdpbmF0b3IpO1xuXG4gICAgICAvLyBDaGVjayBpZiBsaW5rIGFjdHMgYXMgcmlnaHQgcGFnaW5hdG9yIGFuZCBzaGlmdCByaWdodCBhIGJpdC5cbiAgICAgIGlzUmlnaHRQYWdpbmF0b3IgPSBmYWxzZTtcbiAgICAgIGlmIChpID09PSByaWdodEJvdW5kIC0gMSB8fCBpID09PSByaWdodEJvdW5kIC0gMiB8fCBpID09PSByaWdodEJvdW5kIC0gMyB8fFxuICAgICAgICAgIGkgPT09IHJpZ2h0Qm91bmQgLSA0KSB7XG4gICAgICAgIGlzUmlnaHRQYWdpbmF0b3IgPSB0cnVlO1xuICAgICAgICBsaW5rLm9iamVjdDNELnBvc2l0aW9uLnggLT0gMC4yMDtcbiAgICAgICAgbGluay5vYmplY3QzRC5wb3NpdGlvbi56ID0gLTAuMTU7XG4gICAgICB9XG4gICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnc3VwZXJsaW5rJywgJ2lzUmlnaHRQYWdpbmF0b3InLCBpc1JpZ2h0UGFnaW5hdG9yKTtcbiAgICB9XG5cbiAgICAvLyBUcmlnZ2VyIHNjcm9sbGluZyBoYW5kbGVkIGJ5IHRpY2suXG4gICAgdGhpcy5zdGFydFNjcm9sbGluZygpO1xuICB9LFxuXG4gIGdldFBvc2l0aW9uWDogZnVuY3Rpb24gKGkpIHtcbiAgICB2YXIgY29sO1xuICAgIGNvbCA9IE1hdGguZmxvb3IoaSAvIDIpO1xuICAgIHJldHVybiAoY29sICogTUFSR0lOX1gpIC0gTUFSR0lOX1g7XG4gIH0sXG5cbiAgc3RhcnRTY3JvbGxpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnNjcm9sbEdvYWwgPSB0aGlzLmRhdGEucGFnZSAqIHRoaXMucGFnZVdpZHRoO1xuICAgIHRoaXMudXBkYXRlTGlua1JheWNhc3RhYmxlcyhmYWxzZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1ha2UgbGlua3MgcmF5Y2FzdGFibGUgaWYgY29sbGVjdGlvbiBpcyBvcGVuLCBhbmQgdmljZS12ZXJzYS5cbiAgICovXG4gIHVwZGF0ZUxpbmtSYXljYXN0YWJsZXM6IGZ1bmN0aW9uIChpc09wZW4pIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBpO1xuICAgIHZhciBsaW5rc1JheWNhc3RhYmxlO1xuICAgIHZhciByYXljYXN0YWJsZXM7XG4gICAgcmF5Y2FzdGFibGVzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcmF5Y2FzdGFibGVdJyk7XG4gICAgZm9yIChpID0gMDsgaSA8IHJheWNhc3RhYmxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICByYXljYXN0YWJsZXNbaV0uc2V0QXR0cmlidXRlKCdyYXljYXN0YWJsZScsICcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJheWNhc3RhYmxlc1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ3JheWNhc3RhYmxlJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2xheW91dC1jb2xsZWN0aW9ucy5qcyIsInZhciBNQVJHSU5fWCA9IDAuNjY2O1xudmFyIFBBR0VfV0lEVEggPSBNQVJHSU5fWCAqIDM7XG5cbi8qKlxuICogTGluayBwb3NpdGlvbnMsIHJvdGF0aW9ucywgcGFnaW5hdGlvbi5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdsYXlvdXQtZmVlZCcsIHtcbiAgc2NoZW1hOiB7XG4gICAgaXNPcGVuOiB7ZGVmYXVsdDogdHJ1ZX0sXG4gICAgcGFnZToge2RlZmF1bHQ6IDB9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaXNTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnNjcm9sbCA9IDA7XG4gICAgdGhpcy5zY3JvbGxHb2FsID0gMDtcbiAgICB0aGlzLnNjcm9sbFNwZWVkID0gMC4xO1xuICAgIHRoaXMuc2V0UGFnZVJheWNhc3RhYmxlKDAsIHRydWUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcGFnZSB1cGRhdGUuXG4gICAqL1xuICB1cGRhdGU6IGZ1bmN0aW9uIChvbGREYXRhKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgIGlmICghKCdwYWdlJyBpbiBvbGREYXRhKSkgeyByZXR1cm47IH1cblxuICAgIGlmICh0aGlzLnZpc2libGVUaW1lb3V0KSB7IGNsZWFyVGltZW91dCh0aGlzLnZpc2libGVUaW1lb3V0KTsgfVxuXG4gICAgLy8gSGFuZGxlIHBhZ2UgdHVybi5cbiAgICBpZiAob2xkRGF0YS5wYWdlICE9PSBkYXRhLnBhZ2UpIHtcbiAgICAgIC8vIFByZS1yZW5kZXIgdXNlciBjb2xsZWN0aW9uIGlmIG9uIHVzZXIgY29sbGVjdGlvbiBwYWdlLlxuICAgICAgaWYgKGRhdGEucGFnZSA9PT0gLTEpIHtcbiAgICAgICAgZWwuc2NlbmVFbC5lbWl0KCdjb2xsZWN0aW9uc2V0Jywge2NvbGxlY3Rpb25JZDogJ3VzZXJjb2xsZWN0aW9uJ30sIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgLy8gVHJpZ2dlciBzY3JvbGxpbmcgaGFuZGxlZCBieSB0aWNrLlxuICAgICAgdGhpcy5zdGFydFNjcm9sbGluZygpO1xuXG4gICAgICAvLyBUb2dnbGUgdmlzaWJpbGl0eSBvZiBwYWdlcyBub3QgaW4gdmlldy5cbiAgICAgIHRoaXMuc2V0UGFnZVZpc2libGUoZGF0YS5wYWdlIC0gMSwgdHJ1ZSk7XG4gICAgICB0aGlzLnNldFBhZ2VWaXNpYmxlKGRhdGEucGFnZSwgdHJ1ZSk7XG4gICAgICB0aGlzLnNldFBhZ2VWaXNpYmxlKGRhdGEucGFnZSArIDEsIHRydWUpO1xuICAgICAgdGhpcy52aXNpYmxlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFBhZ2VWaXNpYmxlKGRhdGEucGFnZSAtIDIsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXRQYWdlVmlzaWJsZShkYXRhLnBhZ2UgKyAyLCBmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZXRQYWdlUmF5Y2FzdGFibGUob2xkRGF0YS5wYWdlLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKG9sZERhdGEuaXNPcGVuICE9PSBkYXRhLmlzT3Blbikge1xuICAgICAgdGhpcy5zZXRQYWdlUmF5Y2FzdGFibGUoZGF0YS5wYWdlLCBkYXRhLmlzT3Blbik7XG4gICAgfVxuICB9LFxuXG4gIHRpY2s6IGZ1bmN0aW9uICh0aW1lLCBkZWx0YSkge1xuICAgIGlmICghdGhpcy5pc1Njcm9sbGluZykgeyByZXR1cm47IH1cblxuICAgIGlmIChNYXRoLmFicyh0aGlzLnNjcm9sbEdvYWwgLSB0aGlzLnNjcm9sbCkgPCAwLjI1KSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1pcy1zY3JvbGxpbmcnLCAnJyk7XG4gICAgICB0aGlzLnNldFBhZ2VSYXljYXN0YWJsZSh0aGlzLmRhdGEucGFnZSwgdGhpcy5kYXRhLmlzT3Blbik7XG4gICAgfVxuXG4gICAgaWYgKE1hdGguYWJzKHRoaXMuc2Nyb2xsR29hbCAtIHRoaXMuc2Nyb2xsKSA8IDAuMDAxKSB7XG4gICAgICB0aGlzLmlzU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnNjcm9sbCA9IHRoaXMuc2Nyb2xsR29hbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zY3JvbGwgKz0gKHRoaXMuc2Nyb2xsR29hbCAtIHRoaXMuc2Nyb2xsKSAqICh0aGlzLnNjcm9sbFNwZWVkKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsLm9iamVjdDNELnBvc2l0aW9uLnggPSAtMSAqIHRoaXMuc2Nyb2xsO1xuICB9LFxuXG4gIHN0YXJ0U2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pc1Njcm9sbGluZyA9IHRydWU7XG4gICAgdGhpcy5zY3JvbGxHb2FsID0gdGhpcy5kYXRhLnBhZ2UgKiBQQUdFX1dJRFRIO1xuICB9LFxuXG4gIHNldFBhZ2VWaXNpYmxlOiBmdW5jdGlvbiAocGFnZU51bSwgdmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmICghZWwuY2hpbGRyZW5bcGFnZU51bSArIDFdKSB7IHJldHVybjsgfVxuICAgIC8vIEFkZCBvbmUgdG8gc2tpcCB1c2VyIGNvbGxlY3Rpb24uXG4gICAgZWwuY2hpbGRyZW5bcGFnZU51bSArIDFdLm9iamVjdDNELnZpc2libGUgPSB2YWx1ZTtcbiAgfSxcblxuICBzZXRQYWdlUmF5Y2FzdGFibGU6IGZ1bmN0aW9uIChwYWdlTnVtLCBpc1JheWNhc3RhYmxlKSB7XG4gICAgdmFyIGk7XG4gICAgdmFyIHBhZ2VFbDtcbiAgICB2YXIgcmF5Y2FzdGFibGVzO1xuICAgIC8vIEFkZCBvbmUgdG8gc2tpcCB1c2VyIGNvbGxlY3Rpb24uXG4gICAgcGFnZUVsID0gdGhpcy5lbC5jaGlsZHJlbltwYWdlTnVtICsgMV07XG4gICAgaWYgKCFwYWdlRWwpIHsgcmV0dXJuOyB9XG4gICAgcmF5Y2FzdGFibGVzID0gcGFnZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXJheWNhc3RhYmxlXScpO1xuICAgIGZvciAoaSA9IDA7IGkgPCByYXljYXN0YWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpc1JheWNhc3RhYmxlKSB7XG4gICAgICAgIHJheWNhc3RhYmxlc1tpXS5zZXRBdHRyaWJ1dGUoJ3JheWNhc3RhYmxlJyAsJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmF5Y2FzdGFibGVzW2ldLnJlbW92ZUF0dHJpYnV0ZSgncmF5Y2FzdGFibGUnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvbGF5b3V0LWZlZWQuanMiLCIvKipcbiAqIExpbmsgc2hhZGVyIGhlbHBlci5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdsaW5rLXNoYWRlcicsIHtcbiAgZGVwZW5kZW5jaWVzOiBbJ21hdGVyaWFsJ10sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIG1hdGVyaWFsO1xuICAgIHZhciBtYXRyaXg7XG4gICAgdGhpcy5tYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuICAgIHRoaXMudXBkYXRlVW5pZm9ybXMgPSB0aGlzLnVwZGF0ZVVuaWZvcm1zLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2VudGVyLXZyJywgdGhpcy51cGRhdGVVbmlmb3Jtcyk7XG4gICAgdGhpcy51cGRhdGVVbmlmb3JtcygpO1xuICB9LFxuXG4gIHVwZGF0ZVVuaWZvcm1zOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgbWVzaCA9IGVsLmdldE9iamVjdDNEKCdtZXNoJyk7XG4gICAgdmFyIG1hdGVyaWFsO1xuICAgIHZhciBtYXRyaXggPSB0aGlzLm1hdHJpeDtcbiAgICBpZiAoIW1lc2gpIHsgcmV0dXJuOyB9XG4gICAgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsO1xuICAgIG1hdHJpeC5nZXRJbnZlcnNlKGVsLm9iamVjdDNELm1hdHJpeFdvcmxkKTtcbiAgICBtYXRlcmlhbC51bmlmb3Jtcy5pbnZlcnNlTWF0cml4ID0ge3ZhbHVlOiBtYXRyaXh9O1xuICAgIGVsLnNldEF0dHJpYnV0ZSgnbWF0ZXJpYWwnLCAnbWVzaFBvc2l0aW9uJywgZWwub2JqZWN0M0QucG9zaXRpb24pO1xuICB9XG59KTtcblxuQUZSQU1FLnJlZ2lzdGVyU2hhZGVyKCdsaW5rU2hhZGVyJywge1xuICBzY2hlbWE6IHtcbiAgICBicmlnaHRuZXNzOiB7ZGVmYXVsdDogMS4wLCBpczogJ3VuaWZvcm0nfSxcbiAgICBnbGFyZToge3R5cGU6ICdudW1iZXInLCBkZWZhdWx0OiAwLjAsIGlzOiAndW5pZm9ybSd9LFxuICAgIG1lc2hQb3NpdGlvbjoge3R5cGU6ICd2ZWMzJywgaXM6ICd1bmlmb3JtJ30sXG4gICAgb3BhY2l0eToge2RlZmF1bHQ6IDEuMCwgaXM6ICd1bmlmb3JtJ30sXG4gICAgc3JjOiB7dHlwZTogJ21hcCcsIGlzOiAndW5pZm9ybSd9LFxuICAgIHV2WENsYW1wOiB7dHlwZTogJ2Zsb2F0JywgZGVmYXVsdDogMS4wLCBpczogJ3VuaWZvcm0nfSxcbiAgICB1dlhPZmZzZXQ6IHt0eXBlOiAnZmxvYXQnLCBkZWZhdWx0OiAwLjAsIGlzOiAndW5pZm9ybSd9XG4gIH0sXG5cbiAgdmVydGV4U2hhZGVyOiByZXF1aXJlKCcuL3NoYWRlcnMvbGlua1ZlcnRleC5nbHNsJyksXG5cbiAgZnJhZ21lbnRTaGFkZXI6IHJlcXVpcmUoJy4vc2hhZGVycy9saW5rRnJhZ21lbnQuZ2xzbCcpXG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2xpbmstc2hhZGVyLmpzIiwiLyoqXG4gKiBVcGRhdGUgbG9hZGluZyByaW5nIGFuaW1hdGlvbiBzcGVlZC5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdsb2FkaW5nLXJpbmcnLCB7XG4gIHNjaGVtYToge1xuICAgIGVycm9yQ29sb3I6IHtkZWZhdWx0OiAnI0VGMzA1NCd9LFxuICAgIGhhc0Vycm9yOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgIGlzTG9hZGluZ1NpdGU6IHtkZWZhdWx0OiBmYWxzZX0sXG4gICAgaXNTaXRlTG9hZGVkOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgIGxvYWRlZENvbG9yOiB7ZGVmYXVsdDogJyM1MEI1MjcnfSxcbiAgICBsb2FkaW5nQ29sb3I6IHtkZWZhdWx0OiAnI0ZGODUyMid9LFxuICB9LFxuXG4gIHBsYXk6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVsLmVtaXQoJ3N0YXJ0bG9hZGluZ3JpbmdhbmltYXRpb24nKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgaWYgKCFkYXRhLmlzU2l0ZUxvYWRlZCkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdtYXRlcmlhbCcsICdjb2xvcicsIGRhdGEubG9hZGluZ0NvbG9yKTtcbiAgICAgIGlmIChkYXRhLmlzTG9hZGluZ1NpdGUpIHtcbiAgICAgICAgLy8gU3BlZWQgdXAgYW5pbWF0aW9uIG9uIGxvYWRpbmcuXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnYW5pbWF0aW9uX19vcGFjaXR5JywgJ2R1cicsIDUwMClcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdhbmltYXRpb25fX3NjYWxlJywgJ2R1cicsIDUwMClcbiAgICAgIH1cbiAgICAgIGVsLmVtaXQoJ3N0YXJ0bG9hZGluZ3JpbmdhbmltYXRpb24nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlbC5lbWl0KCdzdG9wbG9hZGluZ3JpbmdhbmltYXRpb24nKTtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ21hdGVyaWFsJywgJ29wYWNpdHknLCAxKTtcbiAgICBlbC5vYmplY3QzRC5zY2FsZS5zZXQoMC44LCAwLjgsIDAuOCk7XG5cbiAgICBpZiAoZGF0YS5oYXNFcnJvcikge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdtYXRlcmlhbCcsICdjb2xvcicsIGRhdGEuZXJyb3JDb2xvcik7XG4gICAgfSBlbHNlIGlmIChkYXRhLmlzU2l0ZUxvYWRlZCkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdtYXRlcmlhbCcsICdjb2xvcicsIGRhdGEubG9hZGVkQ29sb3IpO1xuICAgIH1cbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9sb2FkaW5nLXJpbmcuanMiLCJBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2xvYWRpbmctc2NyZWVuJywge1xuICBwbGF5OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxvYWRpbmdTY3JlZW47XG4gICAgbG9hZGluZ1NjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyJyk7XG4gICAgbG9hZGluZ1NjcmVlbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxvYWRpbmdTY3JlZW4pO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2xvYWRpbmctc2NyZWVuLmpzIiwiLyoqXG4gKiBMb2dvIGFuaW1hdGlvbiBtYW5hZ2VtZW50LlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2xvZ28nLCB7XG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuXG4gICAgLy8gVHJpZ2dlciBhbmltYXRpb24uXG4gICAgZWwuc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKCduYXZpZ2F0ZScsICgpID0+IHsgZWwuZW1pdCgnbmF2aWdhdGUnLCBudWxsLCBmYWxzZSk7IH0pO1xuXG4gICAgZWwuc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZW50UGFnZUxvYWRlZCcsICgpID0+IHtcbiAgICAgIGVsLmVtaXQoJ3N0b3BuYXZpZ2F0ZScpO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdtYXRlcmlhbCcsICdvcGFjaXR5JywgMSk7XG4gICAgfSk7XG5cbiAgICBlbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbmNlbGxvYWRpbmcnLCAoKSA9PiB7XG4gICAgICBlbC5lbWl0KCdzdG9wbmF2aWdhdGUnKTtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnbWF0ZXJpYWwnLCAnb3BhY2l0eScsIDEpO1xuICAgIH0pO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL2xvZ28uanMiLCIvKipcbiAqIE5vdGlmeSBjb250ZW50IHNjcmlwdCB0byBub3RpZnkgdGFiIG1hbmFnZXIgdG8gbmF2aWdhdGUuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbmF2aWdhdGUnLCB7XG4gIHNjaGVtYToge1xuICAgIG9uOiB7ZGVmYXVsdDogJ2NsaWNrJ30sXG4gICAgdXJsOiB7dHlwZTogJ3N0cmluZyd9LFxuICAgIHNpdGVJZDoge3R5cGU6ICdzdHJpbmcnfVxuICB9LFxuXG4gIC8qKlxuICAgKiBVc2UgYHBsYXlgIHRvIGdpdmUgdGltZSBmb3IgbGlua3MgdG8gcmVuZGVyLlxuICAgKi9cbiAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGk7XG4gICAgdmFyIGxpbmtzO1xuICAgIHZhciB1cmw7XG5cbiAgICB0aGlzLmV2ZW50RGV0YWlsID0ge307XG4gICAgdGhpcy5wb3N0TWVzc2FnZURhdGEgPSB7YWN0aW9uOiAnbmF2aWdhdGVDb21tYW5kJ307XG5cbiAgICB0aGlzLnZpc2l0ZWRMaW5rcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Zpc2l0ZWRMaW5rcycpKTtcbiAgICBpZiAodGhpcy52aXNpdGVkTGlua3MgPT09IG51bGwpIHsgdGhpcy52aXNpdGVkTGlua3MgPSB7fTsgfVxuXG4gICAgLy8gU2V0IGFsbCBsaW5rcycgdmlzaXRlZCBhdHRyaWJ1dGUuXG4gICAgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGluaycpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgdXJsID0gbGlua3NbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLXVybCcpO1xuICAgICAgbGlua3NbaV0uc2V0QXR0cmlidXRlKCdzdXBlcmxpbmsnLCAnaXNWaXNpdGVkJywgdGhpcy52aXNpdGVkTGlua3NbdXJsXSAhPT0gdW5kZWZpbmVkKTtcbiAgICB9XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZGF0YS5vbiwgKCkgPT4ge1xuICAgICAgdmFyIHVybDtcblxuICAgICAgdGhpcy5ldmVudERldGFpbC51cmwgPSB0aGlzLmRhdGEudXJsO1xuICAgICAgdGhpcy5wb3N0TWVzc2FnZURhdGEudXJsID0gdGhpcy5kYXRhLnVybDtcbiAgICAgIGVsLnNjZW5lRWwuZW1pdCgnbmF2aWdhdGUnLCB0aGlzLmV2ZW50RGV0YWlsKTtcbiAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh0aGlzLnBvc3RNZXNzYWdlRGF0YSwgJyonKTtcblxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGxpbmstJHt0aGlzLmRhdGEuc2l0ZUlkfWApXG4gICAgICAgICAgICAgIC5zZXRBdHRyaWJ1dGUoJ3N1cGVybGluaycsICdpc1Zpc2l0ZWQnLCB0cnVlKTtcblxuICAgICAgdXJsID0gJycgKyB0aGlzLmRhdGEudXJsO1xuICAgICAgaWYgKHRoaXMudmlzaXRlZExpbmtzW3VybF0gPT09IHVuZGVmaW5lZCkgeyB0aGlzLnZpc2l0ZWRMaW5rc1t1cmxdID0gMDsgfVxuICAgICAgdGhpcy52aXNpdGVkTGlua3NbdXJsXSsrO1xuICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd2aXNpdGVkTGlua3MnLCBKU09OLnN0cmluZ2lmeSh0aGlzLnZpc2l0ZWRMaW5rcykpO1xuICAgIH0pO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL25hdmlnYXRlLmpzIiwidmFyIFRZUEVTID0ge1xuICBlcnJvcjogJyNjYTIyNDInLFxuICBpbmZvOiAnIzExMScsXG4gIHN1Y2Nlc3M6ICcjMzc3MmZmJ1xufTtcblxuLyoqXG4gKiBOb3RpZmljYXRpb24gYmFyLlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ25vdGlmaWNhdGlvbicsIHtcbiAgc2NoZW1hOiB7XG4gICAgbWVzc2FnZToge3R5cGU6ICdzdHJpbmcnfSxcbiAgICB0eXBlOiB7dHlwZTogJ3N0cmluZyd9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaGlkZU5vdGlmaWNhdGlvbiA9IHRoaXMuaGlkZU5vdGlmaWNhdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMudGV4dEVsID0gdGhpcy5lbC5jaGlsZHJlblswXTtcbiAgICB0aGlzLmJnRWwgPSB0aGlzLmVsLmNoaWxkcmVuWzFdO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICBpZiAoIWRhdGEubWVzc2FnZSkgeyByZXR1cm47IH1cblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgIGlmIChBRlJBTUUudXRpbHMuZGV2aWNlLmNoZWNrSGVhZHNldENvbm5lY3RlZCgpKSB7XG4gICAgICAgIGd0YWcoJ2V2ZW50JywgJ25vdGlmaWNhdGlvbmVycm9yJywge1xuICAgICAgICAgIGV2ZW50X2xhYmVsOiBlbC5zY2VuZUVsLnN5c3RlbXMuc3RhdGUuc3RhdGUuc2l0ZS51cmxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50ZXh0RWwuc2V0QXR0cmlidXRlKCd0ZXh0JywgJ3ZhbHVlJywgZGF0YS5tZXNzYWdlKTtcbiAgICB0aGlzLmJnRWwuc2V0QXR0cmlidXRlKCdzbGljZTknLCAnY29sb3InLCBUWVBFU1tkYXRhLnR5cGUgfHwgJ2luZm8nXSk7XG5cbiAgICAvLyBUZWxsIGNoaWxkcmVuIHRvIHNob3cuXG4gICAgZWwuZW1pdCgnbm90aWZpY2F0aW9ucmVjZWl2ZWQnKTtcbiAgICBzZXRUaW1lb3V0KHRoaXMuaGlkZU5vdGlmaWNhdGlvbiwgMjAwMDApO1xuICB9LFxuXG4gIGhpZGVOb3RpZmljYXRpb246IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBUZWxsIGNoaWxkcmVuIHRvIGhpZGUuXG4gICAgdGhpcy5lbC5lbWl0KCdub3RpZmljYXRpb25oaWRlJyk7XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvbm90aWZpY2F0aW9uLmpzIiwiaW1wb3J0IFNJVEVfREFUQSBmcm9tICcuLi9zaXRlcy5qc29uJztcblxudmFyIE5VTV9QQUdFUyA9IFNJVEVfREFUQS5GRUVELmxlbmd0aDtcblxuLyoqXG4gKiBEcmF3IHBhZ2luYXRpb24gZG90cyBhbmQgaGlnaGxpZ2h0IGFjdGl2ZSBvbmVzLlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3BhZ2luYXRpb24tZG90cycsIHtcbiAgc2NoZW1hOiB7XG4gICAgY3VycmVudFBhZ2U6IHtkZWZhdWx0OiAwfSxcbiAgICBtYXJnaW46IHtkZWZhdWx0OiAwLjA1fVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBkb3Q7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgTlVNX1BBR0VTOyBpKyspIHtcbiAgICAgIGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZW50aXR5Jyk7XG4gICAgICBkb3Quc2V0QXR0cmlidXRlKCdtaXhpbicsICdwYWdpbmF0aW9uRG90Jyk7XG4gICAgICBlbC5hcHBlbmRDaGlsZChkb3QpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYWN0aXZlO1xuICAgIHZhciBjaGlsZHJlbjtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBpO1xuXG4gICAgY2hpbGRyZW4gPSBlbC5jaGlsZHJlbjtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFjdGl2ZSA9IGkgPT09IGRhdGEuY3VycmVudFBhZ2U7XG4gICAgICBjaGlsZHJlbltpXS5zZXRBdHRyaWJ1dGUoJ21hdGVyaWFsJywge1xuICAgICAgICBjb2xvcjogYWN0aXZlID8gJyM4MkYyRTcnIDogJyMyMjInLFxuICAgICAgICBvcGFjaXR5OiBhY3RpdmUgPyAwLjggOiAwLjJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBwbGF5OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5lbC5jaGlsZHJlbjtcbiAgICB2YXIgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkcmVuW2ldLm9iamVjdDNELnBvc2l0aW9uLnggPSAtMSAqXG4gICAgICAgICh0aGlzLmRhdGEubWFyZ2luICogKGNoaWxkcmVuLmxlbmd0aCAtIDEpIC8gMikgK1xuICAgICAgICAgKGkgKiB0aGlzLmRhdGEubWFyZ2luKTtcbiAgICB9XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvcGFnaW5hdGlvbi1kb3RzLmpzIiwiLyoqXG4gKiBQYWdpbmF0ZSBsaW5rcyB3aGVuIGNsaWNrZWQuXG4gKiBIYW5kbGUgb3BhY2l0eS5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdwYWdpbmF0b3InLCB7XG4gIHNjaGVtYToge1xuICAgIGN1cnJlbnRQYWdlOiB7ZGVmYXVsdDogMH0sXG4gICAgZGlyZWN0aW9uOiB7dHlwZTogJ3N0cmluZyd9LFxuICAgIGhhc0xlZnQ6IHtkZWZhdWx0OiB0cnVlfSxcbiAgICBoYXNSaWdodDoge2RlZmF1bHQ6IHRydWV9LFxuICAgIHRhcmdldDoge2RlZmF1bHQ6ICcnfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuXG4gICAgLy8gSG92ZXIgaW4uIERvbid0IHVzZSBjdXJzb3IgYmVjYXVzZSBjbGljayB3aWxsIHRyaWdnZXIgbW91c2VsZWF2ZSBjYXVzaW5nIGZsYXNoaW5nIG9mXG4gICAgLy8gdGhlIGFuaW1hdGlvbi5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZXZ0ID0+IHtcbiAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSgpKSB7IHJldHVybjsgfVxuICAgICAgdGhpcy5pc0hvdmVyZWQgPSB0cnVlO1xuICAgICAgZWwuZW1pdCgncGFnaW5hdG9yZW50ZXInLCBudWxsLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICAvLyBIb3ZlciBvdXQuXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGV2dCA9PiB7XG4gICAgICBpZiAoIXRoaXMuaXNBY3RpdmUoKSkgeyByZXR1cm47IH1cbiAgICAgIHRoaXMuaXNIb3ZlcmVkID0gZmFsc2U7XG4gICAgICBlbC5lbWl0KCdwYWdpbmF0b3JsZWF2ZScsIG51bGwsIGZhbHNlKTtcbiAgICB9KTtcblxuICAgIC8vIFR1cm4gcGFnZSBvbiBjbGljay5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2dCA9PiB7XG4gICAgICBpZiAodGhpcy50YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWlzLXNjcm9sbGluZycpKSB7IHJldHVybjsgfVxuICAgICAgaWYgKGRhdGEuZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgdGhpcy50YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLWlzLXNjcm9sbGluZycsICcnKTtcbiAgICAgICAgZWwuc2NlbmVFbC5lbWl0KCdwYWdlbGVmdCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLWlzLXNjcm9sbGluZycsICcnKTtcbiAgICAgICAgZWwuc2NlbmVFbC5lbWl0KCdwYWdlcmlnaHQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIChvbGREYXRhKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgIHRoaXMudGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGF0YS50YXJnZXQgfHwgJ2ZlZWQnKTtcblxuICAgIC8vIFdhaXQgZm9yIHBhZ2UgdHVybi5cbiAgICBpZiAodGhpcy5lbC5nZXRPYmplY3QzRCgnbWVzaCcpKSB7XG4gICAgICB0aGlzLnVwZGF0ZU9wYWNpdHkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdvYmplY3QzZHNldCcsICgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGVPcGFjaXR5KCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBIaWRlIGlmIG5vIG1vcmUgcGFnZXMuXG4gICAgaWYgKG9sZERhdGEgJiYgb2xkRGF0YS5jdXJyZW50UGFnZSAhPT0gZGF0YS5jdXJyZW50UGFnZSAmJiB0aGlzLmlzSG92ZXJlZCAmJlxuICAgICAgICAhdGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICBlbC5lbWl0KCdwYWdpbmF0b3JsZWF2ZScsIG51bGwsIGZhbHNlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHBhZ2luYXRvciBhY3RpdmUgZGVwZW5kaW5nIG9uIHN0YXRlLlxuICAgKi9cbiAgaXNBY3RpdmU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICByZXR1cm4gKGRhdGEuZGlyZWN0aW9uID09PSAnbGVmdCcgJiYgZGF0YS5oYXNMZWZ0KSB8fFxuICAgICAgICAgICAoZGF0YS5kaXJlY3Rpb24gPT09ICdyaWdodCcgJiYgZGF0YS5oYXNSaWdodCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZhZGUgaW4gb3Igb3V0IHRoZSBwYWdpbmF0b3IuXG4gICAqL1xuICB1cGRhdGVPcGFjaXR5OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgc2hvdWxkQmVWaXNpYmxlO1xuICAgIHNob3VsZEJlVmlzaWJsZSA9IHRoaXMuaXNBY3RpdmUoKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChzaG91bGRCZVZpc2libGUgJiYgZWwuZ2V0T2JqZWN0M0QoJ21lc2gnKS5tYXRlcmlhbC5vcGFjaXR5ID09PSAwKSB7XG4gICAgICAgIGVsLmVtaXQoJ2ZhZGVpbicsIG51bGwsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGlmICghc2hvdWxkQmVWaXNpYmxlICYmIGVsLmdldE9iamVjdDNEKCdtZXNoJykubWF0ZXJpYWwub3BhY2l0eSA+IDApIHtcbiAgICAgICAgZWwuZW1pdCgnZmFkZW91dCcsIG51bGwsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL3BhZ2luYXRvci5qcyIsIi8qKlxuICogUGxheSBhdWRpbyBlbGVtZW50IG9uIGV2ZW50LlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3BsYXktYXVkaW8nLCB7XG4gIHNjaGVtYToge1xuICAgIGF1ZGlvOiB7dHlwZTogJ3N0cmluZyd9LFxuICAgIGV2ZW50OiB7dHlwZTogJ3N0cmluZyd9LFxuICAgIHZvbHVtZToge3R5cGU6ICdudW1iZXInLCBkZWZhdWx0OiAxfVxuICB9LFxuXG4gIG11bHRpcGxlOiB0cnVlLFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXVkaW87XG4gICAgYXVkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuZGF0YS5hdWRpbyk7XG4gICAgYXVkaW8udm9sdW1lID0gdGhpcy5kYXRhLnZvbHVtZTtcblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmRhdGEuZXZlbnQsIGV2dCA9PiB7XG4gICAgICBpZiAodGhpcy5kYXRhLmV2ZW50ID09PSAnbW91c2VlbnRlcicgJiZcbiAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbGlua0hpZ2hsaWdodCcpKSB7XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hZnJhbWV2ci9hZnJhbWUvaXNzdWVzLzMyNzZcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWF1ZGlvLnBhdXNlZCkge1xuICAgICAgICBhdWRpby5wYXVzZSgpO1xuICAgICAgICBhdWRpby5jdXJyZW50VGltZSA9IDBcbiAgICAgIH1cbiAgICAgIGF1ZGlvLnBsYXkoKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9wbGF5LWF1ZGlvLmpzIiwiLyoqXG4gKiBQcm94eSBwb3N0IG1lc3NhZ2VzIHdpdGggYWN0aW9ucyB0byBzdGF0ZSBoYW5kbGVyLlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3Bvc3QtbWVzc2FnZS1yZWNlaXZlcicsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBpc1ZlcnNpb25TZXQgPSBmYWxzZTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbWVzc2FnZSA9PiB7XG4gICAgICBpZiAoIW1lc3NhZ2UuZGF0YS5hY3Rpb24pIHsgcmV0dXJuOyB9XG5cbiAgICAgIGlmICghaXNWZXJzaW9uU2V0ICYmIG1lc3NhZ2UuZGF0YS52ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMuZWwuZW1pdCgndmVyc2lvbicsIG1lc3NhZ2UuZGF0YS5kaXNwbGF5VmVyc2lvbik7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZXJzaW9uJykuaW5uZXJIVE1MID1cbiAgICAgICAgICBgU3VwZXJtZWRpdW0gdiR7bWVzc2FnZS5kYXRhLmRpc3BsYXlWZXJzaW9ufWA7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdqYXZhc2NyaXB0IDwtLSBsb2JieScsIG1lc3NhZ2UpO1xuICAgICAgfVxuXG4gICAgICAvLyBFbWl0IHRvIHBhc3MgbWVzc2FnZSB0byBzdGF0ZS5cbiAgICAgIHRoaXMuZWwuZW1pdChtZXNzYWdlLmRhdGEuYWN0aW9uLCBtZXNzYWdlLmRhdGEsIGZhbHNlKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9wb3N0LW1lc3NhZ2UtcmVjZWl2ZXIuanMiLCJleHBvcnQgZGVmYXVsdCB7XG4gIGRlZmF1bHQ6IHt9LFxuICBwYXJzZTogZnVuY3Rpb24gb2JqZWN0UGFyc2UgKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSkgeyByZXR1cm4gbnVsbDsgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7IHJldHVybiB2YWx1ZTsgfVxuICAgIC8vIEFkZCBkb3VibGUgcXVvdGVzIGlmIG5vdCB0cnVlIEpTT04uXG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC8oWydcIl0pPyhbYS16QS1aMC05X10rKShbJ1wiXSk/Oi9nLCAnXCIkMlwiOiAnKTtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gIH0sXG4gIHN0cmluZ2lmeTogSlNPTi5zdHJpbmdpZnlcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9wcm9wZXJ0eVR5cGVzL29iamVjdC5qcyIsIkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgncmF5Y2FzdGFibGUnLCB7fSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9yYXljYXN0YWJsZS5qcyIsIi8qKlxuICogUGl2b3QgdGhlIHNjZW5lIHdoZW4gdXNlciBlbnRlcnMgVlIgdG8gZmFjZSB0aGUgbGlua3MuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgncmVjZW50ZXInLCB7XG4gIHNjaGVtYToge1xuICAgIHRhcmdldDoge2RlZmF1bHQ6ICcnfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2NlbmVFbCA9IHRoaXMuZWwuc2NlbmVFbDtcbiAgICB0aGlzLm1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG4gICAgdGhpcy5mcnVzdHVtID0gbmV3IFRIUkVFLkZydXN0dW0oKTtcbiAgICB0aGlzLnJvdGF0aW9uT2Zmc2V0ID0gMDtcbiAgICB0aGlzLmV1bGVyID0gbmV3IFRIUkVFLkV1bGVyKCk7XG4gICAgdGhpcy5ldWxlci5vcmRlciA9ICdZWFonO1xuICAgIHRoaXMubWVudVBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB0aGlzLnJlY2VudGVyID0gdGhpcy5yZWNlbnRlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2hlY2tJblZpZXdBZnRlclJlY2VudGVyID0gdGhpcy5jaGVja0luVmlld0FmdGVyUmVjZW50ZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLnRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5kYXRhLnRhcmdldCk7XG5cbiAgICAvLyBEZWxheSB0byBtYWtlIHN1cmUgd2UgaGF2ZSBhIHZhbGlkIHBvc2UuXG4gICAgc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKCdlbnRlci12cicsICgpID0+IHNldFRpbWVvdXQodGhpcy5yZWNlbnRlciwgMTAwKSk7XG4gICAgLy8gVXNlciBjYW4gYWxzbyByZWNlbnRlciB0aGUgbWVudSBtYW51YWxseS5cbiAgICBzY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ21lbnVkb3duJywgdGhpcy5yZWNlbnRlcik7XG4gICAgc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKCd0aHVtYnN0aWNrZG93bicsIHRoaXMucmVjZW50ZXIpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJywgdGhpcy5yZWNlbnRlcik7XG4gIH0sXG5cbiAgcmVjZW50ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXVsZXIgPSB0aGlzLmV1bGVyO1xuICAgIGV1bGVyLnNldEZyb21Sb3RhdGlvbk1hdHJpeCh0aGlzLmVsLnNjZW5lRWwuY2FtZXJhLmVsLm9iamVjdDNELm1hdHJpeFdvcmxkLCAnWVhaJyk7XG4gICAgdGhpcy5lbC5vYmplY3QzRC5yb3RhdGlvbi55ID0gZXVsZXIueSArIHRoaXMucm90YXRpb25PZmZzZXQ7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIG1lbnUgaXMgaW4gY2FtZXJhIGZydXN0dW0gaW4gbmV4dCB0aWNrIGFmdGVyIGEgZnJhbWUgaGFzIHJlbmRlcmVkLlxuICAgIHNldFRpbWVvdXQodGhpcy5jaGVja0luVmlld0FmdGVyUmVjZW50ZXIsIDApO1xuICB9LFxuXG4gIC8qXG4gICAqIFNvbWV0aW1lcyB0aGUgcXVhdGVybmlvbiByZXR1cm5zIHRoZSB5YXcgaW4gdGhlIFstMTgwLCAxODBdIHJhbmdlLlxuICAgKiBDaGVjayBpZiB0aGUgbWVudSBpcyBpbiB0aGUgY2FtZXJhIGZydXN0dW0gYWZ0ZXIgcmVjZW50ZXIgaXQgdG9cbiAgICogZGVjaWRlIGlmIHdlIGFwcGx5IGFuIG9mZnNldCBvciBub3QuXG4gICAqL1xuICBjaGVja0luVmlld0FmdGVyUmVjZW50ZXI6IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJvdHRvbVZlYzMgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIHZhciB0b3BWZWMzID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2FtZXJhID0gdGhpcy5lbC5zY2VuZUVsLmNhbWVyYTtcbiAgICAgIHZhciBmcnVzdHVtID0gdGhpcy5mcnVzdHVtO1xuICAgICAgdmFyIG1lbnVQb3NpdGlvbiA9IHRoaXMubWVudVBvc2l0aW9uO1xuXG4gICAgICBjYW1lcmEudXBkYXRlTWF0cml4KCk7XG4gICAgICBjYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKTtcbiAgICAgIGZydXN0dW0uc2V0RnJvbU1hdHJpeCh0aGlzLm1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LCBjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKSk7XG5cbiAgICAgIC8vIENoZWNrIGlmIG1lbnUgcG9zaXRpb24gKGFuZCBpdHMgYm91bmRzKSBhcmUgd2l0aGluIHRoZSBmcnVzdHVtLlxuICAgICAgLy8gQ2hlY2sgYm91bmRzIGluIGNhc2UgbG9va2luZyBhbmdsZWQgdXAgb3IgZG93biwgcmF0aGVyIHRoYW4gbWVudSBjZW50cmFsLlxuICAgICAgbWVudVBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLnRhcmdldC5vYmplY3QzRC5tYXRyaXhXb3JsZCk7XG4gICAgICBib3R0b21WZWMzLmNvcHkobWVudVBvc2l0aW9uKS55IC09IDM7XG4gICAgICB0b3BWZWMzLmNvcHkobWVudVBvc2l0aW9uKS55ICs9IDM7XG5cbiAgICAgIGlmIChmcnVzdHVtLmNvbnRhaW5zUG9pbnQobWVudVBvc2l0aW9uKSB8fFxuICAgICAgICAgIGZydXN0dW0uY29udGFpbnNQb2ludChib3R0b21WZWMzKSB8fFxuICAgICAgICAgIGZydXN0dW0uY29udGFpbnNQb2ludCh0b3BWZWMzKSkgeyByZXR1cm47IH1cblxuICAgICAgdGhpcy5yb3RhdGlvbk9mZnNldCA9IHRoaXMucm90YXRpb25PZmZzZXQgPT09IDAgPyBNYXRoLlBJIDogMDtcbiAgICAgIC8vIFJlY2VudGVyIGFnYWluIHdpdGggdGhlIG5ldyBvZmZzZXQuXG4gICAgICB0aGlzLnJlY2VudGVyKCk7XG4gICAgfTtcbiAgfSkoKSxcblxuICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVsLnNjZW5lRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW50ZXItdnInLCB0aGlzLnJlY2VudGVyKTtcbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9yZWNlbnRlci5qcyIsIi8qKlxuICogUmVmcmVzaCBidXR0b24uXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgncmVmcmVzaCcsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGVsLnNjZW5lRWwuZW1pdCgncmVmcmVzaCcpO1xuICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHthY3Rpb246ICdyZWZyZXNoQ29tbWFuZCd9LCAnKicpO1xuICAgIH0pO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL3JlZnJlc2guanMiLCIvKipcbiAqIEhhbmRsZSBwdXNoaW5nIGFuZCBwb3BwaW5nIG9mIHNjcmVlbnMgKGxheWVycykgYW5kIHRoZWlyIHotcG9zaXRpb24gYW5pbWF0aW9ucy5cbiAqIFN0YXRlIGtlZXBzIHRyYWNrIG9mIGN1cnJlbnQgc2NyZWVuIGFuZCBzY3JlZW4gaGlzdG9yeS5cbiAqIEFjdGlvbnMgd2lsbCBwdXNoIG9yIHBvcCBvbnRvIHNjcmVlbiBoaXN0b3J5LCB3aGljaCB3aWxsIHRyaWdnZXIgdXBkYXQgZSBoZXJlLlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3NjcmVlbi1tYW5hZ2VyJywge1xuICBzY2hlbWE6IHtcbiAgICBzY3JlZW46IHt0eXBlOiAnc3RyaW5nJ31cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1peGluO1xuXG4gICAgdGhpcy5tYXNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmVlbk1hc2snKTtcbiAgICB0aGlzLnNjcmVlbnMgPSB7fTtcbiAgICB0aGlzLnNjcmVlbkhpc3RvcnkgPSB0aGlzLmVsLnN5c3RlbXMuc3RhdGUuc3RhdGUuc2NyZWVuSGlzdG9yeTtcbiAgICB0aGlzLnByZXZTY3JlZW4gPSAnJztcbiAgICB0aGlzLnByZXZTY3JlZW5IaXN0b3J5TGVuZ3RoID0gMDtcblxuICAgIC8vIENyZWF0ZSBhbmltYXRpb24gZm9yIHNjcmVlbiBsYXllcnMuXG4gICAgbWl4aW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLW1peGluJyk7XG4gICAgbWl4aW4uc2V0QXR0cmlidXRlKCdpZCcsICdzY3JlZW4nKTtcbiAgICBtaXhpbi5zZXRBdHRyaWJ1dGUoJ2FuaW1hdGlvbl9fc2NyZWVubWFuYWdlcicsICdwcm9wZXJ0eTogb2JqZWN0M0QucG9zaXRpb24uejsgZHVyOiAyMDA7IGVhc2luZzogZWFzZUluT3V0Q3ViaWM7IGRlbGF5OiA1MDsgc3RhcnRFdmVudHM6IHNjcmVlbm1hbmFnZXInKTtcbiAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ2EtYXNzZXRzJykuYXBwZW5kQ2hpbGQobWl4aW4pO1xuICAgIHRoaXMubWl4aW4gPSBtaXhpbjtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIChvbGREYXRhKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgIC8vIE9ubHkgcnVuIHVwZGF0ZSBvbiB1cGRhdGVzLlxuICAgIGlmICghKCdzY3JlZW4nIGluIG9sZERhdGEpKSB7IHJldHVybjsgfVxuXG4gICAgLy8gU2hvdyBtYXNrIHdoZW4gc2NyZWVuIHNldC5cbiAgICBpZiAoIW9sZERhdGEuc2NyZWVuICYmIGRhdGEuc2NyZWVuKSB7IHRoaXMubWFzay5lbWl0KCdmYWRlaW4nKTsgfVxuXG4gICAgLy8gSGlkZSBtYXNrIHdoZW4gbm8gbW9yZSBzY3JlZW5zLlxuICAgIGlmIChvbGREYXRhLnNjcmVlbiAmJiAhZGF0YS5zY3JlZW4pIHsgdGhpcy5tYXNrLmVtaXQoJ2ZhZGVvdXQnKTsgfVxuXG4gICAgLy8gRGV0ZWN0IHB1c2hlcyBhbmQgcG9wcy5cbiAgICBpZiAodGhpcy5zY3JlZW5IaXN0b3J5Lmxlbmd0aCA+IHRoaXMucHJldlNjcmVlbkhpc3RvcnlMZW5ndGgpIHtcbiAgICAgIHRoaXMuaGFuZGxlUHVzaCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZVBvcCgpO1xuICAgIH1cblxuICAgIHRoaXMuc3RvcmVQcmV2aW91c1NjcmVlbigpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQdXNoIGJhY2sgcHJldmlvdXMgc2NyZWVuLlxuICAgKi9cbiAgaGFuZGxlUHVzaDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcmV2U2NyZWVuO1xuICAgIHZhciBzY3JlZW5zID0gdGhpcy5zY3JlZW5zO1xuICAgIHZhciBzY3JlZW5IaXN0b3J5ID0gdGhpcy5zY3JlZW5IaXN0b3J5O1xuXG4gICAgcHJldlNjcmVlbiA9IHNjcmVlbkhpc3RvcnkubGVuZ3RoID09PSAxXG4gICAgICA/ICdtYWluJ1xuICAgICAgOiBzY3JlZW5IaXN0b3J5W3NjcmVlbkhpc3RvcnkubGVuZ3RoIC0gMl07XG5cbiAgICAvLyBVcGRhdGUgYW5pbWF0aW9uIGFuZCB0cmlnZ2VyIGl0LlxuICAgIHNjcmVlbnNbcHJldlNjcmVlbl0uc2V0QXR0cmlidXRlKFxuICAgICAgJ2FuaW1hdGlvbl9fc2NyZWVubWFuYWdlcicsICd0bycsIHNjcmVlbkhpc3RvcnkubGVuZ3RoICogLTAuNCk7XG4gICAgc2NyZWVuc1twcmV2U2NyZWVuXS5lbWl0KCdzY3JlZW5tYW5hZ2VyJywgbnVsbCwgZmFsc2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQdWxsIGZvcndhcmQgY3VycmVudCBzY3JlZW4uXG4gICAqL1xuICBoYW5kbGVQb3A6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2NyZWVuO1xuICAgIHZhciBzY3JlZW5zID0gdGhpcy5zY3JlZW5zO1xuICAgIHZhciBzY3JlZW5IaXN0b3J5ID0gdGhpcy5zY3JlZW5IaXN0b3J5O1xuXG4gICAgc2NyZWVuID0gc2NyZWVuSGlzdG9yeS5sZW5ndGggPT09IDBcbiAgICAgID8gJ21haW4nXG4gICAgICA6IHNjcmVlbkhpc3Rvcnlbc2NyZWVuSGlzdG9yeS5sZW5ndGggLSAxXTtcblxuICAgIC8vIFVwZGF0ZSBhbmltYXRpb24gYW5kIHRyaWdnZXIgaXQuXG4gICAgc2NyZWVuc1tzY3JlZW5dLnNldEF0dHJpYnV0ZSgnYW5pbWF0aW9uX19zY3JlZW5tYW5hZ2VyJywgJ3RvJywgMCk7XG4gICAgc2NyZWVuc1tzY3JlZW5dLmVtaXQoJ3NjcmVlbm1hbmFnZXInLCBudWxsLCBmYWxzZSk7XG5cbiAgICAvLyBFbWl0IHRvIHRyaWdnZXIgYW5pbWF0aW9uIHRpbWVsaW5lIGFuZCB0ZWxsIHN0YXRlIHRvIGNsb3NlIHRoZSBzY3JlZW5zLlxuICAgIGlmICh0aGlzLnByZXZTY3JlZW4pIHtcbiAgICAgIHRoaXMuZWwuZW1pdChgc2NyZWVucG9wLSR7dGhpcy5wcmV2U2NyZWVufWApO1xuICAgIH1cbiAgfSxcblxuICBzdG9yZVByZXZpb3VzU2NyZWVuOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjcmVlbkhpc3RvcnkgPSB0aGlzLnNjcmVlbkhpc3Rvcnk7XG4gICAgdGhpcy5wcmV2U2NyZWVuID0gc2NyZWVuSGlzdG9yeVtzY3JlZW5IaXN0b3J5Lmxlbmd0aCAtIDFdIHx8ICcnO1xuICAgIHRoaXMucHJldlNjcmVlbkhpc3RvcnlMZW5ndGggPSBzY3JlZW5IaXN0b3J5Lmxlbmd0aDtcbiAgfSxcblxuICByZWdpc3RlclNjcmVlbjogZnVuY3Rpb24gKHNjcmVlbkVsLCBuYW1lKSB7XG4gICAgdGhpcy5zY3JlZW5zW25hbWVdID0gc2NyZWVuRWw7XG5cbiAgICAvLyBSZWFkeSB1cCB0aGUgcG9zaXRpb24gWiBhbmltYXRpb24gdG8gc2NyZWVuLlxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2NyZWVuRWwuc2V0QXR0cmlidXRlKFxuICAgICAgICAnbWl4aW4nLFxuICAgICAgICAoc2NyZWVuRWwuZ2V0QXR0cmlidXRlKCdtaXhpbicpIHx8ICcnKSArICcgJyArICdzY3JlZW4nXG4gICAgICApO1xuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBTY3JlZW4gZGVmaW5lIHRoZW1zZWx2ZXMuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnc2NyZWVuJywge1xuICBzY2hlbWE6IHtcbiAgICBuYW1lOiB7dHlwZTogJ3N0cmluZyd9XG4gIH0sXG5cbiAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgZWwuc2NlbmVFbC5jb21wb25lbnRzWydzY3JlZW4tbWFuYWdlciddLnJlZ2lzdGVyU2NyZWVuKGVsLCB0aGlzLmRhdGEubmFtZSk7XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvc2NyZWVuLW1hbmFnZXIuanMiLCJ2YXIgYWxnb2xpYXNlYXJjaCA9IHJlcXVpcmUoJ2FsZ29saWFzZWFyY2gvbGl0ZScpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vbGliL3V0aWxzJyk7XG5cbnZhciBjbGllbnQgPSBhbGdvbGlhc2VhcmNoKCdRVUxUT1kzWldVJywgJzRhYzUzMmQzZGRmY2FkY2VjZDM5NTQ4OTQwNTE1MjdlJyk7XG52YXIgaW5kZXggPSBjbGllbnQuaW5pdEluZGV4KCdzaXRlcycpO1xuXG4vKipcbiAqIFNlYXJjaCBpbnB1dC4gVHJpZ2dlciBzZWFyY2ggb24gY2hhbmdlLlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3NlYXJjaC1pbnB1dCcsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdGhpcy5ldmVudERldGFpbCA9IHtyZXN1bHRzOiBbXX07XG4gICAgdGhpcy5xdWVyeSA9IHt9O1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGV2dCA9PiB7XG4gICAgICB0aGlzLnNlYXJjaChldnQuZGV0YWlsKTtcbiAgICB9KTtcbiAgfSxcblxuICBzZWFyY2g6IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgIHZhciBjbGllbnQ7XG4gICAgdGhpcy5xdWVyeS5xdWVyeSA9IHF1ZXJ5O1xuICAgIGluZGV4LnNlYXJjaCh0aGlzLnF1ZXJ5LCAoZXJyLCBjb250ZW50KSA9PiB7XG4gICAgICBpZiAoIWNvbnRlbnQpIHsgcmV0dXJuOyB9XG4gICAgICB0aGlzLmV2ZW50RGV0YWlsLmhpdHMgPSBjb250ZW50LmhpdHM7XG4gICAgICB0aGlzLmVsLnNjZW5lRWwuZW1pdCgnc2VhcmNocmVzdWx0cycsIHRoaXMuZXZlbnREZXRhaWwpO1xuICAgICAgaWYgKHRoaXMucXVlcnkubGVuZ3RoID4gNCkge1xuICAgICAgICBndGFnKCdldmVudCcsICdzZWFyY2gnLCB7dmFsdWU6IHRoaXMucXVlcnl9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogU2VhcmNoIHJlc3VsdC4gT3BlbiBsaW5rIGRldGFpbCBvbiBjbGljay5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdzZWFyY2gtcmVzdWx0Jywge1xuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKCFlbC5vYmplY3QzRC52aXNpYmxlKSB7IHJldHVybjsgfVxuICAgICAgZWwuc2NlbmVFbC5lbWl0KCdsaW5rZGV0YWlsb3BlbnNlYXJjaCcsIGVsLmRhdGFzZXQpO1xuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBTZWFyY2ggcmVzdWx0IGNvbnRhaW5lciBhbmQgcmVuZGVyZXIuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnc2VhcmNoLXJlc3VsdC1saXN0Jywge1xuICBzY2hlbWE6IHtcbiAgICBpc1NlYXJjaGluZzoge2RlZmF1bHQ6IGZhbHNlfSxcbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHRoaXMuaGl0cyA9IG51bGw7XG4gICAgLy8gUmUtcmVuZGVyIHJlc3VsdHMgd2hlbiBuZXcgc2VhcmNoIHJlc3VsdHMgY29tZSBpbi5cbiAgICBlbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ3NlYXJjaHJlc3VsdHMnLCBldnQgPT4ge1xuICAgICAgdGhpcy5oaXRzID0gZXZ0LmRldGFpbC5oaXRzO1xuICAgICAgZWwub2JqZWN0M0QudmlzaWJsZSA9IHRoaXMuZGF0YS5pc1NlYXJjaGluZyAmJiAhIXRoaXMuaGl0cy5sZW5ndGg7XG4gICAgICByZW5kZXJSZXN1bHRzKGVsLCB0aGlzLmhpdHMpO1xuICAgIH0pO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gSGlkZSByZXN1bHRzIGNvbnRhaW5lciBpZiBub3Qgc2VhcmNoaW5nLlxuICAgIGlmICghdGhpcy5kYXRhLmlzU2VhcmNoaW5nKSB7XG4gICAgICB0aGlzLmVsLm9iamVjdDNELnZpc2libGUgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaGl0cyAmJiB0aGlzLmhpdHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmVsLm9iamVjdDNELnZpc2libGUgPSB0cnVlO1xuICAgIH1cbiAgfSxcbn0pO1xuXG4vKipcbiAqIFJlbmRlciBzZWFyY2ggcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyUmVzdWx0cyAoZWwsIHJlc3VsdHMpIHtcbiAgdmFyIGF1dGhvcjtcbiAgdmFyIGhpdDtcbiAgdmFyIGk7XG4gIHZhciByZXN1bHRFbDtcbiAgdmFyIHRpdGxlO1xuICB2YXIgdXJsO1xuXG4gIGZvciAoaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICBoaXQgPSByZXN1bHRzW2ldO1xuICAgIHJlc3VsdEVsID0gZWwuY2hpbGRyZW5baV07XG5cbiAgICAvLyBObyByZXN1bHQgZm9yIHRoaXMgaW5kZXguIEhpZGUgYW5kIGNvbnRpbnVlLlxuICAgIGlmICghaGl0KSB7XG4gICAgICByZXN1bHRFbC5vYmplY3QzRC52aXNpYmxlID0gZmFsc2U7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICByZXN1bHRFbC5vYmplY3QzRC52aXNpYmxlID0gdHJ1ZTtcblxuICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0RWwuZGF0YXNldCwgaGl0KTtcblxuICAgIHRpdGxlID0gdXRpbHMudHJ1bmNhdGUoaGl0LnRpdGxlLCAyNSk7XG4gICAgcmVzdWx0RWwucXVlcnlTZWxlY3RvcignLnNlYXJjaFJlc3VsdFRpdGxlJykuc2V0QXR0cmlidXRlKCd0ZXh0JywgJ3ZhbHVlJywgdGl0bGUpO1xuXG4gICAgYXV0aG9yID0gdXRpbHMudHJ1bmNhdGUoaGl0LmF1dGhvciwgMzUpO1xuICAgIHJlc3VsdEVsLnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2hSZXN1bHRBdXRob3InKS5zZXRBdHRyaWJ1dGUoJ3RleHQnLCAndmFsdWUnLCBhdXRob3IpO1xuXG4gICAgdXJsID0gdXRpbHMudHJ1bmNhdGUoaGl0LnVybCwgMzUsIHRydWUpO1xuICAgIHJlc3VsdEVsLnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2hSZXN1bHRVcmwnKS5zZXRBdHRyaWJ1dGUoJ3RleHQnLCAndmFsdWUnLCB1cmwpO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9zZWFyY2guanMiLCIvKipcbiAqIFB1bGwgYSBzdWJtZXNoIG91dCBvZiBhIG1vZGVsIGZpbGUuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnc3ViLW9iamVjdCcsIHtcbiAgc2NoZW1hOiB7XG4gICAgZnJvbToge2RlZmF1bHQ6ICcnLCB0eXBlOiAnc2VsZWN0b3InfSxcbiAgICBuYW1lOiB7ZGVmYXVsdDogJyd9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGlmIChkYXRhLmZyb20uZ2V0T2JqZWN0M0QoJ21lc2gnKSkge1xuICAgICAgdGhpcy5sb2FkU3ViT2JqZWN0KGRhdGEuZnJvbS5nZXRPYmplY3QzRCgnbWVzaCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YS5mcm9tLmFkZEV2ZW50TGlzdGVuZXIoJ21vZGVsLWxvYWRlZCcsIGV2dCA9PiB7XG4gICAgICAgIHRoaXMubG9hZFN1Yk9iamVjdChldnQuZGV0YWlsLm1vZGVsKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBsb2FkU3ViT2JqZWN0OiBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBzdWJzZXQ7XG4gICAgc3Vic2V0ID0gbW9kZWwuZ2V0T2JqZWN0QnlOYW1lKGRhdGEubmFtZSk7XG4gICAgZWwuc2V0T2JqZWN0M0QoJ21lc2gnLCBzdWJzZXQuY2xvbmUoKSk7XG4gICAgZWwuZW1pdCgnc3Vib2JqZWN0bG9hZGVkJyk7XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvc3ViLW9iamVjdC5qcyIsInZhciB0aXRsZUxvZ29UZW1wbGF0ZTtcbnZhciB0aXRsZVRleHRUZW1wbGF0ZTtcbnZhciB0aXRsZVN1cGVyY3JhZnRUZW1wbGF0ZTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIHRpdGxlTG9nb1RlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmtUaXRsZUxvZ29UZW1wbGF0ZScpLmlubmVySFRNTDtcbiAgdGl0bGVUZXh0VGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlua1RpdGxlVGV4dFRlbXBsYXRlJykuaW5uZXJIVE1MO1xuICB0aXRsZVN1cGVyY3JhZnRUZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rVGl0bGVTdXBlcmNyYWZ0VGVtcGxhdGUnKS5pbm5lckhUTUw7XG59KTtcblxuLyoqXG4gKiBBbGwgYWJvdXQgdGhlIGxpbmsgdGlsZS5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdzdXBlcmxpbmsnLCB7XG4gIHNjaGVtYToge1xuICAgIGVuYWJsZWQ6IHtkZWZhdWx0OiBmYWxzZX0sXG4gICAgaXNBY3RpdmU6IHtkZWZhdWx0OiBmYWxzZX0sXG4gICAgaXNMZWZ0UGFnaW5hdG9yOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgIGlzTG9hZGluZ1NpdGU6IHtkZWZhdWx0OiBmYWxzZX0sXG4gICAgaXNSaWdodFBhZ2luYXRvcjoge2RlZmF1bHQ6IGZhbHNlfSxcbiAgICBpc1N1cGVyY3JhZnQ6IHtkZWZhdWx0OiBmYWxzZX0sXG4gICAgaXNWaXNpdGVkOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgIGxvZ286IHtkZWZhdWx0OiAnJ30sXG4gICAgc2l0ZUlkOiB7ZGVmYXVsdDogJyd9LFxuICAgIHRpdGxlOiB7ZGVmYXVsdDogJyd9LFxuICAgIHRpdGxlVGV4dDoge2RlZmF1bHQ6ICcnfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgdGhpcy5ldmVudERldGFpbCA9IHtzaXRlSWQ6IHRoaXMuZGF0YS5zaXRlSWR9O1xuICAgIHRoaXMuaXNIb3ZlcmVkID0gZmFsc2U7XG4gICAgdGhpcy5saW5rQW5pbWF0aW9uQ29udGFpbmVyID0gZWwucXVlcnlTZWxlY3RvcignLmxpbmtBbmltYXRpb25Db250YWluZXInKTtcbiAgICB0aGlzLmxpbmtDb250YWluZXIgPSBlbC5wYXJlbnROb2RlO1xuICAgIHRoaXMubGlua0ltYWdlID0gZWwucXVlcnlTZWxlY3RvcignLmxpbmtJbWFnZScpO1xuICAgIHRoaXMubGlua1Zpc2l0ZWQgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5saW5rVmlzaXRlZCcpO1xuICAgIHRoaXMucmF5Y2FzdFRhcmdldCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5saW5rUmF5Y2FzdFRhcmdldCcpO1xuXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcykpO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLm9uTW91c2VMZWF2ZS5iaW5kKHRoaXMpKTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljay5iaW5kKHRoaXMpKTtcbiAgICBlbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VsZWZ0JywgdGhpcy5vblBhZ2VUdXJuLmJpbmQodGhpcykpO1xuICAgIGVsLnNjZW5lRWwuYWRkRXZlbnRMaXN0ZW5lcigncGFnZXJpZ2h0JywgdGhpcy5vblBhZ2VUdXJuLmJpbmQodGhpcykpO1xuXG4gICAgdGhpcy5yZW5kZXJUaXRsZSgpO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKG9sZERhdGEpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuXG4gICAgdGhpcy5saW5rVmlzaXRlZC5vYmplY3QzRC52aXNpYmxlID0gIXRoaXMuZGF0YS5pc1Zpc2l0ZWQ7XG5cbiAgICBpZiAoZGF0YS5pc0FjdGl2ZSB8fCBkYXRhLmlzTGVmdFBhZ2luYXRvciB8fCBkYXRhLmlzUmlnaHRQYWdpbmF0b3IpIHtcbiAgICAgIGVsLm9iamVjdDNELnZpc2libGUgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIFdhaXQgZm9yIGFuaW1hdGlvbiB0byBmaW5pc2ggdGhlbiBzZXQgbGluayB2aXNpYmxlIHRvIGZhbHNlLlxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICB2YXIgb25DdXJyZW50UGFnZTtcbiAgICAgIG9uQ3VycmVudFBhZ2UgPSBkYXRhLmlzQWN0aXZlIHx8IGRhdGEuaXNMZWZ0UGFnaW5hdG9yIHx8IGRhdGEuaXNSaWdodFBhZ2luYXRvcjtcbiAgICAgIGlmIChvbkN1cnJlbnRQYWdlKSB7IHJldHVybjsgfVxuICAgICAgZWwub2JqZWN0M0QudmlzaWJsZSA9IGZhbHNlO1xuICAgIH0sIDUwMCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbmRlciBsb2dvIG9yIHRleHQgdGl0bGUuXG4gICAqIElmIG5vdCBsb2dvIChlLmcuLCB1c2VyIGNvbGxlY3Rpb24gc2l0ZSksIHJlbmRlciB0aGUgdGV4dCBpbnN0ZWFkLlxuICAgKiBVc2VzIHN0YXRlIGNvbXBvbmVudCB0ZW1wbGF0ZSByZW5kZXJlci5cbiAgICogVGVtcGxhdGUgZGVmaW5lZCBpbiBsaW5rLmh0bWwuXG4gICAqL1xuICByZW5kZXJUaXRsZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGxpbmtUaXRsZUVsO1xuICAgIHZhciB0ZW1wbGF0ZTtcblxuICAgIGlmIChkYXRhLmlzU3VwZXJjcmFmdCkge1xuICAgICAgdGVtcGxhdGUgPSB0aXRsZVN1cGVyY3JhZnRUZW1wbGF0ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGVtcGxhdGUgPSBkYXRhLmxvZ28gPyB0aXRsZUxvZ29UZW1wbGF0ZSA6IHRpdGxlVGV4dFRlbXBsYXRlO1xuICAgIH1cblxuICAgIGxpbmtUaXRsZUVsID0gZWwucXVlcnlTZWxlY3RvcignLmxpbmtUaXRsZScpO1xuICAgIGxpbmtUaXRsZUVsLmFwcGVuZENoaWxkKFxuICAgICAgZWwuc2NlbmVFbC5zeXN0ZW1zLnN0YXRlLnJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKVxuICAgICk7XG5cbiAgICAvLyBTZXQgZGVmYXVsdCBpbWFnZSBmb3IgdXNlciBjb2xsZWN0aW9uIHNpdGVzLlxuICAgIGlmIChlbC5kYXRhc2V0LmlzVXNlclNpdGUgPT09ICd0cnVlJykge1xuICAgICAgZWwucXVlcnlTZWxlY3RvcignLmxpbmtJbWFnZScpLnNldEF0dHJpYnV0ZShcbiAgICAgICAgJ21hdGVyaWFsJywgJ3NyYycsICcvc3VwZXJhc3NldHMvc2l0ZS9kZXZsaW5rLmpwZycpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogT3BlbiBsaW5rIGRldGFpbCB3aGVuIGNsaWNrZWQuXG4gICAqL1xuICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBpZiAoIWRhdGEuZW5hYmxlZCB8fCBkYXRhLmlzTG9hZGluZ1NpdGUpIHsgcmV0dXJuOyB9XG4gICAgZWwuc2NlbmVFbC5lbWl0KCdsaW5rZGV0YWlsb3BlbicsIHRoaXMuZXZlbnREZXRhaWwpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGNoaWxkIGFuaW1hdGlvbnMgb24gaG92ZXIuXG4gICAqL1xuICBvbk1vdXNlRW50ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2hpbGRyZW47XG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgaTtcblxuICAgIGlmICghZGF0YS5lbmFibGVkIHx8IGRhdGEuaXNMb2FkaW5nU2l0ZSkgeyByZXR1cm47IH1cbiAgICBpZiAodGhpcy5saW5rQ29udGFpbmVyLmhhc0F0dHJpYnV0ZSgnZGF0YS1pcy1zY3JvbGxpbmcnKSkgeyByZXR1cm47IH1cblxuICAgIHRoaXMuaXNIb3ZlcmVkID0gdHJ1ZTtcblxuICAgIGNoaWxkcmVuID0gdGhpcy5saW5rQW5pbWF0aW9uQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1thbmltYXRpb25fX2xpbmtob3ZlcnN0YXJ0XScpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY2hpbGRyZW5baV0uZW1pdCgnbGlua2hvdmVyc3RhcnQnLCBudWxsLCBmYWxzZSk7XG4gICAgfVxuICAgIHRoaXMubGlua0FuaW1hdGlvbkNvbnRhaW5lci5lbWl0KCdsaW5raG92ZXJzdGFydCcsIG51bGwsIGZhbHNlKTtcbiAgfSxcblxuICAvKipcbiAgICogVHJpZ2dlciBjaGlsZCBhbmltYXRpb25zIG9uIGhvdmVyIGxlYXZlLlxuICAgKi9cbiAgb25Nb3VzZUxlYXZlOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNoaWxkcmVuO1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGk7XG5cbiAgICBpZiAoIXRoaXMuaXNIb3ZlcmVkKSB7IHJldHVybjsgfVxuICAgIGlmICh0aGlzLmxpbmtDb250YWluZXIuaGFzQXR0cmlidXRlKCdkYXRhLWlzLXNjcm9sbGluZycpKSB7IHJldHVybjsgfVxuXG4gICAgdGhpcy5pc0hvdmVyZWQgPSBmYWxzZTtcblxuICAgIGNoaWxkcmVuID0gdGhpcy5saW5rQW5pbWF0aW9uQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1thbmltYXRpb25fX2xpbmtob3ZlcmVuZF0nKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkcmVuW2ldLmVtaXQoJ2xpbmtob3ZlcmVuZCcsIG51bGwsIGZhbHNlKTtcbiAgICB9XG4gICAgdGhpcy5saW5rQW5pbWF0aW9uQ29udGFpbmVyLmVtaXQoJ2xpbmtob3ZlcmVuZCcsIG51bGwsIGZhbHNlKTtcbiAgfSxcblxuICAvKipcbiAgICogVW5ob3ZlciBhbGwgY2hpbGQgYW5pbWF0aW9ucyB3aGVuIHR1cm5pbmcgcGFnZS5cbiAgICovXG4gIG9uUGFnZVR1cm46IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2hpbGRyZW47XG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIGlmICghZGF0YS5pc0FjdGl2ZSB8fCAhdGhpcy5pc0hvdmVyZWQpIHsgcmV0dXJuOyB9XG5cbiAgICAvLyBFbWl0IGhvdmVyIGVuZCB0byBhbGwgY2hpbGRyZW4gaWYgbGluayB3YXMgYWN0aXZlLCBob3ZlcmVkLCBhbmQgbm93XG4gICAgLy8gY2hhbmdpbmcgcGFnZXMuIFVuaG92ZXIgd2hpbGUgY2hhbmdpbmcgcGFnZXMuXG4gICAgY2hpbGRyZW4gPSB0aGlzLmxpbmtBbmltYXRpb25Db250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2FuaW1hdGlvbl9fbGlua2hvdmVyZW5kXScpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY2hpbGRyZW5baV0uZW1pdCgnbGlua2hvdmVyZW5kJywgbnVsbCwgZmFsc2UpO1xuICAgIH1cbiAgICB0aGlzLmxpbmtBbmltYXRpb25Db250YWluZXIuZW1pdCgnbGlua2hvdmVyZW5kJywgbnVsbCwgZmFsc2UpO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL3N1cGVybGluay5qcyIsIi8qKlxuICogRmFkZSBpbiBhbmQgb3V0IG9mIGJsYWNrIHdoZW4gc3dpdGNoaW5nIHRvIGFuZCBmcm9tIGxvYmJ5LlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3RhYi1zd2l0Y2gtZmFkZScsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbWVzc2FnZSA9PiB7XG4gICAgICBpZiAobWVzc2FnZS5kYXRhLmFjdGlvbiA9PT0gJ3ByZVN3aXRjaFRvQ29udGVudCcpIHtcbiAgICAgICAgdGhpcy5lbC5lbWl0KCdmYWRlb3V0Jyk7XG4gICAgICB9XG4gICAgICBpZiAobWVzc2FnZS5kYXRhLmFjdGlvbiA9PT0gJ3N3aXRjaFRvTG9iYnknKSB7XG4gICAgICAgIHRoaXMuZWwuZW1pdCgnZmFkZWluJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvdGFiLXN3aXRjaC1mYWRlLmpzIiwidmFyIFRIUk9UVExFX1RJTUUgPSA1MDA7XG5cbi8qKlxuICogUGFnaW5hdGUgdXNpbmcgdGh1bWJzdGljayBvciB0cmFja3BhZC5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCd0aHVtYi1wYWdpbmF0b3InLCB7XG4gIGRlcGVuZGVuY2llczogWyd0cmFja2VkLWNvbnRyb2xzJ10sXG5cbiAgc2NoZW1hOiB7XG4gICAgZW5hYmxlZDoge2RlZmF1bHQ6IHRydWV9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdGhpcy5sYXN0VGltZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9uVml2ZVRyYWNrcGFkRG93biA9IHRoaXMub25WaXZlVHJhY2twYWREb3duLmJpbmQodGhpcyk7XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjb250cm9sbGVyY29ubmVjdGVkJywgZXZ0ID0+IHtcbiAgICAgIGlmIChldnQuZGV0YWlsLm5hbWUgPT09ICd2aXZlLWNvbnRyb2xzJykge1xuICAgICAgICAvLyBGb3IgdHJhY2twYWQsIG5lZWQgYSBwcmVzcyBkb3duIGFuZCBheGlzIGNoZWNrLlxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0cmFja3BhZGRvd24nLCB0aGlzLm9uVml2ZVRyYWNrcGFkRG93bik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRpY2sgPSB0aGlzLnRodW1ic3RpY2tUaWNrO1xuICAgICAgICB0aGlzLmVsLnNjZW5lRWwuYWRkQmVoYXZpb3IodGhpcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgb25WaXZlVHJhY2twYWREb3duOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGF4aXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBheGlzID0gZWwuY29tcG9uZW50c1sndHJhY2tlZC1jb250cm9scyddLmF4aXNbMF07XG4gICAgaWYgKGF4aXMgPD0gLTAuNTApIHsgZWwuc2NlbmVFbC5lbWl0KCdwYWdlbGVmdCcpOyB9XG4gICAgaWYgKGF4aXMgPj0gMC41MCkgeyBlbC5zY2VuZUVsLmVtaXQoJ3BhZ2VyaWdodCcpOyB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvciB0aHVtYnN0aWNrLCBkb24ndCBuZWVkIGEgcHJlc3MgZG93biwganVzdCBjaGVjayBheGlzLlxuICAgKi9cbiAgdGh1bWJzdGlja1RpY2s6IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgdmFyIGF4aXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIGlmICh0aGlzLmxhc3RUaW1lICYmIHRpbWUgPCB0aGlzLmxhc3RUaW1lICsgVEhST1RUTEVfVElNRSkgeyByZXR1cm47IH1cblxuICAgIGlmICghdGhpcy5kYXRhLmVuYWJsZWQpIHsgcmV0dXJuOyB9XG5cbiAgICBheGlzID0gZWwuY29tcG9uZW50c1sndHJhY2tlZC1jb250cm9scyddLmF4aXNbMF07XG5cbiAgICBpZiAoYXhpcyA8PSAtMC41MCkge1xuICAgICAgZWwuc2NlbmVFbC5lbWl0KCdwYWdlbGVmdCcpO1xuICAgICAgdGhpcy5sYXN0VGltZSA9IHRpbWU7XG4gICAgfVxuXG4gICAgaWYgKGF4aXMgPj0gMC41MCkge1xuICAgICAgZWwuc2NlbmVFbC5lbWl0KCdwYWdlcmlnaHQnKTtcbiAgICAgIHRoaXMubGFzdFRpbWUgPSB0aW1lO1xuICAgIH1cbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy90aHVtYi1wYWdpbmF0b3IuanMiLCJBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3R1dG9yaWFsLW1vZGFsLWltYWdlJywge1xuICBzY2hlbWE6IHtcbiAgICBoZWFkc2V0OiB7dHlwZTogJ3N0cmluZyd9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgaGVhZHNldDtcblxuICAgIGhlYWRzZXQgPSBkYXRhLmhlYWRzZXQgfHwgJ3ZpdmUnO1xuICAgIGlmIChoZWFkc2V0ID09PSAnd2luZG93cycpIHsgaGVhZHNldCA9ICdvY3VsdXMnOyB9XG5cbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ21hdGVyaWFsJywgJ3NyYycsIGBhc3NldHMvaW1nLyR7aGVhZHNldH0tYmFjay5wbmdgKTtcblxuICAgIGlmIChoZWFkc2V0ID09PSAnb2N1bHVzJykge1xuICAgICAgZWwub2JqZWN0M0QucG9zaXRpb24uc2V0KDAuMTU3LCAwLjAyNSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLm9iamVjdDNELnBvc2l0aW9uLnNldCgwLjIwMiwgMC4wMjMsIDApO1xuICAgIH1cbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy90dXRvcmlhbC1tb2RhbC1pbWFnZS5qcyIsIkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgndHV0b3JpYWwtbW9kYWwnLCB7XG4gIHNjaGVtYToge1xuICAgIHR1dG9yaWFsTW9kYWxPcGVuOiB7ZGVmYXVsdDogZmFsc2V9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAob2xkRGF0YSkge1xuICAgIGlmICh0aGlzLmRhdGEudHV0b3JpYWxNb2RhbE9wZW4pIHtcbiAgICAgIHRoaXMuZWwuZW1pdCgndHV0b3JpYWxtb2RhbG9wZW4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob2xkRGF0YS50dXRvcmlhbE1vZGFsT3BlbiAmJiAhdGhpcy5kYXRhLnR1dG9yaWFsTW9kYWxPcGVuKSB7XG4gICAgICB0aGlzLmVsLmVtaXQoJ3R1dG9yaWFsbW9kYWxjbG9zZScpO1xuICAgIH1cbiAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy90dXRvcmlhbC1tb2RhbC5qcyIsIi8qKlxuICogU2V0IHdpdGggYSBkZWxheS5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCd2aXNpYmxlLWRlbGF5Jywge1xuICBzY2hlbWE6IHt0eXBlOiAnYm9vbGVhbid9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmRhdGEpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmVsLm9iamVjdDNELnZpc2libGUgPSB0cnVlO1xuICAgICAgfSwgMjAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbC5vYmplY3QzRC52aXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL3Zpc2libGUtZGVsYXkuanMiLCIvKipcbiAqIExpa2UgYHZpc2libGVgLCBidXQgZmFkZXMgaW4gYW5kIG91dCB3aGVuIHZhbHVlIGNoYW5nZXMuXG4gKiBDb252ZXJ0IGEgYm9vbGVhbiBjaGFuZ2VzIHRvIGZhZGUgaW4gYW5kIGZhZGUgb3V0IGFuaW1hdGlvbnMuXG4gKiBVc2VkIHByb21pbmVudGx5IGluIHR1dG9yaWFsLlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3Zpc2libGUtZmFkZScsIHtcbiAgc2NoZW1hOiB7XG4gICAgZGVsYXk6IHt0eXBlOiAnbnVtYmVyJywgZGVmYXVsdDogMH0sXG4gICAgZHVyOiB7dHlwZTogJ251bWJlcicsIGRlZmF1bHQ6IDE1MH0sXG4gICAgcHJvcGVydHk6IHtkZWZhdWx0OiAnbWF0ZXJpYWwub3BhY2l0eSd9LFxuICAgIHZpc2libGU6IHtkZWZhdWx0OiB0cnVlfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgZWwuc2V0QXR0cmlidXRlKCdhbmltYXRpb25fX3Zpc2libGVmYWRlaW4nLCB7XG4gICAgICBwcm9wZXJ0eTogZGF0YS5wcm9wZXJ0eSxcbiAgICAgIGRlbGF5OiBkYXRhLmRlbGF5LFxuICAgICAgZHVyOiBkYXRhLmR1cixcbiAgICAgIGZyb206ICcwLjAnLFxuICAgICAgZWFzaW5nOiAnbGluZWFyJyxcbiAgICAgIHN0YXJ0RXZlbnRzOiBbJ3Zpc2libGVmYWRlaW4nXSxcbiAgICAgIHRvOiAnMS4wJ1xuICAgIH0pO1xuXG4gICAgZWwuc2V0QXR0cmlidXRlKCdhbmltYXRpb25fX3Zpc2libGVmYWRlb3V0Jywge1xuICAgICAgcHJvcGVydHk6IGRhdGEucHJvcGVydHksXG4gICAgICBkZWxheTogZGF0YS5kZWxheSxcbiAgICAgIGR1cjogZGF0YS5kdXIsXG4gICAgICBlYXNpbmc6ICdsaW5lYXInLFxuICAgICAgZnJvbTogJzEnLFxuICAgICAgc3RhcnRFdmVudHM6IFsndmlzaWJsZWZhZGVvdXQnXSxcbiAgICAgIHRvOiAnMCdcbiAgICB9KTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIChvbGREYXRhKSB7XG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG5cbiAgICBpZiAoIW9sZERhdGEudmlzaWJsZSAmJiBkYXRhLnZpc2libGUpIHtcbiAgICAgIHRoaXMuZW1pdFdpdGhUZXh0Q2hlY2soJ3Zpc2libGVmYWRlaW4nKTtcbiAgICB9XG5cbiAgICBpZiAob2xkRGF0YS52aXNpYmxlICYmICFkYXRhLnZpc2libGUpIHtcbiAgICAgIHRoaXMuZW1pdFdpdGhUZXh0Q2hlY2soJ3Zpc2libGVmYWRlb3V0Jyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB3ZSBhcmUgZG9pbmcgdGV4dCBhbmltYXRpb24sIHdhaXQgZm9yIHRleHQgdGV4dHVyZSB0byBsb2FkLlxuICAgKi9cbiAgZW1pdFdpdGhUZXh0Q2hlY2s6IGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuXG4gICAgaWYgKGRhdGEucHJvcGVydHkgPT09ICd0ZXh0Lm9wYWNpdHknICYmXG4gICAgICAgICFlbC5jb21wb25lbnRzLnRleHQudGV4dHVyZS5pbWFnZSkge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndGV4dGZvbnRzZXQnLCAoKSA9PiB7XG4gICAgICAgIGVsLmVtaXQoZXZlbnROYW1lLCBudWxsLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlbC5lbWl0KGV2ZW50TmFtZSwgbnVsbCwgZmFsc2UpO1xuICB9XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL3Zpc2libGUtZmFkZS5qcyIsImZ1bmN0aW9uIHJlcXVpcmVBbGwgKHJlcSkgeyByZXEua2V5cygpLmZvckVhY2gocmVxKTsgfVxuXG53aW5kb3cuJCA9IHNlbGVjdG9yID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xud2luZG93LiQkID0gc2VsZWN0b3IgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cbi8vIE92ZXJyaWRlIHRoZSBVUkwgcXVlcnkgcGFyYW1ldGVyIHRvIHRvZ2dsZSBoaWdoUGVyZm9ybWFuY2UgbW9kZSBmcm9tIHNlcnZlciBzaWRlLlxuLy8gd2luZG93LmhpZ2hQZXJmb3JtYW5jZSA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy5oYXMoJ2hpZ2hQZXJmb3JtYW5jZScpO1xud2luZG93LmhpZ2hQZXJmb3JtYW5jZSA9IGZhbHNlO1xuXG5yZXF1aXJlKCdhZnJhbWUtYW5pbWF0aW9uLWNvbXBvbmVudCcpO1xucmVxdWlyZSgnYWZyYW1lLWFuaW1hdGlvbi10aW1lbGluZS1jb21wb25lbnQnKTtcbnJlcXVpcmUoJ2FmcmFtZS1ldmVudC1zZXQtY29tcG9uZW50Jyk7XG5yZXF1aXJlKCdhZnJhbWUtZ2x0Zi1wYXJ0LWNvbXBvbmVudCcpO1xucmVxdWlyZSgnYWZyYW1lLWxheW91dC1jb21wb25lbnQnKTtcbnJlcXVpcmUoJ2FmcmFtZS1wcm94eS1ldmVudC1jb21wb25lbnQnKTtcbnJlcXVpcmUoJ2FmcmFtZS1zbGljZTktY29tcG9uZW50Jyk7XG5yZXF1aXJlKCdhZnJhbWUtc3RhdGUtY29tcG9uZW50Jyk7XG5cbndpbmRvdy5BRlJBTUUuQVNTRVRTX1BBVEggPSAnYXNzZXRzJztcbnJlcXVpcmUoJy4vbGliL2FmcmFtZS1tYXRlcmlhbC5qcycpO1xuXG5yZXF1aXJlKCcuL2Nzcy9pbmRleC5zdHlsJyk7XG5yZXF1aXJlQWxsKHJlcXVpcmUuY29udGV4dCgnLi9jb21wb25lbnRzLycsIHRydWUsIC9cXC5qcyQvKSk7XG5yZXF1aXJlQWxsKHJlcXVpcmUuY29udGV4dCgnLi9zdGF0ZS8nLCB0cnVlLCAvXFwuanMkLykpO1xucmVxdWlyZSgnLi9wYW5lbC9pbmRleCcpO1xuXG5cbi8vIFByb3ZpZGUgdmFyaW91cyBkYXRhIHRvIGJhY2tncm91bmQgc2NyaXB0Llxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBwcm92aWRlRGF0YSk7XG5cbi8vIFJlc2VuZCBkYXRhIGlmIHRoZSBkZXYuIFVSTCBoYXMgYmVlbiB1cGRhdGVkLlxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmVsb3BlcnVybHVwZGF0ZWQnLCBwcm92aWRlRGF0YSk7XG5cbi8qKlxuICogUHJvdmlkZSBKU09OIGRhdGEgdG8gZXh0ZW5zaW9uLlxuICovXG5mdW5jdGlvbiBwcm92aWRlRGF0YSAoZXZ0KSB7XG4gIHZhciBpO1xuICB2YXIgc2l0ZURhdGE7XG4gIHZhciBzaXRlcztcblxuICAvLyBDb252ZXJ0IHRvIGFycmF5LlxuICAvLyBUT0RPOiBIYXZlIGFkZC1vbiBzdXBwb3J0IG5ldyBvYmplY3QgZm9ybS5cbiAgc2l0ZXMgPSByZXF1aXJlKCcuL3NpdGVzLmpzb24nKS5TSVRFUztcbiAgc2l0ZURhdGEgPSBPYmplY3Qua2V5cyhzaXRlcykubWFwKHNpdGVJZCA9PiB7XG4gICAgcmV0dXJuIHNpdGVzW3NpdGVJZF07XG4gIH0pO1xuXG4gIHdpbmRvdy5wb3N0TWVzc2FnZSh7XG4gICAgYWN0aW9uOiAncHJvdmlkZURhdGEnLFxuICAgIHNpdGVEYXRhOiBzaXRlRGF0YSxcbiAgICB3aWxkU2l0ZURhdGE6IHJlcXVpcmUoJy4vd2lsZFNpdGVEYXRhLmpzb24nKSxcbiAgICBoaWdoUGVyZm9ybWFuY2U6IHdpbmRvdy5oaWdoUGVyZm9ybWFuY2VcbiAgfSwgJyonKTtcbn1cblxubmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3NlcnZpY2VXb3JrZXIuanMnKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC5qcyIsImltcG9ydCBTSVRFX0RBVEEgZnJvbSAnLi4vc2l0ZXMuanNvbic7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vbGliL3V0aWxzJztcblxudmFyIExPQURfVEVYVCA9ICdTZWxlY3QgYSBzaXRlIHRvIGxvYWQnO1xudmFyIEZFRURfUEFHRVMgPSBTSVRFX0RBVEEuRkVFRC5sZW5ndGg7XG5cbi8vIFNldCBgaXNVc2VyU2l0ZWAgZm9yIGFsbCBjdXJhdGVkIHNpdGVzIHRvIGBmYWxzZS5gXG5PYmplY3Qua2V5cyhTSVRFX0RBVEEuU0lURVMpLmZvckVhY2goc2l0ZUlkID0+IHtcbiAgU0lURV9EQVRBLlNJVEVTW3NpdGVJZF0uaXNVc2VyU2l0ZSA9IGZhbHNlO1xufSk7XG5cbnZhciB1c2VyQ29sbGVjdGlvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJDb2xsZWN0aW9uJykgfHwgJ1tdJyk7XG51c2VyQ29sbGVjdGlvbi5mb3JFYWNoKGFkZFVzZXJTaXRlVG9TaXRlRGF0YSk7XG5cbnZhciBVU0VSX0NPTExFQ1RJT05fSUQgPSAndXNlcmNvbGxlY3Rpb24nO1xuXG4vKipcbiAqIEFwcGxpY2F0aW9uIHN0YXRlLlxuICpcbiAqIFNpbmdsZSBvYmplY3QgZGVmaW5lZCBieSBgaW5pdGlhbFN0YXRlYC5cbiAqIFN0YXRlIGlzIHVwZGF0ZWQgdGhyb3VnaCBgaGFuZGxlcnNgIChyZWNlaXZlZCB2aWEgZXZlbnRzIG9uIDxhLXNjZW5lPikuXG4gKiBIYW5kbGVycyBtb2RpZnkgc3RhdGUgYW5kIGBiaW5kYCBjb21wb25lbnRzIGF1dG9tYXRpY2FsbHkgdXBkYXRlLlxuICovXG5BRlJBTUUucmVnaXN0ZXJTdGF0ZSh7XG4gIGluaXRpYWxTdGF0ZToge1xuICAgIGFjdGl2ZUNvbGxlY3Rpb246IFtdLFxuICAgIGFjdGl2ZUNvbGxlY3Rpb25EZXNjcmlwdGlvbjogJycsXG4gICAgYWN0aXZlQ29sbGVjdGlvbklkOiAnJyxcbiAgICBhY3RpdmVDb2xsZWN0aW9uVGl0bGU6ICcnLFxuICAgIGNvbnRyb2xsZXI6ICcnLFxuICAgIGhhc0Vycm9yOiBmYWxzZSxcbiAgICBoZWFkc2V0OiAnJyxcbiAgICBoaWdoUGVyZm9ybWFuY2U6IHdpbmRvdy5oaWdoUGVyZm9ybWFuY2UsXG4gICAgaXNMb2FkaW5nU2l0ZTogZmFsc2UsXG4gICAgaXNTaXRlRW50ZXJhYmxlOiBmYWxzZSxcbiAgICBpc1NpdGVMb2FkZWQ6IGZhbHNlLFxuICAgIGlzU2l0ZUxvYWRlZFdpdGhvdXRFcnJvcjogZmFsc2UsXG4gICAgbGlua0RldGFpbDoge1xuICAgICAgYXV0aG9yOiAnJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgIGltYWdlOiAnI25vVVJMJyxcbiAgICAgIGlzU3VwZXJjcmFmdDogZmFsc2UsXG4gICAgICB0aXRsZTogJycsXG4gICAgICB0aXRsZVRleHQ6ICcnLFxuICAgICAgc2l0ZUlkOiAnJyxcbiAgICAgIHVybDogJycsXG4gICAgICB1cmxUZXh0OiAnJ1xuICAgIH0sXG4gICAgbG9hZGluZ1RleHQ6ICcnLFxuICAgIGxvYWRpbmdVcmw6ICcnLFxuICAgIGxvYWRpbmdSZXR1cm5UZXh0OiAnJyxcbiAgICB0b29sdGlwUmV0dXJuVGV4dDogJycsXG4gICAgbm90aWZpY2F0aW9uTWVzc2FnZTogJycsXG4gICAgbm90aWZpY2F0aW9uVHlwZTogJycsXG4gICAgcGFnZToge1xuICAgICAgY29sbGVjdGlvbjogMCxcbiAgICAgIGZlZWQ6IDAsXG4gICAgICBoYXNMZWZ0OiB0cnVlLFxuICAgICAgaGFzUmlnaHQ6IHRydWVcbiAgICB9LFxuICAgIC8vIHNjcmVlbjoga2VlcCB0cmFjayBvZiBsYXllcnMgb3IgZGVwdGguIExpa2UgYnJlYWRjcnVtYnMuXG4gICAgc2NyZWVuOiAnJyxcbiAgICBzY3JlZW5IaXN0b3J5OiBbXSxcbiAgICBzaXRlOiB7XG4gICAgICBpbWFnZTogJyNub1VSTCcsXG4gICAgICB0aXRsZTogJycsXG4gICAgICB0aXRsZVRleHQ6ICcnLFxuICAgICAgdXJsOiAnJyxcbiAgICAgIHVybFRleHQ6IExPQURfVEVYVFxuICAgIH0sXG4gICAgc3dpdGNoZWRUb0xvYmJ5OiBmYWxzZSxcbiAgICB0dXRvcmlhbEltYWdlOiAnJyxcbiAgICB1cmxCYXJBY3RpdmU6IGZhbHNlLFxuICAgIHVzZXJDb2xsZWN0aW9uOiB1c2VyQ29sbGVjdGlvbixcbiAgICB1c2VyQ29sbGVjdGlvbkFjdGl2ZTogZmFsc2UsXG4gICAgdmVyc2lvbjogMFxuICB9LFxuXG4gIGhhbmRsZXJzOiB7XG4gICAgY2FuY2VsbG9hZGluZzogZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICBzdGF0ZS5oYXNFcnJvciA9IGZhbHNlO1xuICAgICAgc3RhdGUuaXNMb2FkaW5nU2l0ZSA9IGZhbHNlO1xuICAgICAgc3RhdGUuc2l0ZS51cmwgPSAnJztcbiAgICAgIHBvcFNjcmVlbihzdGF0ZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE9wZW4gY29sbGVjdGlvbiBjb250YWluZXIuXG4gICAgICovXG4gICAgY29sbGVjdGlvbm9wZW46IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgc3RhdGUucGFnZS5jb2xsZWN0aW9uID0gMDtcbiAgICAgIHNldFNjcmVlbihzdGF0ZSwgJ2NvbGxlY3Rpb24nKTtcbiAgICAgIGNvbXB1dGVQYWdpbmF0b3JzKHN0YXRlKTtcbiAgICAgIGd0YWcoJ2V2ZW50JywgJ2NvbGxlY3Rpb25vcGVuJywge3ZhbHVlOiBzdGF0ZS5hY3RpdmVDb2xsZWN0aW9uSWR9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGxpbmtzIG9mIHRoZSBjb2xsZWN0aW9uIGNvbnRhaW5lci5cbiAgICAgKiBIYW5kbGUgYm90aCBub3JtYWwgY29sbGVjdGlvbnMgKGZyb20gSlNPTikgYW5kIHVzZXIgY29sbGVjdGlvbnMgKGZyb20gTFMpLlxuICAgICAqL1xuICAgIGNvbGxlY3Rpb25zZXQ6IGZ1bmN0aW9uIChzdGF0ZSwgcGF5bG9hZCkge1xuICAgICAgc2V0Q29sbGVjdGlvbihzdGF0ZSwgcGF5bG9hZC5jb2xsZWN0aW9uSWQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGcm9tIHBvc3RNZXNzYWdlLiBQYWdlIGxvYWRlZCBpbiBjb250ZW50IHRhYi5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcGF5bG9hZCAtIHt0aXRsZSwgdXJsfVxuICAgICAqL1xuICAgIGNvbnRlbnRQYWdlUmVhZHk6IGZ1bmN0aW9uIChzdGF0ZSwgcGF5bG9hZCkge1xuICAgICAgc3RhdGUuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgIHN0YXRlLmlzTG9hZGluZ1NpdGUgPSBmYWxzZTtcbiAgICAgIHBvcFNjcmVlbihzdGF0ZSk7XG4gICAgfSxcblxuICAgIGNvbnRlbnRQYWdlTG9hZGVkOiBmdW5jdGlvbiAoc3RhdGUsIHBheWxvYWQpIHtcbiAgICAgIHN0YXRlLnNpdGUudGl0bGUgPSBwYXlsb2FkLnRpdGxlO1xuICAgICAgc3RhdGUuc2l0ZS51cmwgPSBwYXlsb2FkLnVybDtcbiAgICB9LFxuXG4gICAgY29udHJvbGxlcmNvbm5lY3RlZDogZnVuY3Rpb24gKHN0YXRlLCBwYXlsb2FkKSB7XG4gICAgICBzdGF0ZS5jb250cm9sbGVyID0gcGF5bG9hZC5uYW1lO1xuICAgICAgc3RhdGUuaGVhZHNldCA9IHBheWxvYWQubmFtZS5zcGxpdCgnLScpWzBdO1xuICAgICAgZ3RhZygnZXZlbnQnLCAnY29udHJvbGxlcmNvbm5lY3RlZCcsIHt2YWx1ZTogcGF5bG9hZC5uYW1lfSk7XG4gICAgICBpZiAoIUpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hhc1NlZW5UdXRvcmlhbE1vZGFsJykpKSB7XG4gICAgICAgIHNldFNjcmVlbihzdGF0ZSwgJ3R1dG9yaWFsbW9kYWwnKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGlzbWlzc3R1dG9yaWFsbW9kYWw6IGZ1bmN0aW9uIChzdGF0ZSwgcGF5bG9hZCkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2hhc1NlZW5UdXRvcmlhbE1vZGFsJywgdHJ1ZSk7XG4gICAgICBwb3BTY3JlZW4oc3RhdGUpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb250ZW50IHRhYiBpbi1wYWdlIG5hdmlnYXRpb24gKGUuZy4sIHNpbmdsZSBwYWdlIGFwcCkuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHBheWxvYWQgLSB7dXJsfVxuICAgICAqL1xuICAgIGhpc3RvcnlTdGF0ZVVwZGF0ZWQ6IGZ1bmN0aW9uIChzdGF0ZSwgcGF5bG9hZCkge1xuICAgICAgc3RhdGUuc2l0ZS51cmwgPSBwYXlsb2FkLnVybDtcbiAgICB9LFxuXG4gICAgbGlua2RldGFpbG9wZW46IGZ1bmN0aW9uIChzdGF0ZSwgcGF5bG9hZCkge1xuICAgICAgdmFyIHNpdGU7XG4gICAgICBzaXRlID0gU0lURV9EQVRBLlNJVEVTW3BheWxvYWQuc2l0ZUlkXTtcbiAgICAgIHNldExpbmtEZXRhaWwoc3RhdGUsIHNpdGUpO1xuICAgICAgY29tcHV0ZUxpbmtEZXRhaWwoc3RhdGUsIHNpdGUpO1xuICAgICAgZ3RhZygnZXZlbnQnLCAnbGlua2RldGFpbG9wZW4nLCB7dmFsdWU6IHN0YXRlLmxpbmtEZXRhaWwudXJsfSk7XG4gICAgICBzZXRTY3JlZW4oc3RhdGUsICdsaW5rZGV0YWlsJyk7XG4gICAgfSxcblxuICAgIGxpbmtkZXRhaWxvcGVuc2VhcmNoOiBmdW5jdGlvbiAoc3RhdGUsIHBheWxvYWQpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24oc3RhdGUubGlua0RldGFpbCwgcGF5bG9hZCk7XG4gICAgICBzdGF0ZS5saW5rRGV0YWlsLmxvZ28gPSAnJztcbiAgICAgIGNvbXB1dGVMaW5rRGV0YWlsKHN0YXRlLCBwYXlsb2FkKTtcbiAgICAgIHNldFNjcmVlbihzdGF0ZSwgJ2xpbmtkZXRhaWwnKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmVhdHVyZWQgbGluayBjbGlja2VkLlxuICAgICAqL1xuICAgIG5hdmlnYXRlOiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHZhciBmZWF0dXJlZFNpdGVEYXRhO1xuXG4gICAgICBzdGF0ZS5pc0xvYWRpbmdTaXRlID0gdHJ1ZTtcblxuICAgICAgaWYgKHN0YXRlLnNjcmVlbiA9PT0gJ2xpbmtkZXRhaWwnKSB7XG4gICAgICAgIHN0YXRlLnNpdGUuaW1hZ2UgPSBzdGF0ZS5saW5rRGV0YWlsLmltYWdlO1xuICAgICAgICBzdGF0ZS5zaXRlLnRpdGxlID0gc3RhdGUubGlua0RldGFpbC50aXRsZTtcbiAgICAgICAgc3RhdGUuc2l0ZS51cmwgPSBzdGF0ZS5saW5rRGV0YWlsLnVybDtcbiAgICAgIH1cblxuICAgICAgc3RhdGUuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgIHN0YXRlLm5vdGlmaWNhdGlvbk1lc3NhZ2UgPSAnJztcbiAgICAgIHN0YXRlLm5vdGlmaWNhdGlvblR5cGUgPSAnJztcblxuICAgICAgc3RhdGUuc3dpdGNoZWRUb0xvYmJ5ID0gZmFsc2U7XG5cbiAgICAgIGd0YWcoJ2V2ZW50JywgJ25hdmlnYXRlZmVhdHVyZWRsaW5rJywge3ZhbHVlOiBzdGF0ZS5zaXRlLnVybH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGcm9tIHBvc3RNZXNzYWdlLiBSZWNlaXZlIGVycm9yIGZyb20gY29udGVudCBvciBiYWNrZ3JvdW5kIHNjcmlwdC5cbiAgICAgKi9cbiAgICBub3RpZmljYXRpb25FcnJvcjogZnVuY3Rpb24gKHN0YXRlLCBwYXlsb2FkKSB7XG4gICAgICBzdGF0ZS5oYXNFcnJvciA9IHRydWU7XG4gICAgICBzdGF0ZS5ub3RpZmljYXRpb25NZXNzYWdlID0gJ1RoaXMgc2l0ZSBpcyB0YWtpbmcgdGltZSB0byBsb2FkLiBXYWl0IGEgYml0IHRoZW4gYW5kIGNsaWNrIHRoZSBpbWFnZSBvbiB0aGUgVVJMIGJhciB0byByZS1lbnRlciB0aGUgc2l0ZS4nXG4gICAgICBzdGF0ZS5ub3RpZmljYXRpb25UeXBlID0gJ2Vycm9yJztcbiAgICAgIGd0YWcoJ2V2ZW50JywgJ25vdGlmaWNhdGlvbmVycm9yJywge3ZhbHVlOiBzdGF0ZS5zaXRlLnVybH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQYWdpbmF0ZSB0byBsZWZ0LiBEZWNyZW1lbnQgY3VycmVudCBwYWdlLiBIYW5kbGUgYm90aCBmZWVkIGFuZCBjb2xsZWN0aW9uLlxuICAgICAqL1xuICAgIHBhZ2VsZWZ0OiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHZhciBwYWdlVHlwZTtcbiAgICAgIHBhZ2VUeXBlID0gc3RhdGUuc2NyZWVuID09PSAnY29sbGVjdGlvbicgPyAnY29sbGVjdGlvbicgOiAnZmVlZCc7XG5cbiAgICAgIGlmIChzdGF0ZS5zY3JlZW4gPT0gJ2NvbGxlY3Rpb24nICYmIHN0YXRlLnBhZ2UuY29sbGVjdGlvbiA9PT0gMCkgeyByZXR1cm47IH1cbiAgICAgIGlmICghc3RhdGUuc2NyZWVuICYmIHN0YXRlLnBhZ2UuZmVlZCA9PT0gLTEpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHN0YXRlLnBhZ2VbcGFnZVR5cGVdLS07XG4gICAgICBjb21wdXRlUGFnaW5hdG9ycyhzdGF0ZSk7XG4gICAgICBndGFnKCdldmVudCcsICdmZWF0dXJlZHBhZ2VsZWZ0Jyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBhZ2luYXRlIGxpbmtzIHRvIHJpZ2h0LiBJbmNyZW1lbnQgY3VycmVudCBwYWdlLiBIYW5kbGUgYm90aCBmZWVkIGFuZCBjb2xsZWN0aW9uLlxuICAgICAqL1xuICAgIHBhZ2VyaWdodDogZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICB2YXIgcGFnZVR5cGU7XG4gICAgICBwYWdlVHlwZSA9IHN0YXRlLnNjcmVlbiA9PT0gJ2NvbGxlY3Rpb24nID8gJ2NvbGxlY3Rpb24nIDogJ2ZlZWQnO1xuICAgICAgaWYgKHN0YXRlLnBhZ2VbcGFnZVR5cGVdID49IGdldE51bVBhZ2VzKHN0YXRlKSAtIDEpIHsgcmV0dXJuOyB9XG4gICAgICBzdGF0ZS5wYWdlW3BhZ2VUeXBlXSsrO1xuICAgICAgY29tcHV0ZVBhZ2luYXRvcnMoc3RhdGUpO1xuICAgICAgZ3RhZygnZXZlbnQnLCAnZmVhdHVyZWRwYWdlcmlnaHQnKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIHNwZWNpZmljIHBhZ2UuIEhhbmRsZSBib3RoIGZlZWQgYW5kIGNvbGxlY3Rpb25zLlxuICAgICAqL1xuICAgIHBhZ2VzZXQ6IGZ1bmN0aW9uIChzdGF0ZSwgaW5kZXgpIHtcbiAgICAgIHZhciBwYWdlVHlwZTtcbiAgICAgIHBhZ2VUeXBlID0gc3RhdGUuc2NyZWVuID09PSAnY29sbGVjdGlvbicgPyAnY29sbGVjdGlvbicgOiAnZmVlZCc7XG5cbiAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gZ2V0TnVtUGFnZXMoc3RhdGUpKSB7IHJldHVybjsgfVxuICAgICAgc3RhdGUucGFnZVtwYWdlVHlwZV0gPSBpbmRleDtcbiAgICB9LFxuXG4gICAgcHJlU3dpdGNoVG9Db250ZW50OiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHN0YXRlLmlzU2l0ZUxvYWRpbmcgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVmcmVzaCBidXR0b24gY2xpY2tlZC5cbiAgICAgKi9cbiAgICByZWZyZXNoOiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHN0YXRlLmlzTG9hZGluZ1NpdGUgPSB0cnVlO1xuICAgICAgZ3RhZygnZXZlbnQnLCAncmVmcmVzaCcpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBY3Rpb24gdG8gcG9wIGEgc2NyZWVuIChlLmcuLCBmcm9tIGBjbGljay1vdXRgKS5cbiAgICAgKi9cbiAgICBzY3JlZW5wb3A6IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgcG9wU2NyZWVuKHN0YXRlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNvbGxlY3Rpb24gc2NyZWVuIHBvcC5cbiAgICAgKi9cbiAgICAnc2NyZWVucG9wLWNvbGxlY3Rpb24nOiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHN0YXRlLnBhZ2UuY29sbGVjdGlvbiA9IDA7XG4gICAgICBjb21wdXRlUGFnaW5hdG9ycyhzdGF0ZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBsaW5rIGRldGFpbCBzY3JlZW4gcG9wLlxuICAgICAqL1xuICAgICdzY3JlZW5wb3AtbGlua2RldGFpbCc6IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgZ3RhZygnZXZlbnQnLCAnbGlua2RldGFpbGNsb3NlJywge3ZhbHVlOiBzdGF0ZS5saW5rRGV0YWlsLnVybH0pO1xuICAgICAgaWYgKCFzdGF0ZS5pc0xvYWRpbmdTaXRlKSB7IHN0YXRlLmxpbmtEZXRhaWwuaW1hZ2UgPSAnI25vVVJMJzsgfVxuICAgIH0sXG5cbiAgICBzZWFyY2hibHVyOiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHBvcFNjcmVlbihzdGF0ZSk7XG4gICAgICBjb21wdXRlUGFnaW5hdG9ycyhzdGF0ZSk7XG4gICAgfSxcblxuICAgIHNlYXJjaGZvY3VzOiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIGd0YWcoJ2V2ZW50JywgJ3N0YXJ0c2VhcmNoJyk7XG4gICAgICBzZXRTY3JlZW4oc3RhdGUsICdzZWFyY2gnKTtcbiAgICAgIGNvbXB1dGVQYWdpbmF0b3JzKHN0YXRlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRnJvbSBwb3N0TWVzc2FnZS5cbiAgICAgKi9cbiAgICBzd2l0Y2hUb0xvYmJ5OiBmdW5jdGlvbiAoc3RhdGUsIHBheWxvYWQpIHtcbiAgICAgIGlmIChwYXlsb2FkICYmIHBheWxvYWQudGFiU2NyZWVuc2hvdCkge1xuICAgICAgICBzdGF0ZS5zaXRlLmltYWdlID0gYHVybCgke3BheWxvYWQudGFiU2NyZWVuc2hvdH0pYDtcbiAgICAgIH1cbiAgICAgIHN0YXRlLnN3aXRjaGVkVG9Mb2JieSA9IHRydWU7XG4gICAgICBndGFnKCdldmVudCcsICdzd2l0Y2h0b2xvYmJ5Jyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFwiRGV2ZWxvcGVyXCIgc2l0ZSBhZGRlZC5cbiAgICAgKiBQYXlsb2FkOiB7dXJsLCB0aXRsZSwgaW1hZ2V9LlxuICAgICAqL1xuICAgIHVzZXJjb2xsZWN0aW9uYWRkOiBmdW5jdGlvbiAoc3RhdGUsIHBheWxvYWQpIHtcbiAgICAgIGFkZFVzZXJTaXRlVG9TaXRlRGF0YShwYXlsb2FkLCBzdGF0ZS51c2VyQ29sbGVjdGlvbi5sZW5ndGgpO1xuICAgICAgc3RhdGUudXNlckNvbGxlY3Rpb24ucHVzaChwYXlsb2FkKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyQ29sbGVjdGlvbicsIEpTT04uc3RyaW5naWZ5KHN0YXRlLnVzZXJDb2xsZWN0aW9uKSk7XG4gICAgICBndGFnKCdldmVudCcsICd1c2VyY29sbGVjdGlvbmFkZCcpO1xuXG4gICAgICBzZXRDb2xsZWN0aW9uKHN0YXRlLCBVU0VSX0NPTExFQ1RJT05fSUQpO1xuICAgICAgc3RhdGUucGFnZS5mZWVkID0gLTE7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFwiRGV2ZWxvcGVyXCIgc2l0ZSByZW1vdmUuXG4gICAgICogUGF5bG9hZDoge2luZGV4fVxuICAgICAqL1xuICAgIHVzZXJjb2xsZWN0aW9ucmVtb3ZlOiBmdW5jdGlvbiAoc3RhdGUsIHBheWxvYWQpIHtcbiAgICAgIHN0YXRlLnVzZXJDb2xsZWN0aW9uLnNwbGljZShwYXlsb2FkLmluZGV4LCAxKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyQ29sbGVjdGlvbicsIEpTT04uc3RyaW5naWZ5KHN0YXRlLnVzZXJDb2xsZWN0aW9uKSk7XG4gICAgICBzZXRDb2xsZWN0aW9uKHN0YXRlLCBVU0VSX0NPTExFQ1RJT05fSUQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBcIkRldmVsb3BlclwiIHNpdGUgdXBkYXRlLlxuICAgICAqIFBheWxvYWQ6IHtpbmRleCwgdGl0bGV9XG4gICAgICovXG4gICAgdXNlcmNvbGxlY3Rpb251cGRhdGV0aXRsZTogZnVuY3Rpb24gKHN0YXRlLCBwYXlsb2FkKSB7XG4gICAgICBzdGF0ZS51c2VyQ29sbGVjdGlvbltwYXlsb2FkLmluZGV4XS50aXRsZSA9IHBheWxvYWQudGl0bGU7XG4gICAgICBzdGF0ZS51c2VyQ29sbGVjdGlvbi5fX2RpcnR5ID0gdHJ1ZTtcbiAgICAgIGlmIChzdGF0ZS51c2VyQ29sbGVjdGlvbkFjdGl2ZSkgeyBzdGF0ZS5hY3RpdmVDb2xsZWN0aW9uLl9fZGlydHkgPSB0cnVlOyB9XG4gICAgfSxcblxuICAgIHZlcnNpb246IGZ1bmN0aW9uIChzdGF0ZSwgcGF5bG9hZCkge1xuICAgICAgc3RhdGUudmVyc2lvbiA9IHBhcnNlRmxvYXQocGF5bG9hZCwgMTApO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUnVuIGFmdGVyIGV2ZXJ5IGFjdGlvbi5cbiAgICovXG4gIGNvbXB1dGVTdGF0ZTogZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgLy8gV2hldGhlciBzaXRlIGlzIGZ1bGx5IGxvYWRlZC5cbiAgICBzdGF0ZS5pc1NpdGVMb2FkZWQgPSAhIXN0YXRlLnNpdGUudXJsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIXN0YXRlLmlzTG9hZGluZ1NpdGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAhc3RhdGUuc2l0ZS51cmwuZW5kc1dpdGgoJ2JsYW5rLmh0bWwnKTtcblxuICAgIHN0YXRlLnVybEJhckFjdGl2ZSA9IHN0YXRlLmlzU2l0ZUxvYWRlZCAmJiAhc3RhdGUuc2NyZWVuICYmICFzdGF0ZS5pc0xvYWRpbmdTaXRlO1xuXG4gICAgY29tcHV0ZVN0YXRlVXJsQmFyKHN0YXRlKTtcbiAgICBjb21wdXRlU3RhdGVMb2FkaW5nVGV4dChzdGF0ZSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFRydW5jYXRlIGZvciBVUkwgYmFyLlxuICovXG5mdW5jdGlvbiBjb21wdXRlU3RhdGVVcmxCYXIgKHN0YXRlKSB7XG4gIHZhciBzaXRlO1xuXG4gIC8vIFByb2Nlc3MgVVJMLCB0aXRsZSB0ZXh0LlxuICBzdGF0ZS5zaXRlLnRpdGxlVGV4dCA9IHV0aWxzLnRydW5jYXRlKHN0YXRlLnNpdGUudGl0bGUsIDU1KTtcbiAgc3RhdGUuc2l0ZS51cmxUZXh0ID0gdXRpbHMudHJ1bmNhdGUoc3RhdGUuc2l0ZS51cmwsIDY1KTtcblxuICAvLyBIaWRlIEd1bnRlcnMgb2YgT0FTSVMgVVJMLlxuICBpZiAoc3RhdGUuc2l0ZS51cmwuaW5kZXhPZignZ3VudGVycy1vZi1vYXNpcycpICE9PSAtMSkge1xuICAgIHN0YXRlLnNpdGUudXJsVGV4dCA9ICdzdXBlcm1lZGl1bS5jb20gfCBHdW50ZXJzIG9mIE9BU0lTJztcbiAgfVxuICBpZiAoc3RhdGUubGlua0RldGFpbC51cmwuaW5kZXhPZignZ3VudGVycy1vZi1vYXNpcycpICE9PSAtMSkge1xuICAgIHN0YXRlLmxpbmtEZXRhaWwudXJsVGV4dCA9ICdzdXBlcm1lZGl1bS5jb20gfCBHdW50ZXJzIG9mIE9BU0lTJztcbiAgfVxufVxuXG4vKipcbiAqIFNldCBoZWFkc2V0LXNwZWNpZmljIHRleHQgZm9yIGxvYWRpbmcuXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVTdGF0ZUxvYWRpbmdUZXh0IChzdGF0ZSkge1xuICBzdGF0ZS5sb2FkaW5nVGV4dCA9IGBMb2FkaW5nICR7c3RhdGUuc2l0ZS50aXRsZX0uLi5gO1xuICBzdGF0ZS5sb2FkaW5nVXJsID0gc3RhdGUubGlua0RldGFpbC51cmw7XG4gIGlmIChzdGF0ZS5oZWFkc2V0ID09PSAnb2N1bHVzJyB8fCBzdGF0ZS5oZWFkc2V0ID09PSAnd2luZG93cycpIHtcbiAgICBzdGF0ZS5sb2FkaW5nUmV0dXJuVGV4dCA9ICdIT0xEIERPV04gdGhlIFRIVU1CU1RJQ0sgYW55IHRpbWUgdG8gcmV0dXJuIGhvbWUuJztcbiAgICBzdGF0ZS50b29sdGlwUmV0dXJuVGV4dCA9ICdGcm9tIGEgc2l0ZSxcXG5IT0xEIERPV04gdGhlXFxuVEhVTUJTVElDS1xcbnRvIHJldHVybiBob21lJztcbiAgICBzdGF0ZS50dXRvcmlhbEltYWdlID0gJ2Fzc2V0cy9pbWcvb2N1bHVzLWJhY2sucG5nJztcbiAgfSBlbHNlIHtcbiAgICBzdGF0ZS5sb2FkaW5nUmV0dXJuVGV4dCA9ICdIT0xEIERPV04gdGhlIE1FTlUgQlVUVE9OIGFueSB0aW1lIHRvIHJldHVybiBob21lLic7XG4gICAgc3RhdGUudG9vbHRpcFJldHVyblRleHQgPSAnRnJvbSBhIHNpdGUsXFxuSE9MRCBET1dOIHRoZVxcbk1FTlUgQlVUVE9OXFxudG8gcmV0dXJuIGhvbWUnO1xuICAgIHN0YXRlLnR1dG9yaWFsSW1hZ2UgPSAnYXNzZXRzL2ltZy92aXZlLWJhY2sucG5nJztcbiAgfVxufVxuXG4vKipcbiAqIENvcHkgc2l0ZSBkYXRhIGludG8gbGluayBkZXRhaWwuXG4gKi9cbmZ1bmN0aW9uIHNldExpbmtEZXRhaWwgKHN0YXRlLCBzaXRlKSB7XG4gIHN0YXRlLmxpbmtEZXRhaWwuYXV0aG9yID0gc2l0ZS5hdXRob3I7XG4gIHN0YXRlLmxpbmtEZXRhaWwuZGVzY3JpcHRpb24gPSBzaXRlLmRlc2NyaXB0aW9uO1xuICBzdGF0ZS5saW5rRGV0YWlsLmltYWdlID0gYCNzaXRlSW1nLSR7c2l0ZS5pZH1gO1xuICBzdGF0ZS5saW5rRGV0YWlsLmlzU3VwZXJjcmFmdCA9ICEhc2l0ZS5pc1N1cGVyY3JhZnQ7XG4gIHN0YXRlLmxpbmtEZXRhaWwubG9nbyA9IHNpdGUubG9nbyA/IGAjc2l0ZUxvZ28tJHtzaXRlLmlkfWAgOiAnJztcbiAgc3RhdGUubGlua0RldGFpbC5zaXRlSWQgPSBzaXRlLmlkO1xuICBzdGF0ZS5saW5rRGV0YWlsLnRpdGxlID0gc2l0ZS50aXRsZTtcbiAgc3RhdGUubGlua0RldGFpbC50aXRsZVRleHQgPSB1dGlscy50cnVuY2F0ZShzaXRlLnRpdGxlLCAyMik7XG5cbiAgaWYgKHNpdGUuaXNTdXBlcmNyYWZ0KSB7XG4gICAgc3RhdGUubGlua0RldGFpbC5kZXNjcmlwdGlvbiA9IGBcIiR7c2l0ZS50aXRsZX1cIiwgYnVpbHQgd2l0aCBTdXBlcmNyYWZ0LmA7XG4gIH1cblxuICAvLyBDaGVjayBpZiBkZXZlbG9wZXIgVVJMLlxuICBpZiAoc3RhdGUuZGV2ZWxvcGVyVXJsICYmIHN0YXRlLmxpbmtEZXRhaWwuc2l0ZUlkID09PSAnZGV2ZWxvcGVyJykge1xuICAgIHN0YXRlLmxpbmtEZXRhaWwudXJsID0gc3RhdGUuZGV2ZWxvcGVyVXJsO1xuICB9IGVsc2Uge1xuICAgIHN0YXRlLmxpbmtEZXRhaWwudXJsID0gc2l0ZS51cmw7XG4gIH1cbn1cblxuLyoqXG4gKiBUcnVuY2F0ZSBzaXRlIGRhdGEgZm9yIGxpbmsgZGV0YWlsLlxuICovXG5mdW5jdGlvbiBjb21wdXRlTGlua0RldGFpbCAoc3RhdGUsIHNpdGUpIHtcbiAgc3RhdGUubGlua0RldGFpbC51cmxUZXh0ID0gdXRpbHMudHJ1bmNhdGUoc2l0ZS51cmwsIDQwLCB0cnVlKTtcbiAgaWYgKHNpdGUuZGVzY3JpcHRpb24pIHtcbiAgICBzaXRlLmRlc2NyaXB0aW9uID0gc2l0ZS5kZXNjcmlwdGlvbi5yZXBsYWNlKC9eXFxufFxcbiQvZywgJycpO1xuICB9XG4gIHN0YXRlLmxpbmtEZXRhaWwuZGVzY3JpcHRpb24gPSB1dGlscy50cnVuY2F0ZShzdGF0ZS5saW5rRGV0YWlsLmRlc2NyaXB0aW9uLCAxMzApO1xuICBzdGF0ZS5saW5rRGV0YWlsLmF1dGhvciA9IHV0aWxzLnRydW5jYXRlKHN0YXRlLmxpbmtEZXRhaWwuYXV0aG9yLCA0MCk7XG59XG5cbi8qKlxuICogUHVzaCBzY3JlZW4gb250byBoaXN0b3J5IGFuZCBzZXQgdG8gY3VycmVudC5cbiAqL1xuZnVuY3Rpb24gc2V0U2NyZWVuIChzdGF0ZSwgc2NyZWVuKSB7XG4gIGlmIChzdGF0ZS5zY3JlZW4gPT09IHNjcmVlbikgeyByZXR1cm47IH1cbiAgc3RhdGUuc2NyZWVuSGlzdG9yeS5wdXNoKHNjcmVlbik7XG4gIHN0YXRlLnNjcmVlbiA9IHNjcmVlbjtcbn1cblxuLyoqXG4gKiBQb3Agc2NyZWVuIG9mZiBoaXN0b3J5LlxuICogU2V0IG5ldyBjdXJyZW50IHNjcmVlbiBpZiBhbnkuXG4gKi9cbmZ1bmN0aW9uIHBvcFNjcmVlbiAoc3RhdGUpIHtcbiAgdmFyIHByZXZTY3JlZW47XG4gIHByZXZTY3JlZW4gPSBzdGF0ZS5zY3JlZW5IaXN0b3J5LnBvcCgpO1xuICBpZiAoc3RhdGUuc2NyZWVuSGlzdG9yeS5sZW5ndGggPT09IDApIHtcbiAgICBzdGF0ZS5zY3JlZW4gPSAnJztcbiAgICByZXR1cm47XG4gIH1cbiAgc3RhdGUuc2NyZWVuID0gc3RhdGUuc2NyZWVuSGlzdG9yeVtzdGF0ZS5zY3JlZW5IaXN0b3J5Lmxlbmd0aCAtIDFdO1xufVxuXG4vKipcbiAqIEF0dGFjaCB1c2VyIHNpdGUgdG8gSlNPTi1wb3dlcmVkIGRhdGEgZGljdGlvbmFyeSBvZiBzaXRlcyB0byBiZSByZWZlcmVuY2VkIGZyb20gb3RoZXJcbiAqIGNvbXBvbmVudHMuIFNvbWUgb2YgdGhlIGRhdGEgaXMgcmVuZGVyZWQgaW50byBgc3VwZXJsaW5rYCB3aGljaCBpcyB1c2VkIHRvIHJlbmRlciBsb2dvXG4gKiBhbmQgdGl0bGUgdGV4dHMuXG4gKi9cbmZ1bmN0aW9uIGFkZFVzZXJTaXRlVG9TaXRlRGF0YSAoc2l0ZSwgaSkge1xuICBzaXRlLmF1dGhvciA9ICdOL0EnO1xuICBzaXRlLmRlc2NyaXB0aW9uID0gJ0Egc2l0ZSB5b3UgYWRkZWQhJztcbiAgc2l0ZS5pZCA9IGB1c2VyU2l0ZSR7aX1gO1xuICBzaXRlLmlzVXNlclNpdGUgPSB0cnVlO1xuICBzaXRlLnRpdGxlVGV4dCA9IHV0aWxzLnRydW5jYXRlKHNpdGUudGl0bGUsIDI1KTtcbiAgU0lURV9EQVRBLlNJVEVTW3NpdGUuaWRdID0gc2l0ZTtcbn1cblxuLyoqXG4gKiBTZXQgb3IgcG9wdWxhdGUgYWN0aXZlIGNvbGxlY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHNldENvbGxlY3Rpb24gKHN0YXRlLCBjb2xsZWN0aW9uSWQpIHtcbiAgdmFyIGNvbGxlY3Rpb247XG4gIHZhciBpO1xuXG4gIHN0YXRlLmFjdGl2ZUNvbGxlY3Rpb24ubGVuZ3RoID0gMDtcbiAgc3RhdGUuYWN0aXZlQ29sbGVjdGlvbi5fX2RpcnR5ID0gdHJ1ZTtcbiAgc3RhdGUudXNlckNvbGxlY3Rpb25BY3RpdmUgPSBjb2xsZWN0aW9uSWQgPT09IFVTRVJfQ09MTEVDVElPTl9JRDtcblxuICBjb2xsZWN0aW9uID0gU0lURV9EQVRBLkNPTExFQ1RJT05TW2NvbGxlY3Rpb25JZF07XG4gIHN0YXRlLmFjdGl2ZUNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb24uaWQ7XG4gIHN0YXRlLmFjdGl2ZUNvbGxlY3Rpb25EZXNjcmlwdGlvbiA9IGNvbGxlY3Rpb24uZGVzY3JpcHRpb247XG4gIHN0YXRlLmFjdGl2ZUNvbGxlY3Rpb25UaXRsZSA9IGNvbGxlY3Rpb24udGl0bGU7XG5cbiAgLy8gVXNlciBjb2xsZWN0aW9uLlxuICBpZiAoY29sbGVjdGlvbklkID09PSBVU0VSX0NPTExFQ1RJT05fSUQpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgc3RhdGUudXNlckNvbGxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN0YXRlLmFjdGl2ZUNvbGxlY3Rpb24ucHVzaChzdGF0ZS51c2VyQ29sbGVjdGlvbltpXSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIExvb2t1cCBhbmQgYWRkIHNpdGUgZGF0YSB0byBjb2xsZWN0aW9uIGZvciBub3JtYWwgY29sbGVjdGlvbnMuXG4gIGZvciAoaSA9IDA7IGkgPCBjb2xsZWN0aW9uLnNpdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3RhdGUuYWN0aXZlQ29sbGVjdGlvbi5wdXNoKFNJVEVfREFUQS5TSVRFU1tjb2xsZWN0aW9uLnNpdGVzW2ldXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBsZWZ0IGFuZCByaWdodCBwYWdpbmF0b3IgYXJyb3dzIGFyZSBhY3RpdmUuXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVQYWdpbmF0b3JzIChzdGF0ZSkge1xuICBpZiAoc3RhdGUuc2NyZWVuID09PSAnc2VhcmNoJykge1xuICAgIHN0YXRlLnBhZ2UuaGFzTGVmdCA9IGZhbHNlO1xuICAgIHN0YXRlLnBhZ2UuaGFzUmlnaHQgPSBmYWxzZTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoc3RhdGUuc2NyZWVuID09PSAnY29sbGVjdGlvbicpIHtcbiAgICBzdGF0ZS5wYWdlLmhhc0xlZnQgPSBzdGF0ZS5wYWdlLmNvbGxlY3Rpb24gIT09IDA7XG4gICAgc3RhdGUucGFnZS5oYXNSaWdodCA9IHN0YXRlLmFjdGl2ZUNvbGxlY3Rpb24ubGVuZ3RoID4gNiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5wYWdlLmNvbGxlY3Rpb24gPCBnZXROdW1QYWdlcyhzdGF0ZSkgLSAxO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEZlZWQuXG4gIC8vIEFjY291bnQgZm9yIHVzZXIgY29sbGVjdGlvbiAocGFnZSA9PT0gLTEpLlxuICBzdGF0ZS5wYWdlLmhhc0xlZnQgPSBzdGF0ZS5wYWdlLmZlZWQgIT09IC0xO1xuICBzdGF0ZS5wYWdlLmhhc1JpZ2h0ID0gc3RhdGUucGFnZS5mZWVkIDwgRkVFRF9QQUdFUyAtIDE7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIG51bWJlciBvZiBwYWdlcyAoZGVwZW5kIG9uIHR5cGUgb2YgcGFnaW5hdGVkIGxpc3QpLlxuICovXG5mdW5jdGlvbiBnZXROdW1QYWdlcyAoc3RhdGUpIHtcbiAgcmV0dXJuIHN0YXRlLnNjcmVlbiA9PT0gJ2NvbGxlY3Rpb24nXG4gICAgPyBNYXRoLmNlaWwoc3RhdGUuYWN0aXZlQ29sbGVjdGlvbi5sZW5ndGggLyA2KVxuICAgIDogRkVFRF9QQUdFUztcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdGF0ZS9pbmRleC5qcyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikodW5kZWZpbmVkKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImh0bWwsXFxuYm9keSB7XFxuICBiYWNrZ3JvdW5kOiAjMmIyYjJiO1xcbiAgZm9udDogMTZweCAnU291cmNlIFNhbnMgUHJvJywgc2Fucy1zZXJpZjtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDA7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbn1cXG4uYS1lbnRlci12ci1idXR0b24ge1xcbiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xcbn1cXG4ucGFuZWxDb250YWluZXIgaDEsXFxuLnBhbmVsQ29udGFpbmVyIGgyLFxcbi5wYW5lbENvbnRhaW5lciBoMyB7XFxuICBjb2xvcjogIzcxZmNlNztcXG4gIGZvbnQtZmFtaWx5OiAnU2FuY2hleic7XFxufVxcbi5wYW5lbENvbnRhaW5lciBoMiB7XFxuICBmb250LXNpemU6IDMwcHg7XFxufVxcbi5wYW5lbENvbnRhaW5lciBoMyB7XFxuICBmb250LXNpemU6IDIwcHg7XFxuICBmb250LXdlaWdodDogbm9ybWFsO1xcbn1cXG4ucGFuZWxDb250YWluZXIgdWwge1xcbiAgcGFkZGluZy1sZWZ0OiAxNXB4O1xcbn1cXG4ucGFuZWxDb250YWluZXIgYSB7XFxuICBjb2xvcjogI2ZkNzhiNztcXG4gIC13ZWJraXQtdHJhbnNpdGlvbjogY29sb3IgMC4xcztcXG4gIHRyYW5zaXRpb246IGNvbG9yIDAuMXM7XFxufVxcbi5wYW5lbENvbnRhaW5lciBhOmhvdmVyIHtcXG4gIGNvbG9yOiAjZmQ5M2M1O1xcbn1cXG4ucGFuZWxDb250YWluZXIgLmJ1dHRvbiB7XFxuICBiYWNrZ3JvdW5kOiAjNzFmY2U3O1xcbiAgYm9yZGVyOiBub25lO1xcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lO1xcbiAgICAgICAgICBib3gtc2hhZG93OiBub25lO1xcbiAgZm9udDogMTVweCAnU291cmNlIFNhbnMgUHJvJywgc2Fucy1zZXJpZjtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgY29sb3I6ICM0ZjRlNGQ7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICBtYXJnaW46IDEwcHggMDtcXG4gIHBhZGRpbmc6IDhweCAwO1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMXM7XFxuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMXM7XFxuICB3aWR0aDogMTAwJTtcXG59XFxuLnBhbmVsQ29udGFpbmVyIC5idXR0b246aG92ZXIge1xcbiAgYmFja2dyb3VuZDogIzRkZmJlMTtcXG59XFxuLnBhbmVsQ29udGFpbmVyIC5idXR0b24gLmJ1dHRvbkxvYWRpbmdUZXh0IHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcbi5wYW5lbENvbnRhaW5lciAuYnV0dG9uLmJ1dHRvbkxvYWRpbmcge1xcbiAgYmFja2dyb3VuZDogIzM0MzQzNDtcXG4gIGNvbG9yOiAjYWFhO1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxufVxcbi5wYW5lbENvbnRhaW5lciAuYnV0dG9uLmJ1dHRvbkxvYWRpbmc6YmVmb3JlIHtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG59XFxuLnBhbmVsQ29udGFpbmVyIC5idXR0b24uYnV0dG9uTG9hZGluZyAuYnV0dG9uVGV4dCB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG4ucGFuZWxDb250YWluZXIgLmJ1dHRvbi5idXR0b25Mb2FkaW5nIC5idXR0b25Mb2FkaW5nVGV4dCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxufVxcbi5wYW5lbENvbnRhaW5lciAuYnV0dG9uOmJlZm9yZSB7XFxuICAtd2Via2l0LWFuaW1hdGlvbjogbG9hZGluZ0luZGljYXRvciAxLjRzIGluZmluaXRlIGVhc2UtaW4tb3V0O1xcbiAgICAgICAgICBhbmltYXRpb246IGxvYWRpbmdJbmRpY2F0b3IgMS40cyBpbmZpbml0ZSBlYXNlLWluLW91dDtcXG4gIGJhY2tncm91bmQtaW1hZ2U6ICdhc3NldHMvaW1nL2xvZ28tYm9yZGVyLnBuZyc7XFxuICBiYWNrZ3JvdW5kLXNpemU6IDIwcHggMjBweDtcXG4gIGNvbnRlbnQ6ICcnO1xcbiAgZGlzcGxheTogbm9uZTtcXG4gIGxlZnQ6IDEycHg7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBoZWlnaHQ6IDIwcHg7XFxuICB0b3A6IDhweDtcXG4gIHdpZHRoOiAyMHB4O1xcbn1cXG4ucGFuZWxDb250YWluZXIgLnBhbmVsT3B0aW9uQ29udGFpbmVyIHtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbn1cXG4ucGFuZWwsXFxuLnBhbmVsU2VjdGlvbiB7XFxuICBib3JkZXI6IDNweCBzb2xpZDtcXG4gIC1vLWJvcmRlci1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgI2ZkNzhiNywgIzcxZmNlNykgMSAxMDAlO1xcbiAgICAgYm9yZGVyLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgbGVmdCB0b3AsIGxlZnQgYm90dG9tLCBmcm9tKCNmZDc4YjcpLCB0bygjNzFmY2U3KSkgMSAxMDAlO1xcbiAgICAgYm9yZGVyLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjZmQ3OGI3LCAjNzFmY2U3KSAxIDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBvcGFjaXR5OiAwLjk1O1xcbiAgcGFkZGluZzogMTBweCA1cHg7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxufVxcbi5wYW5lbFNlY3Rpb24gPiA6bGFzdC1jaGlsZCB7XFxuICBwYWRkaW5nLWJvdHRvbTogMzBweDtcXG59XFxuLnBhbmVsIHtcXG4gIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7XFxuICAgICAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjtcXG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGJhY2tncm91bmQ6ICMzMzM7XFxuICBjb2xvcjogI2ZhZmFmYTtcXG4gIGRpc3BsYXk6IC13ZWJraXQtYm94O1xcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcXG4gIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsO1xcbiAgICAgIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xcbiAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcXG4gICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XFxuICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xcbiAgd2lkdGg6IDcycHg7XFxuICB6LWluZGV4OiA5OTk5OTk5OTk5OTk7XFxufVxcbi5wYW5lbCAubG9nbyB7XFxuICBtYXJnaW4tdG9wOiAxNXB4O1xcbiAgbWFyZ2luLWJvdHRvbTogMzBweDtcXG4gIGhlaWdodDogNDhweDtcXG4gIHdpZHRoOiA0OHB4O1xcbn1cXG4ucGFuZWxPcHRpb24ge1xcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcXG4gICAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgY29sb3I6ICM3ZDdkN2Q7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICBkaXNwbGF5OiAtd2Via2l0LWJveDtcXG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZvbnQtc2l6ZTogMTNweDtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcXG4gIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsO1xcbiAgICAgIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgbWFyZ2luLWJvdHRvbTogMzBweDtcXG4gIG1hcmdpbi10b3A6IDBweDtcXG59XFxuLnBhbmVsT3B0aW9uOmhvdmVyIHtcXG4gIGNvbG9yOiAjZmFmYWZhO1xcbn1cXG4ucGFuZWxPcHRpb24ucGFuZWxPcHRpb25BY3RpdmUge1xcbiAgY29sb3I6ICM3MWZjZTc7XFxufVxcbi5wYW5lbE9wdGlvbiBzdmcge1xcbiAgZmlsbDogIzRiNGI0YjtcXG4gIGhlaWdodDogNDBweDtcXG4gIG1hcmdpbi1ib3R0b206IDJweDtcXG4gIHdpZHRoOiA0MHB4O1xcbn1cXG4ucGFuZWxPcHRpb246aG92ZXIgc3ZnLFxcbi5wYW5lbE9wdGlvbi5wYW5lbE9wdGlvbkFjdGl2ZSBzdmcge1xcbiAgZmlsbDogdXJsKFxcXCIjc3ZnZ3JhZFxcXCIpO1xcbn1cXG4ucGFuZWxTZWN0aW9uIHtcXG4gIGJhY2tncm91bmQ6ICM0YjRiNGI7XFxuICBjb2xvcjogI2RkZDtcXG4gIG92ZXJmbG93OiBhdXRvO1xcbiAgcGFkZGluZy1sZWZ0OiAxMDdweDtcXG4gIHBhZGRpbmctcmlnaHQ6IDI1cHg7XFxuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDAuMnM7XFxuICB0cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAwLjJzO1xcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnM7XFxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycywgLXdlYmtpdC10cmFuc2Zvcm0gMC4ycztcXG4gIHotaW5kZXg6IDk5OTk4O1xcbn1cXG4ucGFuZWxTZWN0aW9uLnBhbmVsU2VjdGlvblNpdGVzIHtcXG4gIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgtNDgycHgsIDAsIDApO1xcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKC00ODJweCwgMCwgMCk7XFxuICB3aWR0aDogMzUwcHg7XFxufVxcbi5wYW5lbFNlY3Rpb24ucGFuZWxTZWN0aW9uU2l0ZXMucGFuZWxTZWN0aW9uQWN0aXZlIHtcXG4gIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcXG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcXG59XFxuLnBhbmVsU2VjdGlvbi5wYW5lbFNlY3Rpb25TaXRlcyBpbnB1dFt0eXBlPVxcXCJ0ZXh0XFxcIl0ge1xcbiAgYmFja2dyb3VuZDogIzM2MzYzNjtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XFxuICBjb2xvcjogI2NjYztcXG4gIGZvbnQtc2l6ZTogMTNweDtcXG4gIG1hcmdpbi1ib3R0b206IDA7XFxuICBwYWRkaW5nOiA4cHggMTNweDtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxufVxcbi5zaXRlRGVsZXRlIHtcXG4gIGJvdHRvbTogNXB4O1xcbiAgZm9udC1zaXplOiAzMHB4O1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbn1cXG4ucGFuZWxTZWN0aW9uLnBhbmVsU2VjdGlvbk5ld3Mge1xcbiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKC00MTJweCwgMCwgMCk7XFxuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoLTQxMnB4LCAwLCAwKTtcXG4gIHdpZHRoOiAyODBweDtcXG59XFxuLnBhbmVsU2VjdGlvbi5wYW5lbFNlY3Rpb25OZXdzIHVsIHtcXG4gIGxpc3Qtc3R5bGU6IGRpc2M7XFxuICBwYWRkaW5nLWxlZnQ6IDE1cHg7XFxufVxcbi5wYW5lbFNlY3Rpb24ucGFuZWxTZWN0aW9uTmV3cyBsaSB7XFxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xcbn1cXG4ucGFuZWxTZWN0aW9uLnBhbmVsU2VjdGlvbk5ld3MucGFuZWxTZWN0aW9uQWN0aXZlIHtcXG4gIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcXG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcXG59XFxuLnBhbmVsU2VjdGlvbi5wYW5lbFNlY3Rpb25IZWxwIHtcXG4gIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgtNDEycHgsIDAsIDApO1xcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKC00MTJweCwgMCwgMCk7XFxuICB3aWR0aDogMjgwcHg7XFxufVxcbi5wYW5lbFNlY3Rpb24ucGFuZWxTZWN0aW9uSGVscC5wYW5lbFNlY3Rpb25BY3RpdmUge1xcbiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApO1xcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApO1xcbn1cXG4ucGFuZWxDb250YWluZXIgLnNpdGVDb250YWluZXIge1xcbiAgcGFkZGluZy1ib3R0b206IDQwcHg7XFxuICBwYWRkaW5nLWxlZnQ6IDA7XFxuICB3aWR0aDogMTAwJTtcXG59XFxuLnNpdGUge1xcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcXG4gICAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgYmFja2dyb3VuZDogIzQwNDA0MDtcXG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XFxuICBkaXNwbGF5OiAtd2Via2l0LWJveDtcXG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xcbiAgZGlzcGxheTogZmxleDtcXG4gIHBhZGRpbmc6IDhweDtcXG4gIHBhZGRpbmctcmlnaHQ6IDEwcHg7XFxuICBtYXJnaW46IDEwcHggMDtcXG4gIC13ZWJraXQtdHJhbnNpdGlvbjogY29sb3IgMC4xcztcXG4gIHRyYW5zaXRpb246IGNvbG9yIDAuMXM7XFxufVxcbi5zaXRlIGltZyB7XFxuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XFxuICBoZWlnaHQ6IDMycHg7XFxuICB3aWR0aDogMzJweDtcXG59XFxuLnNpdGUgcCB7XFxuICBtYXJnaW46IDA7XFxuICBmb250LXNpemU6IDEzcHg7XFxuICBsaW5lLWhlaWdodDogMThweDtcXG59XFxuLnNpdGUgcDpmaXJzdC1jaGlsZCB7XFxuICBmb250LXNpemU6IDIwcHg7XFxuICBmb250LXdlaWdodDogYm9sZDtcXG59XFxuLnNpdGUgLnNpdGVEYXRhIHtcXG4gIGRpc3BsYXk6IC13ZWJraXQtYm94O1xcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcXG4gIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsO1xcbiAgICAgIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgLXdlYmtpdC1ib3gtZmxleDogMTtcXG4gICAgICAtbXMtZmxleC1wb3NpdGl2ZTogMTtcXG4gICAgICAgICAgZmxleC1ncm93OiAxO1xcbiAgbWF4LXdpZHRoOiAxMDAlO1xcbn1cXG4uYWZyYW1lLWluc3BlY3Rvci1vcGVuZWQgLnBhbmVsQ29udGFpbmVyIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcbiNzdmdHcmFkaWVudCB7XFxuICBoZWlnaHQ6IDA7XFxuICB3aWR0aDogMDtcXG59XFxuLmhlbHBCYWNrTG9iYnlWaXZlIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcbi5oZWxwQmFja0xvYmJ5T2N1bHVzIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcbiNoZWxwQmFja0xvYmJ5W2RhdGEtY29udHJvbGxlcj1cXFwidml2ZS1jb250cm9sc1xcXCJdIC5oZWxwQmFja0xvYmJ5Vml2ZSB7XFxuICBkaXNwbGF5OiBibG9jaztcXG59XFxuI2hlbHBCYWNrTG9iYnlbZGF0YS1jb250cm9sbGVyPVxcXCJ2aXZlLWNvbnRyb2xzXFxcIl0gLmhlbHBCYWNrTG9iYnlPY3VsdXMge1xcbiAgZGlzcGxheTogbm9uZTtcXG59XFxuI2hlbHBCYWNrTG9iYnlbZGF0YS1jb250cm9sbGVyPVxcXCJvY3VsdXMtdG91Y2gtY29udHJvbHNcXFwiXSAuaGVscEJhY2tMb2JieVZpdmUsXFxuI2hlbHBCYWNrTG9iYnlbZGF0YS1jb250cm9sbGVyPVxcXCJ3aW5kb3dzLW1vdGlvbi1jb250cm9sc1xcXCJdIC5oZWxwQmFja0xvYmJ5Vml2ZSB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG4jaGVscEJhY2tMb2JieVtkYXRhLWNvbnRyb2xsZXI9XFxcIm9jdWx1cy10b3VjaC1jb250cm9sc1xcXCJdIC5oZWxwQmFja0xvYmJ5T2N1bHVzLFxcbiNoZWxwQmFja0xvYmJ5W2RhdGEtY29udHJvbGxlcj1cXFwid2luZG93cy1tb3Rpb24tY29udHJvbHNcXFwiXSAuaGVscEJhY2tMb2JieU9jdWx1cyB7XFxuICBkaXNwbGF5OiBibG9jaztcXG59XFxuLmhlbHBCYWNrTG9iYnkge1xcbiAgcG9zaXRpb246IGZpeGVkO1xcbiAgcmlnaHQ6IDEwcHg7XFxuICB0b3A6IDA7XFxuICB6LWluZGV4OiA5OTk3O1xcbn1cXG4uaGVscEJhY2tMb2JieSBpbWcge1xcbiAgaGVpZ2h0OiAyMDBweDtcXG59XFxuLmhlbHBCYWNrTG9iYnkgZGl2IHtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4zKTtcXG4gIGJvcmRlci1yYWRpdXM6IDEzcHg7XFxuICBjb2xvcjogI2YwZjBmMDtcXG4gIGZvbnQ6IDE1cHggJ1NvdXJjZSBTYW5zIFBybycsIHNhbnMtc2VyaWY7XFxuICBwYWRkaW5nOiA4cHggMTRweCA4cHggMTBweDtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHJpZ2h0OiAxODVweDtcXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xcbiAgdGV4dC1zaGFkb3c6IDAgMHB4IDJweCByZ2JhKDE1NSwxNTUsMTU1LDAuNSk7XFxuICB0b3A6IDQ1cHg7XFxuICB3aWR0aDogMTcwcHg7XFxufVxcbiNwbHVneW91cmhlYWRzZXQge1xcbiAgYmFja2dyb3VuZDogIzI3MjcyNztcXG4gIGJvcmRlci1yYWRpdXM6IDE1cHg7XFxuICBib3R0b206IC0xMDBweDtcXG4gIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIGNvbG9yOiAjZmZmO1xcbiAgZm9udC1zaXplOiAyM3B4O1xcbiAgaGVpZ2h0OiA4MHB4O1xcbiAgbGVmdDogMTEwcHg7XFxuICBwYWRkaW5nOiAyMHB4IDMwcHg7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB3aWR0aDogMzUwcHg7XFxuICB6LWluZGV4OiA4ODg4ODtcXG59XFxuI3BsdWd5b3VyaGVhZHNldC5zbGlkZXVwIHtcXG4gIC13ZWJraXQtYW5pbWF0aW9uOiBzbGlkZS10b3AgMC4zcyBjdWJpYy1iZXppZXIoMC4xNzUsIDAuODg1LCAwLjMyLCAxLjI3NSkgMXMgYm90aDtcXG4gICAgICAgICAgYW5pbWF0aW9uOiBzbGlkZS10b3AgMC4zcyBjdWJpYy1iZXppZXIoMC4xNzUsIDAuODg1LCAwLjMyLCAxLjI3NSkgMXMgYm90aDtcXG59XFxuI3BsdWd5b3VyaGVhZHNldC5zbGlkZXVwIGltZyB7XFxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xcbiAgbWFyZ2luLWJvdHRvbTogMnB4O1xcbn1cXG4jZGV2VVJMSW5wdXQge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ZmVlOTtcXG4gIGNvbG9yOiAjMzMzO1xcbn1cXG4jZGV2VVJMSW5wdXQ6Zm9jdXMge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzM2MzYzNjtcXG4gIGNvbG9yOiAjNzFmY2U3O1xcbn1cXG5ib2R5IGEtc2NlbmUuZnVsbHNjcmVlbiAuYS1jYW52YXMge1xcbiAgei1pbmRleDogMCAhaW1wb3J0YW50O1xcbn1cXG4jYWxnb2xpYUxvZ28gaW1nIHtcXG4gIG1hcmdpbjogNXB4IDAgMjBweCAwO1xcbiAgd2lkdGg6IDEyNXB4O1xcbn1cXG4jbG9hZGluZ0luZGljYXRvckNvbnRhaW5lciB7XFxuICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyO1xcbiAgICAgIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7XFxuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBkaXNwbGF5OiAtd2Via2l0LWJveDtcXG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xcbiAgZGlzcGxheTogZmxleDtcXG4gIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XFxuICAtd2Via2l0LWJveC1kaXJlY3Rpb246IG5vcm1hbDtcXG4gICAgICAtbXMtZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGhlaWdodDogMTAwJTtcXG4gIC13ZWJraXQtYm94LXBhY2s6IGNlbnRlcjtcXG4gICAgICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7XFxuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcbiNsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyIHAge1xcbiAgY29sb3I6ICNmYWZhZmE7XFxuICBmb250LXdlaWdodDogYm9sZDtcXG4gIGZvbnQtc2l6ZTogMjRweDtcXG59XFxuI2xvYWRpbmdJbmRpY2F0b3Ige1xcbiAgLXdlYmtpdC1hbmltYXRpb246IHB1bHNlIDNzIGluZmluaXRlO1xcbiAgICAgICAgICBhbmltYXRpb246IHB1bHNlIDNzIGluZmluaXRlO1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgbGVmdDogMTVweDtcXG59XFxuQC13ZWJraXQta2V5ZnJhbWVzIGxvYWRpbmdJbmRpY2F0b3Ige1xcbiAgMCUge1xcbiAgICBvcGFjaXR5OiAwLjA1O1xcbiAgfVxcbiAgNTAlIHtcXG4gICAgb3BhY2l0eTogMC44NTtcXG4gIH1cXG4gIDEwMCUge1xcbiAgICBvcGFjaXR5OiAwLjA1O1xcbiAgfVxcbn1cXG5Aa2V5ZnJhbWVzIGxvYWRpbmdJbmRpY2F0b3Ige1xcbiAgMCUge1xcbiAgICBvcGFjaXR5OiAwLjA1O1xcbiAgfVxcbiAgNTAlIHtcXG4gICAgb3BhY2l0eTogMC44NTtcXG4gIH1cXG4gIDEwMCUge1xcbiAgICBvcGFjaXR5OiAwLjA1O1xcbiAgfVxcbn1cXG5ALXdlYmtpdC1rZXlmcmFtZXMgc2xpZGUtdG9wIHtcXG4gIDAlIHtcXG4gICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XFxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xcbiAgfVxcbiAgMTAwJSB7XFxuICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMjBweCk7XFxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMjBweCk7XFxuICB9XFxufVxcbkBrZXlmcmFtZXMgc2xpZGUtdG9wIHtcXG4gIDAlIHtcXG4gICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XFxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xcbiAgfVxcbiAgMTAwJSB7XFxuICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMjBweCk7XFxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMjBweCk7XFxuICB9XFxufVxcbkAtd2Via2l0LWtleWZyYW1lcyBwdWxzZSB7XFxuICAwJSB7XFxuICAgIG9wYWNpdHk6IDE7XFxuICB9XFxuICA1MCUge1xcbiAgICBvcGFjaXR5OiAwO1xcbiAgfVxcbiAgMTAwJSB7XFxuICAgIG9wYWNpdHk6IDE7XFxuICB9XFxufVxcbkBrZXlmcmFtZXMgcHVsc2Uge1xcbiAgMCUge1xcbiAgICBvcGFjaXR5OiAxO1xcbiAgfVxcbiAgNTAlIHtcXG4gICAgb3BhY2l0eTogMDtcXG4gIH1cXG4gIDEwMCUge1xcbiAgICBvcGFjaXR5OiAxO1xcbiAgfVxcbn1cXG5cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vY3NzLWxvYWRlciEuL34vcG9zdGNzcy1sb2FkZXIvbGliP3tcImlkZW50XCI6XCJwb3N0Y3NzXCJ9IS4vfi9zdHlsdXMtbG9hZGVyIS4vc3JjL2Nzcy9pbmRleC5zdHlsXG4vLyBtb2R1bGUgaWQgPSA5OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXNlU291cmNlTWFwKSB7XG5cdHZhciBsaXN0ID0gW107XG5cblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmV0dXJuIFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgY29udGVudCArIFwifVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSkuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcblx0dmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnO1xuXHR2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cdGlmICghY3NzTWFwcGluZykge1xuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0aWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuXHRcdHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5cdHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuXHR2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuXG5cdHJldHVybiAnLyojICcgKyBkYXRhICsgJyAqLyc7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuLyoqXG4gKiBUaGlzIGlzIHRoZSBjb21tb24gbG9naWMgZm9yIGJvdGggdGhlIE5vZGUuanMgYW5kIHdlYiBicm93c2VyXG4gKiBpbXBsZW1lbnRhdGlvbnMgb2YgYGRlYnVnKClgLlxuICpcbiAqIEV4cG9zZSBgZGVidWcoKWAgYXMgdGhlIG1vZHVsZS5cbiAqL1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVEZWJ1Zy5kZWJ1ZyA9IGNyZWF0ZURlYnVnWydkZWZhdWx0J10gPSBjcmVhdGVEZWJ1ZztcbmV4cG9ydHMuY29lcmNlID0gY29lcmNlO1xuZXhwb3J0cy5kaXNhYmxlID0gZGlzYWJsZTtcbmV4cG9ydHMuZW5hYmxlID0gZW5hYmxlO1xuZXhwb3J0cy5lbmFibGVkID0gZW5hYmxlZDtcbmV4cG9ydHMuaHVtYW5pemUgPSByZXF1aXJlKCdtcycpO1xuXG4vKipcbiAqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGRlYnVnIG1vZGUgbmFtZXMsIGFuZCBuYW1lcyB0byBza2lwLlxuICovXG5cbmV4cG9ydHMubmFtZXMgPSBbXTtcbmV4cG9ydHMuc2tpcHMgPSBbXTtcblxuLyoqXG4gKiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG4gKlxuICogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gXCJuXCIgYW5kIFwiTlwiLlxuICovXG5cbmV4cG9ydHMuZm9ybWF0dGVycyA9IHt9O1xuXG4vKipcbiAqIFByZXZpb3VzIGxvZyB0aW1lc3RhbXAuXG4gKi9cblxudmFyIHByZXZUaW1lO1xuXG4vKipcbiAqIFNlbGVjdCBhIGNvbG9yLlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG4gIHZhciBoYXNoID0gMCwgaTtcblxuICBmb3IgKGkgaW4gbmFtZXNwYWNlKSB7XG4gICAgaGFzaCAgPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuICAgIGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG4gIH1cblxuICByZXR1cm4gZXhwb3J0cy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBleHBvcnRzLmNvbG9ycy5sZW5ndGhdO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblxuICBmdW5jdGlvbiBkZWJ1ZygpIHtcbiAgICAvLyBkaXNhYmxlZD9cbiAgICBpZiAoIWRlYnVnLmVuYWJsZWQpIHJldHVybjtcblxuICAgIHZhciBzZWxmID0gZGVidWc7XG5cbiAgICAvLyBzZXQgYGRpZmZgIHRpbWVzdGFtcFxuICAgIHZhciBjdXJyID0gK25ldyBEYXRlKCk7XG4gICAgdmFyIG1zID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtcbiAgICBzZWxmLmRpZmYgPSBtcztcbiAgICBzZWxmLnByZXYgPSBwcmV2VGltZTtcbiAgICBzZWxmLmN1cnIgPSBjdXJyO1xuICAgIHByZXZUaW1lID0gY3VycjtcblxuICAgIC8vIHR1cm4gdGhlIGBhcmd1bWVudHNgIGludG8gYSBwcm9wZXIgQXJyYXlcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuXG4gICAgYXJnc1swXSA9IGV4cG9ydHMuY29lcmNlKGFyZ3NbMF0pO1xuXG4gICAgaWYgKCdzdHJpbmcnICE9PSB0eXBlb2YgYXJnc1swXSkge1xuICAgICAgLy8gYW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJU9cbiAgICAgIGFyZ3MudW5zaGlmdCgnJU8nKTtcbiAgICB9XG5cbiAgICAvLyBhcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9uc1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgYXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIGZ1bmN0aW9uKG1hdGNoLCBmb3JtYXQpIHtcbiAgICAgIC8vIGlmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXhcbiAgICAgIGlmIChtYXRjaCA9PT0gJyUlJykgcmV0dXJuIG1hdGNoO1xuICAgICAgaW5kZXgrKztcbiAgICAgIHZhciBmb3JtYXR0ZXIgPSBleHBvcnRzLmZvcm1hdHRlcnNbZm9ybWF0XTtcbiAgICAgIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZm9ybWF0dGVyKSB7XG4gICAgICAgIHZhciB2YWwgPSBhcmdzW2luZGV4XTtcbiAgICAgICAgbWF0Y2ggPSBmb3JtYXR0ZXIuY2FsbChzZWxmLCB2YWwpO1xuXG4gICAgICAgIC8vIG5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGBcbiAgICAgICAgYXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBpbmRleC0tO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH0pO1xuXG4gICAgLy8gYXBwbHkgZW52LXNwZWNpZmljIGZvcm1hdHRpbmcgKGNvbG9ycywgZXRjLilcbiAgICBleHBvcnRzLmZvcm1hdEFyZ3MuY2FsbChzZWxmLCBhcmdzKTtcblxuICAgIHZhciBsb2dGbiA9IGRlYnVnLmxvZyB8fCBleHBvcnRzLmxvZyB8fCBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xuICAgIGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICB9XG5cbiAgZGVidWcubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuICBkZWJ1Zy5lbmFibGVkID0gZXhwb3J0cy5lbmFibGVkKG5hbWVzcGFjZSk7XG4gIGRlYnVnLnVzZUNvbG9ycyA9IGV4cG9ydHMudXNlQ29sb3JzKCk7XG4gIGRlYnVnLmNvbG9yID0gc2VsZWN0Q29sb3IobmFtZXNwYWNlKTtcblxuICAvLyBlbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGV4cG9ydHMuaW5pdCkge1xuICAgIGV4cG9ydHMuaW5pdChkZWJ1Zyk7XG4gIH1cblxuICByZXR1cm4gZGVidWc7XG59XG5cbi8qKlxuICogRW5hYmxlcyBhIGRlYnVnIG1vZGUgYnkgbmFtZXNwYWNlcy4gVGhpcyBjYW4gaW5jbHVkZSBtb2Rlc1xuICogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuICBleHBvcnRzLnNhdmUobmFtZXNwYWNlcyk7XG5cbiAgZXhwb3J0cy5uYW1lcyA9IFtdO1xuICBleHBvcnRzLnNraXBzID0gW107XG5cbiAgdmFyIHNwbGl0ID0gKHR5cGVvZiBuYW1lc3BhY2VzID09PSAnc3RyaW5nJyA/IG5hbWVzcGFjZXMgOiAnJykuc3BsaXQoL1tcXHMsXSsvKTtcbiAgdmFyIGxlbiA9IHNwbGl0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKCFzcGxpdFtpXSkgY29udGludWU7IC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG4gICAgbmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1xcKi9nLCAnLio/Jyk7XG4gICAgaWYgKG5hbWVzcGFjZXNbMF0gPT09ICctJykge1xuICAgICAgZXhwb3J0cy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwb3J0cy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcyArICckJykpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgZXhwb3J0cy5lbmFibGUoJycpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG4gIHZhciBpLCBsZW47XG4gIGZvciAoaSA9IDAsIGxlbiA9IGV4cG9ydHMuc2tpcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoZXhwb3J0cy5za2lwc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGZvciAoaSA9IDAsIGxlbiA9IGV4cG9ydHMubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoZXhwb3J0cy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENvZXJjZSBgdmFsYC5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSB2YWxcbiAqIEByZXR1cm4ge01peGVkfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuICBpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG4gIHJldHVybiB2YWw7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZGVidWcvc3JjL2RlYnVnLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuICogQHZlcnNpb24gICB2NC4yLjQrMzE0ZTQ4MzFcbiAqL1xuXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdChnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHg7XG4gIHJldHVybiB4ICE9PSBudWxsICYmICh0eXBlID09PSAnb2JqZWN0JyB8fCB0eXBlID09PSAnZnVuY3Rpb24nKTtcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuXG5cbnZhciBfaXNBcnJheSA9IHZvaWQgMDtcbmlmIChBcnJheS5pc0FycmF5KSB7XG4gIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbn0gZWxzZSB7XG4gIF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xufVxuXG52YXIgaXNBcnJheSA9IF9pc0FycmF5O1xuXG52YXIgbGVuID0gMDtcbnZhciB2ZXJ0eE5leHQgPSB2b2lkIDA7XG52YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB2b2lkIDA7XG5cbnZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcbiAgcXVldWVbbGVuICsgMV0gPSBhcmc7XG4gIGxlbiArPSAyO1xuICBpZiAobGVuID09PSAyKSB7XG4gICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZUZsdXNoKCk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG59XG5cbmZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7XG4gIGFzYXAgPSBhc2FwRm47XG59XG5cbnZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG52YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xudmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYge30udG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxudmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuLy8gbm9kZVxuZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG59XG5cbi8vIHZlcnR4XG5mdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuICBpZiAodHlwZW9mIHZlcnR4TmV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmVydHhOZXh0KGZsdXNoKTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcbiAgfTtcbn1cblxuLy8gd2ViIHdvcmtlclxuZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG4gIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XG4gIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbiAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcbiAgfTtcbn1cblxudmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuZnVuY3Rpb24gZmx1c2goKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXG4gICAgY2FsbGJhY2soYXJnKTtcblxuICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgdmVydHggPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpLnJlcXVpcmUoJ3ZlcnR4Jyk7XG4gICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbiAgfVxufVxuXG52YXIgc2NoZWR1bGVGbHVzaCA9IHZvaWQgMDtcbi8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5pZiAoaXNOb2RlKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xufSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpO1xufSBlbHNlIGlmIChpc1dvcmtlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTtcbn0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTtcbn0gZWxzZSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIHBhcmVudCA9IHRoaXM7XG5cbiAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcbiAgICBtYWtlUHJvbWlzZShjaGlsZCk7XG4gIH1cblxuICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuXG4gIGlmIChfc3RhdGUpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbX3N0YXRlIC0gMV07XG4gICAgYXNhcChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuICB9XG5cbiAgcmV0dXJuIGNoaWxkO1xufVxuXG4vKipcbiAgYFByb21pc2UucmVzb2x2ZWAgcmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSByZXNvbHZlZCB3aXRoIHRoZVxuICBwYXNzZWQgYHZhbHVlYC4gSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlc29sdmUoMSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKDEpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVzb2x2ZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QW55fSB2YWx1ZSB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aFxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBnaXZlblxuICBgdmFsdWVgXG4qL1xuZnVuY3Rpb24gcmVzb2x2ZSQxKG9iamVjdCkge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cblxuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMik7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG52YXIgUEVORElORyA9IHZvaWQgMDtcbnZhciBGVUxGSUxMRUQgPSAxO1xudmFyIFJFSkVDVEVEID0gMjtcblxudmFyIFRSWV9DQVRDSF9FUlJPUiA9IHsgZXJyb3I6IG51bGwgfTtcblxuZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG59XG5cbmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlcnJvcjtcbiAgICByZXR1cm4gVFJZX0NBVENIX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyeVRoZW4odGhlbiQkMSwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuICB0cnkge1xuICAgIHRoZW4kJDEuY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbiQkMSkge1xuICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgIHZhciBlcnJvciA9IHRyeVRoZW4odGhlbiQkMSwgdGhlbmFibGUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcblxuICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblxuICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9XG4gIH0sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBGVUxGSUxMRUQpIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICByZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpIHtcbiAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiYgdGhlbiQkMSA9PT0gdGhlbiAmJiBtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yLnJlc29sdmUgPT09IHJlc29sdmUkMSkge1xuICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGVuJCQxID09PSBUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCBUUllfQ0FUQ0hfRVJST1IuZXJyb3IpO1xuICAgICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKHRoZW4kJDEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhlbiQkMSkpIHtcbiAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICByZWplY3QocHJvbWlzZSwgc2VsZkZ1bGZpbGxtZW50KCkpO1xuICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgZ2V0VGhlbih2YWx1ZSkpO1xuICB9IGVsc2Uge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuICBpZiAocHJvbWlzZS5fb25lcnJvcikge1xuICAgIHByb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTtcbiAgfVxuXG4gIHB1Ymxpc2gocHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG4gIHByb21pc2UuX3N0YXRlID0gRlVMRklMTEVEO1xuXG4gIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggIT09IDApIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHByb21pc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHByb21pc2UuX3N0YXRlID0gUkVKRUNURUQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblxuICBhc2FwKHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9zdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG4gIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG5cbiAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjtcblxuICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHBhcmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG4gIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2hpbGQgPSB2b2lkIDAsXG4gICAgICBjYWxsYmFjayA9IHZvaWQgMCxcbiAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgIGlmIChjaGlsZCkge1xuICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgIH1cbiAgfVxuXG4gIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7XG4gICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHZhciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuICAgICAgdmFsdWUgPSB2b2lkIDAsXG4gICAgICBlcnJvciA9IHZvaWQgMCxcbiAgICAgIHN1Y2NlZWRlZCA9IHZvaWQgMCxcbiAgICAgIGZhaWxlZCA9IHZvaWQgMDtcblxuICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXG4gICAgaWYgKHZhbHVlID09PSBUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuICAgICAgdmFsdWUuZXJyb3IgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIC8vIG5vb3BcbiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgfSBlbHNlIGlmIChmYWlsZWQpIHtcbiAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICB0cnkge1xuICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG4gICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZWplY3QocHJvbWlzZSwgZSk7XG4gIH1cbn1cblxudmFyIGlkID0gMDtcbmZ1bmN0aW9uIG5leHRJZCgpIHtcbiAgcmV0dXJuIGlkKys7XG59XG5cbmZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHtcbiAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7XG4gIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG59XG5cbnZhciBFbnVtZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG5cbiAgICBpZiAoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSkge1xuICAgICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgICB9XG5cbiAgICBpZiAoaXNBcnJheShpbnB1dCkpIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXG4gICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICAgIHRoaXMuX2VudW1lcmF0ZShpbnB1dCk7XG4gICAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWplY3QodGhpcy5wcm9taXNlLCB2YWxpZGF0aW9uRXJyb3IoKSk7XG4gICAgfVxuICB9XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uIF9lbnVtZXJhdGUoaW5wdXQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuICAgIH1cbiAgfTtcblxuICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gX2VhY2hFbnRyeShlbnRyeSwgaSkge1xuICAgIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgICB2YXIgcmVzb2x2ZSQkMSA9IGMucmVzb2x2ZTtcblxuXG4gICAgaWYgKHJlc29sdmUkJDEgPT09IHJlc29sdmUkMSkge1xuICAgICAgdmFyIF90aGVuID0gZ2V0VGhlbihlbnRyeSk7XG5cbiAgICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcbiAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UkMSkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApO1xuICAgICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG4gICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkMSkge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlJCQxKGVudHJ5KTtcbiAgICAgICAgfSksIGkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkMShlbnRyeSksIGkpO1xuICAgIH1cbiAgfTtcblxuICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24gX3NldHRsZWRBdChzdGF0ZSwgaSwgdmFsdWUpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcblxuXG4gICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgICB0aGlzLl9yZW1haW5pbmctLTtcblxuICAgICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgIH1cbiAgfTtcblxuICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKSB7XG4gICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gICAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KEZVTEZJTExFRCwgaSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIEVudW1lcmF0b3I7XG59KCk7XG5cbi8qKlxuICBgUHJvbWlzZS5hbGxgIGFjY2VwdHMgYW4gYXJyYXkgb2YgcHJvbWlzZXMsIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2hcbiAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxuICByZWplY3RlZCB3aXRoIHRoZSByZWFzb24gb2YgdGhlIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBJdCBjYXN0cyBhbGxcbiAgZWxlbWVudHMgb2YgdGhlIHBhc3NlZCBpdGVyYWJsZSB0byBwcm9taXNlcyBhcyBpdCBydW5zIHRoaXMgYWxnb3JpdGhtLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpO1xuICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XG4gIH0pO1xuICBgYGBcblxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYGFsbGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZVxuICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3NcbiAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XG4gIGxldCBwcm9taXNlMyA9IHJlamVjdChuZXcgRXJyb3IoXCIzXCIpKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgIC8vIGVycm9yLm1lc3NhZ2UgPT09IFwiMlwiXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIGFsbFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXNcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlblxuICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cbiAgQHN0YXRpY1xuKi9cbmZ1bmN0aW9uIGFsbChlbnRyaWVzKSB7XG4gIHJldHVybiBuZXcgRW51bWVyYXRvcih0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xufVxuXG4vKipcbiAgYFByb21pc2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRsZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZVxuICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxuICAgIC8vIHdhcyByZXNvbHZlZC5cbiAgfSk7XG4gIGBgYFxuXG4gIGBQcm9taXNlLnJhY2VgIGlzIGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUgZmlyc3RcbiAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzXG4gIGJlY29tZSByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZFxuICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVuc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG4gICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWRcbiAgfSk7XG4gIGBgYFxuXG4gIEFuIGV4YW1wbGUgcmVhbC13b3JsZCB1c2UgY2FzZSBpcyBpbXBsZW1lbnRpbmcgdGltZW91dHM6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxuICBgYGBcblxuICBAbWV0aG9kIHJhY2VcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcbiAgcHJvbWlzZSB0byBzZXR0bGUuXG4qL1xuZnVuY3Rpb24gcmFjZShlbnRyaWVzKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAoXywgcmVqZWN0KSB7XG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC5cbiAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVqZWN0XG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4gYHJlYXNvbmAuXG4qL1xuZnVuY3Rpb24gcmVqZWN0JDEocmVhc29uKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIG5lZWRzUmVzb2x2ZXIoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3InKTtcbn1cblxuZnVuY3Rpb24gbmVlZHNOZXcoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG59XG5cbi8qKlxuICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG4gIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxuICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICBUZXJtaW5vbG9neVxuICAtLS0tLS0tLS0tLVxuXG4gIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cbiAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLlxuICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cblxuICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cbiAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcbiAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZVxuICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblxuICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcbiAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUnc1xuICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuICBpdHNlbGYgZnVsZmlsbC5cblxuXG4gIEJhc2ljIFVzYWdlOlxuICAtLS0tLS0tLS0tLS1cblxuICBgYGBqc1xuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIC8vIG9uIHN1Y2Nlc3NcbiAgICByZXNvbHZlKHZhbHVlKTtcblxuICAgIC8vIG9uIGZhaWx1cmVcbiAgICByZWplY3QocmVhc29uKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBBZHZhbmNlZCBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tLS0tXG5cbiAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xuICBgWE1MSHR0cFJlcXVlc3Rgcy5cblxuICBgYGBqc1xuICBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cbiAgYGBganNcbiAgUHJvbWlzZS5hbGwoW1xuICAgIGdldEpTT04oJy9wb3N0cycpLFxuICAgIGdldEpTT04oJy9jb21tZW50cycpXG4gIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcbiAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG4gICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfSk7XG4gIGBgYFxuXG4gIEBjbGFzcyBQcm9taXNlXG4gIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmVyXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQGNvbnN0cnVjdG9yXG4qL1xuXG52YXIgUHJvbWlzZSQxID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gICAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuICAgIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBuZWVkc1Jlc29sdmVyKCk7XG4gICAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSA/IGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IG5lZWRzTmV3KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG4gICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuICB9KTtcbiAgYGBgXG4gICBDaGFpbmluZ1xuICAtLS0tLS0tLVxuICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHJldHVybiB1c2VyLm5hbWU7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuICB9KTtcbiAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG4gICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG4gIH0pO1xuICBgYGBcbiAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gbmV2ZXIgcmVhY2hlZFxuICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gIH0pO1xuICBgYGBcbiAgIEFzc2ltaWxhdGlvblxuICAtLS0tLS0tLS0tLS1cbiAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG4gIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcbiAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICB9KTtcbiAgYGBgXG4gICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG4gIH0pO1xuICBgYGBcbiAgIFNpbXBsZSBFeGFtcGxlXG4gIC0tLS0tLS0tLS0tLS0tXG4gICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gICBgYGBqYXZhc2NyaXB0XG4gIGxldCByZXN1bHQ7XG4gICB0cnkge1xuICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcbiAgICAvLyBzdWNjZXNzXG4gIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgLy8gZmFpbHVyZVxuICB9XG4gIGBgYFxuICAgRXJyYmFjayBFeGFtcGxlXG4gICBgYGBqc1xuICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICBpZiAoZXJyKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9XG4gIH0pO1xuICBgYGBcbiAgIFByb21pc2UgRXhhbXBsZTtcbiAgIGBgYGphdmFzY3JpcHRcbiAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyBzdWNjZXNzXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gZmFpbHVyZVxuICB9KTtcbiAgYGBgXG4gICBBZHZhbmNlZCBFeGFtcGxlXG4gIC0tLS0tLS0tLS0tLS0tXG4gICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gICBgYGBqYXZhc2NyaXB0XG4gIGxldCBhdXRob3IsIGJvb2tzO1xuICAgdHJ5IHtcbiAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG4gICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcbiAgICAvLyBzdWNjZXNzXG4gIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgLy8gZmFpbHVyZVxuICB9XG4gIGBgYFxuICAgRXJyYmFjayBFeGFtcGxlXG4gICBgYGBqc1xuICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuICAgfVxuICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcbiAgIH1cbiAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9IGVsc2Uge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG4gICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgLy8gc3VjY2Vzc1xuICAgIH1cbiAgfSk7XG4gIGBgYFxuICAgUHJvbWlzZSBFeGFtcGxlO1xuICAgYGBgamF2YXNjcmlwdFxuICBmaW5kQXV0aG9yKCkuXG4gICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG4gICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAvLyBmb3VuZCBib29rc1xuICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gIH0pO1xuICBgYGBcbiAgIEBtZXRob2QgdGhlblxuICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cblxuICAvKipcbiAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuICBgYGBqc1xuICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG4gIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICB9XG4gIC8vIHN5bmNocm9ub3VzXG4gIHRyeSB7XG4gIGZpbmRBdXRob3IoKTtcbiAgfSBjYXRjaChyZWFzb24pIHtcbiAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgfVxuICAvLyBhc3luYyB3aXRoIHByb21pc2VzXG4gIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICB9KTtcbiAgYGBgXG4gIEBtZXRob2QgY2F0Y2hcbiAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuXG5cbiAgUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbiBfY2F0Y2gob25SZWplY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICBgZmluYWxseWAgd2lsbCBiZSBpbnZva2VkIHJlZ2FyZGxlc3Mgb2YgdGhlIHByb21pc2UncyBmYXRlIGp1c3QgYXMgbmF0aXZlXG4gICAgdHJ5L2NhdGNoL2ZpbmFsbHkgYmVoYXZlc1xuICBcbiAgICBTeW5jaHJvbm91cyBleGFtcGxlOlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRBdXRob3IoKSB7XG4gICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgQXV0aG9yKCk7XG4gICAgfVxuICBcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZpbmRBdXRob3IoKTsgLy8gc3VjY2VlZCBvciBmYWlsXG4gICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgcmV0dXJuIGZpbmRPdGhlckF1dGhlcigpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBhbHdheXMgcnVuc1xuICAgICAgLy8gZG9lc24ndCBhZmZlY3QgdGhlIHJldHVybiB2YWx1ZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgQXN5bmNocm9ub3VzIGV4YW1wbGU6XG4gIFxuICAgIGBgYGpzXG4gICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICByZXR1cm4gZmluZE90aGVyQXV0aGVyKCk7XG4gICAgfSkuZmluYWxseShmdW5jdGlvbigpe1xuICAgICAgLy8gYXV0aG9yIHdhcyBlaXRoZXIgZm91bmQsIG9yIG5vdFxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBAbWV0aG9kIGZpbmFsbHlcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG5cblxuICBQcm9taXNlLnByb3RvdHlwZS5maW5hbGx5ID0gZnVuY3Rpb24gX2ZpbmFsbHkoY2FsbGJhY2spIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gcHJvbWlzZS5jb25zdHJ1Y3RvcjtcblxuICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBQcm9taXNlO1xufSgpO1xuXG5Qcm9taXNlJDEucHJvdG90eXBlLnRoZW4gPSB0aGVuO1xuUHJvbWlzZSQxLmFsbCA9IGFsbDtcblByb21pc2UkMS5yYWNlID0gcmFjZTtcblByb21pc2UkMS5yZXNvbHZlID0gcmVzb2x2ZSQxO1xuUHJvbWlzZSQxLnJlamVjdCA9IHJlamVjdCQxO1xuUHJvbWlzZSQxLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlJDEuX3NldEFzYXAgPSBzZXRBc2FwO1xuUHJvbWlzZSQxLl9hc2FwID0gYXNhcDtcblxuLypnbG9iYWwgc2VsZiovXG5mdW5jdGlvbiBwb2x5ZmlsbCgpIHtcbiAgdmFyIGxvY2FsID0gdm9pZCAwO1xuXG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsID0gZ2xvYmFsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsID0gc2VsZjtcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gIGlmIChQKSB7XG4gICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgIH1cblxuICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2UkMTtcbn1cblxuLy8gU3RyYW5nZSBjb21wYXQuLlxuUHJvbWlzZSQxLnBvbHlmaWxsID0gcG9seWZpbGw7XG5Qcm9taXNlJDEuUHJvbWlzZSA9IFByb21pc2UkMTtcblxucmV0dXJuIFByb21pc2UkMTtcblxufSkpKTtcblxuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVzNi1wcm9taXNlLm1hcFxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanNcbi8vIG1vZHVsZSBpZCA9IDEwMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgd2luO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbiA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbiA9IGdsb2JhbDtcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgIHdpbiA9IHNlbGY7XG59IGVsc2Uge1xuICAgIHdpbiA9IHt9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHdpbjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9nbG9iYWwvd2luZG93LmpzXG4vLyBtb2R1bGUgaWQgPSAxMDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBIZWxwZXJzLlxuICovXG5cbnZhciBzID0gMTAwMDtcbnZhciBtID0gcyAqIDYwO1xudmFyIGggPSBtICogNjA7XG52YXIgZCA9IGggKiAyNDtcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiB2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2YWwsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbDtcbiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnICYmIHZhbC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHBhcnNlKHZhbCk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicgJiYgaXNOYU4odmFsKSA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5sb25nID8gZm10TG9uZyh2YWwpIDogZm10U2hvcnQodmFsKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ3ZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9JyArXG4gICAgICBKU09OLnN0cmluZ2lmeSh2YWwpXG4gICk7XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBgc3RyYCBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtYXRjaCA9IC9eKCg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoXG4gICAgc3RyXG4gICk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgdmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgJ21zJykudG9Mb3dlckNhc2UoKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAneWVhcnMnOlxuICAgIGNhc2UgJ3llYXInOlxuICAgIGNhc2UgJ3lycyc6XG4gICAgY2FzZSAneXInOlxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIG4gKiB5O1xuICAgIGNhc2UgJ2RheXMnOlxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gbiAqIGQ7XG4gICAgY2FzZSAnaG91cnMnOlxuICAgIGNhc2UgJ2hvdXInOlxuICAgIGNhc2UgJ2hycyc6XG4gICAgY2FzZSAnaHInOlxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIG4gKiBoO1xuICAgIGNhc2UgJ21pbnV0ZXMnOlxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgY2FzZSAnbWlucyc6XG4gICAgY2FzZSAnbWluJzpcbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBuICogbTtcbiAgICBjYXNlICdzZWNvbmRzJzpcbiAgICBjYXNlICdzZWNvbmQnOlxuICAgIGNhc2UgJ3NlY3MnOlxuICAgIGNhc2UgJ3NlYyc6XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gbiAqIHM7XG4gICAgY2FzZSAnbWlsbGlzZWNvbmRzJzpcbiAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgY2FzZSAnbXNlY3MnOlxuICAgIGNhc2UgJ21zZWMnOlxuICAgIGNhc2UgJ21zJzpcbiAgICAgIHJldHVybiBuO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10U2hvcnQobXMpIHtcbiAgaWYgKG1zID49IGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGQpICsgJ2QnO1xuICB9XG4gIGlmIChtcyA+PSBoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcbiAgfVxuICBpZiAobXMgPj0gbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbSkgKyAnbSc7XG4gIH1cbiAgaWYgKG1zID49IHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIHMpICsgJ3MnO1xuICB9XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRMb25nKG1zKSB7XG4gIHJldHVybiBwbHVyYWwobXMsIGQsICdkYXknKSB8fFxuICAgIHBsdXJhbChtcywgaCwgJ2hvdXInKSB8fFxuICAgIHBsdXJhbChtcywgbSwgJ21pbnV0ZScpIHx8XG4gICAgcGx1cmFsKG1zLCBzLCAnc2Vjb25kJykgfHxcbiAgICBtcyArICcgbXMnO1xufVxuXG4vKipcbiAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICovXG5cbmZ1bmN0aW9uIHBsdXJhbChtcywgbiwgbmFtZSkge1xuICBpZiAobXMgPCBuKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChtcyA8IG4gKiAxLjUpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihtcyAvIG4pICsgJyAnICsgbmFtZTtcbiAgfVxuICByZXR1cm4gTWF0aC5jZWlsKG1zIC8gbikgKyAnICcgKyBuYW1lICsgJ3MnO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21zL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxMDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBtb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbVxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIGlzQXJncyA9IHJlcXVpcmUoJy4vaXNBcmd1bWVudHMnKTtcbnZhciBpc0VudW1lcmFibGUgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIGhhc0RvbnRFbnVtQnVnID0gIWlzRW51bWVyYWJsZS5jYWxsKHsgdG9TdHJpbmc6IG51bGwgfSwgJ3RvU3RyaW5nJyk7XG52YXIgaGFzUHJvdG9FbnVtQnVnID0gaXNFbnVtZXJhYmxlLmNhbGwoZnVuY3Rpb24gKCkge30sICdwcm90b3R5cGUnKTtcbnZhciBkb250RW51bXMgPSBbXG5cdCd0b1N0cmluZycsXG5cdCd0b0xvY2FsZVN0cmluZycsXG5cdCd2YWx1ZU9mJyxcblx0J2hhc093blByb3BlcnR5Jyxcblx0J2lzUHJvdG90eXBlT2YnLFxuXHQncHJvcGVydHlJc0VudW1lcmFibGUnLFxuXHQnY29uc3RydWN0b3InXG5dO1xudmFyIGVxdWFsc0NvbnN0cnVjdG9yUHJvdG90eXBlID0gZnVuY3Rpb24gKG8pIHtcblx0dmFyIGN0b3IgPSBvLmNvbnN0cnVjdG9yO1xuXHRyZXR1cm4gY3RvciAmJiBjdG9yLnByb3RvdHlwZSA9PT0gbztcbn07XG52YXIgZXhjbHVkZWRLZXlzID0ge1xuXHQkY29uc29sZTogdHJ1ZSxcblx0JGV4dGVybmFsOiB0cnVlLFxuXHQkZnJhbWU6IHRydWUsXG5cdCRmcmFtZUVsZW1lbnQ6IHRydWUsXG5cdCRmcmFtZXM6IHRydWUsXG5cdCRpbm5lckhlaWdodDogdHJ1ZSxcblx0JGlubmVyV2lkdGg6IHRydWUsXG5cdCRvdXRlckhlaWdodDogdHJ1ZSxcblx0JG91dGVyV2lkdGg6IHRydWUsXG5cdCRwYWdlWE9mZnNldDogdHJ1ZSxcblx0JHBhZ2VZT2Zmc2V0OiB0cnVlLFxuXHQkcGFyZW50OiB0cnVlLFxuXHQkc2Nyb2xsTGVmdDogdHJ1ZSxcblx0JHNjcm9sbFRvcDogdHJ1ZSxcblx0JHNjcm9sbFg6IHRydWUsXG5cdCRzY3JvbGxZOiB0cnVlLFxuXHQkc2VsZjogdHJ1ZSxcblx0JHdlYmtpdEluZGV4ZWREQjogdHJ1ZSxcblx0JHdlYmtpdFN0b3JhZ2VJbmZvOiB0cnVlLFxuXHQkd2luZG93OiB0cnVlXG59O1xudmFyIGhhc0F1dG9tYXRpb25FcXVhbGl0eUJ1ZyA9IChmdW5jdGlvbiAoKSB7XG5cdC8qIGdsb2JhbCB3aW5kb3cgKi9cblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7IHJldHVybiBmYWxzZTsgfVxuXHRmb3IgKHZhciBrIGluIHdpbmRvdykge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoIWV4Y2x1ZGVkS2V5c1snJCcgKyBrXSAmJiBoYXMuY2FsbCh3aW5kb3csIGspICYmIHdpbmRvd1trXSAhPT0gbnVsbCAmJiB0eXBlb2Ygd2luZG93W2tdID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGVxdWFsc0NvbnN0cnVjdG9yUHJvdG90eXBlKHdpbmRvd1trXSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59KCkpO1xudmFyIGVxdWFsc0NvbnN0cnVjdG9yUHJvdG90eXBlSWZOb3RCdWdneSA9IGZ1bmN0aW9uIChvKSB7XG5cdC8qIGdsb2JhbCB3aW5kb3cgKi9cblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICFoYXNBdXRvbWF0aW9uRXF1YWxpdHlCdWcpIHtcblx0XHRyZXR1cm4gZXF1YWxzQ29uc3RydWN0b3JQcm90b3R5cGUobyk7XG5cdH1cblx0dHJ5IHtcblx0XHRyZXR1cm4gZXF1YWxzQ29uc3RydWN0b3JQcm90b3R5cGUobyk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn07XG5cbnZhciBrZXlzU2hpbSA9IGZ1bmN0aW9uIGtleXMob2JqZWN0KSB7XG5cdHZhciBpc09iamVjdCA9IG9iamVjdCAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0Jztcblx0dmFyIGlzRnVuY3Rpb24gPSB0b1N0ci5jYWxsKG9iamVjdCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG5cdHZhciBpc0FyZ3VtZW50cyA9IGlzQXJncyhvYmplY3QpO1xuXHR2YXIgaXNTdHJpbmcgPSBpc09iamVjdCAmJiB0b1N0ci5jYWxsKG9iamVjdCkgPT09ICdbb2JqZWN0IFN0cmluZ10nO1xuXHR2YXIgdGhlS2V5cyA9IFtdO1xuXG5cdGlmICghaXNPYmplY3QgJiYgIWlzRnVuY3Rpb24gJiYgIWlzQXJndW1lbnRzKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmtleXMgY2FsbGVkIG9uIGEgbm9uLW9iamVjdCcpO1xuXHR9XG5cblx0dmFyIHNraXBQcm90byA9IGhhc1Byb3RvRW51bUJ1ZyAmJiBpc0Z1bmN0aW9uO1xuXHRpZiAoaXNTdHJpbmcgJiYgb2JqZWN0Lmxlbmd0aCA+IDAgJiYgIWhhcy5jYWxsKG9iamVjdCwgMCkpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdC5sZW5ndGg7ICsraSkge1xuXHRcdFx0dGhlS2V5cy5wdXNoKFN0cmluZyhpKSk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKGlzQXJndW1lbnRzICYmIG9iamVjdC5sZW5ndGggPiAwKSB7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBvYmplY3QubGVuZ3RoOyArK2opIHtcblx0XHRcdHRoZUtleXMucHVzaChTdHJpbmcoaikpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRmb3IgKHZhciBuYW1lIGluIG9iamVjdCkge1xuXHRcdFx0aWYgKCEoc2tpcFByb3RvICYmIG5hbWUgPT09ICdwcm90b3R5cGUnKSAmJiBoYXMuY2FsbChvYmplY3QsIG5hbWUpKSB7XG5cdFx0XHRcdHRoZUtleXMucHVzaChTdHJpbmcobmFtZSkpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmIChoYXNEb250RW51bUJ1Zykge1xuXHRcdHZhciBza2lwQ29uc3RydWN0b3IgPSBlcXVhbHNDb25zdHJ1Y3RvclByb3RvdHlwZUlmTm90QnVnZ3kob2JqZWN0KTtcblxuXHRcdGZvciAodmFyIGsgPSAwOyBrIDwgZG9udEVudW1zLmxlbmd0aDsgKytrKSB7XG5cdFx0XHRpZiAoIShza2lwQ29uc3RydWN0b3IgJiYgZG9udEVudW1zW2tdID09PSAnY29uc3RydWN0b3InKSAmJiBoYXMuY2FsbChvYmplY3QsIGRvbnRFbnVtc1trXSkpIHtcblx0XHRcdFx0dGhlS2V5cy5wdXNoKGRvbnRFbnVtc1trXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0aGVLZXlzO1xufTtcblxua2V5c1NoaW0uc2hpbSA9IGZ1bmN0aW9uIHNoaW1PYmplY3RLZXlzKCkge1xuXHRpZiAoT2JqZWN0LmtleXMpIHtcblx0XHR2YXIga2V5c1dvcmtzV2l0aEFyZ3VtZW50cyA9IChmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyBTYWZhcmkgNS4wIGJ1Z1xuXHRcdFx0cmV0dXJuIChPYmplY3Qua2V5cyhhcmd1bWVudHMpIHx8ICcnKS5sZW5ndGggPT09IDI7XG5cdFx0fSgxLCAyKSk7XG5cdFx0aWYgKCFrZXlzV29ya3NXaXRoQXJndW1lbnRzKSB7XG5cdFx0XHR2YXIgb3JpZ2luYWxLZXlzID0gT2JqZWN0LmtleXM7XG5cdFx0XHRPYmplY3Qua2V5cyA9IGZ1bmN0aW9uIGtleXMob2JqZWN0KSB7XG5cdFx0XHRcdGlmIChpc0FyZ3Mob2JqZWN0KSkge1xuXHRcdFx0XHRcdHJldHVybiBvcmlnaW5hbEtleXMoc2xpY2UuY2FsbChvYmplY3QpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gb3JpZ2luYWxLZXlzKG9iamVjdCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdE9iamVjdC5rZXlzID0ga2V5c1NoaW07XG5cdH1cblx0cmV0dXJuIE9iamVjdC5rZXlzIHx8IGtleXNTaGltO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBrZXlzU2hpbTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9vYmplY3Qta2V5cy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuXHR2YXIgc3RyID0gdG9TdHIuY2FsbCh2YWx1ZSk7XG5cdHZhciBpc0FyZ3MgPSBzdHIgPT09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXHRpZiAoIWlzQXJncykge1xuXHRcdGlzQXJncyA9IHN0ciAhPT0gJ1tvYmplY3QgQXJyYXldJyAmJlxuXHRcdFx0dmFsdWUgIT09IG51bGwgJiZcblx0XHRcdHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcblx0XHRcdHR5cGVvZiB2YWx1ZS5sZW5ndGggPT09ICdudW1iZXInICYmXG5cdFx0XHR2YWx1ZS5sZW5ndGggPj0gMCAmJlxuXHRcdFx0dG9TdHIuY2FsbCh2YWx1ZS5jYWxsZWUpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXHR9XG5cdHJldHVybiBpc0FyZ3M7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L29iamVjdC1rZXlzL2lzQXJndW1lbnRzLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHN0cmluZ2lmeVByaW1pdGl2ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgc3dpdGNoICh0eXBlb2Ygdikge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gdjtcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIHYgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIHJldHVybiBpc0Zpbml0ZSh2KSA/IHYgOiAnJztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgb2JqID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIG1hcChvYmplY3RLZXlzKG9iaiksIGZ1bmN0aW9uKGspIHtcbiAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7XG4gICAgICBpZiAoaXNBcnJheShvYmpba10pKSB7XG4gICAgICAgIHJldHVybiBtYXAob2JqW2tdLCBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZSh2KSk7XG4gICAgICAgIH0pLmpvaW4oc2VwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqW2tdKSk7XG4gICAgICB9XG4gICAgfSkuam9pbihzZXApO1xuXG4gIH1cblxuICBpZiAoIW5hbWUpIHJldHVybiAnJztcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUobmFtZSkpICsgZXEgK1xuICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmopKTtcbn07XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoeHMpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4cykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5mdW5jdGlvbiBtYXAgKHhzLCBmKSB7XG4gIGlmICh4cy5tYXApIHJldHVybiB4cy5tYXAoZik7XG4gIHZhciByZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgIHJlcy5wdXNoKGYoeHNbaV0sIGkpKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHJlcy5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcXVlcnlzdHJpbmctZXMzL2VuY29kZS5qc1xuLy8gbW9kdWxlIGlkID0gMTA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXJcdG1lbW9pemUgPSBmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW87XG5cblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiBtZW1vO1xuXHR9O1xufTtcblxudmFyIGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0Ly8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3Ncblx0Ly8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuXHQvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG5cdC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuXHQvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcblx0cmV0dXJuIHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iO1xufSk7XG5cbnZhciBnZXRFbGVtZW50ID0gKGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbyA9IHt9O1xuXG5cdHJldHVybiBmdW5jdGlvbihzZWxlY3Rvcikge1xuXHRcdGlmICh0eXBlb2YgbWVtb1tzZWxlY3Rvcl0gPT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdHZhciBzdHlsZVRhcmdldCA9IGZuLmNhbGwodGhpcywgc2VsZWN0b3IpO1xuXHRcdFx0Ly8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblx0XHRcdGlmIChzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG5cdFx0XHRcdFx0Ly8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuXHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG1lbW9bc2VsZWN0b3JdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3NlbGVjdG9yXVxuXHR9O1xufSkoZnVuY3Rpb24gKHRhcmdldCkge1xuXHRyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpXG59KTtcblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXJcdHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xudmFyXHRzdHlsZXNJbnNlcnRlZEF0VG9wID0gW107XG5cbnZhclx0Zml4VXJscyA9IHJlcXVpcmUoXCIuL3VybHNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZiAodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHR9XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0b3B0aW9ucy5hdHRycyA9IHR5cGVvZiBvcHRpb25zLmF0dHJzID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5hdHRycyA6IHt9O1xuXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSBcImJvb2xlYW5cIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnRcblx0aWYgKCFvcHRpb25zLmluc2VydEludG8pIG9wdGlvbnMuaW5zZXJ0SW50byA9IFwiaGVhZFwiO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0XG5cdGlmICghb3B0aW9ucy5pbnNlcnRBdCkgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcblxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykgZG9tU3R5bGUucGFydHNbal0oKTtcblxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyAobGlzdCwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cblx0XHRpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudCAob3B0aW9ucywgc3R5bGUpIHtcblx0dmFyIHRhcmdldCA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvKVxuXG5cdGlmICghdGFyZ2V0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG5cdH1cblxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZiAoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHRcdH1cblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7XG5cdFx0dmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8gKyBcIiBcIiArIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKTtcblx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0U2libGluZyk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiW1N0eWxlIExvYWRlcl1cXG5cXG4gSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcgKCdvcHRpb25zLmluc2VydEF0JykgZm91bmQuXFxuIE11c3QgYmUgJ3RvcCcsICdib3R0b20nLCBvciBPYmplY3QuXFxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcXG5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50IChzdHlsZSkge1xuXHRpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuXHR2YXIgaWR4ID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlKTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cblx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXG5cdGFkZEF0dHJzKHN0eWxlLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlKTtcblxuXHRyZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cblx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMTA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuLyoqXG4gKiBXaGVuIHNvdXJjZSBtYXBzIGFyZSBlbmFibGVkLCBgc3R5bGUtbG9hZGVyYCB1c2VzIGEgbGluayBlbGVtZW50IHdpdGggYSBkYXRhLXVyaSB0b1xuICogZW1iZWQgdGhlIGNzcyBvbiB0aGUgcGFnZS4gVGhpcyBicmVha3MgYWxsIHJlbGF0aXZlIHVybHMgYmVjYXVzZSBub3cgdGhleSBhcmUgcmVsYXRpdmUgdG8gYVxuICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAqXG4gKiBPbmUgc29sdXRpb24gaXMgdG8gb25seSB1c2UgZnVsbCB1cmxzLCBidXQgdGhhdCBtYXkgYmUgaW1wb3NzaWJsZS5cbiAqXG4gKiBJbnN0ZWFkLCB0aGlzIGZ1bmN0aW9uIFwiZml4ZXNcIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi5cbiAqXG4gKiBBIHJ1ZGltZW50YXJ5IHRlc3Qgc3VpdGUgaXMgbG9jYXRlZCBhdCBgdGVzdC9maXhVcmxzLmpzYCBhbmQgY2FuIGJlIHJ1biB2aWEgdGhlIGBucG0gdGVzdGAgY29tbWFuZC5cbiAqXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXG4gIHZhciBsb2NhdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uO1xuXG4gIGlmICghbG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcbiAgfVxuXG5cdC8vIGJsYW5rIG9yIG51bGw/XG5cdGlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09IFwic3RyaW5nXCIpIHtcblx0ICByZXR1cm4gY3NzO1xuICB9XG5cbiAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4gIHZhciBjdXJyZW50RGlyID0gYmFzZVVybCArIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCIvXCIpO1xuXG5cdC8vIGNvbnZlcnQgZWFjaCB1cmwoLi4uKVxuXHQvKlxuXHRUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpblxuXHRhIHN0cmluZy5cblxuXHQgL3VybFxccypcXCggID0gTWF0Y2ggb24gdGhlIHdvcmQgXCJ1cmxcIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zXG5cdCAgICggID0gU3RhcnQgYSBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAoPzogID0gU3RhcnQgYSBub24tY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAoPzogID0gU3RhcnQgYW5vdGhlciBub24tY2FwdHVyaW5nIGdyb3Vwc1xuXHQgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICAgICAgW14pKF0qICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIFxcKSAgPSBNYXRjaCBhIGVuZCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXBcbiAgICAgICAgICAgICAgKlxcKSA9IE1hdGNoIGFueXRoaW5nIGFuZCB0aGVuIGEgY2xvc2UgcGFyZW5zXG4gICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwXG4gICAgICAgICAgKiAgPSBNYXRjaCBhbnl0aGluZ1xuICAgICAgICkgID0gQ2xvc2UgY2FwdHVyaW5nIGdyb3VwXG5cdCBcXCkgID0gTWF0Y2ggYSBjbG9zZSBwYXJlbnNcblxuXHQgL2dpICA9IEdldCBhbGwgbWF0Y2hlcywgbm90IHRoZSBmaXJzdC4gIEJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdCAqL1xuXHR2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksIGZ1bmN0aW9uKGZ1bGxNYXRjaCwgb3JpZ1VybCkge1xuXHRcdC8vIHN0cmlwIHF1b3RlcyAoaWYgdGhleSBleGlzdClcblx0XHR2YXIgdW5xdW90ZWRPcmlnVXJsID0gb3JpZ1VybFxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL15cIiguKilcIiQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSlcblx0XHRcdC5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTtcblxuXHRcdC8vIGFscmVhZHkgYSBmdWxsIHVybD8gbm8gY2hhbmdlXG5cdFx0aWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkge1xuXHRcdCAgcmV0dXJuIGZ1bGxNYXRjaDtcblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSB1cmwgdG8gYSBmdWxsIHVybFxuXHRcdHZhciBuZXdVcmw7XG5cblx0XHRpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvL1wiKSA9PT0gMCkge1xuXHRcdCAgXHQvL1RPRE86IHNob3VsZCB3ZSBhZGQgcHJvdG9jb2w/XG5cdFx0XHRuZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7XG5cdFx0fSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPT09IDApIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybFxuXHRcdFx0bmV3VXJsID0gYmFzZVVybCArIHVucXVvdGVkT3JpZ1VybDsgLy8gYWxyZWFkeSBzdGFydHMgd2l0aCAnLydcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gY3VycmVudCBkaXJlY3Rvcnlcblx0XHRcdG5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlxcLlxcLy8sIFwiXCIpOyAvLyBTdHJpcCBsZWFkaW5nICcuLydcblx0XHR9XG5cblx0XHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIHVybCguLi4pXG5cdFx0cmV0dXJuIFwidXJsKFwiICsgSlNPTi5zdHJpbmdpZnkobmV3VXJsKSArIFwiKVwiO1xuXHR9KTtcblxuXHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIGNzc1xuXHRyZXR1cm4gZml4ZWRDc3M7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3N0eWxlLWxvYWRlci9saWIvdXJscy5qc1xuLy8gbW9kdWxlIGlkID0gMTA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCJ1bmlmb3JtIGZsb2F0IGJyaWdodG5lc3M7XFxudW5pZm9ybSBmbG9hdCB0aW1lO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIHZlYzMgY2FtZXJhO1xcbnVuaWZvcm0gdmVjMyB0aW50O1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG5cXG52b2lkIG1haW4oKSB7XFxuICB2ZWMyIHV2ID0gbm9ybWFsaXplKHZXb3JsZFBvc2l0aW9uIC0gY2FtZXJhKS54eTtcXG4gIHZlYzMgYyAgPSB2ZWMzKDE2Ny4wLCAyMDQuMCwgMTUzLjApIC8gMjU1LjA7XFxuICB2ZWMzIGZsb29yID0gdmVjMygyMjYuMCwgMTQyLjAsIDc0LjApIC8gMjU1LjA7XFxuICB2ZWMzIGMxID0gdmVjMyg3OS4wLCAxNjkuMCwgMTk4LjApIC8gMjU1LjA7XFxuICB2ZWMyIGMxcCA9IHZlYzIoMC41LCAwLjUpO1xcbiAgdmVjMyBjMiA9IHZlYzMoMTc4LjAsIDg2LjAsIDE0OC4wKSAvIDI1NS4wO1xcbiAgdmVjMiBjMnAgPSB2ZWMyKDAuMCwgMC44KTtcXG4gIGMgPSBtaXgoYywgZmxvb3IsIDAuNSArICgtdXYueSAtIDAuMikgKiAwLjUpO1xcbiAgYyA9IG1peChjLCBjMSwgYWJzKDEuMCAtIGRpc3RhbmNlKGMxcCwgdXYpKSk7XFxuICBjID0gbWl4KGMsIGMyLCBhYnMoMS4wIC0gZGlzdGFuY2UoYzJwLCB1dikpKTtcXG4gIGdsX0ZyYWdDb2xvciA9IHZlYzQoKGMgKyB0aW50KSAqIGJyaWdodG5lc3MsIG9wYWNpdHkpO1xcbn1cXG5cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvc2hhZGVycy9iYWNrZ3JvdW5kRnJhZ21lbnQuZ2xzbFxuLy8gbW9kdWxlIGlkID0gMTA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuXFxudm9pZCBtYWluKCkge1xcbiAgdmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxuICB2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xcbiAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbn1cXG5cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvc2hhZGVycy9iYWNrZ3JvdW5kVmVydGV4Lmdsc2xcbi8vIG1vZHVsZSBpZCA9IDExMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwidW5pZm9ybSBzYW1wbGVyMkQgc3JjO1xcbnVuaWZvcm0gdmVjMyBjb2xvcjtcXG52YXJ5aW5nIHZlYzIgdlV2O1xcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG5cXG5mbG9hdCB3aGVuRXF1YWwoZmxvYXQgeCwgZmxvYXQgeSkge1xcbiAgcmV0dXJuIDEuMCAtIGFicyhzaWduKHggLSB5KSk7XFxufVxcblxcbmZsb2F0IHdoZW5MZXNzVGhhbihmbG9hdCB4LCBmbG9hdCB5KSB7XFxuICByZXR1cm4gbWF4KHNpZ24oeSAtIHgpLCAwLjApO1xcbn1cXG5cXG4vKipcXG4gKiBTaW1wbGUgbGFtYmVydC5cXG4gKi9cXG5mbG9hdCBsYW1iZXJ0KHZlYzMgTiwgdmVjMyBMKSB7XFxuICB2ZWMzIG5ybU4gPSBub3JtYWxpemUoTik7XFxuICB2ZWMzIG5ybUwgPSBub3JtYWxpemUoTCk7XFxuICBmbG9hdCByZXN1bHQgPSBkb3QobnJtTiwgbnJtTCk7XFxuICByZXR1cm4gbWF4KHJlc3VsdCwgMC4wKTtcXG59XFxuXFxuLyoqXFxuICogR3JhZGllbnQuXFxuICovXFxudmVjMyBnZXRDb2xvcih2ZWMzIGJhc2VDb2xvciwgdmVjMiB1dikge1xcbiAgdmVjMiBjb2xvcjFQb3NpdGlvbiA9IHZlYzIoMC41LCAwLjUpO1xcbiAgdmVjMiBjb2xvcjJQb3NpdGlvbiA9IHZlYzIoMC45LCAwLjQpO1xcbiAgdmVjMyBjb2xvcjEgPSBiYXNlQ29sb3I7XFxuICB2ZWMzIGNvbG9yMiA9IGJhc2VDb2xvciAqIDAuODtcXG4gIHZlYzMgZmxvb3IgPSBiYXNlQ29sb3IgKiAxLjQ7XFxuICB2ZWMzIG91dENvbG9yID0gYmFzZUNvbG9yO1xcbiAgb3V0Q29sb3IgPSBtaXgob3V0Q29sb3IsIGZsb29yLCAwLjUgKyAoLXV2LnkgLSAwLjIpICogMC41KTtcXG4gIG91dENvbG9yID0gbWl4KG91dENvbG9yLCBjb2xvcjEsIGFicygxLjAgLSBkaXN0YW5jZShjb2xvcjFQb3NpdGlvbiwgdXYpKSk7XFxuICBvdXRDb2xvciA9IG1peChvdXRDb2xvciwgY29sb3IyLCBhYnMoMS4wIC0gZGlzdGFuY2UoY29sb3IyUG9zaXRpb24sIHV2KSkpO1xcbiAgcmV0dXJuIG91dENvbG9yO1xcbn1cXG5cXG52b2lkIG1haW4oKSB7XFxuICB2ZWMzIGdyYWRpZW50Q29sb3IgPSBnZXRDb2xvcihjb2xvciwgdlV2KTtcXG5cXG4gIC8vIEZhZGUgb3V0IG5leHQvcHJldiBsaW5rcy5cXG4gIGZsb2F0IGZhZGVBbHBoYSA9IDEuMCAtIHNtb290aHN0ZXAoMi4yNSwgMy43NSwgbGVuZ3RoKHZXb3JsZFBvc2l0aW9uLnh6KSk7XFxuXFxuICAvLyBUZXh0dXJlIGxvb2t1cC5cXG4gIHZlYzQgdGV4ID0gdGV4dHVyZTJEKHNyYywgdlV2KTtcXG5cXG4gIC8vIFRyYW5zZm9ybSBhbHBoYSA9IDAgdG8gY29sb3IuXFxuICB0ZXgueHl6ID0gbWl4KHRleC54eXosIGdyYWRpZW50Q29sb3IsIHdoZW5FcXVhbCh0ZXgudywgMC4wKSk7XFxuXFxuICAvLyBCbGVuZCB0aGUgc2VtaS10cmFuc3BhcmVudCBwaWVjZXMuXFxuICBmbG9hdCB0ZXhBbHBoYSA9IG1peCh0ZXgudywgMS4wLCB3aGVuRXF1YWwodGV4LncsIDAuMCkpO1xcbiAgdGV4Lnh5eiA9IG1peChjb2xvciwgdGV4Lnh5eiwgdGV4QWxwaGEpO1xcblxcbiAgLy8gTGlnaHQuXFxuICB2ZWMzIGRpZmZ1c2UgPSB2ZWMzKDEuMCwgMS4wLCAxLjApO1xcbiAgdmVjMyBsaWdodFBvc2l0aW9uID0gdmVjMygwLjIsIDIsIDQpO1xcbiAgdGV4Lnh5eiA9IHRleC54eXogKiBsYW1iZXJ0KHZOb3JtYWwsIGxpZ2h0UG9zaXRpb24pO1xcblxcbiAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh0ZXgueHl6LCBtaW4oMS4wLCBmYWRlQWxwaGEpKTtcXG59XFxuXCJcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL3NoYWRlcnMvY29sbGVjdGlvbkZyYWdtZW50Lmdsc2xcbi8vIG1vZHVsZSBpZCA9IDExMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiLy8gUGFyYWxsYXggYm91bmRzLlxcbiNkZWZpbmUgQk9VTkQgMS4yNVxcbi8vIFBhZ2luYXRpb25cXG4jZGVmaW5lIFBBR0VfV0lEVEggMS4xNlxcbiNkZWZpbmUgRkFERV9XSURUSCAxLjZcXG5cXG51bmlmb3JtIHZlYzMgY29sb3I7XFxudW5pZm9ybSBzYW1wbGVyMkQgc3JjO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxudmFyeWluZyB2ZWMyIHZVdjtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAvLyBGYWRlIG91dCBuZXh0L3ByZXYgbGlua3MuXFxuICBmbG9hdCBhbHBoYSA9IDEuMCAtIHNtb290aHN0ZXAoMi4yNSwgMy43NSwgbGVuZ3RoKHZXb3JsZFBvc2l0aW9uLnh6KSk7XFxuICB2ZWM0IHRleCA9IHRleHR1cmUyRChzcmMsIHZVdikgKiB2ZWM0KGNvbG9yLCAxLjApO1xcbiAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh0ZXgueHl6LCBtaW4oMS4wLCB0ZXgudyAqIGFscGhhICogb3BhY2l0eSkpO1xcbn1cXG5cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvc2hhZGVycy9mYWRlRnJhZ21lbnQuZ2xzbFxuLy8gbW9kdWxlIGlkID0gMTEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCIjaWZkZWYgR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXFxuI2V4dGVuc2lvbiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXM6IGVuYWJsZVxcbiNlbmRpZlxcblxcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4vLyBGSVhNRTogRXhwZXJpbWVudGFsbHkgZGV0ZXJtaW5lZCBjb25zdGFudHMuXFxuI2RlZmluZSBCSUdfRU5PVUdIIDAuMDAxXFxuI2RlZmluZSBNT0RJRklFRF9BTFBIQVRFU1QgKDAuMDIgKiBpc0JpZ0Vub3VnaCAvIEJJR19FTk9VR0gpXFxuI2RlZmluZSBBTExfU01PT1RIIDAuNFxcbiNkZWZpbmUgQUxMX1JPVUdIIDAuMDJcXG4jZGVmaW5lIERJU0NBUkRfQUxQSEEgKGFscGhhVGVzdCAvICgyLjIgLSAxLjIgKiByYXRpbykpXFxudW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbnVuaWZvcm0gdmVjMyBjb2xvcjtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBmbG9hdCBhbHBoYVRlc3Q7XFxudW5pZm9ybSBib29sIG5lZ2F0ZTtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG5cXG5mbG9hdCBtZWRpYW4oZmxvYXQgciwgZmxvYXQgZywgZmxvYXQgYikge1xcbiAgcmV0dXJuIG1heChtaW4ociwgZyksIG1pbihtYXgociwgZyksIGIpKTtcXG59XFxudm9pZCBtYWluKCkge1xcbiAgdmVjMyBzYW1wbGUgPSB0ZXh0dXJlMkQobWFwLCB2VVYpLnJnYjtcXG4gIGlmIChuZWdhdGUpIHtcXG4gICAgc2FtcGxlID0gMS4wIC0gc2FtcGxlO1xcbiAgfVxcbiAgZmxvYXQgc2lnRGlzdCA9IG1lZGlhbihzYW1wbGUuciwgc2FtcGxlLmcsIHNhbXBsZS5iKSAtIDAuNTtcXG4gIGZsb2F0IGFscGhhID0gY2xhbXAoc2lnRGlzdC9md2lkdGgoc2lnRGlzdCkgKyAwLjUsIDAuMCwgMS4wKTtcXG4gIGZsb2F0IGRzY2FsZSA9IDAuMzUzNTA1O1xcbiAgdmVjMiBkdXYgPSBkc2NhbGUgKiAoZEZkeCh2VVYpICsgZEZkeSh2VVYpKTtcXG4gIGZsb2F0IGlzQmlnRW5vdWdoID0gbWF4KGFicyhkdXYueCksIGFicyhkdXYueSkpO1xcblxcbiAgLy8gV2hlbiB0ZXhlbCBpcyB0b28gc21hbGwsIGJsZW5kIHJhdyBhbHBoYSB2YWx1ZSByYXRoZXIgdGhhbiBzdXBlcnNhbXBsaW5nLlxcbiAgLy8gRklYTUU6IEV4cGVyaW1lbnRhbGx5IGRldGVybWluZWQgY29uc3RhbnQuXFxuICBpZiAoaXNCaWdFbm91Z2ggPiBCSUdfRU5PVUdIKSB7XFxuICAgIGZsb2F0IHJhdGlvID0gQklHX0VOT1VHSCAvIGlzQmlnRW5vdWdoO1xcbiAgICBhbHBoYSA9IHJhdGlvICogYWxwaGEgKyAoMS4wIC0gcmF0aW8pICogKHNpZ0Rpc3QgKyAwLjUpO1xcbiAgfVxcblxcbiAgLy8gV2hlbiB0ZXhlbCBpcyBiaWcgZW5vdWdoLCBkbyBzdGFuZGFyZCBhbHBoYSB0ZXN0LlxcbiAgLy8gRklYTUU6IEV4cGVyaW1lbnRhbGx5IGRldGVybWluZWQgY29uc3RhbnQuXFxuICAvLyBMb29rcyBtdWNoIGJldHRlciBpZiB3ZSAqZG9uJ3QqIGRvIHRoaXMsIGJ1dCBkbyB3ZSBnZXQgWiBmaWdodGluZz9cXG4gIGlmIChpc0JpZ0Vub3VnaCA8PSBCSUdfRU5PVUdIICYmIGFscGhhIDwgYWxwaGFUZXN0KSB7IGRpc2NhcmQ7IHJldHVybjsgfVxcblxcbiAgLy8gRWxzZSwgZG8gbW9kaWZpZWQgYWxwaGEgdGVzdC5cXG4gIC8vIEZJWE1FOiBFeHBlcmltZW50YWxseSBkZXRlcm1pbmVkIGNvbnN0YW50LlxcbiAgaWYgKGFscGhhIDwgYWxwaGFUZXN0ICogTU9ESUZJRURfQUxQSEFURVNUKSB7IGRpc2NhcmQ7IHJldHVybjsgfVxcblxcbiAgLy8gRmFkZSBvdXQgbmV4dC9wcmV2IGxpbmtzLlxcbiAgZmxvYXQgZmFkZUFscGhhID0gMS4wIC0gc21vb3Roc3RlcCgyLjI1LCAzLjc1LCBsZW5ndGgodldvcmxkUG9zaXRpb24ueHopKTtcXG4gIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IueHl6LCBhbHBoYSAqIG9wYWNpdHkgKiBmYWRlQWxwaGEpO1xcbn1cXG5cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvc2hhZGVycy9mYWRlVGV4dEZyYWdtZW50Lmdsc2xcbi8vIG1vZHVsZSBpZCA9IDExM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiYXR0cmlidXRlIHZlYzIgdXY7XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb247XFxudW5pZm9ybSBtYXQ0IG1vZGVsTWF0cml4O1xcbnVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuXFxudm9pZCBtYWluKHZvaWQpIHtcXG4gIHZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcXG4gIHZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XFxuICB2VVYgPSB1djtcXG4gIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7XFxufVxcblwiXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9zaGFkZXJzL2ZhZGVUZXh0VmVydGV4Lmdsc2xcbi8vIG1vZHVsZSBpZCA9IDExNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiLy8gUGFyYWxsYXggYm91bmRzLlxcbiNkZWZpbmUgQk9VTkQgMS4yNVxcbi8vIFBhZ2luYXRpb25cXG4jZGVmaW5lIFBBR0VfV0lEVEggMS4xNlxcbiNkZWZpbmUgRkFERV9XSURUSCAxLjZcXG51bmlmb3JtIHNhbXBsZXIyRCBzcmM7XFxudW5pZm9ybSBmbG9hdCBicmlnaHRuZXNzO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIGZsb2F0IGdsYXJlO1xcbnVuaWZvcm0gZmxvYXQgdXZYQ2xhbXA7XFxudW5pZm9ybSBmbG9hdCB1dlhPZmZzZXQ7XFxudW5pZm9ybSB2ZWMzIG1lc2hQb3NpdGlvbjtcXG51bmlmb3JtIHZlYzMgc2l0ZXNQb3NpdGlvbjtcXG5cXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxudmFyeWluZyB2ZWMyIHZVdjtcXG52YXJ5aW5nIHZlYzMgdkxvY2FsQ2FtZXJhUG9zaXRpb247XFxuXFxudm9pZCBtYWluKCkge1xcbiAgZmxvYXQgY2FtZXJhT2Zmc2V0WDtcXG4gIGZsb2F0IGNhbWVyYU9mZnNldFk7XFxuICBmbG9hdCBub3JtYWxpemVkQ2FtZXJhT2Zmc2V0WDtcXG4gIGZsb2F0IG5vcm1hbGl6ZWRDYW1lcmFPZmZzZXRZO1xcbiAgZmxvYXQgeE1pbjtcXG4gIGZsb2F0IHhNYXg7XFxuICBmbG9hdCB5TWluO1xcbiAgZmxvYXQgeU1heDtcXG4gIHZlYzIgc2FtcGxlVVY7XFxuXFxuICAvLyBHZXQgb2Zmc2V0IG9mIGNhbWVyYSB0byBpbWFnZSBjZW50ZXIuXFxuICBjYW1lcmFPZmZzZXRYID0gY2xhbXAodkxvY2FsQ2FtZXJhUG9zaXRpb24ueCAtIG1lc2hQb3NpdGlvbi54LCAtQk9VTkQsIEJPVU5EKTtcXG4gIGNhbWVyYU9mZnNldFkgPSBjbGFtcCh2TG9jYWxDYW1lcmFQb3NpdGlvbi55IC0gbWVzaFBvc2l0aW9uLnksIC1CT1VORCwgQk9VTkQpO1xcblxcbiAgLy8gQ29udmVydCBbLUJPVU5ELCBCT1VORF0gdG8gWzAsIDFdLlxcbiAgbm9ybWFsaXplZENhbWVyYU9mZnNldFggPSAoY2FtZXJhT2Zmc2V0WCArIEJPVU5EKSAvICgyLjAgKiBCT1VORCk7XFxuICBub3JtYWxpemVkQ2FtZXJhT2Zmc2V0WSA9IChjYW1lcmFPZmZzZXRZICsgQk9VTkQpIC8gKDIuMCAqIEJPVU5EKTtcXG5cXG4gIC8vIEdpdmVuIHRoZSBjYW1lcmEgb2Zmc2V0LCBjYWxjdWxhdGUgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gVVZzLlxcbiAgeE1pbiA9IG1peCgwLjEwLCAwLjAsIG5vcm1hbGl6ZWRDYW1lcmFPZmZzZXRYKTtcXG4gIHhNYXggPSBtaXgoMS4wICogdXZYQ2xhbXAsIDAuOTAgKiB1dlhDbGFtcCwgbm9ybWFsaXplZENhbWVyYU9mZnNldFgpO1xcbiAgeU1pbiA9IG1peCgwLjEwLCAwLjAsIG5vcm1hbGl6ZWRDYW1lcmFPZmZzZXRZKTtcXG4gIHlNYXggPSBtaXgoMS4wLCAwLjkwLCBub3JtYWxpemVkQ2FtZXJhT2Zmc2V0WSk7XFxuXFxuICAvLyBNYXAgVVZzIHRvIHRoZSBVVnMgYm91bmRzIGRlZmluZWQgYWJvdmUuXFxuICBzYW1wbGVVVi54ID0gbWl4KHhNaW4sIHhNYXgsIHZVdi54KSArIHV2WE9mZnNldDtcXG4gIHNhbXBsZVVWLnkgPSBtaXgoeU1pbiwgeU1heCwgdlV2LnkpO1xcblxcbiAgLy8gRmFkZSBvdXQgbmV4dC9wcmV2IGxpbmtzLlxcbiAgZmxvYXQgYWxwaGEgID0gMS4wIC0gc21vb3Roc3RlcCgyLjI1LCAzLjc1LCBsZW5ndGgodldvcmxkUG9zaXRpb24ueHopKTtcXG5cXG4gIC8vIEdsYXJlLlxcbiAgZmxvYXQgZyA9IHNtb290aHN0ZXAoMC4wLCAwLjksIHNpbigoMS4wIC0gKDEuMCAtIHZVdi54KSAqIHZVdi55IC0gZ2xhcmUgKiAyLjAgLSAxLjApICogMy4xNDE1OSkpICogMC4xNDtcXG5cXG4gIGdsX0ZyYWdDb2xvciA9IHZlYzQodGV4dHVyZTJEKHNyYywgc2FtcGxlVVYpLnh5eiAqIHZlYzMoYnJpZ2h0bmVzcywgYnJpZ2h0bmVzcywgYnJpZ2h0bmVzcykgKyBnLCBhbHBoYSAqIG9wYWNpdHkpO1xcbn1cXG5cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvc2hhZGVycy9saW5rRnJhZ21lbnQuZ2xzbFxuLy8gbW9kdWxlIGlkID0gMTE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCJ1bmlmb3JtIG1hdDQgaW52ZXJzZU1hdHJpeDtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxudmFyeWluZyB2ZWMzIHZMb2NhbENhbWVyYVBvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMiB2VXY7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgdmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxuICB2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xcblxcbiAgLy8gVHJhbnNmb3JtIGdsb2JhbCBjYW1lcmEgcG9zaXRpb24gdG8gbG9jYWwgc3BhY2Ugb2Ygb2JqZWN0LlxcbiAgdkxvY2FsQ2FtZXJhUG9zaXRpb24gPSB2ZWM0KHZlYzQoY2FtZXJhUG9zaXRpb24sIDEuMCkgKiBpbnZlcnNlTWF0cml4KS54eXo7XFxuICB2VXYgPSB1djtcXG4gIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7XFxufVxcblwiXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9zaGFkZXJzL2xpbmtWZXJ0ZXguZ2xzbFxuLy8gbW9kdWxlIGlkID0gMTE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBpO1xudmFyIHBhbmVsT3B0aW9uQ29udGFpbmVyO1xudmFyIHBhbmVsT3B0aW9ucztcbnZhciBwYW5lbFNlY3Rpb25zO1xuXG5wYW5lbE9wdGlvbnMgPSAkJCgnLnBhbmVsT3B0aW9uJyk7XG5wYW5lbFNlY3Rpb25zID0gJCQoJy5wYW5lbFNlY3Rpb24nKTtcblxucGFuZWxPcHRpb25Db250YWluZXIgPSAkKCcucGFuZWxPcHRpb25Db250YWluZXInKTtcbnBhbmVsT3B0aW9uQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZ0ID0+IHtcbiAgdmFyIGk7XG4gIHZhciBwYW5lbE9wdGlvbjtcbiAgdmFyIHBhbmVsU2VjdGlvbjtcbiAgdmFyIHBhbmVsVHlwZTtcblxuICBpZiAoZXZ0LnRhcmdldCA9PT0gcGFuZWxPcHRpb25Db250YWluZXIpIHsgcmV0dXJuOyB9XG5cbiAgcGFuZWxPcHRpb24gPSBldnQudGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLXBhbmVsXScpO1xuICBwYW5lbFR5cGUgPSBwYW5lbE9wdGlvbi5kYXRhc2V0LnBhbmVsO1xuICBwYW5lbFNlY3Rpb24gPSAkKGAucGFuZWxTZWN0aW9uW2RhdGEtcGFuZWw9JHtwYW5lbFR5cGV9XWApO1xuXG4gIGlmICghcGFuZWxPcHRpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdwYW5lbE9wdGlvbkFjdGl2ZScpKSB7XG4gICAgZ3RhZygnZXZlbnQnLCAncGFuZWxzZWN0aW9ub3BlbicsIHt2YWx1ZTogcGFuZWxPcHRpb259KTtcbiAgfVxuXG4gIC8vIFRvZ2dsZSBhY3RpdmUgcGFuZWwgb3B0aW9uLlxuICBmb3IgKGkgPSAwOyBpIDwgcGFuZWxPcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHBhbmVsT3B0aW9uc1tpXSA9PT0gcGFuZWxPcHRpb24pIHtcbiAgICAgIHBhbmVsT3B0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ3BhbmVsT3B0aW9uQWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhbmVsT3B0aW9uc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdwYW5lbE9wdGlvbkFjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRvZ2dsZSBhY3RpdmUgcGFuZWwgc2VjdGlvbi5cbiAgZm9yIChpID0gMDsgaSA8IHBhbmVsU2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocGFuZWxTZWN0aW9uc1tpXSA9PT0gcGFuZWxTZWN0aW9uKSB7XG4gICAgICBwYW5lbFNlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZSgncGFuZWxTZWN0aW9uQWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhbmVsU2VjdGlvbnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgncGFuZWxTZWN0aW9uQWN0aXZlJyk7XG4gICAgfVxuICB9XG59KTtcblxuLy8gU2V0IHVwIGtleWJvYXJkIHNob3J0Y3V0cyBmb3IgcGFuZWwgc2VjdGlvbnMgKDEsIDIsIDMuLi4pLlxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldnQgPT4ge1xuICB2YXIgaW5kZXg7XG4gIGlmIChldnQua2V5Q29kZSA8IDQ5IHx8IGV2dC5rZXlDb2RlID4gNTMpIHsgcmV0dXJuOyB9XG4gIGlmICghZXZ0LmFsdEtleSkgeyByZXR1cm47IH1cbiAgaW5kZXggPSBldnQua2V5Q29kZSAtIDQ5O1xuICBpZiAoIXBhbmVsT3B0aW9uc1tpbmRleF0pIHsgcmV0dXJuOyB9XG4gIHBhbmVsT3B0aW9uc1tpbmRleF0uY2xpY2soKTtcbn0pO1xuXG4vLyBUb2dnbGUgb2ZmIGFsbCBwYW5lbHMgaWYgY2FudmFzIGNsaWNrZWQuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldnQgPT4ge1xuICB2YXIgaTtcbiAgaWYgKGV2dC50YXJnZXQudGFnTmFtZSAhPT0gJ0NBTlZBUycpIHsgcmV0dXJuOyB9XG4gIGZvciAoaSA9IDA7IGkgPCBwYW5lbFNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgcGFuZWxTZWN0aW9uc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdwYW5lbFNlY3Rpb25BY3RpdmUnKTtcbiAgfVxuICBmb3IgKGkgPSAwOyBpIDwgcGFuZWxPcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgcGFuZWxPcHRpb25zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ3BhbmVsT3B0aW9uQWN0aXZlJyk7XG4gIH1cbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFuZWwvcGFuZWwuanNcbi8vIG1vZHVsZSBpZCA9IDExN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIERldmVsb3BlciAvIHVzZXIgc2l0ZXMgaW4gcGFuZWwuXG4gKiBIYW5kbGUgaW5wdXQgYW5kIDJEIHJlbmRlcmluZyBvZiBsaXN0LlxuICogTm90aWZ5IHNjZW5lIHN0YXRlIG9mIGNoYW5nZXMuXG4gKi9cbnZhciBpbnB1dDtcbnZhciBzY2VuZTtcbnZhciBzaXRlVGVtcGxhdGU7XG52YXIgdXNlckNvbGxlY3Rpb247XG52YXIgdXNlclNpdGVDb250YWluZXI7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi9saWIvdXRpbHMnKTtcblxuLy8gMkQgbGlzdCB0ZW1wbGF0ZS5cbnNpdGVUZW1wbGF0ZSA9IGBcbjxpbWcgY2xhc3M9XCJzaXRlRmF2aWNvblwiIHNyYz1cIntpbWFnZX1cIj5cbjxkaXYgY2xhc3M9XCJzaXRlRGF0YVwiPlxuICA8cCBjbGFzcz1cInNpdGVEYXRhVGl0bGVcIj57dGl0bGV9PC9wPlxuICA8cCBjbGFzcz1cInNpdGVEYXRhVXJsXCI+e3VybH08L3A+XG48L2Rpdj5cbjxhIGNsYXNzPVwic2l0ZURlbGV0ZVwiIGhyZWY9XCIjXCI+JiN4MmEyZjs8L2E+XG5gO1xuXG5zY2VuZSA9IEFGUkFNRS5zY2VuZXNbMF07XG5cbmluaXQoKTtcblxuLyoqXG4gKiBIb29rIHVwIGlucHV0cyBhbmQgZG8gaW5pdGlhbCByZW5kZXIuXG4gKi9cbmZ1bmN0aW9uIGluaXQgKCkge1xuICB2YXIgaTtcblxuICB1c2VyQ29sbGVjdGlvbiA9IHNjZW5lLnN5c3RlbXMuc3RhdGUuc3RhdGUudXNlckNvbGxlY3Rpb247XG4gIHVzZXJTaXRlQ29udGFpbmVyID0gJCgnLnVzZXJTaXRlQ29udGFpbmVyJyk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHVzZXJDb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgcmVuZGVyU2l0ZSh1c2VyQ29sbGVjdGlvbltpXS51cmwsIHVzZXJDb2xsZWN0aW9uW2ldLnRpdGxlLCB1c2VyQ29sbGVjdGlvbltpXS5pbWFnZSk7XG4gIH1cblxuICAvLyBIb29rIHVwIGlucHV0IHRvIGFkZCBzaXRlcy5cbiAgaW5wdXQgPSAkKCcjYWRkU2l0ZUlucHV0Jyk7XG4gIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldnQgPT4ge1xuICAgIHZhciBpbWFnZTtcbiAgICB2YXIgdGl0bGU7XG4gICAgdmFyIHVybDtcblxuICAgIGlmIChldnQua2V5Q29kZSAhPT0gMTMpIHsgcmV0dXJuOyB9ICAvLyA8ZW50ZXI+LlxuXG4gICAgdXJsID0gaW5wdXQudmFsdWU7XG4gICAgaWYgKCF1cmwpIHsgcmV0dXJuOyB9XG4gICAgaWYgKCF1cmwuc3RhcnRzV2l0aCgnaHR0cCcpKSB7IHVybCA9ICdodHRwczovLycgKyB1cmw7IH1cbiAgICB0aXRsZSA9IHVybC5yZXBsYWNlKCdodHRwczovLycsICcnKS5yZXBsYWNlKCdodHRwOi8vJywgJycpO1xuICAgIGltYWdlID0gJ2Fzc2V0cy9pbWcvbG9nby1iZy5wbmcnO1xuXG4gICAgcmVuZGVyU2l0ZSh1cmwsIHRpdGxlLCBpbWFnZSwgdHJ1ZSk7XG4gICAgYWRkU2l0ZSh1cmwsIHRpdGxlLCBpbWFnZSk7XG4gIH0pO1xuXG4gIC8vIEhvb2sgdXAgZGVsZXRlIGJ1dHRvbi5cbiAgdXNlclNpdGVDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldnQgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2l0ZURlbGV0ZScpKSB7XG4gICAgICBkZWxldGVTaXRlKGdldEVsZW1lbnRJbmRleChldnQudGFyZ2V0LmNsb3Nlc3QoJy5zaXRlJykpKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIENyZWF0ZSBlbGVtZW50LCByZW5kZXJpbmcgc2l0ZSBmcm9tIHRlbXBsYXRlLlxuICovXG5mdW5jdGlvbiByZW5kZXJTaXRlICh1cmwsIHRpdGxlLCBpbWFnZSwgZG9GZXRjaCkge1xuICB2YXIgaW5kZXg7XG4gIHZhciBzaXRlO1xuICB2YXIgeGhyO1xuXG4gIC8vIFJlbmRlci5cbiAgc2l0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIHNpdGUuY2xhc3NMaXN0LmFkZCgnc2l0ZScpO1xuICBzaXRlLmNsYXNzTGlzdC5hZGQoJ3VzZXJTaXRlJyk7XG4gIHNpdGUuaW5uZXJIVE1MID0gc2l0ZVRlbXBsYXRlXG4gICAgLnJlcGxhY2UoJ3t1cmx9JywgdXRpbHMudHJ1bmNhdGUodXJsLCA0NSkpXG4gICAgLnJlcGxhY2UoJ3t0aXRsZX0nLCB1dGlscy50cnVuY2F0ZSh0aXRsZSwgMjUpKVxuICAgIC5yZXBsYWNlKCd7aW1hZ2V9JywgaW1hZ2UpXG4gIHVzZXJTaXRlQ29udGFpbmVyLmFwcGVuZChzaXRlKTtcblxuICAvLyBYSFIgdG8gdXBkYXRlIHRpdGxlLlxuICBpZiAoZG9GZXRjaCkge1xuICAgIGluZGV4ID0gZ2V0RWxlbWVudEluZGV4KHNpdGUpO1xuICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgICAgdmFyIHRpdGxlO1xuICAgICAgdGl0bGUgPSAoLzx0aXRsZT4oLio/KTxcXC90aXRsZT4vbSkuZXhlYyh4aHIucmVzcG9uc2VUZXh0KVsxXTtcbiAgICAgIHNpdGUucXVlcnlTZWxlY3RvcignLnNpdGVEYXRhVGl0bGUnKS5pbm5lckhUTUwgPSB0aXRsZTtcbiAgICAgIHNjZW5lLmVtaXQoJ3VzZXJjb2xsZWN0aW9udXBkYXRldGl0bGUnLCB7aW5kZXg6IGluZGV4LCB0aXRsZTogdGl0bGV9LCBmYWxzZSk7XG4gICAgfSk7XG4gICAgeGhyLnNlbmQoKTtcbiAgfVxufVxuXG4vKipcbiAqIFRlbGwgc3RhdGUgdG8gYWRkIHNpdGUuXG4gKi9cbmZ1bmN0aW9uIGFkZFNpdGUgKHVybCwgdGl0bGUsIGltYWdlKSB7XG4gIHNjZW5lLmVtaXQoJ3VzZXJjb2xsZWN0aW9uYWRkJywge3VybDogdXJsLCB0aXRsZTogdGl0bGUsIGltYWdlOiBpbWFnZX0sIGZhbHNlKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgc2NlbmUuZW1pdCgnY29sbGVjdGlvbm9wZW4nKTtcbiAgfSwgMjAwKTtcbn1cblxuLyoqXG4gKiBEZWxldGUgc2l0ZSBmcm9tIERPTSBhbmQgc3RvcmFnZS5cbiAqL1xuZnVuY3Rpb24gZGVsZXRlU2l0ZSAoaW5kZXgpIHtcbiAgc2NlbmUuZW1pdCgndXNlcmNvbGxlY3Rpb25yZW1vdmUnLCB7aW5kZXg6IGluZGV4fSk7XG4gIHVzZXJTaXRlQ29udGFpbmVyLnJlbW92ZUNoaWxkKHVzZXJTaXRlQ29udGFpbmVyLmNoaWxkcmVuW2luZGV4XSk7XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRJbmRleCAoZWwpIHtcbiAgdmFyIGkgPSAwO1xuICB3aGlsZSgoZWwgPSBlbC5wcmV2aW91c1NpYmxpbmcpICE9PSBudWxsKSB7IGkrKzsgfVxuICByZXR1cm4gaTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhbmVsL3NpdGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAxMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==